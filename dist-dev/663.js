"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[663],{4663:(Qo,B,g)=>{g.r(B),g.d(B,{QuotationsModule:()=>_o});var N=g(6895),U=g(9585),c=g(433),w=g(4931),q=g(9061),z=g(7579),W=g(727),j=g(8372),$=g(5134),rt=g(4313),ut=g(4327),ct=g(2983),J=g.n(ct),dt=g(3583),t=g(4650),X=g(3791),mt=g(3996),tt=g(2038),O=g(4407),K=g(3378),V=g(8171);function pt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.goToQuotationPage())}),t._uU(1,"NEW QUOTATION"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.shimmerVisible)}}function _t(i,s){if(1&i&&(t.TgZ(0,"ng-option",53),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.status),t.xp6(1),t.hij(" ",e.status," ")}}function gt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",54)(1,"button",55),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onDataRemove())}),t._uU(2,"Clear filters"),t.qZA()()}}function ht(i,s){if(1&i&&(t.TgZ(0,"span",56),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.lnq(" ",e.selectedStatus.length>0?1:e.pageSize*(e.pageNumber-1)+1,"- ",e.totalCount>e.pageSize*e.pageNumber?e.pageSize*e.pageNumber:e.totalCount," of ",e.totalCount," ")}}function ft(i,s){if(1&i&&(t.TgZ(0,"option",53),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.s9C("value",e),t.xp6(1),t.Oqu(e)}}function Ct(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"select",57),t.NdJ("change",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.ChangeEvent(n))}),t.YNc(1,ft,2,2,"option",32),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.itemOptionsPerPage)}}function Tt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"input",58),t.NdJ("keyup",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.changeSearch(n))}),t.qZA()}2&i&&t.Q6J("maxLength",48)}function xt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"input",59),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.searchTerm=n)})("input",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.filterQuotation())}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("ngModel",e.searchTerm)("maxLength",48)}}function Zt(i,s){1&i&&(t.TgZ(0,"thead")(1,"tr"),t._UZ(2,"th"),t.TgZ(3,"th"),t._uU(4,"Quotation No"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"From Date"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"To Date"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Status"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Supplier Name"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Supplier Address"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"GSTN No"),t.qZA(),t.TgZ(17,"th",60),t._uU(18,"DL Count"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"NO of Items"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Action"),t.qZA()()())}function At(i,s){1&i&&(t.TgZ(0,"td",74),t._UZ(1,"span",75),t.qZA()),2&i&&(t.xp6(1),t.s9C("title","Edited"))}function bt(i,s){1&i&&t._UZ(0,"td",74)}function vt(i,s){if(1&i&&(t.TgZ(0,"span",76),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("ngClass","1"==e.ApprovalStatus?"badge bg-info":"0"==e.ApprovalStatus?"badge bg-warning":"2"==e.ApprovalStatus?"badge bg-success":""),t.xp6(1),t.hij(" ","0"==e.ApprovalStatus?"Maker":"1"==e.ApprovalStatus?"Checked":"2"==e.ApprovalStatus?"Approved":""," ")}}function qt(i,s){if(1&i&&(t.TgZ(0,"span",76),t._uU(1," Cancelled "),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("ngClass",1==e.IsCancel?"badge bg-danger":"")}}const et=function(i){return["/quotations/edit-quotation",i]};function yt(i,s){if(1&i&&(t.TgZ(0,"button",83),t._UZ(1,"span",84),t._uU(2," Edit "),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,et,e.QuotationGuid))}}function Qt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",80),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4);return t.KtG(n.modal.close("by: close icon"))})("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,a=t.oxw(2),l=t.MAs(85);return a.openBasicModal(l),t.KtG(a.SelectQuotation(n))}),t._UZ(1,"span",85),t._uU(2," Cancelled"),t.qZA()}}function Nt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",86),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,a=t.oxw(2),l=t.MAs(83);return a.openBasicModal(l),t.KtG(a.change(n,!1))}),t._UZ(2,"span",87),t._uU(3," Mark Checked"),t.qZA()()}}function wt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",86),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,a=t.oxw(2),l=t.MAs(83);return a.openBasicModal(l),t.KtG(a.change(n,!0))}),t._UZ(2,"span",88),t._uU(3," Mark as Approved"),t.qZA()()}}function It(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",77),t.YNc(1,yt,3,3,"button",78),t.YNc(2,Qt,3,0,"button",79),t.TgZ(3,"button",80),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.DownloadPdf(n,"print"))}),t._UZ(4,"span",81),t._uU(5," Print"),t.qZA(),t.TgZ(6,"button",80),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.DownloadPdf(n,""))}),t._UZ(7,"span",82),t._uU(8," Download"),t.qZA(),t.YNc(9,Nt,4,0,"div",45),t.YNc(10,wt,4,0,"div",45),t.qZA()}if(2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf","STORE ADMIN"==o.authservice.LoggedInUser.DEFAULTROLES||"ADMIN"==o.authservice.LoggedInUser.DEFAULTROLES?!e.IsCancel:2!=e.ApprovalStatus&&!e.IsCancel&&o.roles.toLowerCase().includes("Maker".toLowerCase())),t.xp6(1),t.Q6J("ngIf",!e.IsCancel&&o.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())),t.xp6(7),t.Q6J("ngIf",o.roles.toLowerCase().includes("Checker".toLowerCase())&&2!=e.ApprovalStatus&&1!=e.ApprovalStatus),t.xp6(1),t.Q6J("ngIf",o.roles.toLowerCase().includes("Approval".toLowerCase())&&1==e.ApprovalStatus&&0==e.IsCancel)}}function St(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.YNc(1,At,2,1,"td",62),t.YNc(2,bt,1,0,"td",62),t.TgZ(3,"td",63)(4,"span",64),t._uU(5),t.qZA()(),t.TgZ(6,"td",63)(7,"span",64),t.ALo(8,"date"),t._uU(9),t.ALo(10,"date"),t.qZA()(),t.TgZ(11,"td",63)(12,"span",64),t.ALo(13,"date"),t._uU(14),t.ALo(15,"date"),t.qZA()(),t.TgZ(16,"td"),t.YNc(17,vt,2,2,"span",65),t.YNc(18,qt,2,1,"span",65),t.qZA(),t.TgZ(19,"td",63)(20,"span",64),t._uU(21),t.qZA()(),t.TgZ(22,"td",66)(23,"span",64),t._uU(24),t.qZA()(),t.TgZ(25,"td",63)(26,"span",64),t._uU(27),t.qZA()(),t.TgZ(28,"td",66)(29,"span",64),t._uU(30),t.qZA()(),t.TgZ(31,"td",66)(32,"span",64),t._uU(33),t.qZA()(),t.TgZ(34,"td")(35,"div",67)(36,"button",68),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw(2),r=t.MAs(79);return l.openXlModal(r),l.getQuotationByGuid(a),l.activityHistoryArray=[],t.KtG(l.showActivity=!1)}),t._UZ(37,"span",69),t._uU(38," View "),t.qZA(),t.TgZ(39,"div",70)(40,"button",71),t._uU(41,"Actions "),t._UZ(42,"span",72),t.qZA(),t.YNc(43,It,11,4,"ng-template",null,73,t.W1O),t.qZA()()()()}if(2&i){const e=s.$implicit,o=t.MAs(44);t.xp6(1),t.Q6J("ngIf","0001-01-01T00:00:00"!=e.ModifieDt),t.xp6(1),t.Q6J("ngIf","0001-01-01T00:00:00"==e.ModifieDt),t.xp6(2),t.s9C("title",e.QuotationNo),t.xp6(1),t.Oqu(e.QuotationNo),t.xp6(2),t.s9C("title",t.xi3(8,21,e.FromDate,"dd-MM-yyyy")),t.xp6(2),t.Oqu(t.xi3(10,24,e.FromDate,"dd-MM-yyyy")),t.xp6(3),t.s9C("title",t.xi3(13,27,e.ToDate,"dd-MM-yyyy")),t.xp6(2),t.Oqu(t.xi3(15,30,e.ToDate,"dd-MM-yyyy")),t.xp6(3),t.Q6J("ngIf",0==e.IsCancel),t.xp6(1),t.Q6J("ngIf",1==e.IsCancel),t.xp6(2),t.s9C("title",e.SupplierName),t.xp6(1),t.Oqu(e.SupplierName),t.xp6(2),t.s9C("title",e.SupplierAddress),t.xp6(1),t.Oqu(e.SupplierAddress),t.xp6(2),t.s9C("title",e.GSTNNo),t.xp6(1),t.Oqu(e.GSTNNo),t.xp6(2),t.s9C("title",e.DeliveryLocationCount),t.xp6(1),t.Oqu(e.DeliveryLocationCount),t.xp6(2),t.s9C("title",e.ItemCount),t.xp6(1),t.Oqu(e.ItemCount),t.xp6(7),t.Q6J("ngbPopover",o)}}function Dt(i,s){if(1&i&&(t.ynx(0),t.YNc(1,St,45,33,"tr",61),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.quotationsList)}}function Gt(i,s){1&i&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"div",89),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"div",89),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"div",89),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"div",89),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"div",89),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"div",89),t.qZA(),t.TgZ(13,"td"),t._UZ(14,"div",89),t.qZA(),t.TgZ(15,"td"),t._UZ(16,"div",89),t.qZA(),t.TgZ(17,"td"),t._UZ(18,"div",89),t.qZA(),t.TgZ(19,"td")(20,"div",67),t._UZ(21,"div",90)(22,"div",89),t.qZA()()())}const Ut=function(){return[]};function Lt(i,s){1&i&&(t.ynx(0),t.YNc(1,Gt,23,0,"tr",61),t.BQk()),2&i&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,Ut).constructor(5)))}function kt(i,s){1&i&&(t.TgZ(0,"div",91)(1,"div",92)(2,"div",93),t._UZ(3,"i",94),t.TgZ(4,"span"),t._uU(5,"No quotations found!"),t.qZA()()()())}function Mt(i,s){1&i&&t.YNc(0,kt,6,0,"ng-template")}function Ft(i,s){1&i&&(t.ynx(0),t.TgZ(1,"div",91)(2,"div",92)(3,"div",93),t._UZ(4,"i",94),t.TgZ(5,"span"),t._uU(6,"No quotations found!"),t.qZA()()()(),t.BQk())}function Jt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",95)(1,"div",96)(2,"ngb-pagination",97),t.NdJ("pageChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.currentPage=n)})("pageChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.GetAllData(n))}),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("collectionSize",e.totalCount)("pageSize",e.itemsPerPage)("page",e.currentPage)("maxSize",e.maxSize)("rotate",!1)("boundaryLinks",e.boundaryLinks)("size",e.size)}}function Ot(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",95)(1,"div",96)(2,"ngb-pagination",97),t.NdJ("pageChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.pageNumber=n)})("pageChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.GetAllData(n))}),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("collectionSize",e.totalCount)("pageSize",e.itemsPerPage)("page",e.pageNumber)("maxSize",e.maxSize)("rotate",!1)("boundaryLinks",e.boundaryLinks)("size",e.size)}}function Pt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",127),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.showActivity=!1)}),t._UZ(1,"i",128),t._uU(2," Go Back "),t.qZA()}}function Rt(i,s){if(1&i&&(t.TgZ(0,"div")(1,"p",105)(2,"span",106),t._uU(3,"Checked by"),t.qZA(),t._uU(4),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(": ",null==e.quotationDetails[0]?null:e.quotationDetails[0].CheckedByName," ")}}function Et(i,s){if(1&i&&(t.TgZ(0,"div")(1,"p",105)(2,"span",106),t._uU(3,"Approved by"),t.qZA(),t._uU(4),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(":",null==e.quotationDetails[0]?null:e.quotationDetails[0].ApprovedByName," ")}}function Ht(i,s){if(1&i&&(t.TgZ(0,"div")(1,"p",105)(2,"span",106),t._uU(3,"Cancelled by"),t.qZA(),t._uU(4),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(":",null==e.quotationDetails[0]?null:e.quotationDetails[0].CancelByName," ")}}function Kt(i,s){if(1&i&&(t.TgZ(0,"div")(1,"p",108)(2,"span",106),t._uU(3,"Created date:"),t.qZA(),t._uU(4),t.ALo(5,"date"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.xi3(5,1,null==e.quotationDetails[0]?null:e.quotationDetails[0].CreatedDt,"dd-MM-yyyy"),"")}}function Vt(i,s){if(1&i&&(t.TgZ(0,"div")(1,"p",108)(2,"span",106),t._uU(3,"Checked date:"),t.qZA(),t._uU(4),t.ALo(5,"date"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.xi3(5,1,null==e.quotationDetails[0]?null:e.quotationDetails[0].CheckedDate,"dd-MM-yyyy"),"")}}function Yt(i,s){if(1&i&&(t.TgZ(0,"div")(1,"p",108)(2,"span",106),t._uU(3,"Approved date:"),t.qZA(),t._uU(4),t.ALo(5,"date"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.xi3(5,1,null==e.quotationDetails[0]?null:e.quotationDetails[0].ApprovedDate,"dd-MM-yyyy"),"")}}function Bt(i,s){if(1&i&&(t.TgZ(0,"div")(1,"p",108)(2,"span",106),t._uU(3,"Cancel date:"),t.qZA(),t._uU(4),t.ALo(5,"date"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.xi3(5,1,null==e.quotationDetails[0]?null:e.quotationDetails[0].CancelDate,"dd-MM-yyyy"),"")}}function zt(i,s){1&i&&t._UZ(0,"hr",111)}function Wt(i,s){if(1&i&&(t.TgZ(0,"div",39)(1,"span",106),t._uU(2,"Checked by and reason:"),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw(3);t.xp6(3),t.AsE(" ",null==e.UserDetails?null:e.UserDetails.CheckedByName," ",null==e.QuotationViewDetails.CheckedReason?"(N/A)":"("+e.QuotationViewDetails.CheckedReason+")"," ")}}function jt(i,s){if(1&i&&(t.TgZ(0,"div",39)(1,"span",106),t._uU(2,"Approved by and reason:"),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw(3);t.xp6(3),t.AsE(" ",null==e.UserDetails?null:e.UserDetails.ApprovedByName," ",null==e.QuotationViewDetails.ApproveReason?" (N/A)":" ("+e.QuotationViewDetails.ApproveReason+")"," ")}}function $t(i,s){if(1&i&&(t.TgZ(0,"div",39)(1,"span",106),t._uU(2,"Cancelled by and reason:"),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw(3);t.xp6(3),t.AsE(" ",null==e.UserDetails?null:e.UserDetails.CancelByName," ",null==e.QuotationViewDetails.CancelReason?" (N/A)":" ("+e.QuotationViewDetails.CancelReason+")"," ")}}function Xt(i,s){if(1&i&&(t.TgZ(0,"div",129)(1,"div",39)(2,"span",106)(3,"u"),t._uU(4,"Reason"),t.qZA(),t._uU(5," :"),t.qZA()(),t.YNc(6,Wt,4,2,"div",130),t.YNc(7,jt,4,2,"div",130),t.YNc(8,$t,4,2,"div",130),t.qZA()),2&i){const e=t.oxw(2);t.xp6(6),t.Q6J("ngIf",null==e.QuotationViewDetails?null:e.QuotationViewDetails.CheckedReason),t.xp6(1),t.Q6J("ngIf",null==e.QuotationViewDetails?null:e.QuotationViewDetails.ApproveReason),t.xp6(1),t.Q6J("ngIf",null==e.QuotationViewDetails?null:e.QuotationViewDetails.CancelReason)}}function te(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",131)(1,"button",132),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.onCheckActivityHistory(),t.KtG(n.showActivity=!0)}),t._uU(2,"View activity"),t.qZA()()}}function ee(i,s){1&i&&(t.TgZ(0,"p",133),t._uU(1,"Latest Log"),t.qZA())}const oe=function(i){return{cancled:i}};function ne(i,s){if(1&i&&(t.TgZ(0,"tr")(1,"td",134),t._UZ(2,"p",76),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.TgZ(30,"td"),t._uU(31),t.ALo(32,"date"),t.qZA(),t.TgZ(33,"td",117),t._uU(34),t.qZA()()),2&i){const e=s.$implicit;t.xp6(2),t.Q6J("ngClass",t.VKq(20,oe,e.ItemCancel)),t.xp6(1),t.Oqu(e.ItemName),t.xp6(2),t.Oqu(e.VendorItemName?e.VendorItemName:"N/A"),t.xp6(2),t.Oqu(e.ItemCategoryName),t.xp6(2),t.Oqu(e.HSNCode?e.HSNCode:"N/A"),t.xp6(2),t.Oqu(e.CatalogNo?e.CatalogNo:"N/A"),t.xp6(2),t.Oqu(e.ManufactureName),t.xp6(2),t.Oqu(e.PackSize),t.xp6(2),t.Oqu(e.MachineName),t.xp6(2),t.hij("\u20b9",e.Rate,""),t.xp6(2),t.Oqu(e.DiscountPer),t.xp6(2),t.Oqu(0==e.SGSTPer?"--":e.SGSTPer),t.xp6(2),t.Oqu(0==e.CGSTPer?"--":e.CGSTPer),t.xp6(2),t.Oqu(e.IGSTPer),t.xp6(2),t.Oqu(null!=e&&e.ItemCancelBy?null==e?null:e.ItemCancelBy:"N/A"),t.xp6(2),t.Oqu(null!=e&&e.ItemCancelDate?t.xi3(32,17,null==e?null:e.ItemCancelDate,"dd-MM-yyyy"):"N/A"),t.xp6(3),t.hij("\u20b9",e.BuyPrice,"")}}function ie(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"button",68),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw(3),r=t.MAs(89);return l.openBasicModal(r),t.KtG(l.PreviewInvoice(null==a?null:a.FilePath))}),t._UZ(5,"span",69),t._uU(6," View "),t.qZA()()()}if(2&i){const e=s.$implicit;t.xp6(2),t.hij("",e.FileName," ")}}function ae(i,s){if(1&i&&(t.TgZ(0,"div",7)(1,"div",8)(2,"div",135)(3,"table",136)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"Invoice name"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Action"),t.qZA()()(),t.TgZ(10,"tbody"),t.YNc(11,ie,7,1,"tr",61),t.qZA()()()()()),2&i){const e=t.oxw(2);t.xp6(11),t.Q6J("ngForOf",e.invoiceDocuments)}}function le(i,s){if(1&i&&(t.TgZ(0,"tr")(1,"td",116),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.TgZ(27,"td"),t._uU(28),t.qZA(),t.TgZ(29,"th",138),t._uU(30),t.ALo(31,"date"),t.qZA(),t.TgZ(32,"td",139),t._uU(33),t.qZA()()),2&i){const e=s.$implicit;t.xp6(2),t.Oqu(e.ItemName),t.xp6(2),t.Oqu(e.VendorItemName?e.VendorItemName:"N/A"),t.xp6(2),t.Oqu(e.ItemCategoryName),t.xp6(2),t.Oqu(e.HSNCode?e.HSNCode:"N/A"),t.xp6(2),t.Oqu(e.CatalogNo?e.CatalogNo:"N/A"),t.xp6(2),t.Oqu(e.ManufactureName),t.xp6(2),t.Oqu(e.PackSize),t.xp6(2),t.Oqu(e.MachineName),t.xp6(2),t.hij("\u20b9",e.Rate,""),t.xp6(2),t.Oqu(e.DiscountPer),t.xp6(2),t.Oqu(0==e.SGSTPer?"--":e.SGSTPer),t.xp6(2),t.Oqu(0==e.CGSTPer?"--":e.CGSTPer),t.xp6(2),t.Oqu(e.IGSTPer),t.xp6(2),t.hij("\u20b9",e.BuyPrice,""),t.xp6(2),t.Oqu(t.xi3(31,16,e.CreatedDt+"Z","dd-MM-yyyy hh:mm a")),t.xp6(3),t.Oqu(e.CreatedBy)}}function se(i,s){if(1&i&&(t.ynx(0),t.YNc(1,le,34,19,"tr",61),t.BQk()),2&i){const e=s.$implicit;t.xp6(1),t.Q6J("ngForOf",e.quotationsList)}}function re(i,s){if(1&i&&(t.TgZ(0,"div",137)(1,"p",133),t._uU(2,"History Log"),t.qZA(),t.TgZ(3,"double-scroll")(4,"table",115)(5,"thead")(6,"tr")(7,"th",116),t._uU(8,"Item Name"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Vendor Item Name"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Item Category Name"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"HSN Code"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Catalog No"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Manufacturer Name"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Pack Size"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Machine Name"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Rate"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Discount %"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"SGST %"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"CGST %"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"IGST %"),t.qZA(),t.TgZ(33,"th"),t._uU(34," Buy Price"),t.qZA(),t.TgZ(35,"th",138),t._uU(36,"Updated At"),t.qZA(),t.TgZ(37,"th",139),t._uU(38,"Updated By"),t.qZA()()(),t.TgZ(39,"tbody"),t.YNc(40,se,2,1,"ng-container",61),t.qZA()()()()),2&i){const e=t.oxw(2);t.xp6(40),t.Q6J("ngForOf",e.activityHistoryArray)}}function ue(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",140),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.KtG(n.close("by: close icon"))}),t._UZ(1,"span",84),t._uU(2," Edit"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("routerLink",t.VKq(1,et,e.QuotationViewDetails.QuotationGuid))}}function ce(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",141),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.KtG(n.close("by: close icon"))})("click",function(){t.CHM(e);const n=t.oxw(2),a=t.MAs(85);return n.openBasicModal(a),t.KtG(n.SelectQuotation(n.QuotationViewDetails))}),t._UZ(1,"span",85),t._uU(2," Cancelled"),t.qZA()}}function de(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",142),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.KtG(n.close("by: close icon"))})("click",function(){t.CHM(e);const n=t.oxw(2),a=t.MAs(83);return t.KtG(n.openBasicModal(a))}),t._UZ(1,"span",87),t._uU(2," Mark as Checked "),t.qZA()}}function me(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",142),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.KtG(n.close("by: close icon"))})("click",function(){t.CHM(e);const n=t.oxw(2),a=t.MAs(83);return n.openBasicModal(a),t.KtG(n.changeApproval(n.quotationGuid,!0))}),t._UZ(1,"span",87),t._uU(2," Mark as Approved "),t.qZA()}}function pe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",98)(1,"div",99),t.YNc(2,Pt,3,0,"button",100),t.TgZ(3,"h5",101),t._uU(4),t.qZA()(),t.TgZ(5,"button",102),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))}),t.qZA()(),t.TgZ(6,"div",103)(7,"div",104)(8,"p",105)(9,"span",106),t._uU(10,"Quotation No"),t.qZA(),t._uU(11),t.qZA(),t.TgZ(12,"p",105)(13,"span",106),t._uU(14,"Supplier name"),t.qZA(),t._uU(15),t.qZA(),t.TgZ(16,"p",105)(17,"span",106),t._uU(18,"Supplier state"),t.qZA(),t._uU(19),t.qZA(),t.TgZ(20,"p",105)(21,"span",106),t._uU(22,"Delivery location"),t.qZA(),t._uU(23),t.qZA(),t.TgZ(24,"p",105)(25,"span",106),t._uU(26,"Created by"),t.qZA(),t._uU(27),t.qZA(),t.YNc(28,Rt,5,1,"div",45),t.YNc(29,Et,5,1,"div",45),t.YNc(30,Ht,5,1,"div",45),t.qZA(),t.TgZ(31,"div",107)(32,"p",108)(33,"span",106),t._uU(34,"Quotation reference No.:"),t.qZA(),t._uU(35),t.qZA(),t.TgZ(36,"p",108)(37,"span",106),t._uU(38,"Supplier address:"),t.qZA(),t._uU(39),t.qZA(),t.TgZ(40,"p",108)(41,"span",106),t._uU(42,"GSTN No.:"),t.qZA(),t._uU(43),t.qZA(),t.TgZ(44,"p",108)(45,"span",106),t._uU(46,"From date:"),t.qZA(),t._uU(47),t.ALo(48,"date"),t.TgZ(49,"span",106),t._uU(50,"To date:"),t.qZA(),t._uU(51),t.ALo(52,"date"),t.qZA(),t.YNc(53,Kt,6,4,"div",45),t.YNc(54,Vt,6,4,"div",45),t.YNc(55,Yt,6,4,"div",45),t.YNc(56,Bt,6,4,"div",45),t.qZA()(),t.YNc(57,zt,1,0,"hr",109),t.YNc(58,Xt,9,3,"div",110),t._UZ(59,"hr",111),t.YNc(60,te,3,0,"div",112),t.TgZ(61,"div",113),t.YNc(62,ee,2,0,"p",114),t.TgZ(63,"double-scroll")(64,"table",115)(65,"thead")(66,"tr")(67,"th",116),t._uU(68,"Item Name"),t.qZA(),t.TgZ(69,"th"),t._uU(70,"Vendor Item Name"),t.qZA(),t.TgZ(71,"th"),t._uU(72,"Item Category Name"),t.qZA(),t.TgZ(73,"th"),t._uU(74,"HSN Code"),t.qZA(),t.TgZ(75,"th"),t._uU(76,"Catalog No"),t.qZA(),t.TgZ(77,"th"),t._uU(78,"Manufacturer Name"),t.qZA(),t.TgZ(79,"th"),t._uU(80,"Pack Size"),t.qZA(),t.TgZ(81,"th"),t._uU(82,"Machine Name"),t.qZA(),t.TgZ(83,"th"),t._uU(84,"Rate"),t.qZA(),t.TgZ(85,"th"),t._uU(86,"Discount %"),t.qZA(),t.TgZ(87,"th"),t._uU(88,"SGST %"),t.qZA(),t.TgZ(89,"th"),t._uU(90,"CGST %"),t.qZA(),t.TgZ(91,"th"),t._uU(92,"IGST %"),t.qZA(),t.TgZ(93,"th"),t._uU(94,"Item Cancel By"),t.qZA(),t.TgZ(95,"th"),t._uU(96,"Item Cancel Date"),t.qZA(),t.TgZ(97,"th",117),t._uU(98,"Buy Price"),t.qZA()()(),t.TgZ(99,"tbody"),t.YNc(100,ne,35,22,"tr",61),t.qZA()()(),t.YNc(101,ae,12,1,"div",118),t.YNc(102,re,41,1,"div",119),t.qZA(),t.TgZ(103,"div",120)(104,"div",121),t.YNc(105,ue,3,3,"button",122),t.YNc(106,ce,3,0,"button",123),t.TgZ(107,"button",124),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))})("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.DownloadPdf(n.QuotationViewDetails,"print"))}),t._UZ(108,"span",81),t._uU(109," Print"),t.qZA(),t.TgZ(110,"button",125),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))})("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.DownloadPdf(n.QuotationViewDetails,""))}),t._UZ(111,"span",82),t._uU(112," Download"),t.qZA(),t.YNc(113,de,3,0,"button",126),t.YNc(114,me,3,0,"button",126),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.showActivity),t.xp6(2),t.Oqu(e.showActivity?"Quotation Log History":"Supplier Quotation Detail"),t.xp6(7),t.hij(":",null==e.quotationDetails[0]?null:e.quotationDetails[0].QuotationNo,""),t.xp6(4),t.hij(": ",null==e.quotationDetails[0]?null:e.quotationDetails[0].SupplierName," "),t.xp6(4),t.hij(":",e.supplierStateName,""),t.xp6(4),t.hij(":",e.locationList,""),t.xp6(4),t.hij(":",null==e.quotationDetails[0]?null:e.quotationDetails[0].CreatedBy,""),t.xp6(1),t.Q6J("ngIf",null!=(null==e.quotationDetails[0]?null:e.quotationDetails[0].CheckedByName)),t.xp6(1),t.Q6J("ngIf",null!=(null==e.quotationDetails[0]?null:e.quotationDetails[0].ApprovedByName)),t.xp6(1),t.Q6J("ngIf",1==(null==e.quotationDetails[0]?null:e.quotationDetails[0].IsCancel)),t.xp6(5),t.hij("",null==e.quotationDetails[0]?null:e.quotationDetails[0].QuotationRefNo," "),t.xp6(4),t.hij(" ",null==e.quotationDetails[0]?null:e.quotationDetails[0].SupplierAddress," , Hyderabad."),t.xp6(4),t.hij(" ",null==e.quotationDetails[0]?null:e.quotationDetails[0].GSTNNo,""),t.xp6(4),t.hij(" ",t.xi3(48,30,null==e.quotationDetails[0]?null:e.quotationDetails[0].FromDate,"dd-MM-yyyy")," "),t.xp6(4),t.hij(" ",t.xi3(52,33,null==e.quotationDetails[0]?null:e.quotationDetails[0].ToDate,"dd-MM-yyyy")," "),t.xp6(2),t.Q6J("ngIf","0001-01-01T00:00:00"!==(null==e.quotationDetails[0]?null:e.quotationDetails[0].CreatedDt)&&null!=(null==e.quotationDetails[0]?null:e.quotationDetails[0].CreatedDt)),t.xp6(1),t.Q6J("ngIf","0001-01-01T00:00:00"!==(null==e.quotationDetails[0]?null:e.quotationDetails[0].CheckedDate)&&null!=(null==e.quotationDetails[0]?null:e.quotationDetails[0].CheckedDate)),t.xp6(1),t.Q6J("ngIf","0001-01-01T00:00:00"!==(null==e.quotationDetails[0]?null:e.quotationDetails[0].ApprovedDate)&&null!=(null==e.quotationDetails[0]?null:e.quotationDetails[0].ApprovedDate)),t.xp6(1),t.Q6J("ngIf","0001-01-01T00:00:00"!==(null==e.quotationDetails[0]?null:e.quotationDetails[0].CancelDate)&&(null==e.quotationDetails[0]?null:e.quotationDetails[0].IsCancel)),t.xp6(1),t.Q6J("ngIf",(null==e.QuotationViewDetails?null:e.QuotationViewDetails.CheckedReason)||(null==e.QuotationViewDetails?null:e.QuotationViewDetails.ApproveReason)||(null==e.QuotationViewDetails?null:e.QuotationViewDetails.CancelReason)),t.xp6(1),t.Q6J("ngIf",(null==e.QuotationViewDetails?null:e.QuotationViewDetails.CheckedReason)||(null==e.QuotationViewDetails?null:e.QuotationViewDetails.ApproveReason)||(null==e.QuotationViewDetails?null:e.QuotationViewDetails.CancelReason)),t.xp6(2),t.Q6J("ngIf",!e.showActivity&&e.json2.length>0),t.xp6(2),t.Q6J("ngIf",e.showActivity),t.xp6(38),t.Q6J("ngForOf",e.quotationDetails),t.xp6(1),t.Q6J("ngIf",e.invoiceDocuments.length>0),t.xp6(1),t.Q6J("ngIf",e.showActivity),t.xp6(3),t.Q6J("ngIf",2!=e.QuotationViewDetails.ApprovalStatus&&0==e.QuotationViewDetails.IsCancel&&e.roles.toLowerCase().includes("Maker".toLowerCase())),t.xp6(1),t.Q6J("ngIf",0==e.QuotationViewDetails.IsCancel&&e.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())),t.xp6(7),t.Q6J("ngIf",e.roles.toLowerCase().includes("Checker".toLowerCase())&&2!=e.QuotationViewDetails.ApprovalStatus&&1!=e.QuotationViewDetails.ApprovalStatus),t.xp6(1),t.Q6J("ngIf",e.roles.toLowerCase().includes("Approval".toLowerCase())&&1==e.QuotationViewDetails.ApprovalStatus&&0==e.QuotationViewDetails.IsCancel)}}function _e(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",98)(1,"h5",101),t._uU(2,"Delete Quotation"),t.qZA(),t.TgZ(3,"button",102),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))}),t.qZA()(),t.TgZ(4,"div",143)(5,"div",5)(6,"div",39)(7,"div",20)(8,"label",144),t._uU(9,"Are you sure do you want to delete "),t.TgZ(10,"strong"),t._uU(11),t.qZA(),t._uU(12," quotation ?"),t.qZA()()()()(),t.TgZ(13,"div",145)(14,"button",146),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))}),t._uU(15," No "),t.qZA(),t.TgZ(16,"button",147),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return a.close("by: close icon"),t.KtG(l.DeleteQuotation())}),t._uU(17,"Yes"),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(11),t.Oqu(e.SupplierName)}}function ge(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",98)(1,"h5",101),t._uU(2,"Remarks"),t.qZA(),t.TgZ(3,"button",102),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return a.close("by: close icon"),t.KtG(l.reason="")}),t.qZA()(),t.TgZ(4,"div",143)(5,"div",5)(6,"div",39)(7,"div",148)(8,"label",149),t._uU(9,"Reason:"),t.qZA(),t.TgZ(10,"input",150),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.reason=n)}),t.qZA()()()()(),t.TgZ(11,"div",145)(12,"button",146),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))})("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.clearReason())}),t._uU(13," No "),t.qZA(),t.TgZ(14,"button",147),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))})("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onUpdateStatus())}),t._uU(15," Yes "),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(10),t.Q6J("ngModel",e.reason)}}function he(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",98)(1,"h5",101),t._uU(2,"Cancel quotation"),t.qZA(),t.TgZ(3,"button",102),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return a.close("by: close icon"),t.KtG(l.reason="")}),t.qZA()(),t.TgZ(4,"div",143)(5,"div",5)(6,"div",39)(7,"div",20)(8,"label",149),t._uU(9,"Are you sure do you want to Cancel "),t.TgZ(10,"strong"),t._uU(11),t.qZA(),t._uU(12," Quotation?"),t.qZA()()(),t.TgZ(13,"div",39)(14,"div",148)(15,"label",149),t._uU(16,"Reason:"),t.qZA(),t.TgZ(17,"input",150),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.reason=n)}),t.qZA()()()()(),t.TgZ(18,"div",145)(19,"button",146),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))})("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.clearReason())}),t._uU(20," No "),t.qZA(),t.TgZ(21,"button",147),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return a.close("by: close icon"),t.KtG(l.UpdateQuotationCancel())}),t._uU(22,"Yes"),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(11),t.Oqu(e.QuotationNo),t.xp6(6),t.Q6J("ngModel",e.reason)}}function fe(i,s){if(1&i&&(t.TgZ(0,"tr")(1,"td",116),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td",117),t._uU(26),t.qZA()()),2&i){const e=s.$implicit;t.xp6(2),t.Oqu(e.ItemName),t.xp6(2),t.Oqu(e.VendorItemName?e.VendorItemName:"N/A"),t.xp6(2),t.Oqu(e.ItemCategoryName),t.xp6(2),t.Oqu(e.HSNCode?e.HSNCode:"N/A"),t.xp6(2),t.Oqu(e.CatalogNo?e.CatalogNo:"N/A"),t.xp6(2),t.Oqu(e.ManufactureName),t.xp6(2),t.Oqu(e.MachineName),t.xp6(2),t.hij("\u20b9",e.Rate,""),t.xp6(2),t.Oqu(e.DiscountPer),t.xp6(2),t.Oqu(0==e.SGSTPer?"--":e.SGSTPer),t.xp6(2),t.Oqu(0==e.CGSTPer?"--":e.CGSTPer),t.xp6(2),t.Oqu(e.IGSTPer),t.xp6(2),t.hij("\u20b9",e.BuyPrice,"")}}function Ce(i,s){if(1&i&&(t.ynx(0),t.YNc(1,fe,27,13,"tr",61),t.BQk()),2&i){const e=s.$implicit;t.xp6(1),t.Q6J("ngForOf",e.quotationsList)}}function Te(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",98)(1,"h5",101),t._uU(2,"Supplier Quotation Detail"),t.qZA(),t.TgZ(3,"button",102),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))}),t.qZA()(),t._UZ(4,"hr",111),t.TgZ(5,"div",143)(6,"double-scroll")(7,"table",115)(8,"thead")(9,"tr")(10,"th",116),t._uU(11,"Item Name"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Vendor Item Name"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Item Category Name"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"HSN Code"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Catalog No"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Manufacturer Name"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Machine Name"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Rate"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Discount %"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"SGST %"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"CGST %"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"IGST %"),t.qZA(),t.TgZ(34,"th",117),t._uU(35,"Buy Price"),t.qZA()()(),t.TgZ(36,"tbody"),t.YNc(37,Ce,2,1,"ng-container",61),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(37),t.Q6J("ngForOf",e.activityHistoryArray)}}function xe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",98)(1,"h5",101),t._uU(2,"Preview invoice"),t.qZA(),t.TgZ(3,"button",102),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))}),t.qZA()(),t.TgZ(4,"div",143)(5,"div",151)(6,"div",152)(7,"div",153)(8,"ngx-doc-viewer",154)(9,"div"),t._uU(10,"Loading"),t.qZA()()()()(),t._UZ(11,"div",5),t.qZA(),t.TgZ(12,"div",145)(13,"button",146),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))}),t._uU(14,"Cancel"),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(8),t.Q6J("url",e.Document)}}const P=function(){return{maxlength:"48"}};let Ze=(()=>{class i{constructor(e,o,n,a,l,r){this.modalService=e,this.quotationService=o,this.route=n,this.globalService=a,this.datePipe=l,this.authservice=r,this.maxSize=3,this.boundaryLinks=!0,this.size="lg",this.rows=[],this.temp=[],this.loadingIndicator=!0,this.ColumnMode=U.hq,this.supplierGuid=[]=[],this.itemGuid=[]=[],this.locationGuid=[]=[],this.keyWords="",this.fromDate="",this.toDate="",this.pageNumber=1,this.pageSize=40,this.orderBy="",this.sortType="desc",this.quotationsList=[],this.quotationsListForExport=[],this.supplierDetails=[],this.Keyword="",this.rowCount=40,this.itemOrder="",this.sort="",this.allItems=[],this.locations=[],this.modelChanged=new z.x,this.quotationGuid=[],this.quotationDetails=[],this.allItemsList=[],this.supplierList=[],this.pageCount=-1,this.defaultData=[],this.itemsList=[],this.userGuid=null,this.itemOptionsPerPage=[40,80,120,160,200,240,280,320],this.itemsPerPage=40,this.UnparsedHtml='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Supplier Quotation</title><style>table{border-collapse:collapse;border:1px solid #000}table td,table th{border-bottom:1px solid #000;border-right:1px solid #000;padding:5px;text-align:left;word-wrap:break-word;word-break:break-all;font-size:10px}table tr:last-child td{border-bottom:none}p{margin:0}</style></head><body><table style="text-align:center;table-layout:fixed" width="100%"><tbody><tr><td><div class="logo"><img data-v-0e549244="" src="assets/images/YodaLIMSLogo.png" alt="Yoda LIMS"></div></td></tr></tbody></table><table style="table-layout:fixed;background-color:#ccc" width="100%"><tbody><tr><td style="font-weight:700;font-size:24px;text-align:center">Supplier Quotation</td></tr></tbody></table><table style="table-layout:fixed;background-color:#ccc" width="100%"><tbody><tr><td style="font-size:14px"><b>Quotation no:</b>%%QuotationNo%%</td></tr></tbody></table><table style="table-layout:fixed;background-color:#ccc" width="100%"><tbody><tr><td style="font-size:14px"><b>Supplier name:</b>%%SupplierName%%</td><td style="font-size:14px"><b>GST no:</b>%%SupplierGSTIN%%</td></tr></tbody></table><table style="table-layout:fixed" width="100%"><tbody><tr><td style="font-size:14px;color:red"><b>Center:</b>%%CenterName%%</td><td style="font-size:14px;color:red"><b>Location:</b>%%CenterLocation%%</td></tr></tbody></table><table style="table-layout:fixed" width="100%"><thead><tr><th>S. no.</th><th>Item</th><th>VendorItemName</th><th width="10%">HSN code</th><th width="10%">Catalog no.</th><th width="10%">Manufacturer</th><th>Rate \u20b9</th><th>Qty</th><th style="min-width:50px">Disc %</th><th style="min-width:50px">SGST%</th><th style="min-width:50px">CGST %</th><th style="min-width:50px">IGST %</th><th style="min-width:50px">Amount \u20b9</th></tr></thead><tbody><tr id="supllierQuotation"><td>%%ItemSNo%%</td><td>%%ItemName%%</td><td>%%VendorItemName%%</td><td>%%ItemHSN%%</td><td>%%ItemCatalog%%</td><td>%%ItemManufacture%%</td><td>%%ItemRate%%</td><td>%%ItemQty%%</td><td>%%ItemDisc%%</td><td>%%ItemSGST%%</td><td>%%ItemCGST%%</td><td>%%ItemIGST%%</td><td>%%ItemAmount%%</td></tr></tbody></table><table style="table-layout:fixed" width="100%"><tbody><tr><td style="font-weight:700;font-size:12px;text-align:right">Total amount in INR : %%totalINRAmount%%</td></tr><tr><td style="font-size:12px"><b>Total amount in words:</b>%%AmountinWords%% rupees only</td></tr><tr><td style="font-size:12px"><b>Total No. of items in words:</b>%%QTYinWords%%</td></tr><tr><td style="font-size:12px;color:red"><b>Terms & Conditions</b></td></tr><tr id="termsandconditionsdata"><td style="font-size:10px">%%Terms%%</td></tr></tbody></table><table style="width:100%;margin-top:50px"><thead><tr><th>Created By:%%CreatedBy%%</th><th>Checked By:%%CheckedBy%%</th><th>Approved By:%%ApprovedBy%%</th><th>Cancel By:%%CancelBy%%</th></tr></thead></table><div style="text-align:right;margin-top:2rem"><div><b>Date:</b>%%Date%%</div><div>This is a computer generated document, hence signature is not required.</div></div></body></html>',this.termsCondition=[],this.itemOptionsOrders1=[]=[{status:"Created"},{status:"Checked"},{status:"Approved"},{status:"Cancelled"}],this.approved=!1,this.checked=!1,this.created=!1,this.removeFromDate=null,this.removeTodate=null,this.isMenuCollapsed=!0,this.isFilterCheck=!1,this.isDisable=!1,this.currentPage=1,this.quotationPageChange=[],this.searchTerm="",this.IsCancel=!1,this.selectedStatus=[],this.itemOptionsOrders=[],this.noQuotationFound=!1,this.reason="",this.IsActive=!0,this.json2=[],this.changes=[],this.quotationLogDetails=[],this.activityHistoryArray=[],this.showActivity=!1,this.fetch(d=>{this.rows=d}),this.subscriptions=new W.w0,this.modelChanged.pipe((0,j.b)(1e3)).subscribe(d=>{this.keyWords=d,this.getAllQuotationDetails()})}ngOnInit(){window.outerWidth<480&&(this.maxSize=2,this.boundaryLinks=!1,this.size="sm"),this.userGuid=localStorage.getItem("UserGuid");const e=new Date;this.selectedDate={day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()},this.getAllItemDetails(),this.getpurchaseorderPostDefaults(),this.getAllQuotationDetails(),this.roles=this.authservice.LoggedInUser.QOROLES}fetch(e){const o=new XMLHttpRequest;o.open("GET","assets/data/all-quotations.json"),o.onload=()=>{e(JSON.parse(o.response))},o.send()}updateFilter(e){const o=e.target.value.toLowerCase(),n=this.temp.filter(function(a){return-1!==a.itemName.toLowerCase().indexOf(o)||!o});this.rows=n,this.table.offset=0}openXlModal(e){this.modalService.open(e,{size:"xl"}).result.then(o=>{console.log("Modal closed"+o)}).catch(o=>{})}changeSearch(e){this.pageNumber=1,this.pageSize=40,this.modelChanged.next(e.target.value)}getAllQuotationDetails(){this.itemOptionsOrders=this.itemOptionsOrders1,this.selectedStatus=[];let e=this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())&&"00000000-0000-0000-0000-000000000000"==this.authservice.LoggedInUser.LOCATIONSGUID?"00000000-0000-0000-0000-000000000000":this.authservice.LoggedInUser.LOCATIONSGUID.split(",");this.shimmerVisible=!0,this.quotationService.getAllQuotations(this.supplierGuid,this.itemGuid,this.locationGuid,this.keyWords,this.fromDate,this.toDate,this.pageNumber,this.pageSize,this.orderBy,this.sortType,this.created,this.checked,this.approved,e).subscribe(o=>{if(this.quotationFilter=o.allQuotations,this.quotationsList=o.allQuotations,this.noQuotationFound=null==this.quotationsList,this.totalCount=o.TotalCount,this.totalQuotationCount=o.TotalCount,(this.fromDate&&this.supplierGuid.length>0||this.fromDate&&this.locationGuid.length>0||this.fromDate&&this.itemGuid.length>0)&&null!=this.quotationsList){const n=o.allQuotations.filter(a=>{const l=new Date(a.FromDate);return""==this.toDate?l>=new Date(this.fromDate):l>=new Date(this.fromDate)&&l<=new Date(this.toDate)});this.quotationsList=n}if(this.shimmerVisible=!1,this.locationGuid.length>0||this.itemGuid.length>0||this.fromDate||this.toDate)if(0===this.supplierGuid.length&&null!=this.quotationsList){const n=this.quotationsList.map(a=>this.defaultData.Result.LstQuotationSupplierType.filter(l=>l.SupplierGuid===a.SupplierGuid)).flat().filter((a,l,r)=>r.indexOf(a)===l);this.supplierDetails=n,this.itemOptionsOrders=this.filterItemOptionsOrdersByStatus(),this.getQuotationByGuid("")}else this.supplierDetails=[],this.itemOptionsOrders=this.filterItemOptionsOrdersByStatus();else this.supplierDetails=this.defaultData.Result?.LstQuotationSupplierType;this.getQuotationByGuid(""),this.searchTerm=""},o=>{this.shimmerVisible=!1,this.noQuotationFound=!0})}filterItemOptionsOrdersByStatus(){return this.quotationFilter.flatMap(e=>{let o;if("0"===e.ApprovalStatus)o="Created";else if("1"===e.ApprovalStatus)o="Checked";else{if("2"!==e.ApprovalStatus)return[];o="Approved"}return this.itemOptionsOrders1.filter(n=>n.status===o)}).filter((e,o,n)=>n.indexOf(e)===o)}getQuotationByGuid(e){this.quotationGuid=[],this.locationList="",this.QuotationViewDetails=e,this.deliveryState=e.DeliveryStateName,this.deliveryLocationName=e.DeliveryLocationName,this.supplierStateName=e.SupplierSateName,null!=e.QuotationGuid?this.quotationGuid=e.QuotationGuid:(this.supplierGuid.length>0||this.locationGuid.length>0||this.fromDate||this.toDate||this.itemGuid.length>0)&&this.quotationsList.forEach(o=>{this.quotationGuid.push(o.QuotationGuid)}),this.quotationService.getQuotationsByGuid(this.quotationGuid).subscribe(o=>{if(this.quotationDetails=o.getQuotationsResponses,this.UserDetails=o.getQuotationsResponses[0],this.json2=o.quotationLogData,this.invoiceDocuments=o.listinvoiceDocuments,this.quotationDetails=o.getQuotationsResponses.filter((n,a,l)=>a===l.findIndex(r=>r.ItemGuid===n.ItemGuid)),this.quotationLogDetails=this.quotationDetails,this.removeDuplicateValuesFromArrays(),this.quotationDetails.length>0){const a=o.getQuotationsResponses[0].LocationName.split(",").filter((l,r,d)=>d.indexOf(l)===r).join(", ");this.locationList=a}if((this.supplierGuid.length>0||this.itemGuid.length>0||this.fromDate||this.toDate)&&!e){if(0===this.locationGuid.length&&null!=this.quotationsList){const n=o.getQuotationsResponses.map(l=>l.LocationGuids).flatMap(l=>l.split(",")).map(l=>l.trim().toLowerCase());let a=this.defaultData.Result.LstQuotationCenterLocationType.filter(l=>n.includes(l.CenterLocationGuid.toLowerCase()));this.locations=a,this.itemOptionsOrders=this.filterItemOptionsOrdersByStatus()}}else e?(this.locations=this.locations,this.itemOptionsOrders=this.filterItemOptionsOrdersByStatus()):this.locations=this.defaultData.Result?.LstQuotationCenterLocationType;(this.supplierGuid.length>0||this.locationGuid.length>0||this.fromDate||this.toDate)&&!e?(0===this.itemGuid.length&&null!=this.quotationsList&&(this.allItemsList=this.quotationDetails.map(n=>this.itemsList.filter(a=>a.ItemGuid===n.ItemGuid)).flat().filter((n,a,l)=>a===l.findIndex(r=>r.ItemGuid===n.ItemGuid))),this.allItems=this.allItemsList):e?(this.quotationDetails=o.getQuotationsResponses,this.quotationDetails=this.quotationDetails.filter((n,a,l)=>a===l.findIndex(d=>d.ItemGuid===n.ItemGuid||d.ItemName===n.ItemName))):this.allItems=this.itemsList.filter((n,a,l)=>a===l.findIndex(r=>r.ItemGuid===n.ItemGuid||r.ItemName===n.ItemName))},o=>{this.globalService.stopSpinner(),this.noQuotationFound=!0})}getpurchaseorderPostDefaults(){let e=this.authservice.LoggedInUser.DEFAULTROLES?.toLowerCase().includes("ADMIN".toLowerCase())&&"00000000-0000-0000-0000-000000000000"==this.authservice.LoggedInUser?.LOCATIONSGUID?"00000000-0000-0000-0000-000000000000":this.authservice.LoggedInUser.LOCATIONSGUID?.split(",");this.quotationService.getQuotationPostDefaults(e).subscribe(o=>{this.defaultData=o,this.locations=o.Result.LstQuotationCenterLocationType,this.supplierDetails=o.Result.LstQuotationSupplierType})}getAllItemDetails(){this.Keyword=null==this.Keyword||null==this.Keyword?this.Keyword||"":this.Keyword,this.quotationService.getAllItems(this.pageCount,this.rowCount,this.Keyword,this.itemOrder,this.sort,this.IsActive).subscribe(e=>{this.itemsList=e.Result.getAllItemsResponses,this.allItems=this.itemsList.filter((o,n,a)=>n===a.findIndex(l=>l.ItemGuid===o.ItemGuid||l.ItemName===o.ItemName)),this.allItems=this.allItems.sort((o,n)=>o.ItemName?.trim().localeCompare(n.ItemName.trim()))})}onSupplierFilter(e){this.currentPage=1,this.keyWords="",this.isDisable=0!=e.length,this.supplierGuid=[],e.length>0&&this.supplierDetails.forEach(o=>{e.forEach(n=>{o.SupplierGuid==n.SupplierGuid&&this.supplierGuid.push(o.SupplierGuid)})}),this.getAllQuotationDetails()}onItemFiilters(e){this.isDisable=!0,this.itemGuid=[],this.allItems.forEach(o=>{e.forEach(n=>{o.ItemGuid==n.ItemGuid&&this.itemGuid.push(o.ItemGuid)})}),this.getAllQuotationDetails()}onlocationFiilters(e){this.isDisable=!0,this.locationGuid=[],this.locations.forEach(o=>{e.forEach(n=>{o.CenterLocationGuid==n.CenterLocationGuid&&this.locationGuid.push(o.CenterLocationGuid)})}),this.getAllQuotationDetails()}selectFromDate(e){this.selectedStatus=[],this.removeTodate=null,this.minDate=e,this.fromDate=e.year+"-"+e.month+"-"+e.day,this.getAllQuotationDetails()}onDataRemove(){this.selectedStatus=[],this.fromDate="",this.toDate="",this.removeFromDate=null,this.removeTodate=null,this.created=!1,this.checked=!1,this.approved=!1,this.getAllQuotationDetails()}selectToDate(e){this.selectedStatus=[],this.minDate=e,this.toDate=e.year+"-"+e.month+"-"+e.day,this.getAllQuotationDetails()}goToQuotationPage(){this.route.navigateByUrl("/quotations/new-quotation")}GetAllData(e){this.pageNumber=e,this.getAllQuotationDetails()}ChangeEvent(e){this.pageNumber=1,this.itemsPerPage=e.target.value,this.pageSize=e.target.value,this.getAllQuotationDetails()}UpdateQuotationCancel(){let e={QuotationGuid:this.quotationGuid,IsCancel:!0,UserGuid:this.userGuid,CancelReason:this.reason,CheckedReason:this.CheckedReason,ApproveReason:this.ApproveReason};this.globalService.startSpinner(),this.quotationService.updateQuotationsData(e).subscribe(o=>{this.quotationGuid="",this.globalService.stopSpinner(),this.getAllQuotationDetails()},o=>{this.globalService.stopSpinner()})}SelectQuotation(e){this.quotationGuid=e.QuotationGuid,this.QuotationNo=e.QuotationNo,this.CheckedReason=e.CheckedReason||"",this.ApproveReason=e.ApproveReason||""}onUpdateStatus(){this.updateQuotationStatus()}updateQuotationStatus(){this.quotationService.updateQuotationsData({QuotationGuid:this.quotationGuid,UserGuid:this.userGuid,ApprovalStatus:this.status,ApproveReason:1==this.status?this.reason:"",CheckedReason:1!=this.status?this.reason:""}).subscribe(o=>{this.reason="",this.getAllQuotationDetails()}),this.shimmerVisible=!0,this.getAllQuotationDetails(),this.shimmerVisible=!1}submitReasonAndChangeStatus(e){this.quotationguid=e,console.log("Submitted reason:",this.reason)}change(e,o){this.quotationGuid=e.QuotationGuid,this.status=o}changeApproval(e,o){this.quotationGuid=e,this.status=o}DownloadPdf(e,o){const n=new dt.default({orientation:"landscape"});this.quotationService.getQuotationsByGuid(e.QuotationGuid).subscribe(a=>{let l=a.getQuotationsResponses,r=a.getTermsConditions;const d=l[0].LocationName.split(",").filter((u,m,_)=>_.indexOf(u)===m),h=l[0].CenterName.split(",").filter((u,m,_)=>_.indexOf(u)===m);if(l.length>0){let v=function(){return[{content:"S.No",styles:{...C,cellWidth:10}},{content:"Item Name",styles:{...C,cellWidth:30}},{content:"Vendor Item Name",styles:{...C,cellWidth:30}},{content:"Item Code",styles:{...C,cellWidth:20}},{content:"Pack Size",styles:{...C,cellWidth:10}},{content:"Purchased Unit",styles:{...C,cellWidth:20}},{content:"HSN code",styles:{...C,cellWidth:20}},{content:"Catalog No",styles:{...C,cellWidth:20}},{content:"Manufacturer",styles:{...C,cellWidth:20}},{content:"Department Type",styles:{...C,cellWidth:20}},{content:"Rate",styles:{...C,cellWidth:20}},{content:"Qty",styles:{...C,cellWidth:10}},{content:"Disc %",styles:{...C,cellWidth:10}},{content:"SGST %",styles:{...C,cellWidth:10}},{content:"CGST %",styles:{...C,cellWidth:10}},{content:"IGST %",styles:{...C,cellWidth:10}},{content:"Amount",styles:{...C,cellWidth:20}}]},L=function(){let f=[];for(let p=0;p<l.length;p++)f.push([{content:String(p+1),styles:{minCellWidth:5,fontSize:8}},{content:l[p].ItemName,styles:{minCellWidth:30,fontSize:8}},{content:l[p].VendorItemName||"N/A",styles:{minCellWidth:30,fontSize:8}},{content:l[p].ItemCode||"N/A",styles:{minCellWidth:10,fontSize:8}},{content:l[p].PackSize||"N/A",styles:{minCellWidth:10,fontSize:8}},{content:l[p].PurchasedUnit||"N/A",styles:{minCellWidth:10,fontSize:8}},{content:l[p].HSNCode?l[p].HSNCode:"N/A",styles:{minCellWidth:15,fontSize:8}},{content:l[p].CatalogNo,styles:{minCellWidth:20,fontSize:8}},{content:l[p].ManufactureName||"",styles:{minCellWidth:10,fontSize:8}},{content:l[p].Department.trim()||"",styles:{minCellWidth:10,fontSize:8}},{content:l[p].Rate||"N/A",styles:{minCellWidth:15,fontSize:8}},{content:l[p].Qty||"",styles:{minCellWidth:10,fontSize:8}},{content:l[p].DiscountPer||"",styles:{minCellWidth:10,fontSize:8}},{content:0==l[p].SGSTPer?"--":l[p].SGSTPer,styles:{minCellWidth:10,fontSize:8}},{content:0==l[p].CGSTPer?"--":l[p].CGSTPer,styles:{minCellWidth:10,fontSize:8}},{content:l[p].IGSTPer,styles:{minCellWidth:10,fontSize:8}},{content:l[p].BuyPrice,styles:{minCellWidth:15,fontSize:8}}]);return f},at=function(){n.addImage(k,"PNG",220,8,70,10)},fo=function(){const G=`Date: ${(new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}).replace(/ /g,"-")}\nThis is computer generated document, hence signature is not required.`;n.text(G,290,190,{align:"right"}).setFontSize(8)},lt=function(f){return n.text("Supplier Quotation",3,E+5-f).setFontSize(10)},st=function(f){return n.text(`Quotation No: ${l[0].QuotationNo||""}`,3,E+20-f).setFontSize(10)},Co=function(){return J()(n,{foot:[[{content:`Quotation No: ${l[0].QuotationNo}`,colSpan:2,styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#cecece"}}],[{content:`Supplier Name: ${l[0].SupplierName}`,styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#cecece"}},{content:`GST no: ${l[0].GSTNNo}`,styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#cecece"}}],[{content:`Center: ${d.join(", ")}`,styles:{fillColor:"#fff",textColor:D,lineWidth:.1,lineColor:"#cecece"}},{content:`Location: ${h.join(", ")}`,styles:{fillColor:"#fff",textColor:D,lineWidth:.1,lineColor:"#cecece"}}]],startY:ho,theme:"grid",tableWidth:H,margin:{left:3}})},To=function(){let f=[];for(let p=0;p<r.length;p++)f.push([{content:r[p].TermsCondition,styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#cecece",minCellWidth:30,fontSize:8}}]);return[[{content:`Total amount in INR: ${m}`,styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#cecece"}}],[{content:`Total Amount in Words: ${x}`,styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#cecece"}}],[{content:`Total No. of items in words: ${Z}`,styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#cecece"}}],[{content:"Terms & Conditions: ",styles:{fillColor:"#fff",textColor:D,lineWidth:.1,lineColor:"#cecece"}}],...f]},xo=function(){return J()(n,{foot:To(),theme:"grid",tableWidth:H,margin:{left:3}})},Zo=function(){return J()(n,{body:[[{content:`Created by : ${l[0].CreatedBy}`,colSpan:2,styles:{...b}},{content:`Checked by : ${"0"==e.ApprovalStatus||null==l[0].CheckedByName?"Not Checked":l[0].CheckedByName}`,colSpan:2,styles:{...b}},{content:`Approved by : ${null==l[0].ApprovedByName?"Not Approved":l[0].ApprovedByName||""}`,colSpan:2,styles:{...b}},{content:`Cancel by : ${"2"!==e.ApprovalStatus?l[0].CancelByName:"Not Cancelled"}`,colSpan:2,styles:{...b}}]],theme:"grid",tableWidth:H,margin:{left:3,top:30},willDrawPage:f=>{},didDrawPage:f=>{f.pageNumber>1&&(lt(0),st(8),at())}})},Ao=function(){return J()(n,{head:[v()],body:L(),theme:"grid",tableWidth:H,margin:{left:3,top:30},willDrawPage:f=>{},didDrawPage:f=>{f.pageNumber>1&&(lt(0),st(8),at())}})};l=l.filter((f,p,G)=>p===G.findIndex(S=>S.ItemGuid===f.ItemGuid));let u=l.length;u/=1,l=l.filter((f,p,G)=>p===G.findIndex(S=>S.ItemGuid===f.ItemGuid));let m=l.reduce((f,p)=>f+p.BuyPrice,0),_=Math.round(m);const x=g(5306)(_),Z=g(5306)(u);let D="#ff0000";const C={fontSize:8,fillColor:"#00435d",textColor:"#fff",lineColor:"#fff",minCellWidth:10,cellWidth:14.5},b={fontSize:8,fillColor:"#00435d",textColor:"#fff",lineColor:"#fff"},k="https://yoda-task-manager.s3.ap-south-1.amazonaws.com/users/profile/verificationdocuments/yodalimslogo.png",M=15,E=5;n.addImage(k,"PNG",100,E,110,M);let ho=E+M+5;const H=290;Co(),Ao(),xo(),Zo(),fo();let Y=new Date(l[0].CreateDate),yo=String(Y.getDate()).padStart(2,"0")+String(Y.getMonth()+1).padStart(2,"0")+String(Y.getFullYear());if(""!==o){const f=n.output("bloburl"),p=window.open(f);setTimeout(()=>{p.print()},250)}else n.save(`supplier-quotation${l[0].QuotationNo+"_"+l[0].SupplierCode+"_"+yo}.pdf`)}})}FiltersCheck(e){this.selectedStatus=e,this.isDisable=!1,this.itemsPerPage=40;let o=[],n=[],a=[],l=[],r=[];this.quotationsList=[],e.length>0?e.forEach(d=>{"Created"==d&&(o=this.quotationFilter.filter(h=>0==h.ApprovalStatus&&"Created"==d),r=r.concat(o)),"Checked"==d&&(n=this.quotationFilter.filter(h=>1==h.ApprovalStatus&&0==h.IsCancel&&"Checked"==d),r=r.concat(n)),"Approved"==d&&(a=this.quotationFilter.filter(h=>2==h.ApprovalStatus&&"Approved"==d),r=r.concat(a)),"Cancelled"==d&&(l=this.quotationFilter.filter(h=>1==h.IsCancel),r=r.concat(l))}):(this.isDisable=!1,this.quotationsList=this.quotationFilter,this.totalCount=this.totalQuotationCount),this.isFilterCheck=0==r.length&&e.length>0,r.length>0&&(this.quotationsList=r,this.quotationPageChange=r,this.totalCount=this.quotationsList.length)}DeleteQuotation(){this.globalService.startSpinner(),this.quotationService.DeleteQuotation(this.QuotationGuid).subscribe(e=>{this.globalService.stopSpinner(),this.getAllQuotationDetails()},e=>{this.globalService.stopSpinner()})}applyPaginationAndFilter(){this.quotationsList=this.quotationPageChange.slice((this.currentPage-1)*this.itemsPerPage,this.currentPage*this.itemsPerPage)}onPageChange(e){this.currentPage=e,this.applyPaginationAndFilter()}filterQuotation(){this.quotationPageChange.length>0?this.quotationsList=this.quotationPageChange.filter(e=>e.ItemName.toLowerCase().includes(this.searchTerm.toLowerCase())):(this.supplierGuid.length>0||this.locationGuid.length>0||this.itemGuid.length>0)&&(this.quotationsList=this.quotationFilter.filter(e=>e.ItemName.toLowerCase().includes(this.searchTerm.toLowerCase()))),this.noQuotationFound=0===this.quotationsList.length}openBasicModal(e){this.modalService.open(e,{backdrop:"static",keyboard:!1,size:"md"}).result.then(o=>{console.log("Modal closed"+o)}).catch(o=>{})}Delquotation(e){this.SupplierName=e.SupplierName,this.QuotationGuid=e.QuotationGuid}GetAllQuotationsExcel(){this.getAllQuotationsForExport()}getAllQuotationsForExport(){this.itemOptionsOrders=this.itemOptionsOrders1,this.selectedStatus=[];let e=this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())&&"00000000-0000-0000-0000-000000000000"==this.authservice.LoggedInUser.LOCATIONSGUID?"00000000-0000-0000-0000-000000000000":this.authservice.LoggedInUser.LOCATIONSGUID.split(",");this.shimmerVisible=!0,this.quotationService.getAllQuotationsForExport(this.supplierGuid,this.itemGuid,this.locationGuid,this.keyWords,this.fromDate,this.toDate,-1,this.pageSize,this.orderBy,this.sortType,this.created,this.checked,this.approved,e).subscribe(o=>{this.quotationsListForExport=o.allQuotations,this.downloadExcel(),this.shimmerVisible=!1},o=>{this.shimmerVisible=!1,this.noQuotationFound=!0})}downloadExcel(){const o=new rt.Workbook,n=o.addWorksheet("Sharing Data");n.addRow(["Quotation NO","From date","To date","Status","Supplier name","Supplier address","GSTN NO","DL count","Item name","Vendor Item Name","Manufacture Name","Item Cancel By","Item Cancel Date","Rate","Discount Amt","GST Amount","Buy price"]).eachCell((r,d)=>{r.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},r.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),n.getColumn(1).width=30,n.getColumn(2).width=20,n.getColumn(3).width=30,n.getColumn(4).width=30,n.getColumn(5).width=15,n.getColumn(6).width=30,n.getColumn(7).width=20,n.getColumn(8).width=20,n.getColumn(9).width=20,n.getColumn(10).width=30,n.getColumn(11).width=20,n.getColumn(11).width=30,n.getColumn(11).width=30,n.getColumn(12).width=20,n.getColumn(13).width=20,n.getColumn(14).width=20,this.quotationsListForExport.forEach(r=>{n.addRow([r.QuotationNo,this.datePipe.transform(r.FromDate,"dd-MM-yyyy"),this.datePipe.transform(r.ToDate,"dd-MM-yyyy"),"0"==r.ApprovalStatus?"Maker":"1"==r.ApprovalStatus?"Checked":"2"==r.ApprovalStatus?"Approved":"",r.SupplierName,r.SupplierAddress,r.GSTNNo,r.DeliveryLocationCount,r.ItemName,r.VendorItemName?r.VendorItemName:"N/A",r.ManufactureName?r.ManufactureName:"N/A",r.ItemCancelBy,this.datePipe.transform(r.ItemCancelDate,"dd-MM-yyyy"),r.Rate,r.DiscountAmt?r.DiscountAmt:0,r.GSTAmount?r.GSTAmount:0,r.BuyPrice])}),o.xlsx.writeBuffer().then(r=>{const d=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});ut(d,"Quotationslist-print.xlsx"),this.pageNumber=1})}clearReason(){this.reason=""}removeDuplicateValuesFromArrays(){this.quotationLogDetails.forEach(e=>{e.LocationName=Array.from(new Set(e.LocationName.split(","))).join(","),e.CenterName=Array.from(new Set(e.CenterName.split(","))).join(","),e.LocationGuids=Array.from(new Set(e.LocationGuids.split(","))).join(",")}),this.json2.forEach(e=>{e.QotationLogData.quotationsList.forEach(o=>{o.LocationName=Array.from(new Set(o.LocationName.split(","))).join(","),o.CenterName=Array.from(new Set(o.CenterName.split(","))).join(","),o.LocationGuids=Array.from(new Set(o.LocationGuids.split(","))).join(",")})})}onCheckActivityHistory(){const e=[];this.json2.forEach(o=>{e.push(o.QotationLogData)}),this.activityHistoryArray=e}PreviewInvoice(e){this.Document=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.FF),t.Y36(X.G),t.Y36(w.F0),t.Y36(mt.U),t.Y36(N.uU),t.Y36(tt.$))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-all-quotations"]],viewQuery:function(e,o){if(1&e&&t.Gf(U.nE,5),2&e){let n;t.iGM(n=t.CRH())&&(o.table=n.first)}},features:[t._Bn([{provide:q.NG,useClass:$.k}])],decls:90,vars:46,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard"],["aria-current","items",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title","d-flex","align-items-center","justify-content-between"],[1,"mb-2","mb-sm-0"],[1,"d-flex","align-items-center","justify-content-end"],["type","button",1,"ms-auto","navbar-toggler","filter-button",3,"click"],[1,"feather","icon-filter","size-18"],["class","btn btn-primary btn-sm flex-shrink-0 ms-2",3,"disabled","click",4,"ngIf"],[1,"btn","btn-primary","btn-sm","flex-shrink-0","ms-2",3,"disabled","click"],[1,"feather","icon-arrow-up"],[1,"collapse","navbar-collapse",3,"ngbCollapse"],[1,"d-flex","flex-column","flex-xl-row","align-items-xl-center","gap-3","mt-2","mt-xl-0","justify-content-between"],[1,"col-md-4"],[1,"mb-3"],["for","itemExpiryDate",1,"form-label","d-flex","justify-content-between"],[1,"input-group"],["placeholder","dd-mm-yyyy","name","dp","ngbDatepicker","","readonly","",1,"form-control",3,"ngModel","ngModelChange","dateSelect"],["d1","ngbDatepicker"],["type","button",1,"input-group-text",3,"click"],[1,"feather","icon-calendar","icon-md","text-muted"],[1,"col-md-4","mb-3"],["placeholder","dd-mm-yyyy","name","dp","ngbDatepicker","",1,"form-control",3,"minDate","ngModel","readonly","ngModelChange","dateSelect"],["d2","ngbDatepicker"],["for","item",1,"form-label","d-flex","justify-content-between"],["placeholder","Select status",1,"ngquotatin",3,"multiple","ngModel","inputAttrs","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-md-3 mb-2 align-self-center",4,"ngIf"],[1,"align-items-center","d-flex","flex-column","flex-sm-row","text-end"],["class","text-muted text-small flex-shrink-0",4,"ngIf"],["name","rowLimit","id","rowLimit","class","form-select form-select-sm ms-0 ms-sm-2 mb-1 mb-sm-0",3,"change",4,"ngIf"],["type","text","class","form-control form-control-sm minw-200 ms-0 ms-sm-2 mb-1 mb-sm-0","placeholder","Search",3,"maxLength","keyup",4,"ngIf"],["type","text","class","form-control form-control-sm minw-200 ms-0 ms-sm-2 mb-1 mb-sm-0","placeholder","Search",3,"ngModel","maxLength","ngModelChange","input",4,"ngIf"],[1,"col-sm-12"],[1,"col-sm-4","mb-3"],["bindLabel","CenterLocationName","bindValue","CenterLocationGuid","placeholder","Select location",3,"items","multiple","closeOnSelect","searchable","inputAttrs","notFoundText","change"],["bindLabel","ItemName","bindValue","ItemGuid","placeholder","Select Item",3,"items","multiple","closeOnSelect","searchable","inputAttrs","notFoundText","change"],["bindLabel","SupplierName","bindValue","SupplierGuid","placeholder","\n                                            Select supplier",3,"items","multiple","closeOnSelect","searchable","inputAttrs","notFoundText","change"],[1,"table"],[4,"ngIf"],["class","cartd-footer",4,"ngIf"],["xlModal",""],["deletequotation",""],["CheckedQuotation",""],["CancelQuotation",""],["activityHistory",""],["previewItem",""],[3,"value"],[1,"col-md-3","mb-2","align-self-center"],[1,"btn","btn-link","btn-sm","text-underline",3,"click"],[1,"text-muted","text-small","flex-shrink-0"],["name","rowLimit","id","rowLimit",1,"form-select","form-select-sm","ms-0","ms-sm-2","mb-1","mb-sm-0",3,"change"],["type","text","placeholder","Search",1,"form-control","form-control-sm","minw-200","ms-0","ms-sm-2","mb-1","mb-sm-0",3,"maxLength","keyup"],["type","text","placeholder","Search",1,"form-control","form-control-sm","minw-200","ms-0","ms-sm-2","mb-1","mb-sm-0",3,"ngModel","maxLength","ngModelChange","input"],["title","Delivery Location Count"],[4,"ngFor","ngForOf"],["class","pe-0 text-end",4,"ngIf"],[1,"truncate",2,"max-width","150px"],[3,"title"],[3,"ngClass",4,"ngIf"],[1,"truncate",2,"max-width","300px"],[1,"d-flex"],[1,"btn","btn-outline-primary","btn-xs","me-1",3,"click"],[1,"feather","icon-eye"],["ngbDropdown",""],["id","actionsDropdown","placement","bottom","container","body","popoverClass","dataTableActions",1,"btn","btn-secondary","btn-xs",3,"ngbPopover"],[1,"feather","icon-chevron-down"],["dataTableActions",""],[1,"pe-0","text-end"],[1,"feather","icon-edit-2","size-18","me-2","text-secondary",3,"title"],[3,"ngClass"],["aria-labelledby","actionsDropdown"],["class","border-bottom","ngbDropdownItem","",3,"routerLink",4,"ngIf"],["class","border-bottom","ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","",1,"border-bottom",3,"click"],[1,"feather","icon-printer"],[1,"feather","icon-download"],["ngbDropdownItem","",1,"border-bottom",3,"routerLink"],[1,"feather","icon-edit"],[1,"feather","icon-x"],["ngbDropdownItem","","maxlength","200",1,"border-bottom",3,"click"],[1,"feather","icon-check-square"],[1,"feather","icon-thumbs-up"],[1,"shimmerBG","line"],[1,"shimmerBG","line",2,"margin-right","5px"],[1,"minh-fullscreen","d-flex","align-items-center","justify-content-center"],[1,"py-5","text-muted"],[1,"d-flex","flex-column","justify-content-center","gap-1","align-items-center","fs-4"],[1,"feather","icon-alert-circle","fs-2"],[1,"cartd-footer"],[1,"d-flex","justify-content-center","my-3","pe-3"],[1,"ms-auto","d-sm-table",3,"collectionSize","pageSize","page","maxSize","rotate","boundaryLinks","size","pageChange"],[1,"modal-header"],[1,"d-flex","gap-2","align-items-center"],["type","button","class","btn btn-md btn-link p-0 fw-bold",3,"click",4,"ngIf"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"container-fluid","d-flex","justify-content-between","mt-4","flex-sm-row","flex-column"],[1,"col-lg-5","ps-0"],[1,"mt-1","mb-1"],[1,"fw-bold"],[1,"col-lg-4","pe-0","text-sm-end"],[1,"mb-1"],["class","my-2",4,"ngIf"],["class","container",4,"ngIf"],[1,"my-2"],["class","d-flex justify-content-end mt-2 me-2",4,"ngIf"],[1,"px-3","mt-2","mb-4"],["class","mb-0 fw-bold fs-5",4,"ngIf"],[1,"table","table-bordered","pt-3"],[1,"freeze-itemName-col"],[1,"freeze-buyPrice-col"],["class","card",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"modal-footer","justify-content-center"],["role","group","aria-label","Basic mixed styles example",1,"btn-group","btn-group-sm"],["type","button","class","btn btn-outline-secondary",3,"routerLink","click",4,"ngIf"],["class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button","class","btn btn-outline-secondary","maxlength","200",3,"click",4,"ngIf"],["type","button",1,"btn","btn-md","btn-link","p-0","fw-bold",3,"click"],[1,"feather","icon-arrow-left"],[1,"container"],["class","col-sm-12",4,"ngIf"],[1,"d-flex","justify-content-end","mt-2","me-2"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"mb-0","fw-bold","fs-5"],[1,"freeze-itemName-col","text-wrap","max-w-250"],[1,"table-responsive"],[1,"table","bg-white"],[1,"mt-4"],[1,"freeze-col-1"],[1,"freeze-updated-col"],["type","button",1,"btn","btn-outline-secondary",3,"routerLink","click"],[1,"btn","btn-outline-secondary",3,"click"],["type","button","maxlength","200",1,"btn","btn-outline-secondary",3,"click"],[1,"modal-body"],["for","itemName",1,"form-label"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary","me-2",3,"click"],["type","button",1,"btn","btn-primary","submit",3,"click"],[1,"mb-22"],["for","reason",1,"form-label"],["type","text","id","reason","name","reason",1,"form-control",3,"ngModel","ngModelChange"],[1,"widget-content"],[1,"default-form"],[1,"row","form"],["viewer","url",2,"width","100%","height","75vh",3,"url"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._uU(4,"Dashboard"),t.qZA()(),t.TgZ(5,"li",4),t._uU(6,"All quotations"),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9)(12,"div",10),t._uU(13,"ALL QUOTATIONS"),t.qZA(),t.TgZ(14,"div",11)(15,"button",12),t.NdJ("click",function(){return o.isMenuCollapsed=!o.isMenuCollapsed}),t._UZ(16,"i",13),t.qZA(),t.YNc(17,pt,2,1,"button",14),t.TgZ(18,"button",15),t.NdJ("click",function(){return o.GetAllQuotationsExcel()}),t._UZ(19,"span",16),t._uU(20,"EXPORT QUOTATIONS"),t.qZA()()(),t.TgZ(21,"div",17)(22,"div",18)(23,"div",5)(24,"div",19)(25,"div",20)(26,"label",21),t._uU(27,"From Date "),t.qZA(),t.TgZ(28,"div",22)(29,"input",23,24),t.NdJ("ngModelChange",function(l){return o.removeFromDate=l})("dateSelect",function(l){return o.selectFromDate(l)}),t.qZA(),t.TgZ(31,"button",25),t.NdJ("click",function(){t.CHM(n);const l=t.MAs(30);return t.KtG(l.toggle())}),t._UZ(32,"i",26),t.qZA()()()(),t.TgZ(33,"div",27)(34,"label",21),t._uU(35,"To Date "),t.qZA(),t.TgZ(36,"div",22)(37,"input",28,29),t.NdJ("ngModelChange",function(l){return o.removeTodate=l})("dateSelect",function(l){return o.selectToDate(l)}),t.qZA(),t.TgZ(39,"button",25),t.NdJ("click",function(){t.CHM(n);const l=t.MAs(38);return t.KtG(o.fromDate?l.toggle():"")}),t._UZ(40,"i",26),t.qZA()()(),t.TgZ(41,"div",27)(42,"label",30),t._uU(43,"Status"),t.qZA(),t.TgZ(44,"ng-select",31),t.NdJ("change",function(l){return o.FiltersCheck(l)})("ngModelChange",function(l){return o.selectedStatus=l}),t.YNc(45,_t,2,2,"ng-option",32),t.qZA()(),t.YNc(46,gt,3,0,"div",33),t.qZA(),t.TgZ(47,"div",34),t.YNc(48,ht,2,3,"span",35),t.YNc(49,Ct,2,1,"select",36),t.YNc(50,Tt,1,1,"input",37),t.YNc(51,xt,1,2,"input",38),t.qZA()()(),t.TgZ(52,"div",39),t._UZ(53,"hr"),t.qZA(),t.TgZ(54,"div",17)(55,"div",5)(56,"div",40)(57,"label",21),t._uU(58,"Locations "),t.qZA(),t.TgZ(59,"ng-select",41),t.NdJ("change",function(l){return o.onlocationFiilters(l)}),t.qZA()(),t.TgZ(60,"div",40)(61,"label",21),t._uU(62,"Items "),t.qZA(),t.TgZ(63,"ng-select",42),t.NdJ("change",function(l){return o.onItemFiilters(l)}),t.qZA()(),t.TgZ(64,"div",40)(65,"label",21),t._uU(66,"Suppliers "),t.qZA(),t.TgZ(67,"ng-select",43),t.NdJ("change",function(l){return o.onSupplierFilter(l)}),t.qZA()()()(),t.TgZ(68,"double-scroll")(69,"table",44),t.YNc(70,Zt,23,0,"thead",45),t.TgZ(71,"tbody"),t.YNc(72,Dt,2,1,"ng-container",45),t.YNc(73,Lt,2,2,"ng-container",45),t.qZA()()()(),t.YNc(74,Mt,1,0,null,45),t.YNc(75,Ft,7,0,"ng-container",45),t.YNc(76,Jt,3,7,"div",46),t.YNc(77,Ot,3,7,"div",46),t.qZA()()(),t.YNc(78,pe,115,36,"ng-template",null,47,t.W1O),t.YNc(80,_e,18,1,"ng-template",null,48,t.W1O),t.YNc(82,ge,16,1,"ng-template",null,49,t.W1O),t.YNc(84,he,23,2,"ng-template",null,50,t.W1O),t.YNc(86,Te,38,1,"ng-template",null,51,t.W1O),t.YNc(88,xe,15,1,"ng-template",null,52,t.W1O)}if(2&e){let n;t.xp6(17),t.Q6J("ngIf",null==o.roles||null==(n=o.roles.toLowerCase())?null:n.includes("Maker".toLowerCase())),t.xp6(1),t.Q6J("disabled",o.shimmerVisible),t.xp6(3),t.Q6J("ngbCollapse",o.isMenuCollapsed),t.xp6(8),t.Q6J("ngModel",o.removeFromDate),t.xp6(8),t.Q6J("minDate",o.minDate)("ngModel",o.removeTodate)("readonly",""==o.toDate||o.toDate),t.xp6(7),t.Q6J("multiple",!0)("ngModel",o.selectedStatus)("inputAttrs",t.DdM(42,P)),t.xp6(1),t.Q6J("ngForOf",o.itemOptionsOrders),t.xp6(1),t.Q6J("ngIf",o.fromDate||o.toDate),t.xp6(2),t.Q6J("ngIf",(null==o.quotationsList?null:o.quotationsList.length)>0),t.xp6(1),t.Q6J("ngIf",(null==o.quotationsList?null:o.quotationsList.length)>0),t.xp6(1),t.Q6J("ngIf",0==o.isDisable),t.xp6(1),t.Q6J("ngIf",1==o.isDisable),t.xp6(3),t.Q6J("ngbCollapse",o.isMenuCollapsed),t.xp6(5),t.Q6J("items",o.locations)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("inputAttrs",t.DdM(43,P))("notFoundText","No locations found"),t.xp6(4),t.Q6J("items",o.allItems)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("inputAttrs",t.DdM(44,P))("notFoundText","No items found"),t.xp6(4),t.Q6J("items",o.supplierDetails)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("inputAttrs",t.DdM(45,P))("notFoundText","No suppliers found"),t.xp6(3),t.Q6J("ngIf",null!=o.quotationsList),t.xp6(2),t.Q6J("ngIf",!o.shimmerVisible&&null!=o.quotationsList),t.xp6(1),t.Q6J("ngIf",o.shimmerVisible),t.xp6(1),t.Q6J("ngIf",o.noQuotationFound&&!o.shimmerVisible),t.xp6(1),t.Q6J("ngIf",o.isFilterCheck),t.xp6(1),t.Q6J("ngIf",1==o.isDisable&&(null==o.quotationsList?null:o.quotationsList.length)>0),t.xp6(1),t.Q6J("ngIf",0==o.isDisable&&(null==o.quotationsList?null:o.quotationsList.length)>0)}},dependencies:[N.mk,N.sg,N.O5,w.rH,w.yS,c.YN,c.Kr,c.Fj,c.JJ,c.On,q._D,q.J4,q.jt,q.TH,q.N9,q.o8,O.w9,O.jq,K.Z,V.zr,N.uU],styles:[".size-18[_ngcontent-%COMP%]{font-size:18px;color:#6571ff}.minh-fullscreen[_ngcontent-%COMP%]{height:calc(100vh - 370px)}.freeze-itemName-col[_ngcontent-%COMP%]{position:sticky;left:0;width:150px;min-width:200px;z-index:11;background:#fff}.freeze-buyPrice-col[_ngcontent-%COMP%], .freeze-updated-col[_ngcontent-%COMP%]{position:sticky;right:0;width:150px;min-width:150px;z-index:11;background:#fff}.highlight[_ngcontent-%COMP%]{font-weight:700;color:red}.old-value[_ngcontent-%COMP%]{text-decoration:line-through}.new-value[_ngcontent-%COMP%]{color:green}.max-w-250[_ngcontent-%COMP%]{max-width:250px}.freeze-itemName-col.text-wrap[_ngcontent-%COMP%]   .cancled[_ngcontent-%COMP%]{border-left:5px solid red;background:red;width:2px;height:60px;position:absolute;transform:translate(-14px,-14px)}"]}),i})(),Ae=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-compare-quotations"]],decls:86,vars:5,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"card-title","d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-shrink-0"],["type","text","placeholder","Search",1,"form-control","form-select-sm"],[1,"table","table-bordered"],[3,"width"],[1,"text-center",3,"width"],[1,"text-center"],[1,"text-start"],[1,"text-start","font-weight-semibold"],[1,"font-weight-bold","text-success"],["colspan","2"],["routerLink","/purchase-orders/new-purchase-order",1,"btn","btn-sm","btn-primary"]],template:function(e,o){1&e&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._uU(4,"Quotations"),t.qZA()(),t.TgZ(5,"li",4),t._uU(6,"Compare Quotations"),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9)(12,"div"),t._uU(13,"Compare Quotations"),t.qZA(),t.TgZ(14,"div",10),t._UZ(15,"input",11),t.qZA()(),t.TgZ(16,"double-scroll")(17,"table",12)(18,"thead")(19,"tr")(20,"th",13),t._uU(21,"#"),t.qZA(),t.TgZ(22,"th",13),t._uU(23,"Item name"),t.qZA(),t.TgZ(24,"th",14),t._uU(25,"Supplier #"),t.qZA(),t.TgZ(26,"th",14),t._uU(27,"Supplier #"),t.qZA(),t.TgZ(28,"th",14),t._uU(29,"Supplier #"),t.qZA()()(),t.TgZ(30,"tbody")(31,"tr",15)(32,"td",16),t._uU(33,"1"),t.qZA(),t.TgZ(34,"td",17),t._uU(35,"Item 1"),t.qZA(),t.TgZ(36,"td"),t._uU(37,"\u20b9110"),t.qZA(),t.TgZ(38,"td",18),t._uU(39,"\u20b955"),t.qZA(),t.TgZ(40,"td"),t._uU(41,"\u20b9110"),t.qZA()(),t.TgZ(42,"tr",15)(43,"td",16),t._uU(44,"2"),t.qZA(),t.TgZ(45,"td",17),t._uU(46,"Item 2"),t.qZA(),t.TgZ(47,"td"),t._uU(48,"\u20b9150"),t.qZA(),t.TgZ(49,"td",18),t._uU(50,"\u20b934"),t.qZA(),t.TgZ(51,"td"),t._uU(52,"\u20b9272"),t.qZA()(),t.TgZ(53,"tr",15)(54,"td",16),t._uU(55,"3"),t.qZA(),t.TgZ(56,"td",17),t._uU(57,"Item 3"),t.qZA(),t.TgZ(58,"td",18),t._uU(59,"\u20b91100"),t.qZA(),t.TgZ(60,"td"),t._uU(61,"---"),t.qZA(),t.TgZ(62,"td"),t._uU(63,"\u20b91500"),t.qZA()(),t.TgZ(64,"tr",15)(65,"td",16),t._uU(66,"4"),t.qZA(),t.TgZ(67,"td",17),t._uU(68,"Item 4"),t.qZA(),t.TgZ(69,"td",18),t._uU(70,"\u20b9210"),t.qZA(),t.TgZ(71,"td"),t._uU(72,"\u20b9300"),t.qZA(),t.TgZ(73,"td"),t._uU(74,"---"),t.qZA()(),t.TgZ(75,"tr",15),t._UZ(76,"td",19),t.TgZ(77,"td")(78,"button",20),t._uU(79,"Generate PO"),t.qZA()(),t.TgZ(80,"td")(81,"button",20),t._uU(82,"Generate PO"),t.qZA()(),t.TgZ(83,"td")(84,"button",20),t._uU(85,"Generate PO"),t.qZA()()()()()()()()()()),2&e&&(t.xp6(20),t.Q6J("width",50),t.xp6(2),t.Q6J("width",80),t.xp6(2),t.Q6J("width",200),t.xp6(2),t.Q6J("width",200),t.xp6(2),t.Q6J("width",200))},dependencies:[w.rH,w.yS,K.Z]}),i})();var be=g(7489),ve=g(1884),qe=g(9468),ye=g(1737),Qe=g(6431),ot=g(3056),Ne=g(5179);function we(i,s){1&i&&(t.TgZ(0,"li",22),t._uU(1,"New quotation "),t.qZA())}function Ie(i,s){1&i&&(t.TgZ(0,"li",22),t._uU(1,"Edit quotation "),t.qZA())}function Se(i,s){1&i&&(t.TgZ(0,"h6",23),t._uU(1,"New Quotation"),t.qZA())}function De(i,s){1&i&&(t.TgZ(0,"h6",23),t._uU(1,"Edit Quotation"),t.qZA())}function Ge(i,s){if(1&i&&(t.TgZ(0,"div",24)(1,"label",25),t._uU(2,"Quotation No: "),t.TgZ(3,"strong"),t._uU(4),t.qZA()()()),2&i){const e=t.oxw();t.xp6(4),t.Oqu(null==e.quotationsList[0]?null:e.quotationsList[0].QuotationNo)}}function Ue(i,s){1&i&&(t.ynx(0),t.TgZ(1,"span",68),t._uU(2,"Supplier name is required!"),t.qZA(),t.BQk())}function Le(i,s){1&i&&(t.TgZ(0,"span",69),t._uU(1,"Delivery location is required!"),t.qZA())}function ke(i,s){1&i&&(t.TgZ(0,"div",98),t.O4$(),t.TgZ(1,"svg",99),t._UZ(2,"path",100)(3,"path",101),t.qZA()())}function Me(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",102),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw().index,r=t.oxw(2);return t.KtG(r.ItemSearch(a,l))}),t._uU(1),t.qZA()}if(2&i){const e=s.$implicit;t.xp6(1),t.AsE("",e.ItemName," - (",e.CatalogNo?e.CatalogNo:"N/A",")")}}function Fe(i,s){1&i&&(t.TgZ(0,"span",103),t._uU(1," Item is required!"),t.qZA())}function Je(i,s){1&i&&(t.TgZ(0,"div",103),t._uU(1," Please select different item"),t.qZA())}function Oe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",104),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index,a=t.oxw(2);return t.KtG(a.removeItems(n))}),t.TgZ(1,"button",105),t._UZ(2,"span",106),t._uU(3," Remove item "),t.qZA()()}}function Pe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",104),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.AddItems())}),t.TgZ(1,"button",107),t._UZ(2,"span",108),t._uU(3," Add item "),t.qZA()()}}function Re(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",24)(1,"button",109),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index,a=t.oxw(2),l=t.MAs(32);return a.openBasicModal(l),a.selectQuotation(a.addItemslist.value[n]),t.KtG(a.ItemCancelReason="")}),t._uU(2," Cancel Item "),t.qZA()()}if(2&i){const e=t.oxw().index,o=t.oxw(2);t.xp6(1),t.Q6J("disabled",o.addItemslist.value[e].ItemCancel)}}const y=function(i){return{"text-danger":i}},I=function(i){return{"is-invalid":i}},nt=function(){return{maxlength:"48"}};function Ee(i,s){if(1&i){const e=t.EpF();t.ynx(0)(1,70),t.TgZ(2,"div",71)(3,"div",72)(4,"label",73),t._uU(5,"Item "),t.TgZ(6,"span",29),t._uU(7,"*"),t.qZA()(),t.TgZ(8,"input",74),t.NdJ("keyup",function(n){const l=t.CHM(e).index,r=t.oxw(2);return t.KtG(r.changeSearch(n,l))}),t.qZA(),t.YNc(9,ke,4,0,"div",75),t.TgZ(10,"div",76),t.YNc(11,Me,2,2,"div",77),t.qZA(),t.YNc(12,Fe,2,0,"span",78),t.YNc(13,Je,2,0,"div",78),t.qZA()(),t.TgZ(14,"div",71)(15,"div",72)(16,"label",73),t._uU(17,"Vendor Item Name "),t.TgZ(18,"span",29),t._uU(19,"*"),t.qZA()(),t._UZ(20,"input",79),t.TgZ(21,"span",34),t._uU(22," Vendor item name is required!"),t.qZA()()(),t.TgZ(23,"div",71)(24,"div",24)(25,"label",41),t._uU(26,"Machine "),t.qZA(),t._UZ(27,"input",80),t.TgZ(28,"span",34),t._uU(29," Machine is required!"),t.qZA()()(),t.TgZ(30,"div",71)(31,"div",24)(32,"label",41),t._uU(33,"Manufacturer"),t.qZA(),t.TgZ(34,"ng-select",81),t.NdJ("change",function(n){const l=t.CHM(e).index,r=t.oxw(2);return t.KtG(r.changeManufacture(n,l))}),t.qZA(),t.TgZ(35,"span",34),t._uU(36," Manufacturer is required!"),t.qZA()()(),t.TgZ(37,"div",71)(38,"div",24)(39,"label",82),t._uU(40,"Pack Size "),t.TgZ(41,"span",29),t._uU(42,"*"),t.qZA()(),t.TgZ(43,"input",83),t.NdJ("keypress",function(n){t.CHM(e);const a=t.oxw(2);return t.KtG(a.restrictCharectors(n))}),t.qZA(),t.TgZ(44,"span",34),t._uU(45," Pack size is required!"),t.qZA()()(),t.TgZ(46,"div",71)(47,"div",24)(48,"label",73),t._uU(49,"Rate Rs "),t.TgZ(50,"span",29),t._uU(51,"*"),t.qZA()(),t.TgZ(52,"input",84),t.NdJ("keypress",function(n){t.CHM(e);const a=t.oxw(2);return t.KtG(a.restrictCharectorsInTax(n))})("input",function(n){const l=t.CHM(e).index,r=t.oxw(2);return t.KtG(r.changeRate(n,l))}),t.qZA(),t.TgZ(53,"span",34),t._uU(54," Rate is required!"),t.qZA()()(),t.TgZ(55,"div",71)(56,"div",24)(57,"label",73),t._uU(58,"Discount % "),t.TgZ(59,"span",29),t._uU(60,"*"),t.qZA()(),t.TgZ(61,"input",85),t.NdJ("keypress",function(n){t.CHM(e);const a=t.oxw(2);return t.KtG(a.restrictCharectors(n))})("input",function(n){const l=t.CHM(e).index,r=t.oxw(2);return t.KtG(r.changeRate(n,l))}),t.qZA(),t.TgZ(62,"span",34),t._uU(63," Discount % is required!"),t.qZA()()(),t.TgZ(64,"div",71)(65,"div",86)(66,"div",87)(67,"div",24)(68,"label",73),t._uU(69,"CGST % "),t.TgZ(70,"span",29),t._uU(71,"*"),t.qZA()(),t.TgZ(72,"input",88),t.NdJ("keypress",function(n){t.CHM(e);const a=t.oxw(2);return t.KtG(a.restrictCharectorsInTax(n))})("input",function(n){const l=t.CHM(e).index,r=t.oxw(2);return t.KtG(r.changeRate(n,l))}),t.qZA(),t.TgZ(73,"span",34),t._uU(74," CGST % is required!"),t.qZA()()(),t.TgZ(75,"div",89),t._UZ(76,"span",90),t.TgZ(77,"div",24)(78,"label",73),t._uU(79,"SGST % "),t.TgZ(80,"span",29),t._uU(81,"*"),t.qZA()(),t.TgZ(82,"input",91),t.NdJ("keypress",function(n){t.CHM(e);const a=t.oxw(2);return t.KtG(a.restrictCharectorsInTax(n))})("input",function(n){const l=t.CHM(e).index,r=t.oxw(2);return t.KtG(r.changeRate(n,l))}),t.qZA(),t.TgZ(83,"span",34),t._uU(84," SGST % is required!"),t.qZA()()()()(),t.TgZ(85,"div",71)(86,"div",24)(87,"label",73),t._uU(88," IGST% "),t.TgZ(89,"span",29),t._uU(90,"*"),t.qZA()(),t.TgZ(91,"input",92),t.NdJ("input",function(){const a=t.CHM(e).index,l=t.oxw(2);return l.changeIgst(a),t.KtG(l.igstEntered=!0)})("keypress",function(n){t.CHM(e);const a=t.oxw(2);return t.KtG(a.restrictCharectorsInTax(n))}),t.qZA(),t.TgZ(92,"span",34),t._uU(93," IGST % is required!"),t.qZA()()(),t.TgZ(94,"div",71)(95,"div",24)(96,"label",73),t._uU(97,"Discount Amt "),t.qZA(),t._UZ(98,"input",93),t.qZA()(),t.TgZ(99,"div",71)(100,"div",24)(101,"label",73),t._uU(102,"Total GST Amt"),t.qZA(),t._UZ(103,"input",94),t.qZA()(),t.TgZ(104,"div",71)(105,"div",24)(106,"label",73),t._uU(107,"Buy Price"),t.qZA(),t._UZ(108,"input",95),t.qZA()(),t.TgZ(109,"div",96)(110,"div",97),t.YNc(111,Oe,4,0,"div",57),t.YNc(112,Pe,4,0,"div",57),t.YNc(113,Re,3,1,"div",10),t.qZA()(),t.TgZ(114,"div",54),t._UZ(115,"hr"),t.qZA(),t.BQk()()}if(2&i){const e=s.$implicit,o=s.index,n=t.oxw(2);let a,l,r,d,h,u,m,_,T,x,Q,Z,D,A,C,b,v,L,k,R,M;t.xp6(1),t.Q6J("formGroupName",o),t.xp6(5),t.Q6J("ngClass",t.VKq(40,y,""==(null==(a=n.newQuotationForm.get("lstItemsDetails"))?null:a.value[o].ItemName))),t.xp6(2),t.Q6J("ngClass",t.VKq(42,I,(null==(l=e.get("ItemName"))?null:l.touched)&&(null==(l=e.get("ItemName"))?null:l.invalid)||n.isdisable&&o||(null==(l=n.newQuotationForm.get("lstItemsDetails"))?null:l.value[o].DuplicateItemCheck))),t.xp6(1),t.Q6J("ngIf",n.SpinnerCheck),t.xp6(2),t.Q6J("ngForOf",n.allItems),t.xp6(1),t.Q6J("ngIf",(null==(r=e.get("ItemName"))?null:r.touched)&&(null==(r=e.get("ItemName"))?null:r.invalid)&&!(null!=(r=n.newQuotationForm.get("lstItemsDetails"))&&r.value[o].DuplicateItemCheck)),t.xp6(1),t.Q6J("ngIf",null==(d=n.newQuotationForm.get("lstItemsDetails"))?null:d.value[o].DuplicateItemCheck),t.xp6(5),t.Q6J("ngClass",t.VKq(44,y,""==(null==(h=n.newQuotationForm.get("lstItemsDetails"))?null:h.value[o].VendorItemName))),t.xp6(2),t.Q6J("ngClass",t.VKq(46,I,(null==(u=e.get("VendorItemName"))?null:u.touched)&&(null==(u=e.get("VendorItemName"))?null:u.invalid))),t.xp6(7),t.Q6J("readonly",n.quotationGuid||null==n.quotationGuid),t.xp6(7),t.Q6J("items",n.lstManufacturers)("closeOnSelect",!0)("searchable",!0)("inputAttrs",t.DdM(48,nt))("notFoundText","No manufacturer found"),t.xp6(7),t.Q6J("ngClass",t.VKq(49,y,""==(null==(m=n.newQuotationForm.get("lstItemsDetails"))?null:m.value[o].PackSize))),t.xp6(2),t.Q6J("ngClass",t.VKq(51,I,(null==(_=e.get("PackSize"))?null:_.touched)&&(null==(_=e.get("PackSize"))?null:_.invalid))),t.xp6(7),t.Q6J("ngClass",t.VKq(53,y,""==(null==(T=n.newQuotationForm.get("lstItemsDetails"))?null:T.value[o].Rate))),t.xp6(2),t.Q6J("maxLength",8)("ngClass",t.VKq(55,I,(null==(x=e.get("Rate"))?null:x.touched)&&(null==(x=e.get("Rate"))?null:x.invalid))),t.xp6(7),t.Q6J("ngClass",t.VKq(57,y,""==(null==(Q=n.newQuotationForm.get("lstItemsDetails"))?null:Q.value[o].Discount))),t.xp6(2),t.Q6J("maxLength",8)("ngClass",t.VKq(59,I,(null==(Z=e.get("Discount"))?null:Z.touched)&&(null==(Z=e.get("Discount"))?null:Z.invalid))),t.xp6(9),t.Q6J("ngClass",t.VKq(61,y,""===(null==(D=n.newQuotationForm.get("lstItemsDetails"))?null:D.value[o].CGST))),t.xp6(2),t.Q6J("maxLength",8)("ngClass",t.VKq(63,I,(null==(A=e.get("CGST"))?null:A.touched)&&(null==(A=e.get("CGST"))?null:A.invalid))),t.xp6(8),t.Q6J("ngClass",t.VKq(65,y,""===(null==(C=n.newQuotationForm.get("lstItemsDetails"))?null:C.value[o].SGST))),t.xp6(2),t.Q6J("maxLength",8)("ngClass",t.VKq(67,I,(null==(b=e.get("SGST"))?null:b.touched)&&(null==(b=e.get("SGST"))?null:b.invalid))),t.xp6(7),t.Q6J("ngClass",t.VKq(69,y,""==(null==(v=n.newQuotationForm.get("lstItemsDetails"))?null:v.value[o].IGST)&&(""==(null==(v=n.newQuotationForm.get("lstItemsDetails"))?null:v.value[o].SGST)||""==(null==(v=n.newQuotationForm.get("lstItemsDetails"))?null:v.value[o].CGST)))),t.xp6(2),t.Q6J("ngClass",t.VKq(71,I,(null==(L=e.get("IGST"))?null:L.touched)&&(null==(L=e.get("IGST"))?null:L.invalid))),t.xp6(7),t.Q6J("readonly",n.quotationGuid||null==n.quotationGuid)("ngClass",null!=(k=n.newQuotationForm.get("DiscountAmount"))&&k.hasError("required")&&n.newQuotationForm.get("DiscountAmount").touched?"is-invalid":""),t.xp6(5),t.Q6J("readonly",n.quotationGuid||null==n.quotationGuid)("ngClass",null!=(R=n.newQuotationForm.get("TotalGSTAmount"))&&R.hasError("required")&&n.newQuotationForm.get("TotalGSTAmount").touched?"is-invalid":""),t.xp6(5),t.Q6J("readonly",n.quotationGuid||null==n.quotationGuid)("ngClass",null!=(M=n.newQuotationForm.get("BuyPrice"))&&M.hasError("required")&&n.newQuotationForm.get("BuyPrice").touched?"is-invalid":""),t.xp6(3),t.Q6J("ngIf",(!n.addItemslist.invalid||n.addItemslist.length>1)&&2!=n.addItemslist.value[o].ApprovalStatus),t.xp6(1),t.Q6J("ngIf",0==n.addItemslist.length||o==n.addItemslist.controls.length-1),t.xp6(1),t.Q6J("ngIf",n.quotationGuid&&n.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase()))}}function He(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",104),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.AddItems())}),t.TgZ(1,"button",107),t._UZ(2,"span",108),t._uU(3," Add item "),t.qZA()()}}function Ke(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",104),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index,a=t.oxw(2);return t.KtG(a.removeTermCondition(n))}),t.TgZ(1,"button",105),t._UZ(2,"span",106),t._uU(3," Remove term Condition "),t.qZA()()}}function Ve(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",104),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.AddTermCondition())}),t.TgZ(1,"button",107),t._UZ(2,"span",108),t._uU(3," Add term Condition "),t.qZA()()}}function Ye(i,s){if(1&i&&(t.ynx(0)(1,70),t.TgZ(2,"div",54)(3,"div",24)(4,"label",110),t._uU(5,"Terms"),t.TgZ(6,"span",111),t._uU(7," *"),t.qZA()(),t._UZ(8,"textarea",112),t.TgZ(9,"span",34),t._uU(10," Terms and Conditions are required! "),t.qZA()()(),t.TgZ(11,"div",96)(12,"div",97),t.YNc(13,Ke,4,0,"div",57),t.YNc(14,Ve,4,0,"div",57),t.qZA()(),t.BQk()()),2&i){const e=s.$implicit,o=s.index,n=t.oxw(2);let a,l;t.xp6(1),t.Q6J("formGroupName",o),t.xp6(5),t.Q6J("ngClass",t.VKq(5,y,""==(null==(a=n.newQuotationForm.get("lstTermCondition"))?null:a.value[o].TermCondition))),t.xp6(2),t.Q6J("ngClass",t.VKq(7,I,(null==(l=e.get("TermCondition"))?null:l.touched)&&(null==(l=e.get("TermCondition"))?null:l.invalid))),t.xp6(5),t.Q6J("ngIf",o>0),t.xp6(1),t.Q6J("ngIf",o==n.addTermConditionlist.controls.length-1)}}function Be(i,s){if(1&i&&(t.TgZ(0,"span",113),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Oqu(e.ShowPdfFile)}}function ze(i,s){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().index,o=t.oxw(2);let n;t.xp6(1),t.hij(" ",null==(n=o.newQuotationForm.get("ListInvoiceDocuments"))?null:n.value[e].OriginalFileName," ")}}function We(i,s){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().index,o=t.oxw(2);let n;t.xp6(1),t.hij(" ",null==(n=o.newQuotationForm.get("ListInvoiceDocuments"))?null:n.value[e].FileName," ")}}function je(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"td")(1,"button",115),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index,a=t.oxw(2),l=t.MAs(30);let r;return a.openBasicModal(l),t.KtG(a.PreviewInvoice(null==(r=a.newQuotationForm.get("ListInvoiceDocuments"))?null:r.value[n].FilePath))}),t._UZ(2,"span",116),t._uU(3," View "),t.qZA(),t.TgZ(4,"button",117),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index,a=t.oxw(2);return t.KtG(a.remove(n))}),t._UZ(5,"span",118),t._uU(6," Delete "),t.qZA()()}}function $e(i,s){if(1&i&&(t.TgZ(0,"tr",114),t.ynx(1,70),t.YNc(2,ze,2,1,"td",11),t.YNc(3,We,2,1,"td",11),t.YNc(4,je,7,0,"td",11),t.BQk(),t.qZA()),2&i){const e=s.index,o=t.oxw(2);let n,a,l;t.xp6(1),t.Q6J("formGroupName",e),t.xp6(1),t.Q6J("ngIf",!(null!=(n=o.newQuotationForm.get("ListInvoiceDocuments"))&&n.value[e].IsDeleted)),t.xp6(1),t.Q6J("ngIf",!(null!=(a=o.newQuotationForm.get("ListInvoiceDocuments"))&&a.value[e].IsDeleted)),t.xp6(1),t.Q6J("ngIf",!(null!=(l=o.newQuotationForm.get("ListInvoiceDocuments"))&&l.value[e].IsDeleted))}}function Xe(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",26)(2,"div",5)(3,"div",27)(4,"div",24)(5,"label",28),t._uU(6,"Supplier name "),t.TgZ(7,"span",29),t._uU(8,"*"),t.qZA()(),t.TgZ(9,"ng-select",30),t.NdJ("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onSupplierDetails(n.newQuotationForm.value.SupplierGuid))}),t.qZA(),t.YNc(10,Ue,3,0,"ng-container",11),t.qZA()(),t.TgZ(11,"div",27)(12,"div",24)(13,"label",28),t._uU(14,"Supplier state"),t.qZA(),t._UZ(15,"input",31),t.qZA()(),t.TgZ(16,"div",27)(17,"div",24)(18,"label",32),t._uU(19,"GSTN No"),t.qZA(),t._UZ(20,"input",33),t.TgZ(21,"span",34),t._uU(22," GSTN no is required!"),t.qZA()()(),t.TgZ(23,"div",27)(24,"div",24)(25,"label",32),t._uU(26,"Address"),t.qZA(),t._UZ(27,"input",35),t.TgZ(28,"span",34),t._uU(29," Address is required!"),t.qZA()()(),t.TgZ(30,"div",27)(31,"div",24)(32,"label",36),t._uU(33,"Delivery location "),t.TgZ(34,"span",29),t._uU(35,"*"),t.qZA()(),t.TgZ(36,"ng-multiselect-dropdown",37),t.NdJ("onSelect",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onchangeToState(n.newQuotationForm.value.lstLocations))})("onSelectAll",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onchangeToState(n.newQuotationForm.value.lstLocation))})("onDeSelect",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onchangeToState(n.newQuotationForm.value.lstLocations))})("onDeSelectAll",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onchangeToState(n.newQuotationForm.value.lstLocation))})("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onClickMultiselect("lstLocations"))}),t.qZA(),t.YNc(37,Le,2,0,"span",38),t.qZA()(),t.TgZ(38,"div",27)(39,"div",24)(40,"label",39),t._uU(41,"Delivery state"),t.qZA(),t.TgZ(42,"ng-multiselect-dropdown",40),t.NdJ("onSelect",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.ondDeleiverystate(n.newQuotationForm.value.lstStates))})("onSelectAll",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.ondDeleiverystate(n.newQuotationForm.value.lstStates))})("onDeSelect",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.ondDeleiverystate(n.newQuotationForm.value.lstStates))})("onDeSelectAll",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.ondDeleiverystate(n.newQuotationForm.value.lstStates))}),t.qZA()()(),t.TgZ(43,"div",27)(44,"div",24)(45,"label",41),t._uU(46,"Center type"),t.qZA(),t.TgZ(47,"ng-multiselect-dropdown",42),t.NdJ("onSelect",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onchangeCenter(n.newQuotationForm.value.CentreType))})("onSelectAll",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onchangeCenter(n.newQuotationForm.value.CentreType))})("onDeSelect",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onchangeCenter(n.newQuotationForm.value.CentreType))})("onDeSelectAll",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onchangeCenter(n.newQuotationForm.value.CentreType))}),t.qZA()()(),t.TgZ(48,"div",27)(49,"div",24)(50,"label",39),t._uU(51,"Center"),t.qZA(),t.TgZ(52,"ng-multiselect-dropdown",43),t.NdJ("onSelect",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onCenterLocation(n.newQuotationForm.value.lstCenters))})("onSelectAll",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onCenterLocation(n.newQuotationForm.value.lstCenters))})("onDeSelect",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onCenterLocation(n.newQuotationForm.value.lstCenters))})("onDeSelectAll",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onCenterLocation(n.newQuotationForm.value.lstCenters))}),t.qZA()()(),t.TgZ(53,"div",27)(54,"div",24)(55,"label",28),t._uU(56,"Supplier type "),t.TgZ(57,"span",29),t._uU(58,"*"),t.qZA()(),t._UZ(59,"input",44),t.qZA()(),t.TgZ(60,"div",27)(61,"div",24)(62,"label",45),t._uU(63,"From date "),t.TgZ(64,"span",29),t._uU(65,"*"),t.qZA()(),t.TgZ(66,"div",46)(67,"input",47,48),t.NdJ("dateSelect",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.onDateSelect(n))})("click",function(){t.CHM(e);const n=t.MAs(68);return t.KtG(n.toggle())}),t.qZA(),t.TgZ(69,"button",49),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(68);let l;return null==(l=t.oxw().newQuotationForm.get("FromDate"))||l.markAsTouched(),t.KtG(n.toggle())}),t._UZ(70,"i",50),t.qZA(),t.TgZ(71,"span",34),t._uU(72," From date is required!"),t.qZA()()()(),t.TgZ(73,"div",27)(74,"div",24)(75,"label",45),t._uU(76,"To date "),t.TgZ(77,"span",29),t._uU(78,"*"),t.qZA()(),t.TgZ(79,"div",46)(80,"input",51,52),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(81);return t.KtG(n.toggle())}),t.qZA(),t.TgZ(82,"button",49),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(81),a=t.oxw();let l;return null==(l=a.newQuotationForm.get("ToDate"))||l.markAsTouched(),t.KtG(a.selectFromDate?n.toggle():"")}),t._UZ(83,"i",50),t.qZA(),t.TgZ(84,"span",34),t._uU(85," To date is required!"),t.qZA()()()(),t.TgZ(86,"div",27)(87,"div",24)(88,"label",32),t._uU(89,"Ref No. "),t.TgZ(90,"span",29),t._uU(91,"*"),t.qZA()(),t._UZ(92,"input",53),t.TgZ(93,"span",34),t._uU(94," Ref no. is required!"),t.qZA()()(),t.TgZ(95,"div",54),t._UZ(96,"hr"),t.qZA()(),t.TgZ(97,"div")(98,"h6",23),t._uU(99,"Item Details"),t.qZA(),t.TgZ(100,"div",55),t.YNc(101,Ee,116,73,"ng-container",56),t.YNc(102,He,4,0,"div",57),t.qZA()(),t.TgZ(103,"div")(104,"h6",23),t._uU(105,"Terms & Conditions"),t.qZA(),t.TgZ(106,"div",58),t.YNc(107,Ye,15,9,"ng-container",56),t.qZA()(),t.TgZ(108,"div",54),t._UZ(109,"hr"),t.qZA(),t.TgZ(110,"div")(111,"h6",23),t._uU(112,"Add Invoice"),t.qZA(),t.TgZ(113,"div",24)(114,"div",59)(115,"label",60),t._uU(116,"Upload Invoice"),t.qZA(),t.TgZ(117,"input",61,62),t.NdJ("change",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.UplodeInvoice(n))}),t.qZA(),t.YNc(119,Be,2,1,"span",63),t.qZA()()(),t.TgZ(120,"div",6)(121,"div",7)(122,"div",8)(123,"div",64)(124,"table",65)(125,"thead")(126,"tr")(127,"th"),t._uU(128,"File type"),t.qZA(),t.TgZ(129,"th"),t._uU(130,"Invoice name"),t.qZA(),t.TgZ(131,"th",66),t._uU(132,"Action"),t.qZA()()(),t.TgZ(133,"tbody"),t.YNc(134,$e,5,4,"tr",67),t.qZA()()()()()()(),t.BQk()}if(2&i){const e=t.oxw();let o,n,a,l,r,d,h,u,m,_,T,x,Q;t.xp6(1),t.Q6J("formGroup",e.newQuotationForm),t.xp6(6),t.Q6J("ngClass",t.VKq(44,y,null==(o=e.newQuotationForm.get("SupplierGuid"))?null:o.invalid)),t.xp6(2),t.Q6J("items",e.supplierDetails)("closeOnSelect",!0)("searchable",!0)("ngClass",t.VKq(46,I,(null==(n=e.newQuotationForm.get("SupplierGuid"))?null:n.hasError("required"))&&(null==(n=e.newQuotationForm.get("SupplierGuid"))?null:n.touched)))("inputAttrs",t.DdM(48,nt)),t.xp6(1),t.Q6J("ngIf",null!=(a=e.newQuotationForm.get("SupplierGuid"))&&a.hasError("required")&&null!=(a=e.newQuotationForm.get("SupplierGuid"))&&a.touched?"is-invalid":""),t.xp6(5),t.Q6J("readonly",e.quotationGuid||null==e.quotationGuid),t.xp6(5),t.Q6J("readonly",e.quotationGuid||null==e.quotationGuid),t.xp6(7),t.Q6J("readonly",e.quotationGuid||null==e.quotationGuid),t.xp6(7),t.Q6J("ngClass",t.VKq(49,y,null==(l=e.newQuotationForm.get("lstLocations"))?null:l.invalid)),t.xp6(2),t.ekj("is-invalid",(null==(r=e.newQuotationForm.get("lstLocations"))?null:r.hasError("required"))&&(null==(r=e.newQuotationForm.get("lstLocations"))?null:r.touched)),t.Q6J("placeholder","Select delivery location")("settings",e.dropdownSettings)("data",e.deliverLocation),t.xp6(1),t.Q6J("ngIf",null!=(d=e.newQuotationForm.get("lstLocations"))&&d.hasError("required")&&null!=(d=e.newQuotationForm.get("lstLocations"))&&d.touched?"is-invalid":""),t.xp6(5),t.Q6J("placeholder","Select delivery state")("settings",e.dropdownDeliveryState)("data",e.deliveryState),t.xp6(5),t.Q6J("placeholder","Select center type")("settings",e.dropdownCenterType)("data",e.centerDetails),t.xp6(5),t.Q6J("placeholder","Select center")("settings",e.dropdownCenter)("data",e.stateList),t.xp6(5),t.Q6J("ngClass",t.VKq(51,y,null==(h=e.newQuotationForm.get("SupplierGuid"))?null:h.invalid)),t.xp6(7),t.Q6J("ngClass",t.VKq(53,y,null==(u=e.newQuotationForm.get("FromDate"))?null:u.invalid)),t.xp6(3),t.Q6J("minDate",e.minDate)("ngClass",null!=(m=e.newQuotationForm.get("FromDate"))&&m.hasError("required")&&e.newQuotationForm.get("FromDate").touched?"is-invalid":""),t.xp6(10),t.Q6J("ngClass",t.VKq(55,y,null==(_=e.newQuotationForm.get("ToDate"))?null:_.invalid)),t.xp6(3),t.Q6J("readonly",!e.selectFromDate)("minDate",e.selectedDate)("ngClass",null!=(T=e.newQuotationForm.get("ToDate"))&&T.hasError("required")&&e.newQuotationForm.get("ToDate").touched?"is-invalid":""),t.xp6(10),t.Q6J("ngClass",t.VKq(57,y,null==(x=e.newQuotationForm.get("QuotationRefNo"))?null:x.invalid)),t.xp6(2),t.Q6J("maxlength",50)("ngClass",null!=(Q=e.newQuotationForm.get("QuotationRefNo"))&&Q.hasError("required")&&e.newQuotationForm.get("QuotationRefNo").touched?"is-invalid":""),t.xp6(9),t.Q6J("ngForOf",e.addItemslist.controls),t.xp6(1),t.Q6J("ngIf",0==e.addItemslist.length),t.xp6(5),t.Q6J("ngForOf",e.addTermConditionlist.controls),t.xp6(12),t.Q6J("ngIf",e.isFileUplodad),t.xp6(12),t.Q6J("width",20),t.xp6(3),t.Q6J("ngForOf",e.InvoiceDocuments.controls)}}function to(i,s){1&i&&t._UZ(0,"app-shimmers",119),2&i&&t.Q6J("type","form-2")}function eo(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",120),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.saveQuotationsDetails())}),t._uU(1,"Save"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.newQuotationForm.invalid||0==e.addItemslist.length)}}function oo(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",120),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.saveQuotationsDetails())}),t._uU(1,"Update"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.newQuotationForm.invalid||!e.FormChanged||0==e.addItemslist.length)}}function no(i,s){1&i&&(t.TgZ(0,"button",149),t._UZ(1,"span",150),t.qZA())}function io(i,s){1&i&&(t.TgZ(0,"button",151),t._UZ(1,"span",152),t.qZA())}function ao(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",121)(1,"h5",122),t._uU(2,"Change Tax Details"),t.qZA(),t.TgZ(3,"button",123),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))}),t.qZA()(),t.TgZ(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"div",64)(9,"ngx-datatable",124,125),t._UZ(11,"ngx-datatable-column",126)(12,"ngx-datatable-column",127)(13,"ngx-datatable-column",128)(14,"ngx-datatable-column",129)(15,"ngx-datatable-column",130)(16,"ngx-datatable-column",131)(17,"ngx-datatable-column",132)(18,"ngx-datatable-column",133)(19,"ngx-datatable-column",134)(20,"ngx-datatable-column",135)(21,"ngx-datatable-column",136)(22,"ngx-datatable-column",137)(23,"ngx-datatable-column",138)(24,"ngx-datatable-column",139)(25,"ngx-datatable-column",140)(26,"ngx-datatable-column",141)(27,"ngx-datatable-column",142)(28,"ngx-datatable-column",143),t.TgZ(29,"ngx-datatable-column",144),t.YNc(30,no,2,0,"ng-template",145),t.qZA(),t._UZ(31,"ngx-datatable-column",146)(32,"ngx-datatable-column",147),t.TgZ(33,"ngx-datatable-column",148),t.YNc(34,io,2,0,"ng-template",145),t.qZA()()()()()()()}if(2&i){const e=t.oxw();t.xp6(9),t.Q6J("scrollbarH",!0)("rows",e.rows)("loadingIndicator",e.loadingIndicator)("columnMode",e.ColumnMode.force)("footerHeight",50)("limit",10)}}function lo(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",121)(1,"h5",122),t._uU(2,"Change Tax Percentage"),t.qZA(),t.TgZ(3,"button",123),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))}),t.qZA()(),t.TgZ(4,"div",153)(5,"div",5)(6,"div",54)(7,"div",24)(8,"label",73),t._uU(9,"Item Name"),t.qZA(),t._UZ(10,"input",154),t.qZA()(),t.TgZ(11,"div",54)(12,"div",24)(13,"label",73),t._uU(14,"Old Tax Percentage"),t.qZA(),t._UZ(15,"input",155),t.qZA()(),t.TgZ(16,"div",54)(17,"div",24)(18,"label",73),t._uU(19,"New Tax Percentage"),t.qZA(),t._UZ(20,"input",156),t.qZA()()()(),t.TgZ(21,"div",157)(22,"button",158),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))}),t._uU(23,"Close"),t.qZA(),t.TgZ(24,"button",159),t._uU(25,"Change Tax"),t.qZA()()}}function so(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",121)(1,"h5",122),t._uU(2,"Add All Items"),t.qZA(),t.TgZ(3,"button",123),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))}),t.qZA()(),t.TgZ(4,"div",153)(5,"div",5)(6,"div",54)(7,"div",24)(8,"label",73),t._uU(9,"Machine"),t.qZA(),t._UZ(10,"input",160),t.qZA()()()(),t.TgZ(11,"div",157)(12,"button",158),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))}),t._uU(13,"Cancel"),t.qZA(),t.TgZ(14,"button",159),t._uU(15,"Save"),t.qZA()()}}function ro(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",121)(1,"h5",122),t._uU(2,"Preview invoice"),t.qZA(),t.TgZ(3,"button",123),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))}),t.qZA()(),t.TgZ(4,"div",153)(5,"div",161)(6,"div",162)(7,"div",163)(8,"ngx-doc-viewer",164)(9,"div"),t._uU(10,"Loading"),t.qZA()()()()(),t._UZ(11,"div",5),t.qZA(),t.TgZ(12,"div",157)(13,"button",158),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))}),t._uU(14,"Cancel"),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(8),t.Q6J("url",e.Document)}}function uo(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",121)(1,"h5",122),t._uU(2,"Cancel Quotation Item"),t.qZA(),t.TgZ(3,"button",123),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))}),t.qZA()(),t.TgZ(4,"div",153)(5,"div",5)(6,"div",54)(7,"div",24)(8,"label",165),t._uU(9,"Are you sure do you want to Cancel the "),t.TgZ(10,"strong"),t._uU(11),t.qZA(),t._uU(12," Item?"),t.qZA()()(),t.TgZ(13,"div",54)(14,"div",166)(15,"label",165),t._uU(16,"Reason:"),t.qZA(),t.TgZ(17,"input",167),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.ItemCancelReason=n)}),t.qZA()()()()(),t.TgZ(18,"div",157)(19,"button",158),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))}),t._uU(20," No "),t.qZA(),t.TgZ(21,"button",168),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("by: close icon"))})("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.UpdateQuotationCancel())}),t._uU(22,"Yes"),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(11),t.Oqu(e.QuotationItem),t.xp6(6),t.Q6J("ngModel",e.ItemCancelReason)}}let it=(()=>{class i{constructor(e,o,n,a,l,r,d,h,u){this.modalService=e,this.quotationService=o,this.fb=n,this.router=a,this.allItemsService=l,this.calendar=r,this.active=d,this.authservice=h,this.grnService=u,this.rows=[],this.temp=[],this.loadingIndicator=!0,this.ColumnMode=U.hq,this.newQuotationForm={},this.supplierDetails=[],this.supplierFilter=[],this.deliveryState=[],this.centerDetails=[],this.deliverLocation=[],this.MachineDetails=[],this.allItems=[],this.Keyword="",this.itemOrder="",this.sort="",this.pageNumber=1,this.rowCount=40,this.modelChanged=new z.x,this.supplierType=[],this.itemName="",this.lstItemsDetails={},this.lstTermCondition={},this.stateList=[],this.allItemsList=[],this.quotationsList=[],this.editAllItems=[],this.removeItemsList=[],this.termsConditionList=[],this.removetermConditionsList=[],this.isdisable=!1,this.FormChanged=!1,this.deliveryLocationFilters=[],this.hideItems=!0,this.igstEntered=!1,this.dropdownSettings={},this.dropdownDeliveryState={},this.dropdownCenterType={},this.dropdownCenter={},this.removeLocations=[],this.SpinnerCheck=!1,this.IsActive=!0,this.combinedArray=[],this.lstManufacturers=[],this.ListInvoiceDocuments={},this.fetch(_=>{this.temp=_,this.rows=_}),this.subscriptions=new W.w0,this.modelChanged.pipe((0,j.b)(1e3)).subscribe(_=>{this.Keyword=_,this.getAllItemDetails()});const m=this.calendar.getToday();this.minDate={year:m.year,month:m.month,day:m.day}}ngOnInit(){this.quotationGuid=this.active.snapshot.paramMap.get("QuotationGuid"),this.userGuid=localStorage.getItem("UserGuid"),this.getSupplierType(),this.getpurchaseorderPostDefaults(),this.inItForm(),this.getManufacturers(),this.newQuotationForm.valueChanges.pipe((0,ve.x)(),(0,qe.p)(500)).subscribe(e=>{this.FormChanged=!0}),this.InvoiceDocuments.removeAt(0),this.dropdownSettings={singleSelection:!1,idField:"CenterLocationGuid",textField:"CenterLocationName",enableCheckAll:!1,itemsShowLimit:2,allowSearchFilter:!0},this.dropdownDeliveryState={singleSelection:!1,idField:"StateGuid",textField:"State",enableCheckAll:!1,itemsShowLimit:2,allowSearchFilter:!1,disabledField:"StateGuid"},this.dropdownCenterType={singleSelection:!1,idField:"CenterTypeGuid",textField:"CenterType",enableCheckAll:!1,itemsShowLimit:2,allowSearchFilter:!1,disabledField:"CenterTypeGuid"},this.dropdownCenter={singleSelection:!1,idField:"CenterGuid",textField:"CenterName",enableCheckAll:!1,itemsShowLimit:2,allowSearchFilter:!1,disabledField:"CenterGuid"}}fetch(e){const o=new XMLHttpRequest;o.open("GET","assets/data/quotations.json"),o.onload=()=>{e(JSON.parse(o.response))},o.send()}updateFilter(e){const o=e.target.value.toLowerCase(),n=this.temp.filter(function(a){return-1!==a.itemName.toLowerCase().indexOf(o)||!o});this.rows=n,this.table.offset=0}openXlModal(e){this.modalService.open(e,{size:"md"}).result.then(o=>{console.log("Modal closed"+o)}).catch(o=>{})}openLgModal(e){this.modalService.open(e,{size:"xl"}).result.then(o=>{console.log("Modal closed"+o)}).catch(o=>{})}openBasicModal(e){this.modalService.open(e,{size:"md"}).result.then(o=>{console.log("Modal closed"+o)}).catch(o=>{})}inItForm(){this.newQuotationForm=this.fb.group({UserGuid:null,QuotationGuid:null,SupplierGuid:[null,[c.kI.required]],StateGuid:[null],GSTNNO:[""],Vendoraddress:[""],supplierType:[null],lstStates:[null],CentreType:[null],lstCenters:[null],lstLocations:[null,[c.kI.required]],FromDate:[null,[c.kI.required]],ToDate:[null,[c.kI.required]],QuotationRefNo:[null,[c.kI.required]],ApprovalStatus:[""],lstItemsDetails:this.fb.array([this.fb.group({ItemGuid:[""],PackSize:["",[c.kI.required]],Rate:["",[c.kI.required]],Discount:["",[c.kI.required]],IGST:["",[c.kI.required]],CGST:["",[c.kI.required]],SGST:["",[c.kI.required]],DiscountAmount:["",[c.kI.required]],TotalGSTAmount:["",[c.kI.required]],BuyPrice:["",[c.kI.required]],CatalogNo:[""],Category:[""],HSNCode:[""],ItemName:["",[c.kI.required]],VendorItemName:["",[c.kI.required]],ItemNo:[""],Machine:[""],MajorUnitName:[""],MinorUnitName:[""],Manufacturer:[null],ManufactureGuid:[null],ItemCategoryName:[""],QuotationId:[null],ISDeleted:[!1],DuplicateItemCheck:[""],ItemQuotationGuid:[""],ItemCancel:[""],ApprovalStatus:[""]})]),ListInvoiceDocuments:this.fb.array([this.fb.group({FileName:[""],File:[""],ItemName:[""],FilePath:[""],OriginalFileName:[""],FileDate:[""],NewFileName:[""],IsDeleted:[!1]})]),lstTermCondition:this.fb.array([this.fb.group({TermCondition:["",[c.kI.required]],Id:[null],IsDeleted:[!1]})])})}quotationFormReset(){this.newQuotationForm.reset(),this.FormChanged=!1,this.addItemslist.clear(),this.addTermConditionlist.clear(),this.InvoiceDocuments.clear(),this.AddItems(),this.AddTermCondition(),this.getAllQuotationDetails()}get addItemslist(){return this.newQuotationForm.get("lstItemsDetails")}get addTermConditionlist(){return this.newQuotationForm.get("lstTermCondition")}get InvoiceDocuments(){return this.newQuotationForm.get("ListInvoiceDocuments")}AddTermCondition(){this.addTermConditionlist.push(this.fb.group({TermCondition:["",[c.kI.required]],Id:[null],IsDeleted:[!1]}))}removeTermCondition(e){this.removetermConditionsList.map(o=>{o.Id==this.addTermConditionlist.value[e].Id&&(o.IsDeleted=!0)}),this.addTermConditionlist.removeAt(e)}removeItems(e){this.removeItemsList.map(o=>{o.ItemGuid==this.addItemslist.value[e].ItemGuid&&(o.ISDeleted=!0)}),this.addItemslist.removeAt(e)}AddItems(){this.addItemslist.push(this.fb.group({ItemGuid:[""],PackSize:["",[c.kI.required]],Rate:["",[c.kI.required]],Discount:["",[c.kI.required]],IGST:["",[c.kI.required]],CGST:["",[c.kI.required]],SGST:["",[c.kI.required]],DiscountAmount:["",[c.kI.required]],TotalGSTAmount:["",[c.kI.required]],BuyPrice:["",[c.kI.required]],CatalogNo:[""],Category:[""],HSNCode:[""],ItemName:["",[c.kI.required]],VendorItemName:["",[c.kI.required]],ItemNo:[""],Machine:[""],MajorUnitName:[""],MinorUnitName:[""],Manufacturer:[""],ManufactureGuid:[null],ItemCategoryName:[""],QuotationId:[null],ISDeleted:[!1],DuplicateItemCheck:[""],ItemQuotationGuid:[""],ItemCancel:[""],ApprovalStatus:[""]}))}saveQuotationsDetails(){if(this.quotationGuid){this.removeItemsList=this.removeItemsList.filter(r=>1==r.ISDeleted),this.addItemslist.value.push(...this.removeItemsList);let l=this.InvoiceDocumentsList.filter(r=>1==r.IsDeleted);this.InvoiceDocuments.value.push(...l)}this.removetermConditionsList=this.removetermConditionsList.filter(l=>1==l.IsDeleted),this.addTermConditionlist.value.push(...this.removetermConditionsList);const e=new Date;e.setFullYear(this.newQuotationForm.value.FromDate.year,this.newQuotationForm.value.FromDate.month-1,this.newQuotationForm.value.FromDate.day),this.newQuotationForm.value.FromDate=e.toISOString();const o=new Date;o.setFullYear(this.newQuotationForm.value.ToDate.year,this.newQuotationForm.value.ToDate.month-1,this.newQuotationForm.value.ToDate.day),this.newQuotationForm.value.ToDate=o.toISOString();const n=this.newQuotationForm.value;this.quotationService.saveQuotationsData({QuotationGuid:n.QuotationGuid,SupplierGuid:n.SupplierGuid,UserGuid:this.userGuid,lstItemsDetails:n.lstItemsDetails,lstLocations:n.lstLocations,lstTermCondition:n.lstTermCondition,FromDate:n.FromDate,ToDate:n.ToDate,QuotationRefNo:n.QuotationRefNo,QuotationLogData:0==this.combinedArray.length?null:this.combinedArray,LstInvioceDocuments:this.InvoiceDocuments.value}).subscribe(l=>{this.router.navigateByUrl("/quotations")})}getAllItemDetails(){this.allItems=[],this.Keyword=null==this.Keyword||null==this.Keyword?this.Keyword||"":this.Keyword,""!=this.Keyword&&(this.SpinnerCheck=!0),this.quotationService.getAllItems(this.pageNumber,this.rowCount,this.Keyword,this.itemOrder,this.sort,this.IsActive).subscribe(e=>{this.allItems=e.Result.getAllItemsResponses,this.SpinnerCheck=!1,""!=this.Keyword?this.allItems=this.allItems.filter((o,n,a)=>n===a.findIndex(l=>(l.ItemGuid===o.ItemGuid||l.ItemName===o.ItemName)&&0==o.IsDeleted)&&2===o.ApprovalStatus):this.editAllItems=this.allItems.filter((o,n,a)=>n===a.findIndex(l=>(l.ItemGuid===o.ItemGuid||l.ItemName===o.ItemName)&&0==o.IsDeleted)&&2===o.ApprovalStatus)})}getSupplierType(){this.quotationService.getSupplierPostDefaults().subscribe(e=>{this.supplierType=e.Result.SupplierType,this.supplierType=this.supplierType.filter(o=>"Category"==o.Type)})}getpurchaseorderPostDefaults(){let e=this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())&&"00000000-0000-0000-0000-000000000000"==this.authservice.LoggedInUser.LOCATIONSGUID?"00000000-0000-0000-0000-000000000000":this.authservice.LoggedInUser.LOCATIONSGUID.split(",");this.shimmerVisible=!0,this.quotationService.getQuotationPostDefaults(e).subscribe(o=>{this.defaultpurchaseDetails=o,this.supplierDetails=o.Result.LstQuotationSupplierType,this.supplierFilter=this.supplierDetails.sort((n,a)=>n.SupplierName?.trim().localeCompare(a.SupplierName.trim())),this.deliveryState=o.Result.LstQuotationStateType,this.centerDetails=o.Result.LstQuotationCenterTypeResponcse,this.deliverLocation=o.Result.LstQuotationCenterLocationType,this.MachineDetails=o.Result.LstQuotationMachineType,this.stateList=o.Result.LstQuotationStateDetailsType,null!=this.quotationGuid&&(this.getAllQuotationDetails(),this.getAllItemDetails()),this.shimmerVisible=!1})}getAllQuotationDetails(){this.shimmerVisible=!0,this.quotationService.getQuotationsByGuid(this.quotationGuid).subscribe(e=>{this.quotationsList=e.getQuotationsResponses,this.supplierFilter=this.supplierDetails.filter(o=>o.SupplierGuid==this.quotationsList[0].SupplierGuid),this.termsConditionList=e.getTermsConditions,this.InvoiceDocumentsList=e.listinvoiceDocuments,this.shimmerVisible=!1,this.getQuotationData(),this.addItemslist.value.forEach(o=>{this.removeItemsList.push(o)}),this.addTermConditionlist.value.forEach(o=>{this.removetermConditionsList.push(o)})},e=>{this.shimmerVisible=!1})}getQuotationData(){this.hideItems=!1,this.addItemslist.clear(),this.addTermConditionlist.clear(),this.quotationsList=this.quotationsList.filter((u,m,_)=>m===_.findIndex(x=>x.ItemGuid===u.ItemGuid||x.ItemName===u.ItemName));const e=new Date(this.quotationsList[0].FromDate),o=new Date(this.quotationsList[0].ToDate);this.minDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()};const n=this.quotationsList[0].LocationGuids.split(",").filter((u,m,_)=>_.indexOf(u)===m),a=this.deliverLocation.filter(u=>n.some(m=>u.CenterLocationGuid.toLowerCase()===m.trim().toLowerCase())),l=a.map(u=>this.stateList.filter(m=>m.Centertype===u.CenterType&&m.CenterGuid===u.CenterGuid)).flat(),r=a.map(u=>this.deliveryState.filter(m=>m.StateGuid===u.StateGuid)).flat(),d=l.map(u=>this.centerDetails.filter(m=>m.CenterType===u.Centertype)).flat();this.ApprovalStatus=this.quotationsList[0].ApprovalStatus,this.newQuotationForm.patchValue({UserGuid:this.userGuid,QuotationGuid:this.quotationGuid,SupplierGuid:this.quotationsList[0].SupplierGuid,StateGuid:this.quotationsList[0].SupplierStateName,GSTNNO:this.quotationsList[0].GSTNNo,Vendoraddress:this.quotationsList[0].SupplierAddress,lstStates:r,CentreType:d,lstCenters:l,lstLocations:a,FromDate:{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()},ToDate:{year:o.getFullYear(),month:o.getMonth()+1,day:o.getDate()},QuotationRefNo:this.quotationsList[0].QuotationRefNo,supplierType:this.quotationsList[0].SupplierTypeName},{emitEvent:!0}),this.FormChanged=!1,this.quotationsList.forEach(u=>{this.addItemslist.push(this.fb.group({ItemGuid:u.ItemGuid,PackSize:u.PackSize,Rate:[u.Rate||"",c.kI.required],Discount:[u.DiscountPer||0,c.kI.required],IGST:u.IGSTPer,CGST:[u.CGSTPer||0,c.kI.required],SGST:[u.SGSTPer||0,c.kI.required],DiscountAmount:u.DiscountAmt,TotalGSTAmount:u.GSTAmount,Manufacturer:u.ManufactureName,ItemName:u.ItemName,QuotationId:u.QuotationId,Machine:u.MachineName,BuyPrice:u.BuyPrice,VendorItemName:u.VendorItemName,ManufactureGuid:u.ManufactureGuid,ItemQuotationGuid:u.QuotationGuid,ItemCancel:u.ItemCancel,ApprovalStatus:u.ApprovalStatus}))}),this.termsConditionList.forEach(u=>{this.addTermConditionlist.push(this.fb.group({TermCondition:[u.TermsCondition||"",c.kI.required],Id:u.Id,ISDeleted:0}))}),this.InvoiceDocumentsList.forEach(u=>{this.InvoiceDocuments.push(this.fb.group({FileName:u.FileName,FilePath:u.FilePath,OriginalFileName:u.OriginalFileName,Id:u.Id,IsDeleted:u.IsDeleted,QuotationNo:u.QuotationNo}))}),this.removeLocations=this.newQuotationForm.get("lstLocations")?.value,this.combinedArray={quotationsList:this.quotationsList,termsConditionList:this.termsConditionList}}onSupplierDetails(e){null!=e?(this.supplierFilter=this.defaultpurchaseDetails.Result.LstQuotationSupplierType.filter(o=>o.SupplierGuid==e),this.newQuotationForm.patchValue({StateGuid:this.supplierFilter[0].State,GSTNNO:this.supplierFilter[0].GSTNo,Vendoraddress:this.supplierFilter[0].HouseNo+=","+this.supplierFilter[0].SupplierAddress,supplierType:this.supplierFilter[0].SupplierTypeName},{emitEvent:!0}),this.FormChanged=!0):this.newQuotationForm.patchValue({StateGuid:"",GSTNNO:"",Vendoraddress:"",supplierType:""})}ondDeleiverystate(e){e.length>0?(this.stateGuid=e[0].StateGuid,this.stateList=[],e.forEach(o=>{let n=this.defaultpurchaseDetails.Result.LstQuotationStateDetailsType.filter(a=>a.StateGuid==o.StateGuid);this.stateList.push(...n)})):this.stateList=this.defaultpurchaseDetails.Result.LstQuotationStateDetailsType}onCenterLocation(e){e.length>0?(this.deliverLocation=[],e.forEach(o=>{let n=this.defaultpurchaseDetails.Result.LstQuotationCenterLocationType.filter(a=>a.CenterGuid==o.CenterGuid&&a.StateGuid==this.stateGuid);this.deliverLocation.push(...n)})):this.deliverLocation=this.defaultpurchaseDetails.Result.LstQuotationCenterLocationType}onchangeCenter(e){this.stateList=e.length>0?this.defaultpurchaseDetails.Result.LstQuotationStateDetailsType.filter(o=>o.Centertype==e[0].CenterType&&o.StateGuid==this.stateGuid):this.defaultpurchaseDetails.Result.LstQuotationStateDetailsType}onchangeToState(e){if(e.length>0){this.hideItems=!1;let o=[],n=[],a=[],l=[],r=[],d=[],h=[],u=[];this.deliveryLocationFilters=[],e.forEach(m=>{o=this.defaultpurchaseDetails.Result.LstQuotationCenterLocationType.filter(_=>_.CenterLocationGuid==m.CenterLocationGuid),o.forEach(_=>{l=this.defaultpurchaseDetails.Result.LstQuotationStateDetailsType.filter(T=>T.Centertype==_.CenterType&&T.CenterGuid==_.CenterGuid),n=this.defaultpurchaseDetails.Result.LstQuotationStateType.filter(T=>T.StateGuid==_.StateGuid),a.push(...n),r.push(...l),this.deliveryState=Array.from(new Set(a)),this.stateList=r}),r.forEach(_=>{d=this.centerDetails.filter(T=>T.CenterType==_.Centertype),h.push(...d),u=Array.from(new Set(h))}),this.newQuotationForm.patchValue({lstStates:this.deliveryState||"",lstCenters:r||"",CentreType:u||""},{emitEvent:!0}),this.FormChanged=!0})}else this.newQuotationForm.patchValue({lstStates:"",lstCenters:"",CentreType:""}),this.deliveryState=this.defaultpurchaseDetails.Result.LstQuotationStateType,this.stateList=this.defaultpurchaseDetails.Result.LstQuotationStateDetailsType,this.hideItems=!0;null!=this.quotationGuid&&this.removeLocations.length>e.length&&(this.newQuotationForm.value.lstLocations=this.removeLocations.map(o=>({...o,LocationDeleted:!e.some(n=>n.CenterLocationGuid===o.CenterLocationGuid)}))),0===e.length&&(this.removeLocations=this.removeLocations.map(o=>({...o,LocationDeleted:!0}))),1===this.removeLocations.length&&1===e.length&&(this.removeLocations.push(...e),this.newQuotationForm.value.lstLocations=this.removeLocations)}changeSearch(e,o){this.modelChanged.next(e.target.value),this.addItemslist.at(o).patchValue({Rate:"",Discount:"",CGST:"",SGST:"",TotalGSTAmount:"",DiscountAmount:"",IGST:"",Manufacturer:"",PackSize:"",BuyPrice:"",Machine:"",ManufactureGuid:""},{emitEvent:!0})}ItemSearch(e,o){this.isdisable=!1,this.allItemsList=this.allItems.filter(a=>a.ItemGuid==e.ItemGuid&&a.ItemName==e.ItemName),this.gstNumber=e.GSTTax,this.addItemslist.value.findIndex((a,l)=>a.ItemGuid==e.ItemGuid&&l!=this.addItemslist.length-1)>=0?(this.addItemslist.at(o).patchValue({ItemName:"",ItemGuid:""}),this.addItemslist.value[o].DuplicateItemCheck=!0):this.addItemslist.at(o).patchValue({ItemGuid:e.ItemGuid,PackSize:Number(e.PackSize),CatalogNo:e.CatalogNo,Category:e.Category,HSNCode:e.HSNCode,ItemName:e.ItemName,ItemNo:e.ItemNo,Machine:e.Machine,MajorUnitName:e.MajorUnitName,MinorUnitName:e.MinorUnitName,Manufacturer:e.Manufacturer,ItemCategoryName:e.Category,ManufactureGuid:e.ManfactureGuid},{emitEvent:!0}),this.allItems=this.allItemsList?.filter(a=>a.ItemGuid!=e.ItemGuid&&a.ItemName!=e.ItemName)}changeRate(e,o){let n=0,r=0,d=0;const h=this.addItemslist.at(o),u=this.newQuotationForm.get("lstItemsDetails")?.value[o],m=parseFloat(u.Rate),_=parseFloat(u.CGST)||0,T=_>100?Math.floor(_/10):_;let x=u.SGST||0;const Q=x>100?Math.floor(x/10):x,Z=parseFloat(u.Discount)||0,D=Z>100?Math.floor(Z/10):Z;n=Z>0?m*D/100:0;const A=Z>0?m-m*D/100:0;r=A+0;const C=u.IGST||"";if(d=C>100?Math.floor(C/10):C,0!=T&&0!=Q&&T<=50&&Q<=50){const b=T+Number(Q),v=A?b*A/100:b*m/100;r=A?A+v:v+m,h.patchValue({TotalGSTAmount:v||0,DiscountAmount:n||0,IGST:0!=Q?0:b||0,BuyPrice:r||0,SGST:0==Q?"":Q},{emitEvent:!0})}else{const b=T+Q,v=b>0?A?Number(b)*A/100:Number(b)*m/100:A?Number(d)*A/100:Number(d)*m/100;r=A?A+v:v+m,h.patchValue({TotalGSTAmount:v||0,DiscountAmount:n||0,IGST:this.quotationGuid&&0==this.addItemslist.value[o].SGST&&0==this.addItemslist.value[o].CGST||""==this.addItemslist.value[o].SGST&&""==this.addItemslist.value[o].CGST||0==this.addItemslist.value[o].SGST&&0==this.addItemslist.value[o].CGST?this.addItemslist.value[o].IGST:0,BuyPrice:r||0},{emitEvent:!0})}(Z>100||_>50||x>50)&&h.patchValue({Discount:Z>100?Math.floor(Z/10):Z,CGST:_>50?Math.floor(_/10):_,SGST:x>50?Math.floor(x/10):x})}changeIgst(e){const o=this.addItemslist.at(e),n=this.newQuotationForm.get("lstItemsDetails")?.value[e],a=n.IGST||0,l=a>100?Math.floor(a/10):a,r=parseFloat(n.Rate),d=parseFloat(n.Discount)||0,h=d>0?r-r*d/100:0,u=h>0?h*l/100:l*r/100,m=d>0?r-r*d/100:0;o.patchValue({IGST:l||"",CGST:0,SGST:0,TotalGSTAmount:u||0,BuyPrice:(m>0?m+m*l/100:r+u)||0})}onDateSelect(e){this.selectFromDate=e,this.selectedDate=e,this.newQuotationForm.patchValue({ToDate:""})}restrictCharectors(e){e.key.match(/[0-9]/g)||e.preventDefault()}restrictCharectorsInTax(e){e.key.match(/[0-9.]/g)||e.preventDefault()}onClickMultiselect(e){this.newQuotationForm.get(e)?.markAsTouched()}getManufacturers(){this.allItemsService.getItemsDefaults().subscribe(e=>{this.lstManufacturers=e.Result.getManufactures,this.shimmerVisible=!1},e=>{this.shimmerVisible=!1})}changeManufacture(e,o){this.addItemslist.at(o).patchValue(null==e?{ManufactureGuid:null,Manufacturer:null,PackSize:""}:{ManufactureGuid:e.ManufactureGuid,Manufacturer:e.ManufactureName,PackSize:""},{emitEvent:!1})}UplodeInvoice(e){if(this.FormChanged=!0,this.fileToUpload=e.srcElement.files[0],!be.includes(["application/pdf","application/msword","application/docx","application/doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],e.target.files[0]?.type)){const l=document.getElementById("upload-resume");return l&&(l.value=""),this.isFileUplodad=!0,void(this.ShowPdfFile="Please upload pdf, doc, docx file only!")}const n=new FormData;var a=this.fileToUpload.name;a=a.substring(0,a.lastIndexOf(".")),n.append("File",this.fileToUpload,this.fileToUpload.name),n.append("FileName","".concat(this.fileToUpload.name)),this.grnService.Uploadinvoice(n).subscribe(l=>{this.isFileUplodad=!1,this.InvoiceDocument=l.result,this.FileName=this.fileToUpload.name,this.File="null",this.FilePath=l.result,this.OriginalFileName=this.fileToUpload.type,this.AddInvoice()},l=>{})}PreviewInvoice(e){this.Document=e}onRemoveFile(){document.getElementById("upload-resume").value=""}AddInvoice(){this.InvoiceDocuments.push(this.fb.group({FileName:this.FileName,File:this.File,FilePath:this.FilePath,OriginalFileName:this.OriginalFileName}))}remove(e){this.FormChanged=!0;const o=document.getElementById("upload-resume");o&&(o.value=""),""!=this.quotationGuid&&this.InvoiceDocumentsList?.map(n=>{n.Id==this.InvoiceDocuments.value[e].Id&&(n.IsDeleted=!0)}),this.InvoiceDocuments.removeAt(e)}selectQuotation(e){this.QuotationItem=e?.ItemName,this.ItemquotationGuid=e?.ItemQuotationGuid}UpdateQuotationCancel(){this.quotationService.UpdateQuotationItemCancel({QuotationGuid:this.ItemquotationGuid,UserGuid:this.userGuid,CancelReason:this.ItemCancelReason,IsCancel:!0}).subscribe(o=>{this.ItemquotationGuid="",this.getAllQuotationDetails()},o=>{})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.FF),t.Y36(X.G),t.Y36(c.qu),t.Y36(w.F0),t.Y36(ye.m),t.Y36(q.vL),t.Y36(w.gz),t.Y36(tt.$),t.Y36(Qe.z))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-new-quotation"]],viewQuery:function(e,o){if(1&e&&t.Gf(U.nE,5),2&e){let n;t.iGM(n=t.CRH())&&(o.table=n.first)}},features:[t._Bn([{provide:q.NG,useClass:$.k}])],decls:33,vars:10,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/quotations"],["class","breadcrumb-item active","aria-current","page",4,"ngIf"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],["class","card-title",4,"ngIf"],["class","mb-3",4,"ngIf"],[4,"ngIf"],[3,"type",4,"ngIf"],[1,"card-footer"],[1,"col-sm-12","text-end"],["type","button",1,"btn","btn-secondary","me-2",3,"disabled","click"],["type","button","class","btn btn-primary submit",3,"disabled","click",4,"ngIf"],["rowFullView",""],["changeTax",""],["machine",""],["previewItem",""],["CancelQuotation",""],["aria-current","page",1,"breadcrumb-item","active"],[1,"card-title"],[1,"mb-3"],["for","purchaseOrderNo",1,"form-label"],[3,"formGroup"],[1,"col-12","col-sm-6","col-md-4","col-xl-3"],["for","machineName",1,"form-label"],[3,"ngClass"],["bindValue","SupplierGuid","bindLabel","SupplierName","placeholder","Select supplier name","formControlName","SupplierGuid",3,"items","closeOnSelect","searchable","ngClass","inputAttrs","change"],["type","text","id","manufacturerCatalogNo","placeholder","Enter state name.","formControlName","StateGuid",1,"form-control",3,"readonly"],["for","manufacturerCatalogNo",1,"form-label"],["type","text","id","manufacturerCatalogNo","placeholder"," Enter GSTN no.","formControlName","GSTNNO",1,"form-control",3,"readonly"],[1,"invalid-feedback"],["type","text","id","manufacturerCatalogNo","placeholder","Enter address","formControlName","Vendoraddress",1,"form-control",3,"readonly"],["for","purchasedUnit",1,"form-label"],["formControlName","lstLocations",3,"placeholder","settings","data","onSelect","onSelectAll","onDeSelect","onDeSelectAll","click"],["class","text-danger form-error-message",4,"ngIf"],["for","purchasedUnit",1,"form-label","d-flex","justify-content-between"],["formControlName","lstStates",3,"placeholder","settings","data","onSelect","onSelectAll","onDeSelect","onDeSelectAll"],["for","manufacturerName",1,"form-label","d-flex","justify-content-between"],["formControlName","CentreType",3,"placeholder","settings","data","onSelect","onSelectAll","onDeSelect","onDeSelectAll"],["formControlName","lstCenters",3,"placeholder","settings","data","onSelect","onSelectAll","onDeSelect","onDeSelectAll"],["placeholder","Select supplier type","name","dp","readonly","","formControlName","supplierType",1,"form-control"],["for","itemExpiryDate",1,"form-label"],[1,"input-group"],["placeholder","dd-mm-yyyy","name","dp","readonly","","formControlName","FromDate","ngbDatepicker","",1,"form-control","datepicker",3,"minDate","ngClass","dateSelect","click"],["d","ngbDatepicker"],["type","button",1,"input-group-text",3,"click"],[1,"feather","icon-calendar","icon-md","text-muted"],["placeholder","dd-mm-yyyy","name","dp","formControlName","ToDate","ngbDatepicker","",1,"form-control","datepicker",3,"readonly","minDate","ngClass","click"],["d1","ngbDatepicker"],["type","text","id","manufacturerCatalogNo","placeholder","Enter Ref No.","formControlName","QuotationRefNo",1,"form-control",3,"maxlength","ngClass"],[1,"col-sm-12"],["formArrayName","lstItemsDetails",1,"row"],[4,"ngFor","ngForOf"],["class","mb-3",3,"click",4,"ngIf"],["formArrayName","lstTermCondition",1,"row"],[1,"mb-3","col-md-6"],["for","itemName",1,"mb-2"],["type","file","id","upload-resume","fileToUpload","","accept",".docx, .doc, .pdf, application/pdf","placeholder","Enter consumption unit",1,"form-control",3,"change"],["fileInput",""],["class","text-danger",4,"ngIf"],[1,"table-responsive"],[1,"table","bg-white"],[3,"width"],["formArrayName","ListInvoiceDocuments",4,"ngFor","ngForOf"],[1,"text-danger","mt-4px","d-block"],[1,"text-danger","form-error-message"],[3,"formGroupName"],[1,"col-sm-3"],[1,"mb-3","position-relative"],["for","itemName",1,"form-label"],["type","text","id","itemName","placeholder","Enter item name","autocomplete","on","formControlName","ItemName",1,"form-control","autocompleteInput",3,"ngClass","keyup"],["class","spinLoader",4,"ngIf"],[1,"card","card-body","card-block","autocompleteBox","p-0"],["class","border-bottom p-2",3,"click",4,"ngFor","ngForOf"],["class","text-danger position-absolute",4,"ngIf"],["type","text","id","itemName","formControlName","VendorItemName","placeholder","Enter vendor item name",1,"form-control","autocompleteInput",3,"ngClass"],["type","text","id","MachineName","placeholder","Enter machine name","autocomplete","on","formControlName","Machine",1,"form-control","autocompleteInput",3,"readonly"],["bindValue","ManufactureGuid","bindLabel","ManufactureName","placeholder","Select manufacturer","formControlName","ManufactureGuid",3,"items","closeOnSelect","searchable","inputAttrs","notFoundText","change"],["for","manufacturerName",1,"form-label","d-flex"],["type","text","id","MachineName","placeholder","Enter pack size","autocomplete","on","formControlName","PackSize",1,"form-control","autocompleteInput",3,"ngClass","keypress"],["type","text","id","itemName","formControlName","Rate","placeholder","Enter rate",1,"form-control","autocompleteInput",3,"maxLength","ngClass","keypress","input"],["type","text","id","itemName","formControlName","Discount","placeholder","Enter discount",1,"form-control","autocompleteInput",3,"maxLength","ngClass","keypress","input"],[1,"row","position-relative"],[1,"col-lg","col-md-6","col-sm-6","pe-sm-0"],["type","text","id","itemName","formControlName","CGST","placeholder","Enter CGST",1,"form-control","autocompleteInput","cgst-radius",3,"maxLength","ngClass","keypress","input"],[1,"col-lg","col-md-6","col-sm-6","ps-sm-0"],[1,"divider","d-none","d-sm-block"],["type","text","id","itemName1","formControlName","SGST","placeholder","Enter SGST",1,"form-control","autocompleteInput","sgst-radius",3,"maxLength","ngClass","keypress","input"],["type","text","id","itemName","formControlName","IGST","placeholder","Enter Total IGST",1,"form-control","autocompleteInput",3,"ngClass","input","keypress"],["type","text","id","itemName","formControlName","DiscountAmount","placeholder","Enter discount Amt",1,"form-control","autocompleteInput",3,"readonly","ngClass"],["type","text","id","itemName","formControlName","TotalGSTAmount","placeholder","Enter Total GST Amt",1,"form-control","autocompleteInput",3,"readonly","ngClass"],["type","text","id","itemName","formControlName","BuyPrice","placeholder","Enter Buy Price ",1,"form-control","autocompleteInput",3,"readonly","ngClass"],[1,"col-12","mt-3"],[1,"d-flex","align-items-center","gap-3"],[1,"spinLoader"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","width","20","height","20"],["fill","none","d","M0 0h24v24H0z"],["d","M12 2a1 1 0 0 1 1 1v3a1 1 0 0 1-2 0V3a1 1 0 0 1 1-1zm0 15a1 1 0 0 1 1 1v3a1 1 0 0 1-2 0v-3a1 1 0 0 1 1-1zm10-5a1 1 0 0 1-1 1h-3a1 1 0 0 1 0-2h3a1 1 0 0 1 1 1zM7 12a1 1 0 0 1-1 1H3a1 1 0 0 1 0-2h3a1 1 0 0 1 1 1zm12.071 7.071a1 1 0 0 1-1.414 0l-2.121-2.121a1 1 0 0 1 1.414-1.414l2.121 2.12a1 1 0 0 1 0 1.415zM8.464 8.464a1 1 0 0 1-1.414 0L4.93 6.344a1 1 0 0 1 1.414-1.415L8.464 7.05a1 1 0 0 1 0 1.414zM4.93 19.071a1 1 0 0 1 0-1.414l2.121-2.121a1 1 0 1 1 1.414 1.414l-2.12 2.121a1 1 0 0 1-1.415 0zM15.536 8.464a1 1 0 0 1 0-1.414l2.12-2.121a1 1 0 0 1 1.415 1.414L16.95 8.464a1 1 0 0 1-1.414 0z"],[1,"border-bottom","p-2",3,"click"],[1,"text-danger","position-absolute"],[1,"mb-3",3,"click"],["type","button",1,"btn-danger","btn"],[1,"feather","icon-close"],["type","button",1,"btn-primary","btn"],[1,"feather","icon-plus"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],["for","itemDescription",1,"form-label"],["ngClass","text-danger",3,"ngClass"],["id","itemDescription","rows","3","maxlength","2000","formControlName","TermCondition","placeholder","Enter terms and condtions",1,"form-control",3,"ngClass"],[1,"text-danger"],["formArrayName","ListInvoiceDocuments"],[1,"btn","btn-outline-primary","btn-xs","me-1",3,"click"],[1,"feather","icon-eye"],[1,"btn","btn-outline-danger","btn-xs","me-1",3,"click"],[1,"feather","icon-trash-2"],[3,"type"],["type","button",1,"btn","btn-primary","submit",3,"disabled","click"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["rowHeight","auto",1,"bootstrap",3,"scrollbarH","rows","loadingIndicator","columnMode","footerHeight","limit"],["table",""],["name","Item Category"],["name","Item Id"],["name","Item Name "],["name","HSN Code"],["name","Manufacturer"],["name","Catelog No"],["name","Machine"],["name","purchased Unit"],["name","Pack Size"],["name","addConsumption Unit"],["name","Rate"],["name","Discount %"],["name","Paid Qty"],["name","Extra Free Qty"],["name","IGST %"],["name","CGST %"],["name","SGST %"],["name","Total GST%"],["name","Change Tax"],["ngx-datatable-cell-template",""],["name","Discount Amt"],["name","Total GST Amt."],["name","Action"],[1,"btn","btn-outline-primary","btn-xs","me-1"],[1,"feather","icon-edit"],[1,"btn","btn-xs","me-1"],[1,"mdi","text-danger","mdi-close-eye"],[1,"modal-body"],["type","text","id","itemName","placeholder","Enter item name",1,"form-control"],["type","text","id","itemName","placeholder","Enter old tax percentage",1,"form-control"],["type","text","id","itemName","placeholder","Enter new tax percentage",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary","me-2",3,"click"],["type","button",1,"btn","btn-primary","submit"],["type","text","id","itemName","placeholder","Enter consumption unit",1,"form-control"],[1,"widget-content"],[1,"default-form"],[1,"row","form"],["viewer","url",2,"width","100%","height","75vh",3,"url"],["for","reason",1,"form-label"],[1,"mb-22"],["type","text","id","reason","name","reason",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary","submit",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._uU(4,"Quotations"),t.qZA()(),t.YNc(5,we,2,0,"li",4),t.YNc(6,Ie,2,0,"li",4),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),t.YNc(11,Se,2,0,"h6",9),t.YNc(12,De,2,0,"h6",9),t.YNc(13,Ge,5,1,"div",10),t.YNc(14,Xe,135,59,"ng-container",11),t.YNc(15,to,1,1,"app-shimmers",12),t.qZA(),t.TgZ(16,"div",13)(17,"div",5)(18,"div",14)(19,"button",15),t.NdJ("click",function(){return o.quotationFormReset()}),t._uU(20,"Reset"),t.qZA(),t.YNc(21,eo,2,1,"button",16),t.YNc(22,oo,2,1,"button",16),t.qZA()()()()(),t.YNc(23,ao,35,6,"ng-template",null,17,t.W1O),t.YNc(25,lo,26,0,"ng-template",null,18,t.W1O),t.YNc(27,so,16,0,"ng-template",null,19,t.W1O),t.YNc(29,ro,15,1,"ng-template",null,20,t.W1O),t.YNc(31,uo,23,2,"ng-template",null,21,t.W1O),t.qZA()),2&e&&(t.xp6(5),t.Q6J("ngIf",0==o.quotationsList.length),t.xp6(1),t.Q6J("ngIf",o.quotationsList.length>0),t.xp6(5),t.Q6J("ngIf",0==o.quotationsList.length),t.xp6(1),t.Q6J("ngIf",o.quotationsList.length>0),t.xp6(1),t.Q6J("ngIf",o.quotationGuid),t.xp6(1),t.Q6J("ngIf",!o.shimmerVisible),t.xp6(1),t.Q6J("ngIf",o.shimmerVisible),t.xp6(4),t.Q6J("disabled",!o.FormChanged),t.xp6(2),t.Q6J("ngIf",0==o.quotationsList.length),t.xp6(1),t.Q6J("ngIf",o.quotationsList.length>0))},dependencies:[N.mk,N.sg,N.O5,w.yS,U.nE,U.UC,U.vq,c._Y,c.Fj,c.JJ,c.JL,c.nD,c.On,c.sg,c.u,c.x0,c.CE,q.J4,O.w9,ot.OP,Ne.I,V.zr],styles:[".table-input[_ngcontent-%COMP%]{min-width:150px;height:30px;max-height:30px;min-height:30px}.autocompleteBox[_ngcontent-%COMP%]{position:absolute;top:65px;z-index:1;width:100%;max-height:250px;overflow:auto;opacity:0;visibility:hidden;transition-delay:1.5s;transition-property:visibility;cursor:pointer}.autocompleteBox[_ngcontent-%COMP%]:empty{display:none}.autocompleteBox[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#d4d4d4}.autocompleteInput[_ngcontent-%COMP%]:focus + .autocompleteBox[_ngcontent-%COMP%]{opacity:1;visibility:visible}.divider[_ngcontent-%COMP%]{position:absolute;width:1px;height:24px;z-index:100;background-color:#d4d4d4;top:28px}.cgst-radius[_ngcontent-%COMP%]{border-right:0;border-top-right-radius:0;border-bottom-right-radius:0}@media screen and (max-width: 575px){.cgst-radius[_ngcontent-%COMP%]{border-radius:.25rem;border-right:1.5px solid #adb7c1}}.sgst-radius[_ngcontent-%COMP%]{border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}@media screen and (max-width: 575px){.sgst-radius[_ngcontent-%COMP%]{border-radius:.25rem;border-left:1.5px solid #adb7c1}}.spinLoader[_ngcontent-%COMP%]{right:25px;top:50px;margin:auto;transform:translate(15px,-20px);z-index:1}"]}),i})();const co=[{path:"",component:Ze},{path:"edit-quotation/:QuotationGuid",component:it},{path:"new-quotation",component:it},{path:"compare-quotations",component:Ae}];let mo=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[w.Bz.forChild(co),w.Bz]}),i})();var po=g(8395);let _o=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[N.uU],imports:[N.ez,mo,U.xD,c.u5,c.UX,q.IJ,O.A0,q.M,q._A,K.G,ot.ZQ,po.m,V.cX]}),i})()}}]);