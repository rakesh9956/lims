"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[45],{2045:(on,K,_)=>{_.r(K),_.d(K,{GrnModule:()=>He});var P=_(6895),L=_(4931),m=_(433),v=_(9061),R=_(9585),j=_(7579),$=_(8372),ut=_(1884),dt=_(9468),mt=_(7489),pt=_(9115),ht=_(727),_t=_(2983),V=_.n(_t),gt=_(3583),t=_(4650),W=_(6431),vt=_(3996),X=_(7041),tt=_(3361),et=_(2038),B=_(4407),nt=_(3378),H=_(8171),ot=_(5179),it=_(5602);function ft(a,s){1&a&&(t.TgZ(0,"button",45),t._uU(1,"New GRN"),t.qZA())}function It(a,s){if(1&a&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.s9C("value",e),t.xp6(1),t.Oqu(e)}}function bt(a,s){if(1&a&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.s9C("value",e),t.xp6(1),t.Oqu(e)}}function Nt(a,s){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"span",47),t._uU(2),t.qZA(),t.TgZ(3,"select",48),t.NdJ("change",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.ChangeEvent(o))}),t.YNc(4,bt,2,2,"option",22),t.qZA(),t.BQk()}if(2&a){const e=t.oxw();t.xp6(2),t.lnq("",e.rowCount*(e.pageNumber-1)+1,"-",e.totalCount>e.rowCount*e.pageNumber?e.rowCount*e.pageNumber:e.totalCount," of ",e.totalCount," "),t.xp6(2),t.Q6J("ngForOf",e.itemOptionsPerPage)}}function Gt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",49)(1,"button",50),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onDataRemove())}),t._uU(2,"Clear filters"),t.qZA()()}}const at=function(a){return["/grn/grn-against-po",a]};function Ct(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,i=t.oxw(2);return t.KtG(i.getStatus(o))}),t._UZ(1,"span",70),t._uU(2," Edit"),t.qZA()}if(2&a){const e=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,at,e.Guid))}}function Tt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,i=t.oxw(2),r=t.MAs(59);return i.openBasicModal(r),t.KtG(i.SelectGRN(o))}),t._UZ(1,"span",71),t._uU(2," Post"),t.qZA()}}function Zt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,i=t.oxw(2),r=t.MAs(57);return i.openBasicModal(r),t.KtG(i.SelectGRN(o))}),t._UZ(1,"span",72),t._uU(2," Cancel"),t.qZA()}}function xt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(4);return t.KtG(o.modal.close("by: close icon"))})("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,i=t.oxw(2),r=t.MAs(61);return i.openBasicModal(r),t.KtG(i.Changestaus(o.Guid,"Checker"))}),t._UZ(1,"span",73),t._uU(2," Mark as Checked"),t.qZA()}}function At(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(4);return t.KtG(o.modal.close("by: close icon"))})("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,i=t.oxw(2),r=t.MAs(61);return i.openBasicModal(r),t.KtG(i.Changestaus(o.Guid,"Aproved"))}),t._UZ(1,"span",74),t._uU(2," Mark as Approved"),t.qZA()}}function Dt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",63),t.YNc(1,Ct,3,3,"button",64),t.TgZ(2,"div"),t.YNc(3,Tt,3,0,"button",65),t.qZA(),t.TgZ(4,"div"),t.YNc(5,Zt,3,0,"button",65),t.qZA(),t.TgZ(6,"div"),t.YNc(7,xt,3,0,"button",65),t.qZA(),t.TgZ(8,"div"),t.YNc(9,At,3,0,"button",65),t.qZA(),t.TgZ(10,"button",66),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.DownloadPdf(o.Guid,o.Status,"print"))}),t._UZ(11,"span",67),t._uU(12," Print"),t.qZA(),t.TgZ(13,"button",66),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.DownloadPdf(o.Guid,o.Status,""))}),t._UZ(14,"span",68),t._uU(15," Download"),t.qZA(),t.TgZ(16,"button",66),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.GetPoNumbers(o))}),t._UZ(17,"span",59),t._uU(18," PO View"),t.qZA()()}if(2&a){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",1!=e.Iscancel&&1!=e.IsPost&&n.roles.toLowerCase().includes("Maker".toLowerCase())),t.xp6(2),t.Q6J("ngIf",n.roles.toLowerCase().includes("post".toLowerCase())&&1!=e.Iscancel&&1!=e.IsPost&&2==e.Status),t.xp6(2),t.Q6J("ngIf",n.roles.toLowerCase().includes("Cancel".toLowerCase())&&1!=e.Iscancel&&1!=e.IsPost),t.xp6(2),t.Q6J("ngIf",n.roles.toLowerCase().includes("Checker".toLowerCase())&&0==e.Status&&1!=e.Iscancel),t.xp6(2),t.Q6J("ngIf",n.roles.toLowerCase().includes("Approval".toLowerCase())&&1==e.Status&&1!=e.Iscancel)}}function St(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",53),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"span",54),t._uU(7),t.qZA()(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"date"),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td")(23,"span",55),t._uU(24),t.ALo(25,"slice"),t.qZA()(),t.TgZ(26,"td"),t._uU(27),t.ALo(28,"date"),t.qZA(),t.TgZ(29,"td"),t._uU(30),t.qZA(),t.TgZ(31,"td")(32,"span",55),t._uU(33),t.ALo(34,"slice"),t.qZA()(),t.TgZ(35,"td"),t._uU(36),t.qZA(),t.TgZ(37,"td"),t._uU(38),t.ALo(39,"exactNumbers"),t.qZA(),t.TgZ(40,"td",56),t._uU(41),t.qZA(),t.TgZ(42,"td"),t._uU(43),t.qZA(),t.TgZ(44,"td"),t._uU(45),t.ALo(46,"exactNumbers"),t.qZA(),t.TgZ(47,"td"),t._uU(48),t.ALo(49,"exactNumbers"),t.qZA(),t.TgZ(50,"td")(51,"div",57)(52,"button",58),t.NdJ("click",function(){const i=t.CHM(e).$implicit,r=t.oxw(2),l=t.MAs(55);return r.openXlModal(l),t.KtG(r.ViewGRN(i))}),t._UZ(53,"span",59),t._uU(54," View "),t.qZA(),t.TgZ(55,"button",60),t._uU(56,"Actions "),t._UZ(57,"span",61),t.qZA(),t.YNc(58,Dt,19,5,"ng-template",null,62,t.W1O),t.qZA()()()}if(2&a){const e=s.$implicit,n=t.MAs(59);t.xp6(2),t.Oqu(e.LedgerTransactionNo),t.xp6(2),t.Oqu(e.PurchaseOrderNo),t.xp6(2),t.Q6J("ngClass",!0===e.Iscancel?"badge bg-danger":0===e.Status&&!1===e.IsPost?"badge bg-warning":!0===e.IsPost?"badge bg-success":1===e.Status&&!1===e.IsPost?"badge bg-info":2===e.Status&&!1===e.IsPost?"badge bg-primary":""),t.xp6(1),t.hij(" ",!0===e.Iscancel?"Cancelled":"Maker"===e.StatusName&&!1===e.IsPost?"Maker":!0===e.IsPost?"Post":"Checked"===e.StatusName&&!1===e.IsPost?"Checked":"Aproved"==e.StatusName&&!1===e.IsPost?"Unpost":""," "),t.xp6(2),t.Oqu(e.InvoiceNo),t.xp6(2),t.Oqu(""==e.ChalanNo?"N/A":e.ChalanNo),t.xp6(2),t.Oqu(e.SupplierName),t.xp6(2),t.Oqu(t.xi3(16,23,e.GRNDate,"dd-MM-yyyy HH:mm")),t.xp6(3),t.Oqu("0001-01-01T00:00:00"==e.ChekedDate?"N/A":t.xi3(19,26,e.ChekedDate,"dd-MM-yyyy HH:mm")),t.xp6(3),t.Oqu(e.ChekedByName??"Not checked"),t.xp6(2),t.Q6J("title",(null==e?null:e.CheckedReason)||"N/A"),t.xp6(1),t.hij(" ",null!=e&&e.CheckedReason?e.CheckedReason.length>5?t.Dn7(25,29,e.CheckedReason,0,50)+"...":e.CheckedReason:"N/A"," "),t.xp6(3),t.Oqu("0001-01-01T00:00:00"==e.AprovedDate?"N/A":t.xi3(28,33,e.AprovedDate,"dd-MM-yyyy HH:mm")),t.xp6(3),t.Oqu(e.ApprovedByName??"Not approved"),t.xp6(2),t.Q6J("title",(null==e?null:e.ApproveReason)||"N/A"),t.xp6(1),t.hij(" ",null!=e&&e.ApproveReason?e.ApproveReason.length>5?t.Dn7(34,36,e.ApproveReason,0,50)+"...":e.ApproveReason:"N/A"," "),t.xp6(3),t.Oqu(e.Location),t.xp6(2),t.Oqu(t.lcZ(39,40,e.GrossAmount)),t.xp6(3),t.Oqu(e.ItemQty),t.xp6(2),t.Oqu(e.DiscountOnTotal),t.xp6(2),t.Oqu(t.lcZ(46,42,e.TaxAmount)),t.xp6(3),t.Oqu(t.lcZ(49,44,e.NetAmount)),t.xp6(7),t.Q6J("ngbPopover",n)}}function yt(a,s){if(1&a&&(t.TgZ(0,"table",51)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Ledger Transaction No"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Purchase Order No"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Status"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Invoice No"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Chalan No"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Supplier Name"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"GRN Date"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Checked Date"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Checked by"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Checked by Reason"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Approved Date"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Approved by"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Approved by Reason"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Location"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Gross Amount"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"No. of items"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Discount Amount"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Tax Amount"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"Net Amount"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"Actions"),t.qZA()()(),t.TgZ(43,"tbody"),t.YNc(44,St,60,46,"tr",52),t.qZA()()),2&a){const e=t.oxw();t.xp6(44),t.Q6J("ngForOf",e.grnstsatusList)}}function Ut(a,s){1&a&&t._UZ(0,"app-shimmers",75),2&a&&t.Q6J("type","table")("cols",10)}function Ft(a,s){1&a&&(t.ynx(0),t.TgZ(1,"div",76)(2,"div",77)(3,"div",78),t._UZ(4,"i",79),t.TgZ(5,"span"),t._uU(6,"No Goods Receipt Notes Found!"),t.qZA()()()(),t.BQk())}function qt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",80)(1,"div",81)(2,"ngb-pagination",82),t.NdJ("pageChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.pageNumber=o)})("pageChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.ChangePagenumber(o))}),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("collectionSize",e.totalCount)("pageSize",e.itemsPerPage)("page",e.pageNumber)("maxSize",e.maxSize)("rotate",!1)("boundaryLinks",e.boundaryLinks)("size",e.size)}}function wt(a,s){1&a&&t._UZ(0,"hr",95)}function Pt(a,s){if(1&a&&(t.TgZ(0,"div",107)(1,"span",89),t._uU(2,"Checked by and reason:"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"span",109),t._uU(6),t.ALo(7,"slice"),t.qZA()()),2&a){const e=t.oxw(3);t.xp6(4),t.Oqu(null==e.satusList[0]?null:e.satusList[0].ChekedByName),t.xp6(1),t.s9C("title",null==e.GrnViewDetails?null:e.GrnViewDetails.CheckedReason),t.xp6(1),t.hij(" (",(null==e.GrnViewDetails?null:e.GrnViewDetails.CheckedReason.length)>50?t.Dn7(7,3,null==e.GrnViewDetails?null:e.GrnViewDetails.CheckedReason,0,50)+"...":null==e.GrnViewDetails?null:e.GrnViewDetails.CheckedReason,") ")}}function Rt(a,s){if(1&a&&(t.TgZ(0,"div",107)(1,"span",89),t._uU(2,"Approved by and reason:"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"span",109),t._uU(6),t.ALo(7,"slice"),t.qZA()()),2&a){const e=t.oxw(3);t.xp6(4),t.Oqu(null==e.satusList[0]?null:e.satusList[0].AprovedByName),t.xp6(1),t.s9C("title",null==e.GrnViewDetails?null:e.GrnViewDetails.ApproveReason),t.xp6(1),t.hij(" (",(null==e.GrnViewDetails?null:e.GrnViewDetails.ApproveReason.length)>50?t.Dn7(7,3,null==e.GrnViewDetails?null:e.GrnViewDetails.ApproveReason,0,50)+"...":null==e.GrnViewDetails?null:e.GrnViewDetails.ApproveReason,") ")}}function Lt(a,s){if(1&a&&(t.TgZ(0,"div",107)(1,"span",89),t._uU(2,"Posted by and reason:"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"span",109),t._uU(6),t.ALo(7,"slice"),t.qZA()()),2&a){const e=t.oxw(3);t.xp6(4),t.hij("",null==e.satusList[0]?null:e.satusList[0].PostedByName," "),t.xp6(1),t.s9C("title",null==e.GrnViewDetails?null:e.GrnViewDetails.UnpostReason),t.xp6(1),t.hij(" (",(null==e.GrnViewDetails?null:e.GrnViewDetails.UnpostReason.length)>50?t.Dn7(7,3,null==e.GrnViewDetails?null:e.GrnViewDetails.UnpostReason,0,50)+"...":null==e.GrnViewDetails?null:e.GrnViewDetails.UnpostReason,") ")}}function Mt(a,s){if(1&a&&(t.TgZ(0,"div",106)(1,"div",107)(2,"span",89)(3,"u"),t._uU(4,"Reason"),t.qZA(),t._uU(5," :"),t.qZA()(),t.YNc(6,Pt,8,7,"div",108),t.YNc(7,Rt,8,7,"div",108),t.YNc(8,Lt,8,7,"div",108),t.qZA()),2&a){const e=t.oxw(2);t.xp6(6),t.Q6J("ngIf",null==e.GrnViewDetails?null:e.GrnViewDetails.CheckedReason),t.xp6(1),t.Q6J("ngIf",null==e.GrnViewDetails?null:e.GrnViewDetails.ApproveReason),t.xp6(1),t.Q6J("ngIf",null==e.GrnViewDetails?null:e.GrnViewDetails.UnpostReason)}}function kt(a,s){if(1&a&&(t.TgZ(0,"tr")(1,"td",98),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"exactNumbers"),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.TgZ(27,"td"),t._uU(28),t.qZA(),t.TgZ(29,"td"),t._uU(30),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.qZA(),t.TgZ(33,"td"),t._uU(34),t.ALo(35,"exactNumbers"),t.qZA()()),2&a){const e=s.$implicit;t.xp6(2),t.Oqu(e.ItemName),t.xp6(2),t.Oqu(e.VendorItemName?e.VendorItemName:"N/A"),t.xp6(2),t.Oqu(""!=e.ItemCode?e.ItemCode:"N/A"),t.xp6(2),t.Oqu(e.HsnCode?e.HsnCode:"N/A"),t.xp6(2),t.Oqu(e.CatalogNo?e.CatalogNo:"N/A"),t.xp6(2),t.Oqu(e.Converter),t.xp6(2),t.Oqu(e.BarcodeNo?e.BarcodeNo:"N/A"),t.xp6(2),t.Oqu(e.BatchNumber),t.xp6(2),t.Oqu("0001-01-01T00:00:00"===e.ExpiryDate||null===e.ExpiryDate?"N/A":t.xi3(19,16,e.ExpiryDate,"dd-MM-yyyy")),t.xp6(3),t.Oqu(t.lcZ(22,19,e.Rate)),t.xp6(3),t.Oqu(e.ReleasedCount),t.xp6(2),t.Oqu(e.DiscountPer),t.xp6(2),t.Oqu(e.SGSTPer),t.xp6(2),t.Oqu(e.CGSTPer),t.xp6(2),t.Oqu(e.IGSTPer),t.xp6(2),t.Oqu(t.lcZ(35,21,e.UnitPrice))}}function Ot(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"button",58),t.NdJ("click",function(){const i=t.CHM(e).$implicit,r=t.oxw(3),l=t.MAs(63);return r.openBasicModal(l),t.KtG(r.PreviewInvoice(null==i?null:i.FilePath))}),t._UZ(5,"span",59),t._uU(6," View "),t.qZA()()()}if(2&a){const e=s.$implicit;t.xp6(2),t.hij("",e.FileName," ")}}function Jt(a,s){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8)(2,"div",110)(3,"table",111)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"Invoice name"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Action"),t.qZA()()(),t.TgZ(10,"tbody"),t.YNc(11,Ot,7,1,"tr",52),t.qZA()()()()()),2&a){const e=t.oxw(2);t.xp6(11),t.Q6J("ngForOf",e.invoiceDocuments)}}function Qt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",112),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.KtG(o.close("by: close icon"))}),t._UZ(1,"span",70),t._uU(2," Edit "),t.qZA()}if(2&a){const e=t.oxw(2);t.Q6J("routerLink",t.VKq(1,at,e.invoiceGuid))}}function Et(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",104),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.KtG(o.close("by: close icon"))})("click",function(){t.CHM(e);const o=t.oxw(2),i=t.MAs(57);return t.KtG(o.openBasicModal(i))}),t._UZ(1,"span",72),t._uU(2," Cancel"),t.qZA()}}function Vt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",104),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2),i=t.MAs(61);return o.openBasicModal(i),t.KtG(o.Changestaus(o.GrnViewDetails.Guid,"Checker"))})("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.KtG(o.close("by: close icon"))}),t._UZ(1,"span",73),t._uU(2," Mark as Checked "),t.qZA()}}function Bt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",104),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.KtG(o.close("by: close icon"))})("click",function(){t.CHM(e);const o=t.oxw(2),i=t.MAs(61);return o.openBasicModal(i),t.KtG(o.Changestaus(o.GrnViewDetails.Guid,"Aproved"))}),t._UZ(1,"span",73),t._uU(2," Mark as Approved"),t.qZA()}}function Ht(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",104),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.KtG(o.close("by: close icon"))})("click",function(){t.CHM(e);const o=t.oxw(2),i=t.MAs(59);return t.KtG(o.openBasicModal(i))}),t._UZ(1,"span",71),t._uU(2," Post"),t.qZA()}}function Yt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",83)(1,"h5",84),t._uU(2,"Goods Receipt Details"),t.qZA(),t.TgZ(3,"button",85),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.KtG(i.close("by: close icon"))}),t.qZA()(),t.TgZ(4,"div",86)(5,"div",87)(6,"p",88)(7,"span",89),t._uU(8,"Purchase Order No"),t.qZA(),t._uU(9),t.qZA(),t.TgZ(10,"p",88)(11,"span",89),t._uU(12,"Ledger Transaction No"),t.qZA(),t._uU(13),t.qZA(),t.TgZ(14,"p",88)(15,"span",89),t._uU(16,"Invoice No"),t.qZA(),t._uU(17),t.qZA(),t.TgZ(18,"p",88)(19,"span",89),t._uU(20,"Challan No"),t.qZA(),t._uU(21),t.qZA(),t.TgZ(22,"p",88)(23,"span",89),t._uU(24,"Supplier Name"),t.qZA(),t._uU(25),t.qZA()(),t.TgZ(26,"div",90)(27,"p",88)(28,"span",89),t._uU(29,"Gross Amount "),t.qZA(),t._uU(30,": "),t.TgZ(31,"span",91),t._uU(32,"\u20b9"),t.qZA(),t._uU(33),t.qZA(),t.TgZ(34,"p",88)(35,"span",89),t._uU(36,"Freight Amount "),t.qZA(),t._uU(37,": "),t.TgZ(38,"span",91),t._uU(39,"\u20b9"),t.qZA(),t._uU(40),t.qZA(),t.TgZ(41,"p",88)(42,"span",89),t._uU(43,"Octori Amount "),t.qZA(),t._uU(44,": "),t.TgZ(45,"span",91),t._uU(46,"\u20b9"),t.qZA(),t._uU(47),t.qZA(),t.TgZ(48,"p",88)(49,"span",89),t._uU(50,"RoundOff Amount "),t.qZA(),t._uU(51,": "),t.TgZ(52,"span",91),t._uU(53,"\u20b9"),t.qZA(),t._uU(54),t.qZA(),t.TgZ(55,"p",92)(56,"span",89),t._uU(57,"Discount Amount"),t.qZA(),t._uU(58,": "),t.TgZ(59,"span",91),t._uU(60,"\u20b9"),t.qZA(),t._uU(61),t.qZA(),t.TgZ(62,"p",92)(63,"span",89),t._uU(64,"Tax Amount "),t.qZA(),t._uU(65,": "),t.TgZ(66,"span",91),t._uU(67,"\u20b9"),t.qZA(),t._uU(68),t.ALo(69,"exactNumbers"),t.qZA(),t.TgZ(70,"p",92)(71,"span",89),t._uU(72,"NET Amount "),t.qZA(),t._uU(73,":"),t.TgZ(74,"span",91),t._uU(75,"\u20b9"),t.qZA(),t._uU(76),t.ALo(77,"exactNumbers"),t.qZA()()(),t.YNc(78,wt,1,0,"hr",93),t.YNc(79,Mt,9,3,"div",94),t._UZ(80,"hr",95),t.TgZ(81,"div",96)(82,"double-scroll")(83,"table",97)(84,"thead")(85,"tr")(86,"th",98),t._uU(87,"Item Name"),t.qZA(),t.TgZ(88,"th"),t._uU(89,"Vendor Item Name"),t.qZA(),t.TgZ(90,"th"),t._uU(91,"Item Code"),t.qZA(),t.TgZ(92,"th"),t._uU(93,"HSN Code"),t.qZA(),t.TgZ(94,"th"),t._uU(95,"Catalog No"),t.qZA(),t.TgZ(96,"th"),t._uU(97,"Converter"),t.qZA(),t.TgZ(98,"th"),t._uU(99,"Barcode"),t.qZA(),t.TgZ(100,"th"),t._uU(101,"Batch No"),t.qZA(),t.TgZ(102,"th"),t._uU(103,"Expiry On"),t.qZA(),t.TgZ(104,"th"),t._uU(105,"Item Rate "),t.TgZ(106,"span",91),t._uU(107,"\u20b9"),t.qZA()(),t.TgZ(108,"th"),t._uU(109,"Paid QTY"),t.qZA(),t.TgZ(110,"th"),t._uU(111,"Discount %"),t.qZA(),t.TgZ(112,"th"),t._uU(113,"SGST %"),t.qZA(),t.TgZ(114,"th"),t._uU(115,"CGST %"),t.qZA(),t.TgZ(116,"th"),t._uU(117,"IGST %"),t.qZA(),t.TgZ(118,"th"),t._uU(119,"Buy Price "),t.TgZ(120,"span",91),t._uU(121,"\u20b9"),t.qZA()()()(),t.TgZ(122,"tbody"),t.YNc(123,kt,36,23,"tr",52),t.qZA()()()(),t.YNc(124,Jt,12,1,"div",99),t.TgZ(125,"div",100)(126,"div",101),t.YNc(127,Qt,3,3,"button",102),t.YNc(128,Et,3,0,"button",103),t.YNc(129,Vt,3,0,"button",103),t.YNc(130,Bt,3,0,"button",103),t.YNc(131,Ht,3,0,"button",103),t.TgZ(132,"button",104),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.KtG(i.close("by: close icon"))})("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.DownloadPdf("",o.GrnViewDetails.Status,"print"))}),t._UZ(133,"span",67),t._uU(134," Print"),t.qZA(),t.TgZ(135,"button",105),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.KtG(i.close("by: close icon"))})("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.DownloadPdf("",o.GrnViewDetails.Status,""))}),t._UZ(136,"span",68),t._uU(137," Download"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(9),t.hij(":",null==e.satusList[0]?null:e.satusList[0].PurchaseOrderNo,""),t.xp6(4),t.hij(": ",null==e.satusList[0]?null:e.satusList[0].LedgerTransactionNo," "),t.xp6(4),t.hij(":",null==e.satusList[0]?null:e.satusList[0].InvoiceNo,""),t.xp6(4),t.hij(": ",""==(null==e.satusList[0]?null:e.satusList[0].ChalanNo)?"N/A":null==e.satusList[0]?null:e.satusList[0].ChalanNo,""),t.xp6(4),t.hij(":",null==e.satusList[0]?null:e.satusList[0].SupplierName,""),t.xp6(8),t.Oqu(null==e.satusList[0]?null:e.satusList[0].GrossAmount),t.xp6(7),t.Oqu((null==e.satusList[0]?null:e.satusList[0].Freight)??"0"),t.xp6(7),t.Oqu((null==e.satusList[0]?null:e.satusList[0].Octori)??"0"),t.xp6(7),t.Oqu((null==e.satusList[0]?null:e.satusList[0].RoundOff)??"0"),t.xp6(7),t.hij("",null==e.satusList[0]?null:e.satusList[0].DiscountOnTotal," "),t.xp6(7),t.Oqu(t.lcZ(69,21,e.totalTaxAmount)),t.xp6(8),t.hij(" ",t.lcZ(77,23,null==e.satusList[0]?null:e.satusList[0].NetAmount),""),t.xp6(2),t.Q6J("ngIf",(null==e.GrnViewDetails?null:e.GrnViewDetails.CheckedReason)||(null==e.GrnViewDetails?null:e.GrnViewDetails.ApproveReason)),t.xp6(1),t.Q6J("ngIf",(null==e.GrnViewDetails?null:e.GrnViewDetails.CheckedReason)||(null==e.GrnViewDetails?null:e.GrnViewDetails.ApproveReason)||(null==e.GrnViewDetails?null:e.GrnViewDetails.UnpostReason)),t.xp6(44),t.Q6J("ngForOf",e.viewitemDetails),t.xp6(1),t.Q6J("ngIf",e.invoiceDocuments.length>0),t.xp6(3),t.Q6J("ngIf",1!=e.GrnViewDetails.Iscancel&&1!=e.GrnViewDetails.IsPost&&e.roles.toLowerCase().includes("Maker".toLowerCase())),t.xp6(1),t.Q6J("ngIf",e.roles.toLowerCase().includes("Cancel".toLowerCase())&&1!=e.GrnViewDetails.Iscancel&&1!=e.GrnViewDetails.IsPost),t.xp6(1),t.Q6J("ngIf",e.roles.toLowerCase().includes("Checker".toLowerCase())&&0==e.GrnViewDetails.Status&&1!=e.GrnViewDetails.Iscancel),t.xp6(1),t.Q6J("ngIf",e.roles.toLowerCase().includes("Approval".toLowerCase())&&1==e.GrnViewDetails.Status&&1!=e.GrnViewDetails.Iscancel),t.xp6(1),t.Q6J("ngIf",e.roles.toLowerCase().includes("post".toLowerCase())&&1!=e.GrnViewDetails.Iscancel&&1!=e.GrnViewDetails.IsPost&&2==e.GrnViewDetails.Status)}}function zt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",83)(1,"h5",113),t._uU(2,"Cancel goods receipt note"),t.qZA(),t.TgZ(3,"button",85),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.KtG(i.close("by: close icon"))}),t.qZA()(),t.TgZ(4,"div",96)(5,"div",5)(6,"div",107)(7,"div",114)(8,"label",115),t._uU(9,"Are you sure do you want to cancel "),t.TgZ(10,"strong"),t._uU(11),t.qZA(),t._uU(12," GRN?"),t.qZA()()()()(),t.TgZ(13,"div",116)(14,"button",117),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.KtG(i.close("by: close icon"))}),t._uU(15," No "),t.qZA(),t.TgZ(16,"button",118),t.NdJ("click",function(){const i=t.CHM(e).$implicit,r=t.oxw();return i.close("by: close icon"),t.KtG(r.UpdateGRNCancel())}),t._uU(17,"Yes"),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(11),t.Oqu(e.GRNnumber)}}const rt=function(){return{maxlength:"50"}};function Kt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",83)(1,"h5",113),t._uU(2,"Post goods receipt note"),t.qZA(),t.TgZ(3,"button",85),t.NdJ("click",function(){const i=t.CHM(e).$implicit,r=t.oxw();return i.close("by: close icon"),r.reason="",t.KtG(r.UserGuid=r.LoggedInUserGuid)}),t.qZA()(),t.TgZ(4,"div",96)(5,"div",5)(6,"div",107)(7,"div",114)(8,"label",115),t._uU(9,"Are you sure do you want to Post "),t.TgZ(10,"strong"),t._uU(11),t.qZA(),t._uU(12," GRN?"),t.qZA()()(),t.TgZ(13,"div",107)(14,"div",119)(15,"label",120),t._uU(16,"Reason:"),t.qZA(),t.TgZ(17,"input",121),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.reason=o)}),t.qZA()(),t.TgZ(18,"div",107)(19,"div",114)(20,"label",122),t._uU(21,"Users"),t.qZA(),t.TgZ(22,"ng-select",123),t.NdJ("change",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.onUserGuidChange(o))})("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.UserGuid=o)}),t.qZA()()()()()(),t.TgZ(23,"div",116)(24,"button",117),t.NdJ("click",function(){const i=t.CHM(e).$implicit,r=t.oxw();return i.close("by: close icon"),r.reason="",t.KtG(r.UserGuid=r.LoggedInUserGuid)}),t._uU(25," No "),t.qZA(),t.TgZ(26,"button",118),t.NdJ("click",function(){const i=t.CHM(e).$implicit,r=t.oxw();return i.close("by: close icon"),r.UpdateGRNPostStatus(),t.KtG(r.reason="")}),t._uU(27,"Yes"),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(11),t.Oqu(e.GRNnumber),t.xp6(6),t.Q6J("ngModel",e.reason),t.xp6(5),t.Q6J("items",e.userList)("ngModel",e.UserGuid)("notFoundText","No users found!")("inputAttrs",t.DdM(7,rt))("disabled",!1)}}function jt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",83)(1,"h5",113),t._uU(2,"Remarks"),t.qZA(),t.TgZ(3,"button",85),t.NdJ("click",function(){const i=t.CHM(e).$implicit,r=t.oxw();return i.close("by: close icon"),r.reason="",t.KtG(r.UserGuid=r.LoggedInUserGuid)}),t.qZA()(),t.TgZ(4,"div",96)(5,"div",5)(6,"div",107)(7,"div",119)(8,"label",120),t._uU(9,"Reason:"),t.qZA(),t.TgZ(10,"input",121),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.reason=o)}),t.qZA()()(),t.TgZ(11,"div",107)(12,"div",114)(13,"label",122),t._uU(14,"Users"),t.qZA(),t.TgZ(15,"ng-select",123),t.NdJ("change",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.onUserGuidChange(o))})("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.UserGuid=o)}),t.qZA()()()()(),t.TgZ(16,"div",116)(17,"button",117),t.NdJ("click",function(){const i=t.CHM(e).$implicit,r=t.oxw();return i.close("by: close icon"),r.reason="",t.KtG(r.UserGuid=r.LoggedInUserGuid)}),t._uU(18," No "),t.qZA(),t.TgZ(19,"button",118),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.KtG(i.close("by: close icon"))})("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.UpdateStatus())}),t._uU(20," Yes "),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(10),t.Q6J("ngModel",e.reason),t.xp6(5),t.Q6J("items",e.userList)("ngModel",e.UserGuid)("notFoundText","No users found!")("inputAttrs",t.DdM(6,rt))("disabled",!1)}}function $t(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",83)(1,"h5",113),t._uU(2,"Preview invoice"),t.qZA(),t.TgZ(3,"button",85),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.KtG(i.close("by: close icon"))}),t.qZA()(),t.TgZ(4,"div",96)(5,"div",124)(6,"div",125)(7,"div",126)(8,"ngx-doc-viewer",127)(9,"div"),t._uU(10,"Loading"),t.qZA()()()()(),t._UZ(11,"div",5),t.qZA(),t.TgZ(12,"div",116)(13,"button",117),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.KtG(i.close("by: close icon"))}),t._uU(14,"Cancel"),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(8),t.Q6J("url",e.Document)}}let st=(()=>{class a extends v.NG{constructor(){super(...arguments),this.DELIMITER="-"}parse(e){if(e){const n=e.split(this.DELIMITER);return{day:parseInt(n[0],10),month:parseInt(n[1],10),year:parseInt(n[2],10)}}return null}format(e){return e?(e.day<10?"0"+e.day:e.day)+this.DELIMITER+(e.month<10?"0"+e.month:e.month)+this.DELIMITER+e.year:""}}return a.\u0275fac=function(){let s;return function(n){return(s||(s=t.n5z(a)))(n||a)}}(),a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac}),a})(),Wt=(()=>{class a{constructor(e,n,o,i,r,l,u,N,b,f){this.calendar=e,this.formatter=n,this.grnService=o,this.globalService=i,this.router=r,this.userManagementService=l,this.purchaseOrderService=u,this.authservice=N,this.modalService=b,this.datepipe=f,this.maxSize=3,this.boundaryLinks=!0,this.size="lg",this.hoveredDate=null,this.rows=[],this.temp=[],this.people=[],this.loadingIndicator=!0,this.ColumnMode=R.hq,this.orderBy="",this.grnstsatusList=[],this.itemOrder="",this.SortType="",this.keyword="",this.pageNumber=1,this.rowCount=40,this.CenterLocationList=[],this.CenterLocationGuid="",this.selectedStatuses=[]=[],this.FromDate="",this.EndDate="",this.pageSize=40,this.modelChanged=new j.x,this.itemOptionsPerPage=["40","80","120","160","200","240","280","320"],this.itemsPerPage=40,this.UnparsedHtml='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Supplier Quotation</title><style>table{border-collapse:collapse;border:1px solid #000}Item name table td,table th{border-bottom:1px solid #000;border-right:1px solid #000;padding:5px;text-align:left;word-wrap:break-word;word-break:break-all;font-size:10px}table tr:last-child td{border-bottom:none}p{margin:0}table tbody td,table thead th{word-break:break-word}</style></head><body><table style="text-align:center;table-layout:fixed" width="100%"><tbody><tr><td><div style="height:28px;display:flex;align-items:center;padding:20px 0"><img data-v-0e549244="" src="assets/images/YodaLIMSLogo.png" alt="Yoda LIMS"></div></td></tr></tbody></table><table style="table-layout:fixed;background-color:#ccc" width="100%"><tbody><tr><td style="font-weight:700;font-size:24px;text-align:center">Goods receipt note details</td></tr></tbody></table><table style="table-layout:fixed;background-color:#ccc" width="100%"><tbody><tr><td style="font-size:14px"><b>Goods receipt no:</b>%%Ledgertransactiono%%</td><td style="font-size:14px"><b>GRN Date:</b>%%GRNDate%%</td></tr></tbody></table><table style="table-layout:fixed;background-color:#ccc" width="100%"><tbody><tr><td style="font-size:14px"><b>Supplier name:</b>%%SupplierName%%</td><td style="font-size:14px"><b>Purchase order no:</b>%%PurchaseOrderNo%%</td><td style="font-size:14px"><b>Invoice No.:</b>%%InvoiceNo%%</td></tr></tbody></table><table style="table-layout:fixed" width="100%"><tbody><tr><td style="font-size:14px;color:red"><b>Location:</b>%%CenterLocation%%</td></tr></tbody></table><table style="table-layout:fixed" width="100%"><thead><tr><th>Chalan No.</th><th>Freight amount (\u20b9)</th><th>Octroi amount (\u20b9)</th><th>Gross amount (\u20b9)</th><th>Discount amount (\u20b9)</th><th>GST amount (\u20b9)</th><th>Round off amount (\u20b9)</th><th>Net amount (\u20b9)</th></tr></thead><tbody><tr><td>%%ChalanNo%%</td><td>%%Freight%%</td><td>%%Octori%%</td><td>%%GrossAmount%%</td><td>%%DiscountOnTotal%%</td><td>%%TaxAmount%%</td><td>(\u20b9) %%RoundOff%%</td><td>(\u20b9) %%NetAmount%%</td></tbody></table><table style="table-layout:fixed" width="100%"><tbody><tr><td style="font-weight:700;font-size:12px;text-align:right">Total GRN amount in INR : %%NetTotalAmount%%</td></tr><tr><td style="font-size:12px"><b>Total amount in words:</b>%%TotalAmount%% rupees only</td></tr><tr></tr><tr></tr></tbody></table><table style="table-layout:fixed;background-color:#ccc;margin-top:20px" width="100%"><tbody><tr><td style="font-size:14px"><b>Item Details:</b></td></tr></tbody></table><table style="table-layout:fixed" width="100%"><thead><tr><th>S NO.</th><th>Item name</th><th>Vendor Item name</th><th>HSN code</th><th>Catalog no</th><th>Converter</th><th>Barcode</th><th>Batch number</th><th>Item rate</th><th>Order qty</th><th>Adjust qty</th><th>Adjust Reason</th><th>Discount %</th><th>CGST %</th><th>SGST %</th><th>IGST %</th><th>Discount amount (\u20b9)</th><th>GST Amount (\u20b9)</th><th>Buy Price (\u20b9)</th><th>Net Amount (\u20b9)</th></tr></thead><tbody><tr id="GRNItemDetails"><th>%%ItemId%%</th><th>%%ItemName%%</th><th>%%VendorItemName%%</th><th>%%HSNCode%%</th><th>%%CatalogNo%%</th><th>%%ConvEnter%%</th><th>%%Barcode%%</th><th>%%BatchNumber%%</th><th>%%ItemRate%%</th><th>%%OrderQuantity%%</th><th>%%AdjustQty%%</th><th>%%AdjustReason%%</th><th>%%Dicsountper%%</th><th>%%CGSTper%%</th><th>%%SGSTPer%%</th><th>%%IGSTper%%</th><th>%%DicsountAmount%%</th><th>%%GSTAmount%%</th><th>(\u20b9) %%BuyPrice%%</th><th>(\u20b9) %%ItemsNetAmount%%</th></tr><tr><td colspan="18" style="font-weight:700;font-size:16px">Total amount in INR : %%GRNAmount%%</td></tr></tbody><table style="table-layout:fixed" width="100%"><tbody><tr><td style="font-weight:700;font-size:10px">Created by: %%CreatedBy%%</td><td style="font-weight:700;font-size:10px">Checked by: %%CheckedByName%%</td><td style="font-weight:700;font-size:10px">Approved by: %%AppprovedByName%%</td><td style="font-weight:700;font-size:10px">Post by: %%PostByName%%</td><td style="font-weight:700;font-size:10px">Cancel by: %%CancelByName%%</td></tr></tbody></table></table><table style="table-layout:fixed;border:none;margin-top:50px" width="100%"><tbody><tr><td style="font-size:14px;border:none;padding:0;text-align:right"><b>Date:</b>%%GRNDownloadDate%%</td></tr><tr><td style="font-size:14px;border:none;padding:0;text-align:right">This is a computer generated document, hence signature is not required.</td></tr></tbody></table></body></html>',this.invoiceGuid="",this.ItemsDetails=[],this.invoiceDocument=[],this.isMenuCollapsed=!0,this.viewitemDetails=[],this.satusList=[],this.post="",this.reason="",this.invoiceGuiddata="",this.Unpost="",this.Cancel="",this.itemOptionsOrders1=["Post","Unpost","Cancel","Maker","Checked"],this.GRNList=[],this.removeFromDate=null,this.removeTodate=null,this.selecteFromDate="",this.selecteToDate="",this.MakerStatus="",this.ChekerStatus="",this.selectedStatus="",this.allcheckbox=!1,this.center="",this.invoiceDocuments=[],this.fromDate=e.getToday(),this.toDate=e.getNext(e.getToday(),"d",10),this.fetch(g=>{this.temp=g,this.rows=g}),this.subscriptions=new ht.w0,this.modelChanged.pipe((0,$.b)(1e3)).subscribe(g=>{this.keyword=g,this.getGRNStatus()})}ngOnInit(){if("Goods Receipt"==localStorage.getItem("Type")){let i=localStorage.getItem("pageNumber");this.pageNumber=i?parseInt(i):1;let r=localStorage.getItem("PerPage");this.itemsPerPage=r?parseInt(r):40,this.rowCount=r?parseInt(r):40,localStorage.removeItem("Type"),localStorage.removeItem("pageNumber"),localStorage.removeItem("PerPage")}const n=new Date;this.formattedDate=this.datepipe.transform(n,"dd-MMM-yyyy hh:mm a"),this.UserGuid=localStorage.getItem("UserGuid"),window.outerWidth<480&&(this.maxSize=2,this.boundaryLinks=!1,this.size="sm"),this.people=pt.Q.peoples,this.SortType="desc",this.getGRNStatus(),this.GetPurchaseOrderPostDefaults(),this.roles=this.authservice.LoggedInUser.GRNROLES,this.center=this.authservice.LoggedInUser.LOCATIONSGUID,this.LoggedInUserGuid=this.authservice.LoggedInUser.UserGuid,this.GetAllUsersList();const o=new Date;this.selectedDate={year:o.getFullYear(),month:o.getMonth()+1,day:o.getDate()}}fetch(e){const n=new XMLHttpRequest;n.open("GET","assets/data/grn.json"),n.onload=()=>{e(JSON.parse(n.response))},n.send()}updateFilter(e){const n=e.target.value.toLowerCase(),o=this.temp.filter(function(i){return-1!==i.itemName.toLowerCase().indexOf(n)||!n});this.rows=o,this.table.offset=0}onDateSelection(e){this.fromDate||this.toDate?this.fromDate&&!this.toDate&&e&&e.after(this.fromDate)?this.toDate=e:(this.toDate=null,this.fromDate=e):this.fromDate=e}isHovered(e){return this.fromDate&&!this.toDate&&this.hoveredDate&&e.after(this.fromDate)&&e.before(this.hoveredDate)}isInside(e){return this.toDate&&e.after(this.fromDate)&&e.before(this.toDate)}isRange(e){return e.equals(this.fromDate)||this.toDate&&e.equals(this.toDate)||this.isInside(e)||this.isHovered(e)}validateInput(e,n){const o=this.formatter.parse(n);return o&&this.calendar.isValid(v.qj.from(o))?v.qj.from(o):e}openXlModal(e){this.modalService.open(e,{backdrop:"static",keyboard:!1,size:"xl"}).result.then(n=>{console.log("Modal closed"+n)}).catch(n=>{})}openBasicModal(e){this.modalService.open(e,{backdrop:"static",keyboard:!1,size:"md"}).result.then(n=>{console.log("Modal closed"+n)}).catch(n=>{})}getGRNStatus(){let e=this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())&&"00000000-0000-0000-0000-000000000000"==this.authservice.LoggedInUser.LOCATIONSGUID?"00000000-0000-0000-0000-000000000000":this.authservice.LoggedInUser.LOCATIONSGUID.split(",");this.shimmerVisible=!0,this.keyword=null==this.keyword||null==this.keyword?this.keyword||"":this.keyword,this.grnService.getGRN(this.pageNumber,this.rowCount,this.keyword,this.orderBy,this.SortType,this.CenterLocationGuid,this.selecteFromDate,this.selecteToDate,this.invoiceGuid,this.post,this.Unpost,this.Cancel,this.MakerStatus,this.ChekerStatus,e).subscribe(n=>{this.invoiceGuid=[],this.grnstsatusList=n||[],this.GRNList=n||[],this.grnstsatusList=this.GRNList,this.shimmerVisible=!1,this.grnstsatusList.length>0?(this.isNoData=!1,this.Iscancel=!1):(this.isNoData=!0,this.Iscancel=!0),this.totalCount=n[0]?.TotalCount},n=>{this.shimmerVisible=!1})}GetPurchaseOrderPostDefaults(){let e=this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())&&"00000000-0000-0000-0000-000000000000"==this.authservice.LoggedInUser.LOCATIONSGUID?"00000000-0000-0000-0000-000000000000":this.authservice.LoggedInUser.LOCATIONSGUID.split(",");this.shimmerVisible=!0,this.purchaseOrderService.GetPurchaseOrderPostDefaults(e).subscribe(n=>{this.CenterLocationList=n.Result.LstCenterLocationType,this.globalService.stopSpinner()},n=>{this.globalService.stopSpinner()})}change(e){this.CenterLocationGuid="",e&&(this.CenterLocationGuid=e.CenterLocationGuid),this.getGRNStatus()}selectFromDate(e){this.removeTodate=null,this.minDate=e,this.FromDate=e.day+"-"+e.month+"-"+e.year,this.selecteFromDate=e.year+"-"+e.month+"-"+e.day,this.getGRNStatus()}selectToDate(e){this.EndDate=e.day+"-"+e.month+"-"+e.year,this.selecteToDate=e.year+"-"+e.month+"-"+e.day,this.getGRNStatus()}ChangeEvent(e){this.itemsPerPage=e.target.value,this.rowCount=e.target.value,localStorage.setItem("PerPage",e.target.value),this.pageNumber=1,this.getGRNStatus()}changeSearch(e){this.pageNumber=1,this.pageSize=40,this.modelChanged.next(e.target.value)}ChangePagenumber(e){this.pageNumber=e,localStorage.setItem("pageNumber",e),this.getGRNStatus()}UpdateGRNPostStatus(){let e={invoiceGuid:this.invoiceGuid,isPost:!0,UserGuid:this.UserGuid,UnpostReason:this.reason};this.globalService.startSpinner(),this.grnService.UpdateGRNPostStatus(e).subscribe(n=>{this.invoiceGuid="",this.getGRNStatus(),this.globalService.stopSpinner(),this.reason="",this.UserGuid=this.LoggedInUserGuid},n=>{this.globalService.stopSpinner()})}UpdateGRNCancel(){let e={invoiceGuid:this.invoiceGuid,iscancel:!0,UserGuid:this.UserGuid};this.globalService.startSpinner(),this.grnService.UpdateGRNCancel(e).subscribe(n=>{this.invoiceGuid="",this.getGRNStatus(),this.globalService.stopSpinner()},n=>{this.globalService.stopSpinner()})}UpdateGRNStatus(e,n){this.invoiceGuid=e,this.status=void 0!==n?n:this.status;let o={invoiceGuid:this.invoiceGuid,Status:this.status,UserGuid:this.UserGuid,ApproveReason:"Checker"!=this.status?this.reason:"",CheckedReason:"Checker"==this.status?this.reason:""};this.globalService.startSpinner(),this.grnService.UpdateGRNStatus(o).subscribe(i=>{this.invoiceGuid="",this.reason="",this.getGRNStatus(),this.globalService.stopSpinner(),this.UserGuid=this.LoggedInUserGuid},i=>{this.globalService.stopSpinner()})}UpdateStatus(){this.UpdateGRNStatus(this.invoiceGuiddata,this.status)}Changestaus(e,n){this.invoiceGuiddata=e,this.status=n,this.grnService.GetEditGRNdetails(this.invoiceGuiddata).subscribe(o=>{this.GRNdetails=o.listGetEditGRNdetails||[],this.reason=""})}DownloadPdf(e,n,o){this.invoiceGuid=e||this.invoiceGuid;const i=new gt.default({orientation:"landscape"});this.grnService.GetEditGRNdetails(this.invoiceGuid).subscribe(r=>{let l=r.listGetEditGRNdetails||[],u=r.listitemsDetails||[];this.invoiceDocument=r.listinvoiceDocuments||[];let N=l[0].NetAmount.toString().match(/^\d+(?:\.\d{0,2})?/),b=u.reduce((Z,h)=>Z+Number(h.TotalAmount),0).toString(),f=Math.floor(Number(N));const I=_(5306)(f),p={fontSize:8,fillColor:"#00435d",textColor:"#fff",lineColor:"#fff",minCellWidth:10},c={...p,cellWidth:14.5},d={fontSize:8,fillColor:"#00435d",textColor:"#fff",lineColor:"#fff"};function U(){let Z=[];for(let h=0;h<u.length;h++)Z.push([{content:String(h+1),styles:{minCellWidth:5,fontSize:8}},{content:u[h].ItemName,styles:{minCellWidth:30,fontSize:8}},{content:u[h].VendorItemName||"N/A",styles:{minCellWidth:30,fontSize:8}},{content:u[h].HsnCode||"N/A",styles:{minCellWidth:15,fontSize:8}},{content:u[h].CatalogNo||"N/A",styles:{minCellWidth:20,fontSize:8}},{content:u[h].Converter||"",styles:{minCellWidth:10,fontSize:8}},{content:u[h].BarcodeNo||"N/A",styles:{minCellWidth:15,fontSize:8}},{content:u[h].BatchNumber||"",styles:{minCellWidth:15,fontSize:8}},{content:u[h].Rate.toString().match(/^\d+(?:\.\d{0,2})?/)||"",styles:{minCellWidth:15,fontSize:8}},{content:u[h].ReleasedCount||"",styles:{minCellWidth:10,fontSize:8}},{content:u[h].AdjustQty||"N/A",styles:{minCellWidth:10,fontSize:8}},{content:u[h].AdjustReason||"N/A",styles:{minCellWidth:30,fontSize:8}},{content:u[h].DiscountPer||"0",styles:{minCellWidth:15,fontSize:8}},{content:u[h].CGSTPer||"0",styles:{minCellWidth:15,fontSize:8}},{content:u[h].SGSTPer||"",styles:{minCellWidth:15,fontSize:8}},{content:u[h].IGSTPer||"0",styles:{minCellWidth:15,fontSize:8}},{content:u[h].DiscountAmount.toString().match(/^\d+(?:\.\d{0,2})?/)||"",styles:{minCellWidth:15,fontSize:8}},{content:u[h].TaxAmount.toString().match(/^\d+(?:\.\d{0,2})?/)||"",styles:{minCellWidth:15,fontSize:8}},{content:u[h].UnitPrice.toString().match(/^\d+(?:\.\d{0,2})?/)||"",styles:{minCellWidth:15,fontSize:8}},{content:u[h].TotalAmount.toString().match(/^\d+(?:\.\d{0,2})?/)||"",styles:{minCellWidth:15,fontSize:8}}]);return Z}const G="https://yoda-task-manager.s3.ap-south-1.amazonaws.com/users/profile/verificationdocuments/yodalimslogo.png";i.addImage(G,"PNG",100,5,110,15);let T=this.datepipe.transform(l[0].GRNDate,"dd-MMM-yyyy");(function ze(){V()(i,{head:[[{content:"Goods Receipt Notes Details",colSpan:6,styles:{...p,fontSize:14,fontStyle:"bold",halign:"center",lineWidth:{bottom:1}}}],[{content:"Goods Receipt No",styles:{...p}},{content:"GRN Date",styles:{...p}},{content:"Supplier Name",styles:{...p}},{content:"Purchase Order No",styles:{...p,cellWidth:60}},{content:"Invoice No",styles:{...p}},{content:"Location",styles:{...p}}]],body:[[{content:l[0].LedgerTransactionNo},{content:T},{content:l[0].SupplierName},{content:l[0].PurchaseOrderNo},{content:l[0].InvoiceNo},{content:l[0].Location}]],startY:25,theme:"grid",tableWidth:290,margin:{left:3}})})(),function Ke(){V()(i,{head:[[{content:"Chalan No",styles:{...p}},{content:"Freight Amount",styles:{...p}},{content:"Octroi Amount",styles:{...p}},{content:"Gross Amount",styles:{...p}},{content:"Discount Amount",styles:{...p}},{content:"GST Amount",styles:{...p}},{content:"Round Off Amount",styles:{...p}},{content:"Net Amount",styles:{...p}}]],body:[[{content:l[0].ChalanNo||"N/A"},{content:l[0].Freight},{content:l[0].Octori},{content:l[0].GrossAmount.toString().match(/^\d+(?:\.\d{0,2})?/)||"0"},{content:l[0].DiscountOnTotal.toString().match(/^\d+(?:\.\d{0,2})?/)||"0"},{content:b.toString().match(/^\d+(?:\.\d{0,2})?/)||"0"},{content:l[0].RoundOff||"0"},{content:l[0].NetAmount.toString().match(/^\d+(?:\.\d{0,2})?/)||"0"}]],foot:[[{content:`Total Amount in Words: ${I}`,colSpan:4,styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#cecece"}},{content:`Total GRN Amount in INR: ${l[0].NetAmount.toString().match(/^\d+(?:\.\d{0,2})?/)||"0"}`,colSpan:4,styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#cecece"}}]],theme:"grid",tableWidth:290,margin:{left:3}})}(),function $e(){V()(i,{head:[[{content:"S.No",styles:{...c,cellWidth:8}},{content:"Item Name",styles:{...c,cellWidth:20}},{content:"Vendor Item Name",styles:{...c,cellWidth:20}},{content:"HSN code",styles:{...c}},{content:"Catalog No",styles:{...c}},{content:"Converter",styles:{...c,cellWidth:10}},{content:"Barcode",styles:{...c}},{content:"Batch Number",styles:{...c}},{content:"Item rate",styles:{...c}},{content:"Order qty",styles:{...c}},{content:"Adjust qty",styles:{...c}},{content:"Adjust reason",styles:{...c}},{content:"Discount %",styles:{...c}},{content:"CGST%",styles:{...c}},{content:"SGST%",styles:{...c}},{content:"IGST%",styles:{...c}},{content:"Discount Amount",styles:{...c}},{content:"GST Amount",styles:{...c,fontSize:7}},{content:"Buy Price",styles:{...c}},{content:"Net Amount",styles:{...c}}]],body:U(),foot:[[{content:`Total  amount in INR : ${l[0].NetAmount.toString().match(/^\d+(?:\.\d{0,2})?/)||"0"}`,colSpan:20,styles:{...d,lineWidth:{bottom:1}}}],[{content:`Created by : ${l[0].MakerByName||""}`,colSpan:4,styles:{...d}},{content:`Checked by : ${1==n||2==n?l[0].ChekedByName:""}`,colSpan:4,styles:{...d}},{content:`Approved by : ${2==n?l[0].AprovedByName||"":"N/A"}`,colSpan:4,styles:{...d}},{content:`Post by : ${l[0].PostedByName||""}`,colSpan:4,styles:{...d}},{content:`Cancel by : ${l[0].CancelByName||""}`,colSpan:4,styles:{...d}}]],theme:"grid",tableWidth:290,margin:{left:3,top:30},willDrawPage:Z=>{},didDrawPage:Z=>{Z.pageNumber>1&&(function C(Z){i.text("Goods Receipt Note Details",3,10-Z).setFontSize(10)}(0),function Ye(Z){i.text(`Goods Receipt No: ${l[0].LedgerTransactionNo}\nGRN Date: ${T}`,3,25-Z).setFontSize(10)}(8),function w(){i.addImage(G,"PNG",220,8,70,10)}())}})}(),function k(){const Q=`Date: ${(new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}).replace(/ /g,"-")}\nThis is computer generated document, hence signature is not required.`;i.text(Q,290,190,{align:"right"}).setFontSize(8)}();let z=new Date(l[0].GRNDate),en=String(z.getDate()).padStart(2,"0")+String(z.getMonth()+1).padStart(2,"0")+String(z.getFullYear());if(""!==o){const Z=i.output("bloburl"),h=window.open(Z);setTimeout(()=>{h.print()},250)}else i.save(`GRN-Report-${l[0].LedgerTransactionNo}_${l[0].SupplierCode}_${en}.pdf`)}),this.invoiceGuid="",this.getGRNStatus()}ViewGRN(e){this.GrnViewDetails=e,this.invoiceGuid=e.Guid,this.GRNnumber=e.LedgerTransactionNo,this.status=e.Status,this.globalService.startSpinner(),this.grnService.GetEditGRNdetails(this.invoiceGuid).subscribe(n=>{this.satusList=n.listGetEditGRNdetails||[],this.viewitemDetails=n.listitemsDetails||[],this.invoiceDocuments=n.listinvoiceDocuments||[],this.totalTaxAmount=this.viewitemDetails?.reduce((o,i)=>{let r;return r=i?.IGSTPer>0?i?.ReleasedCount*(i?.Rate-i?.Rate*i?.DiscountPer*.01)*(.01*i?.IGSTPer):i?.ReleasedCount*(i?.Rate-i?.Rate*i?.DiscountPer*.01)*(.01*(i?.SGSTPer+i?.CGSTPer)),o+r},0),this.globalService.stopSpinner()},n=>{this.globalService.stopSpinner()})}getStatus(e){localStorage.setItem("GrnStatus",e.StatusName)}GetAllUsersList(){this.userManagementService.getUsersList(this.center).subscribe(e=>{this.userList=e},e=>{})}onUserGuidChange(e){this.UserGuid=e.UserGuid}FiltersCheck(e){e.length>0?("Cancel"==e&&(this.globalService.startSpinner(),this.grnstsatusList=this.GRNList.filter(n=>1==n.Iscancel),this.globalService.stopSpinner()),"Post"==e&&(this.globalService.startSpinner(),this.grnstsatusList=this.GRNList.filter(n=>1==n.IsPost),this.globalService.stopSpinner()),"UnPost"==e&&(this.globalService.startSpinner(),this.grnstsatusList=this.GRNList.filter(n=>0==n.IsPost||null),this.globalService.stopSpinner())):this.grnstsatusList=this.GRNList}onDataRemove(){this.FromDate="",this.removeFromDate=null,this.removeTodate=null,this.selecteFromDate="",this.selecteToDate="",this.selectedSuppName=null,this.CenterLocationGuid="",this.selectedStatuses=[],this.Cancel=null,this.post=null,this.Unpost=null,this.MakerStatus=null,this.ChekerStatus=null,this.selectedStatus="",this.getGRNStatus()}Getevent(e){this.Cancel="",this.post="",this.Unpost="",this.MakerStatus="",this.ChekerStatus="","Cancel"==e.target.value&&(this.Cancel=e.target.value),"Post"==e.target.value&&(this.post=e.target.value),"Unpost"==e.target.value&&(this.Unpost=e.target.value),"Maker"==e.target.value&&(this.MakerStatus=e.target.value),"Checked"==e.target.value&&(this.ChekerStatus=e.target.value),this.pageNumber=1,this.getGRNStatus()}SelectGRN(e){this.invoiceGuid=e.Guid?e.Guid:this.invoiceGuid,this.GRNnumber=e.LedgerTransactionNo}handleCheckboxChange(e){this.allcheckbox=!0,this.addItemslist.value.forEach(n=>{1==e.target.checked?(n.IsSelected=!0,this.isChecked=!0):(n.IsSelected=!1,this.isChecked=!1)})}GetPoNumbers(e){localStorage.setItem("PurchaseOrderNo",e.PurchaseOrderNo),localStorage.setItem("PurchaseOrderGuid",e.PurchaseOrderGuid),this.router.navigate(["/purchase-orders/po-view"])}PreviewInvoice(e){this.Document=e}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(v.vL),t.Y36(v.NG),t.Y36(W.z),t.Y36(vt.U),t.Y36(L.F0),t.Y36(X.x),t.Y36(tt.x),t.Y36(et.$),t.Y36(v.FF),t.Y36(P.uU))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-grn-status"]],viewQuery:function(e,n){if(1&e&&t.Gf(R.nE,5),2&e){let o;t.iGM(o=t.CRH())&&(n.table=o.first)}},features:[t._Bn([{provide:v.NG,useClass:st}])],decls:64,vars:19,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard"],["aria-current","items",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title","d-flex","align-items-center","justify-content-between","gap-2"],[1,"d-flex","align-items-center","justify-content-end"],["type","button",1,"d-block","ms-auto","navbar-toggler","filter-button",3,"click"],[1,"feather","icon-filter","size-18"],["ngbDropdown","",1,"d-inline-block","ms-2"],["class","btn btn-primary","id","dropdownButtonPrimary","ngbDropdownToggle","",4,"ngIf"],["ngbDropdownMenu","","aria-labelledby","dropdownButtonPrimary"],["ngbDropdownItem","","routerLink","/grn/new-grn"],["ngbDropdownItem","","routerLink","/grn/grn-against-po"],[1,"collapse","navbar-collapse","mb-3",3,"ngbCollapse"],[1,"d-flex","align-items-xl-center","flex-column","flex-xl-row","flex-wrap","gap-2","justify-content-end"],[1,"form-control","form-select","maxw-200",3,"ngModel","change","ngModelChange"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["bindLabel","CenterLocationName","bindValue","CenterGuid","placeholder","search by grn location",1,"ng-select-custom-250min",3,"items","ngModel","maxlength","ngModelChange","change"],[1,"d-flex","align-items-xl-center","flex-shrink-0","range-selection","flex-column","flex-xl-row","gap-2"],[1,"input-group"],["placeholder","dd-mm-yyyy","name","dp1","ngbDatepicker","","readonly","",1,"form-control",3,"ngModel","maxDate","ngModelChange","dateSelect"],["d1","ngbDatepicker"],["type","button",1,"input-group-text",3,"click"],[1,"feather","icon-calendar","icon-md","text-muted"],["placeholder","dd-mm-yyyy","name","dp","readonly","","ngbDatepicker","",1,"form-control",3,"minDate","ngModel","ngModelChange","dateSelect"],["d2","ngbDatepicker"],[1,"d-flex","align-items-center","flex-column","flex-sm-row","gap-2"],[4,"ngIf"],["type","text","placeholder","Search",1,"form-control","me-1","h-34","search-custom-200min",3,"maxLength","keyup"],["class","col-md-12 mb-2 text-end",4,"ngIf"],[1,"p-0",3,"rows"],["class","table",4,"ngIf"],[3,"type","cols",4,"ngIf"],["class","cartd-footer",4,"ngIf"],["xlModal",""],["CancelGRN",""],["PostGRN",""],["GRN",""],["previewItem",""],["id","dropdownButtonPrimary","ngbDropdownToggle","",1,"btn","btn-primary"],[3,"value"],[1,"text-muted","text-small","flex-shrink-0","align-self-start","align-self-sm-center"],["name","rowLimit","id","rowLimit",1,"form-control","form-select","me-1","h-34","w-100","w-md-75",3,"change"],[1,"col-md-12","mb-2","text-end"],[1,"btn","btn-link","btn-sm","text-underline","px-0",3,"click"],[1,"table"],[4,"ngFor","ngForOf"],[1,"truncate"],[3,"ngClass"],[1,"truncate",3,"title"],[1,"text-primary"],["ngbDropdown","",1,"d-flex"],[1,"btn","btn-outline-primary","btn-xs","me-1",3,"click"],[1,"feather","icon-eye"],["id","actionsDropdown","placement","bottom","container","body","popoverClass","dataTableActions",1,"btn","btn-secondary","btn-xs","mr-2",3,"ngbPopover"],[1,"feather","icon-chevron-down"],["dataTableActions",""],["aria-labelledby","actionsDropdown"],["class","border-bottom","ngbDropdownItem","",3,"routerLink","click",4,"ngIf"],["class","border-bottom","ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","",1,"border-bottom",3,"click"],[1,"feather","icon-printer"],[1,"feather","icon-download"],["ngbDropdownItem","",1,"border-bottom",3,"routerLink","click"],[1,"feather","icon-edit"],[1,"feather","icon-file-text"],[1,"feather","icon-x"],[1,"feather","icon-check-square"],[1,"feather","icon-thumbs-up"],[3,"type","cols"],[1,"minH-500","d-flex","align-items-center","justify-content-center"],[1,"py-5","text-muted"],[1,"d-flex","flex-column","justify-content-center","gap-1","align-items-center","fs-4"],[1,"feather","icon-alert-circle","fs-2"],[1,"cartd-footer"],[1,"d-flex","justify-content-center","my-3","pe-3"],[1,"ms-auto","d-sm-table",3,"collectionSize","pageSize","page","maxSize","rotate","boundaryLinks","size","pageChange"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","w-100"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"container-fluid","d-flex","justify-content-between","mt-4","flex-sm-row","flex-column"],[1,"col-lg-5","ps-0"],[1,"mt-1","mb-1"],[1,"fw-bold"],[1,"col-lg-4","pe-0","text-sm-end"],[1,"rupee"],[1,"mb-1"],["class","my-2",4,"ngIf"],["class","container",4,"ngIf"],[1,"my-2"],[1,"modal-body"],[1,"table","table-bordered","pt-3"],[1,"freeze-col"],["class","card",4,"ngIf"],[1,"modal-footer","justify-content-center"],["role","group","aria-label","Basic mixed styles example",1,"btn-group","btn-group-sm"],["type","button","class","btn btn-outline-secondary",3,"routerLink","click",4,"ngIf"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"container"],[1,"col-sm-12"],["class","col-sm-12",4,"ngIf"],[3,"title"],[1,"table-responsive"],[1,"table","bg-white"],["type","button",1,"btn","btn-outline-secondary",3,"routerLink","click"],["id","exampleModalLabel",1,"modal-title"],[1,"mb-3"],["for","itemName",1,"form-label"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary","me-2",3,"click"],["type","button",1,"btn","btn-primary","submit",3,"click"],[1,"mb-22"],["for","reason",1,"form-label"],["type","text","id","reason","name","reason",1,"form-control",3,"ngModel","ngModelChange"],["for","UserName",1,"form-label"],["bindLabel","UserName","bindValue","UserGuid","placeholder","Search by user name",1,"ng-select-custom-250min",3,"items","ngModel","notFoundText","inputAttrs","disabled","change","ngModelChange"],[1,"widget-content"],[1,"default-form"],[1,"row","form"],["viewer","url",2,"width","100%","height","75vh",3,"url"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._uU(4,"Dashboard"),t.qZA()(),t.TgZ(5,"li",4),t._uU(6,"GRN Status"),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9)(12,"div"),t._uU(13,"GOODS RECEIPT NOTES"),t.qZA(),t.TgZ(14,"div",10)(15,"button",11),t.NdJ("click",function(){return n.isMenuCollapsed=!n.isMenuCollapsed}),t._UZ(16,"i",12),t.qZA(),t.TgZ(17,"div",13),t.YNc(18,ft,2,0,"button",14),t.TgZ(19,"div",15)(20,"button",16),t._uU(21,"Create New GRN"),t.qZA(),t.TgZ(22,"button",17),t._uU(23,"GRN Against PO"),t.qZA()()()()(),t.TgZ(24,"div",18)(25,"div",19)(26,"select",20),t.NdJ("change",function(r){return n.Getevent(r)})("ngModelChange",function(r){return n.selectedStatus=r}),t.TgZ(27,"option",21),t._uU(28,"Select status"),t.qZA(),t.YNc(29,It,2,2,"option",22),t.qZA(),t.TgZ(30,"ng-select",23),t.NdJ("ngModelChange",function(r){return n.selectedSuppName=r})("change",function(r){return n.change(r)}),t.qZA(),t.TgZ(31,"form",24)(32,"div")(33,"div",25)(34,"input",26,27),t.NdJ("ngModelChange",function(r){return n.removeFromDate=r})("dateSelect",function(r){return n.selectFromDate(r)}),t.qZA(),t.TgZ(36,"button",28),t.NdJ("click",function(){t.CHM(o);const r=t.MAs(35);return t.KtG(r.toggle())}),t._UZ(37,"i",29),t.qZA()()(),t.TgZ(38,"div")(39,"div",25)(40,"input",30,31),t.NdJ("ngModelChange",function(r){return n.removeTodate=r})("dateSelect",function(r){return n.selectToDate(r)}),t.qZA(),t.TgZ(42,"button",28),t.NdJ("click",function(){t.CHM(o);const r=t.MAs(41);return t.KtG(n.FromDate?r.toggle():"")}),t._UZ(43,"i",29),t.qZA()()(),t.TgZ(44,"div",32),t.YNc(45,Nt,5,4,"ng-container",33),t.TgZ(46,"input",34),t.NdJ("keyup",function(r){return n.changeSearch(r)}),t.qZA()()()(),t.YNc(47,Gt,3,0,"div",35),t.qZA(),t.TgZ(48,"div",36)(49,"double-scroll"),t.YNc(50,yt,45,1,"table",37),t.YNc(51,Ut,1,2,"app-shimmers",38),t.qZA()(),t.YNc(52,Ft,7,0,"ng-container",33),t.qZA(),t.YNc(53,qt,3,7,"div",39),t.qZA()()(),t.YNc(54,Yt,138,25,"ng-template",null,40,t.W1O),t.YNc(56,zt,18,1,"ng-template",null,41,t.W1O),t.YNc(58,Kt,28,8,"ng-template",null,42,t.W1O),t.YNc(60,jt,21,7,"ng-template",null,43,t.W1O),t.YNc(62,$t,15,1,"ng-template",null,44,t.W1O)}2&e&&(t.xp6(18),t.Q6J("ngIf",n.roles.toLowerCase().includes("Maker".toLowerCase())),t.xp6(6),t.Q6J("ngbCollapse",n.isMenuCollapsed),t.xp6(2),t.Q6J("ngModel",n.selectedStatus),t.xp6(3),t.Q6J("ngForOf",n.itemOptionsOrders1),t.xp6(1),t.Q6J("items",n.CenterLocationList)("ngModel",n.selectedSuppName)("maxlength",50),t.xp6(4),t.Q6J("ngModel",n.removeFromDate)("maxDate",n.selectedDate),t.xp6(6),t.Q6J("minDate",n.minDate)("ngModel",n.removeTodate),t.xp6(5),t.Q6J("ngIf",!n.isNoData),t.xp6(1),t.Q6J("maxLength",50),t.xp6(1),t.Q6J("ngIf",n.fromDate||n.toDate),t.xp6(1),t.Q6J("rows",n.grnstsatusList),t.xp6(2),t.Q6J("ngIf",n.totalCount>0&&!n.shimmerVisible),t.xp6(1),t.Q6J("ngIf",n.shimmerVisible),t.xp6(1),t.Q6J("ngIf",n.isNoData&&!n.shimmerVisible),t.xp6(1),t.Q6J("ngIf",0!=n.grnstsatusList.length))},dependencies:[P.mk,P.sg,P.O5,L.rH,L.yS,v._D,v.J4,v.jt,v.iD,v.Vi,v.TH,v.N9,v.o8,B.w9,m._Y,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.JL,m.nD,m.On,m.F,nt.Z,H.zr,ot.I,P.OU,P.uU,it.U],styles:[".w-75[_ngcontent-%COMP%]{width:75px}.size-18[_ngcontent-%COMP%]{font-size:18px;color:#6571ff}.minH-500[_ngcontent-%COMP%]{min-height:500px}.fs-15[_ngcontent-%COMP%]{font-size:37px}.mr-2[_ngcontent-%COMP%]{margin-right:15px}.maxw-200[_ngcontent-%COMP%]{max-width:200px}.truncate[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100px}.freeze-col[_ngcontent-%COMP%]{position:sticky;left:0;width:150px;min-width:150px;z-index:2;background:#fff}"]}),a})();var lt=_(3056);const Xt=["fileInput"];function te(a,s){if(1&a&&(t.TgZ(0,"div",24)(1,"label",25),t._uU(2,"GRN No: "),t.TgZ(3,"strong"),t._uU(4),t.qZA()()()),2&a){const e=t.oxw();t.xp6(4),t.Oqu(e.GRNdetails[0].LedgerTransactionNo)}}const Y=function(){return{maxlength:"50"}};function ee(a,s){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",5)(2,"div",26)(3,"div",24)(4,"label",27),t._uU(5,"GRN location"),t.qZA(),t.TgZ(6,"ng-select",28),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.locationGuid=o)})("change",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.GetPOnumber(o))}),t.qZA()()(),t.TgZ(7,"div",26)(8,"div",24)(9,"label",27),t._uU(10,"Suppliers"),t.qZA(),t.TgZ(11,"ng-select",29),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.selectedVender=o)})("change",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.GetVenderdetails(o))}),t.qZA()()(),t.TgZ(12,"div",26)(13,"div",24)(14,"label",27),t._uU(15,"Order number"),t.qZA(),t.TgZ(16,"ng-multiselect-dropdown",30),t.NdJ("onDeSelect",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.onItemSelect(o))}),t.qZA()()(),t.TgZ(17,"div",31)(18,"div",24)(19,"button",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.GetSupplier(o.InvoiceDetailForm.value.PONumber,o.index))}),t._UZ(20,"span",33),t._uU(21," Search"),t.qZA()()(),t.TgZ(22,"div",34),t._UZ(23,"hr"),t.qZA()(),t.TgZ(24,"h6",10),t._uU(25,"Order Details"),t.qZA(),t.TgZ(26,"div",5)(27,"div",26)(28,"div",24)(29,"label",35),t._uU(30,"Order date "),t.qZA(),t.TgZ(31,"div",36),t._UZ(32,"input",37,38),t.qZA()()(),t.TgZ(34,"div",26)(35,"div",24)(36,"label",39),t._uU(37,"Supplier"),t.qZA(),t._UZ(38,"input",40),t.qZA()(),t.TgZ(39,"div",26)(40,"div",24)(41,"label",41),t._uU(42,"Users"),t.qZA(),t.TgZ(43,"ng-select",42),t.NdJ("change",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.onUserGuidChange(o))}),t.qZA()()(),t.TgZ(44,"div",34),t._UZ(45,"hr"),t.qZA()(),t.BQk()}if(2&a){const e=t.oxw();let n;t.xp6(6),t.Q6J("items",e.CenterLocacityList)("ngModel",e.locationGuid)("notFoundText","No location found!")("readonly",e.InvoiceGuid)("inputAttrs",t.DdM(19,Y)),t.xp6(5),t.Q6J("items",e.uniqueList)("ngModel",e.selectedVender)("notFoundText","No suppliers found!")("readonly",e.InvoiceGuid)("inputAttrs",t.DdM(20,Y)),t.xp6(5),t.Q6J("placeholder","Search by purchase order no.")("settings",e.dropdownSettings)("data",e.VenderDetails)("readonly",e.InvoiceGuid),t.xp6(3),t.Q6J("disabled",""!=e.InvoiceGuid||!(null!=(n=e.InvoiceDetailForm.get("PONumber"))&&n.value)||0==(null==(n=e.InvoiceDetailForm.get("PONumber"))?null:n.value)||!(null!=(n=e.InvoiceDetailForm.get("SupplierName"))&&n.value)||!(null!=(n=e.InvoiceDetailForm.get("CenterLocationGuid"))&&n.value)),t.xp6(24),t.Q6J("items",e.userList)("notFoundText","No users found!")("readonly",e.InvoiceGuid&&"Checked"==e.GrnStatus)("inputAttrs",t.DdM(21,Y))}}function ne(a,s){1&a&&t._UZ(0,"app-shimmers",43),2&a&&t.Q6J("type","form-2")}function oe(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",68),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),i=o.index,r=o.$implicit,l=t.oxw(2);return t.KtG(l.removeitem(i,r))}),t._UZ(1,"i",69),t._uU(2," Delete "),t.qZA()}}const ie=function(){return{standalone:!0}},ae=function(a){return["/items/view-item",a]};function re(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"tr",51),t.ynx(1,52),t.TgZ(2,"td")(3,"button",53),t.NdJ("click",function(){const i=t.CHM(e).index,r=t.oxw(2);return t.KtG(r.AddItemsList(i))}),t._UZ(4,"span",54),t._uU(5," Add "),t.qZA()(),t.TgZ(6,"td",47),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._UZ(11,"input",55),t.qZA(),t.TgZ(12,"td"),t._UZ(13,"input",56),t.qZA(),t.TgZ(14,"td")(15,"div",57),t._UZ(16,"input",58,59),t.TgZ(18,"button",60),t.NdJ("click",function(){const i=t.CHM(e).index,r=t.MAs(17),l=t.oxw(2);let u;return t.KtG(1==(null==(u=l.InvoiceDetailForm.get("ListGRNItems"))?null:u.value[i].IsExpirable)?"":r.toggle())}),t._UZ(19,"i",61),t.qZA()()(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td")(25,"input",62),t.NdJ("keypress",function(o){return o.charCode>=48&&o.charCode<=57||46===o.charCode})("input",function(){const i=t.CHM(e).index,r=t.oxw(2);return t.KtG(r.ChangePrice(i,0))})("ngModelChange",function(o){const r=t.CHM(e).index,l=t.oxw(2);return t.KtG(l.onReleasedCountChange(o,r))}),t.qZA()(),t.TgZ(26,"td")(27,"input",63),t.NdJ("ngModelChange",function(o){const r=t.CHM(e).index,l=t.oxw(2);return t.KtG(l.onDiscountChange(o,r))})("input",function(){const o=t.CHM(e),i=o.index,r=o.$implicit,l=t.oxw(2);return t.KtG(l.ChangePrice(i,r))}),t.qZA()(),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.TgZ(30,"td"),t._uU(31),t.qZA(),t.TgZ(32,"td"),t._uU(33),t.qZA(),t.TgZ(34,"td"),t._uU(35),t.qZA(),t._UZ(36,"td"),t.TgZ(37,"td"),t._uU(38),t.qZA(),t.TgZ(39,"td"),t._uU(40),t.qZA(),t.TgZ(41,"td"),t._uU(42),t.qZA(),t.TgZ(43,"td"),t._uU(44),t.ALo(45,"exactNumbers"),t.qZA(),t.TgZ(46,"td",64),t._uU(47),t.ALo(48,"exactNumbers"),t.qZA(),t.TgZ(49,"td"),t._uU(50),t.ALo(51,"exactNumbers"),t.qZA(),t.TgZ(52,"td"),t._uU(53),t.ALo(54,"exactNumbers"),t.qZA(),t.TgZ(55,"td")(56,"a",65),t._UZ(57,"span",66),t._uU(58," View "),t.qZA(),t.YNc(59,oe,3,0,"button",67),t.qZA(),t.BQk(),t.qZA()}if(2&a){const e=s.index,n=t.oxw(2);let o,i,r,l,u,N,b,f,g,I,p,c,d,x,U,M,G,S,y,F,A,q,D,w;t.xp6(1),t.Q6J("formGroupName",e),t.xp6(2),t.Q6J("disabled",0==(null==(o=n.InvoiceDetailForm.get("ListGRNItems"))?null:o.value[e].IsButtonShow)),t.xp6(4),t.hij("",null==(i=n.InvoiceDetailForm.get("ListGRNItems"))?null:i.value[e].ItemName," "),t.xp6(2),t.Oqu(null==(r=n.InvoiceDetailForm.get("ListGRNItems"))?null:r.value[e].VendorItemName),t.xp6(2),t.Q6J("value",null==(l=n.InvoiceDetailForm.get("ListGRNItems"))?null:l.value[e].BarcodeNo),t.xp6(2),t.Q6J("value",null==(u=n.InvoiceDetailForm.get("ListGRNItems"))?null:u.value[e].BatchNumber),t.xp6(3),t.Q6J("minDate",n.newDate)("required",0==(null==(N=n.InvoiceDetailForm.get("ListGRNItems"))?null:N.value[e].IsExpirable))("disabled",1==(null==(b=n.InvoiceDetailForm.get("ListGRNItems"))?null:b.value[e].IsExpirable))("container","body"),t.xp6(5),t.Oqu(null==(f=n.InvoiceDetailForm.get("ListGRNItems"))?null:f.value[e].InstialCount),t.xp6(2),t.hij("",null==(g=n.InvoiceDetailForm.get("ListGRNItems"))?null:g.value[e].ItemRate," "),t.xp6(2),t.Q6J("min",0)("ngModelOptions",t.DdM(40,ie))("value",null==(I=n.InvoiceDetailForm.get("ListGRNItems"))?null:I.value[e].ReleasedCount),t.xp6(2),t.Q6J("min",0)("max",100)("value",null==(p=n.InvoiceDetailForm.get("ListGRNItems"))?null:p.value[e].DiscountPercentage),t.xp6(2),t.hij("",null==(c=n.InvoiceDetailForm.get("ListGRNItems"))?null:c.value[e].ItemId," "),t.xp6(2),t.hij("",null==(d=n.InvoiceDetailForm.get("ListGRNItems"))?null:d.value[e].ItemCode," "),t.xp6(2),t.hij("",null==(x=n.InvoiceDetailForm.get("ListGRNItems"))?null:x.value[e].CatalogNo," "),t.xp6(2),t.hij("",null==(U=n.InvoiceDetailForm.get("ListGRNItems"))?null:U.value[e].Converter," "),t.xp6(3),t.hij("",null==(M=n.InvoiceDetailForm.get("ListGRNItems"))?null:M.value[e].CGSTPer," "),t.xp6(2),t.hij(" ",null==(G=n.InvoiceDetailForm.get("ListGRNItems"))?null:G.value[e].SGSTPer," "),t.xp6(2),t.hij(" ",null==(S=n.InvoiceDetailForm.get("ListGRNItems"))?null:S.value[e].IGSTPer," "),t.xp6(2),t.hij("",t.lcZ(45,32,null==(y=n.InvoiceDetailForm.get("ListGRNItems"))?null:y.value[e].DiscountAmount)," "),t.xp6(2),t.Q6J("value",null==(F=n.InvoiceDetailForm.get("ListGRNItems"))?null:F.value[e].TaxAmount),t.xp6(1),t.hij(" ",t.lcZ(48,34,null==(A=n.InvoiceDetailForm.get("ListGRNItems"))?null:A.value[e].TaxAmount)," "),t.xp6(3),t.hij("",t.lcZ(51,36,null==(q=n.InvoiceDetailForm.get("ListGRNItems"))?null:q.value[e].NetAmount)," "),t.xp6(3),t.hij("",t.lcZ(54,38,null==(D=n.InvoiceDetailForm.get("ListGRNItems"))?null:D.value[e].TotalAmount)," "),t.xp6(3),t.Q6J("routerLink",t.VKq(41,ae,null==(w=n.InvoiceDetailForm.get("ListGRNItems"))?null:w.value[e].ItemGuid)),t.xp6(3),t.Q6J("ngIf",1!=n.addItemslist.controls.length)}}const O=function(a){return{"text-danger":a}};function se(a,s){if(1&a&&(t.ynx(0),t.TgZ(1,"h6",10),t._uU(2,"Item Details"),t.qZA(),t.TgZ(3,"div"),t.ynx(4)(5),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",44)(11,"table",45)(12,"thead",46)(13,"tr")(14,"th"),t._uU(15,"New Batch"),t.qZA(),t.TgZ(16,"th",47),t._uU(17,"Item"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Vendor Item Name"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Barcode"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Batch No. "),t.TgZ(24,"span",48),t._uU(25," *"),t.qZA()(),t.TgZ(26,"th"),t._uU(27,"Expiry on "),t.TgZ(28,"span",48),t._uU(29," *"),t.qZA()(),t.TgZ(30,"th"),t._uU(31,"Purchased Qty"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Rate "),t.TgZ(34,"span",49),t._uU(35,"\u20b9"),t.qZA()(),t.TgZ(36,"th"),t._uU(37,"Paid Qty"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"Discount %"),t.qZA(),t.TgZ(40,"th"),t._uU(41,"item Id"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"Item Code"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"Catalog No."),t.qZA(),t.TgZ(46,"th"),t._uU(47,"Converter"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"Consume Unit"),t.qZA(),t.TgZ(50,"th"),t._uU(51,"CGST %"),t.qZA(),t.TgZ(52,"th"),t._uU(53,"SGST %"),t.qZA(),t.TgZ(54,"th"),t._uU(55,"IGST % "),t.qZA(),t.TgZ(56,"th"),t._uU(57,"Dis. Amt. "),t.TgZ(58,"span",49),t._uU(59,"\u20b9"),t.qZA()(),t.TgZ(60,"th"),t._uU(61,"Total GST Amt. "),t.TgZ(62,"span",49),t._uU(63,"\u20b9"),t.qZA()(),t.TgZ(64,"th"),t._uU(65,"Buy Price "),t.TgZ(66,"span",49),t._uU(67,"\u20b9"),t.qZA()(),t.TgZ(68,"th"),t._uU(69,"Net AMT. "),t.TgZ(70,"span",49),t._uU(71,"\u20b9"),t.qZA()(),t.TgZ(72,"th"),t._uU(73,"Action"),t.qZA()()(),t.TgZ(74,"tbody"),t.YNc(75,re,60,43,"tr",50),t.qZA()()()()()(),t.TgZ(76,"div",34),t._UZ(77,"hr"),t.qZA()(),t.BQk()(),t.qZA(),t.BQk()),2&a){const e=t.oxw();t.xp6(24),t.Q6J("ngClass",t.VKq(3,O,!e.InvoiceDetailForm.value.BatchNumber)),t.xp6(4),t.Q6J("ngClass",t.VKq(5,O,!e.InvoiceDetailForm.value.ExpiryDate)),t.xp6(47),t.Q6J("ngForOf",e.addItemslist.controls)}}function le(a,s){1&a&&t._UZ(0,"app-shimmers",43),2&a&&t.Q6J("type","table")}function ce(a,s){1&a&&(t.TgZ(0,"div",94),t.O4$(),t.TgZ(1,"svg",95),t._UZ(2,"path",96)(3,"path",97),t.qZA()())}function ue(a,s){1&a&&(t.ynx(0),t.TgZ(1,"span",74),t._uU(2,"Invoice number is required!"),t.qZA(),t.BQk())}function de(a,s){1&a&&(t.ynx(0),t.TgZ(1,"span",74),t._uU(2,"Invoice date is required!"),t.qZA(),t.BQk())}function me(a,s){1&a&&(t.ynx(0),t.TgZ(1,"span",74),t._uU(2,"Challan number is required!"),t.qZA(),t.BQk())}function pe(a,s){1&a&&(t.ynx(0),t.TgZ(1,"span",74),t._uU(2,"Challan date is required!"),t.qZA(),t.BQk())}function he(a,s){1&a&&(t.ynx(0),t.TgZ(1,"span",74),t._uU(2,"Gate entry no is required!"),t.qZA(),t.BQk())}function _e(a,s){1&a&&(t.ynx(0),t.TgZ(1,"span",74),t._uU(2,"Frieght is required!"),t.qZA(),t.BQk())}function ge(a,s){1&a&&t.GkF(0)}function ve(a,s){1&a&&(t.ynx(0),t.TgZ(1,"span",74),t._uU(2,"Octroi is required!"),t.qZA(),t.BQk())}function fe(a,s){1&a&&t.GkF(0)}function Ie(a,s){1&a&&(t.ynx(0),t.TgZ(1,"span",74),t._uU(2,"Round off is required!"),t.qZA(),t.BQk())}function be(a,s){1&a&&t.GkF(0)}function Ne(a,s){1&a&&(t.ynx(0),t.TgZ(1,"span",74),t._uU(2,"GRN amount state is required!"),t.qZA(),t.BQk())}function Ge(a,s){1&a&&(t.ynx(0),t.TgZ(1,"span",74),t._uU(2,"Invoice amount is required!"),t.qZA(),t.BQk())}function Ce(a,s){1&a&&(t.ynx(0),t.TgZ(1,"span",74),t._uU(2,"Match Invoice amount and GRN amount!"),t.qZA(),t.BQk())}function Te(a,s){1&a&&t.GkF(0)}function Ze(a,s){1&a&&(t.ynx(0),t.TgZ(1,"span",74),t._uU(2,"Narration is required!"),t.qZA(),t.BQk())}function xe(a,s){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&a){const e=t.oxw().index,n=t.oxw(3);let o;t.xp6(1),t.hij("",null==(o=n.InvoiceDetailForm.get("ListInvoiceDocuments"))?null:o.value[e].OriginalFileName," ")}}function Ae(a,s){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&a){const e=t.oxw().index,n=t.oxw(3);let o;t.xp6(1),t.hij("",null==(o=n.InvoiceDetailForm.get("ListInvoiceDocuments"))?null:o.value[e].FileName," ")}}function De(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"td")(1,"button",102),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,i=t.oxw(3),r=t.MAs(37);let l;return i.openBasicModal(r),t.KtG(i.PreviewInvoice(null==(l=i.InvoiceDetailForm.get("ListInvoiceDocuments"))?null:l.value[o].FilePath))}),t._UZ(2,"span",66),t._uU(3," View "),t.qZA(),t.TgZ(4,"button",103),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,i=t.oxw(3);return t.KtG(i.remove(o))}),t._UZ(5,"span",104),t._uU(6," Delete "),t.qZA()()}}function Se(a,s){if(1&a&&(t.TgZ(0,"tr",101),t.ynx(1,52),t.YNc(2,xe,2,1,"td",12),t.YNc(3,Ae,2,1,"td",12),t.YNc(4,De,7,0,"td",12),t.BQk(),t.qZA()),2&a){const e=s.index,n=t.oxw(3);let o,i,r;t.xp6(1),t.Q6J("formGroupName",e),t.xp6(1),t.Q6J("ngIf",!(null!=(o=n.InvoiceDetailForm.get("ListInvoiceDocuments"))&&o.value[e].IsDeleted)),t.xp6(1),t.Q6J("ngIf",!(null!=(i=n.InvoiceDetailForm.get("ListInvoiceDocuments"))&&i.value[e].IsDeleted)),t.xp6(1),t.Q6J("ngIf",!(null!=(r=n.InvoiceDetailForm.get("ListInvoiceDocuments"))&&r.value[e].IsDeleted))}}function ye(a,s){if(1&a&&(t.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",98)(4,"table",45)(5,"thead")(6,"tr")(7,"th"),t._uU(8,"File type"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Invoice name"),t.qZA(),t.TgZ(11,"th",99),t._uU(12,"Action"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,Se,5,4,"tr",100),t.qZA()()()()()()),2&a){const e=t.oxw(2);t.xp6(11),t.Q6J("width",20),t.xp6(3),t.Q6J("ngForOf",e.InvoiceDocuments.controls)}}function Ue(a,s){1&a&&t._UZ(0,"app-shimmers",43),2&a&&t.Q6J("type","form-2")}function Fe(a,s){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"h6",10),t._uU(2,"Invoice Details"),t.qZA(),t.TgZ(3,"div")(4,"div",5)(5,"div",26)(6,"div",24)(7,"label",70),t._uU(8,"Invoice number"),t.TgZ(9,"span",48),t._uU(10," *"),t.qZA()(),t.TgZ(11,"div",71)(12,"input",72),t.NdJ("input",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.changeInvoice(o))}),t.qZA(),t.YNc(13,ce,4,0,"div",73),t.qZA(),t.YNc(14,ue,3,0,"ng-container",12),t.TgZ(15,"span",74),t._uU(16),t.qZA()()(),t.TgZ(17,"div",26)(18,"div",24)(19,"label",35),t._uU(20,"Invoice date"),t.TgZ(21,"span",48),t._uU(22," *"),t.qZA()(),t.TgZ(23,"div",36)(24,"input",75,76),t.NdJ("dateSelect",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.onFromDateSelect(o))}),t.qZA(),t.TgZ(26,"button",60),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(25);return t.KtG(o.toggle())}),t._UZ(27,"i",61),t.qZA()(),t.YNc(28,de,3,0,"ng-container",12),t.qZA()(),t.TgZ(29,"div",26)(30,"div",24)(31,"label",77),t._uU(32,"Challan number"),t.qZA(),t._UZ(33,"input",78),t.YNc(34,me,3,0,"ng-container",12),t.qZA()(),t.TgZ(35,"div",26)(36,"div",24)(37,"label",35),t._uU(38,"Challan date "),t.qZA(),t.TgZ(39,"div",36)(40,"input",79,80),t.NdJ("dateSelect",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.FromDateSelect(o))}),t.qZA(),t.TgZ(42,"button",60),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(41);return t.KtG(o.toggle())}),t._UZ(43,"i",61),t.qZA()(),t.YNc(44,pe,3,0,"ng-container",12),t.qZA()(),t.TgZ(45,"div",26)(46,"div",24)(47,"label",81),t._uU(48,"Gate entry no"),t.qZA(),t._UZ(49,"input",82),t.YNc(50,he,3,0,"ng-container",12),t.qZA()(),t.TgZ(51,"div",26)(52,"div",24)(53,"label",81),t._uU(54," Frieght amt "),t.qZA(),t.TgZ(55,"input",83),t.NdJ("input",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.ChangeNetAmt(o))}),t.qZA(),t.YNc(56,_e,3,0,"ng-container",12),t.YNc(57,ge,1,0,"ng-container",12),t.qZA()(),t.TgZ(58,"div",26)(59,"div",24)(60,"label",84),t._uU(61,"Octroi amt"),t.qZA(),t.TgZ(62,"input",85),t.NdJ("input",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.ChangeNetAmt(o))}),t.qZA(),t.YNc(63,ve,3,0,"ng-container",12),t.YNc(64,fe,1,0,"ng-container",12),t.qZA()(),t.TgZ(65,"div",26)(66,"div",24)(67,"label",81),t._uU(68,"Round off amt"),t.qZA(),t.TgZ(69,"input",86),t.NdJ("input",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.ChangeNetAmt(o))}),t.qZA(),t.YNc(70,Ie,3,0,"ng-container",12),t.YNc(71,be,1,0,"ng-container",12),t.qZA()(),t.TgZ(72,"div",26)(73,"div",24)(74,"label",84),t._uU(75,"GRN amount"),t.TgZ(76,"span",48),t._uU(77," *"),t.qZA()(),t._UZ(78,"input",87),t.YNc(79,Ne,3,0,"ng-container",12),t.qZA()(),t.TgZ(80,"div",26)(81,"div",24)(82,"label",81),t._uU(83,"Invoice amount"),t.TgZ(84,"span",48),t._uU(85," *"),t.qZA()(),t.TgZ(86,"input",88),t.NdJ("keypress",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.matcher(o,""))}),t.qZA(),t.YNc(87,Ge,3,0,"ng-container",12),t.YNc(88,Ce,3,0,"ng-container",12),t.YNc(89,Te,1,0,"ng-container",12),t.qZA()(),t.TgZ(90,"div",26)(91,"div",24)(92,"label",84),t._uU(93,"Narration"),t.TgZ(94,"span",48),t._uU(95," *"),t.qZA()(),t._UZ(96,"input",89),t.YNc(97,Ze,3,0,"ng-container",12),t.qZA()(),t.TgZ(98,"div",90)(99,"div",24)(100,"button",91),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),i=t.MAs(35);return o.openBasicModal(i),o.Isdisable=!0,t.KtG(o.filterInvoice())}),t._UZ(101,"span",92),t._uU(102," Add Invoice"),t.qZA()()(),t.YNc(103,ye,15,2,"div",93),t.qZA()(),t.YNc(104,Ue,1,1,"app-shimmers",13),t.BQk()}if(2&a){const e=t.oxw();let n,o,i,r,l,u,N,b,f,g,I,p,c,d,x,U,M,G,S,y,F,A,q,D,w,k;t.xp6(9),t.Q6J("ngClass",t.VKq(43,O,!e.InvoiceDetailForm.value.InvoiceNumber)),t.xp6(3),t.Q6J("maxlength",20)("ngClass",null!=(n=e.InvoiceDetailForm.get("InvoiceNumber"))&&n.hasError("required")&&null!=(n=e.InvoiceDetailForm.get("InvoiceNumber"))&&n.touched?"is-invalid":""),t.xp6(1),t.Q6J("ngIf",e.SpinnerCheck),t.xp6(1),t.Q6J("ngIf",(null==(o=e.InvoiceDetailForm.get("InvoiceNumber"))?null:o.hasError("required"))&&(null==(o=e.InvoiceDetailForm.get("InvoiceNumber"))?null:o.touched)),t.xp6(2),t.Oqu(e.ISinvoice),t.xp6(5),t.Q6J("ngClass",t.VKq(45,O,!e.InvoiceDetailForm.value.InvoiceDate)),t.xp6(3),t.Q6J("maxDate",e.newDate)("ngClass",null!=(i=e.InvoiceDetailForm.get("InvoiceDate"))&&i.hasError("required")&&null!=(i=e.InvoiceDetailForm.get("InvoiceDate"))&&i.touched?"is-invalid":""),t.xp6(4),t.Q6J("ngIf",(null==(r=e.InvoiceDetailForm.get("InvoiceDate"))?null:r.hasError("required"))&&(null==(r=e.InvoiceDetailForm.get("InvoiceDate"))?null:r.touched)),t.xp6(5),t.Q6J("maxlength",20)("ngClass",null!=(l=e.InvoiceDetailForm.get("ChallanNumber"))&&l.hasError("required")&&null!=(l=e.InvoiceDetailForm.get("ChallanNumber"))&&l.touched?"is-invalid":""),t.xp6(1),t.Q6J("ngIf",(null==(u=e.InvoiceDetailForm.get("ChallanNumber"))?null:u.hasError("required"))&&(null==(u=e.InvoiceDetailForm.get("ChallanNumber"))?null:u.touched)),t.xp6(6),t.Q6J("maxDate",e.newDate)("ngClass",null!=(N=e.InvoiceDetailForm.get("ChallanDate"))&&N.hasError("required")&&null!=(N=e.InvoiceDetailForm.get("ChallanDate"))&&N.touched?"is-invalid":""),t.xp6(4),t.Q6J("ngIf",(null==(b=e.InvoiceDetailForm.get("ChallanDate"))?null:b.hasError("required"))&&(null==(b=e.InvoiceDetailForm.get("ChallanDate"))?null:b.touched)),t.xp6(5),t.Q6J("maxlength",20)("ngClass",null!=(f=e.InvoiceDetailForm.get("GateEntryNo"))&&f.hasError("required")&&null!=(f=e.InvoiceDetailForm.get("GateEntryNo"))&&f.touched?"is-invalid":""),t.xp6(1),t.Q6J("ngIf",(null==(g=e.InvoiceDetailForm.get("GateEntryNo"))?null:g.hasError("required"))&&(null==(g=e.InvoiceDetailForm.get("GateEntryNo"))?null:g.touched)),t.xp6(5),t.Q6J("ngClass",null!=(I=e.InvoiceDetailForm.get("Frieght"))&&I.hasError("required")&&null!=(I=e.InvoiceDetailForm.get("Frieght"))&&I.touched?"is-invalid":""),t.xp6(1),t.Q6J("ngIf",(null==(p=e.InvoiceDetailForm.get("Frieght"))?null:p.hasError("required"))&&(null==(p=e.InvoiceDetailForm.get("Frieght"))?null:p.touched)),t.xp6(1),t.Q6J("ngIf",(null==(c=e.InvoiceDetailForm.get("Frieght"))?null:c.hasError("pattern"))&&(null==(c=e.InvoiceDetailForm.get("Frieght"))?null:c.touched)),t.xp6(5),t.Q6J("ngClass",null!=(d=e.InvoiceDetailForm.get("Octroi"))&&d.hasError("required")&&null!=(d=e.InvoiceDetailForm.get("Octroi"))&&d.touched?"is-invalid":""),t.xp6(1),t.Q6J("ngIf",(null==(x=e.InvoiceDetailForm.get("Octroi"))?null:x.hasError("required"))&&(null==(x=e.InvoiceDetailForm.get("Octroi"))?null:x.touched)),t.xp6(1),t.Q6J("ngIf",(null==(U=e.InvoiceDetailForm.get("Octroi"))?null:U.hasError("pattern"))&&(null==(U=e.InvoiceDetailForm.get("Octroi"))?null:U.touched)),t.xp6(5),t.Q6J("ngClass",null!=(M=e.InvoiceDetailForm.get("RoundOff"))&&M.hasError("required")&&null!=(M=e.InvoiceDetailForm.get("RoundOff"))&&M.touched?"is-invalid":""),t.xp6(1),t.Q6J("ngIf",(null==(G=e.InvoiceDetailForm.get("RoundOff"))?null:G.hasError("required"))&&(null==(G=e.InvoiceDetailForm.get("RoundOff"))?null:G.touched)),t.xp6(1),t.Q6J("ngIf",(null==(S=e.InvoiceDetailForm.get("RoundOff"))?null:S.hasError("pattern"))&&(null==(S=e.InvoiceDetailForm.get("RoundOff"))?null:S.touched)),t.xp6(5),t.Q6J("ngClass",t.VKq(47,O,!e.InvoiceDetailForm.value.NetTotal)),t.xp6(2),t.Q6J("ngClass",null!=(y=e.InvoiceDetailForm.get("NetTotal"))&&y.hasError("required")&&null!=(y=e.InvoiceDetailForm.get("NetTotal"))&&y.touched?"is-invalid":""),t.xp6(1),t.Q6J("ngIf",(null==(F=e.InvoiceDetailForm.get("NetTotal"))?null:F.hasError("required"))&&(null==(F=e.InvoiceDetailForm.get("NetTotal"))?null:F.touched)),t.xp6(5),t.Q6J("ngClass",t.VKq(49,O,!e.InvoiceDetailForm.value.InvoiceAmount)),t.xp6(2),t.Q6J("min",0)("ngClass",null!=(A=e.InvoiceDetailForm.get("InvoiceAmount"))&&A.hasError("required")&&null!=(A=e.InvoiceDetailForm.get("InvoiceAmount"))&&A.touched?"is-invalid":""),t.xp6(1),t.Q6J("ngIf",(null==(q=e.InvoiceDetailForm.get("InvoiceAmount"))?null:q.hasError("required"))&&(null==(q=e.InvoiceDetailForm.get("InvoiceAmount"))?null:q.touched)),t.xp6(1),t.Q6J("ngIf",e.InvoiceDetailForm.value.InvoiceAmount!=e.InvoiceDetailForm.value.NetTotal&&e.InvoiceDetailForm.value.InvoiceAmount),t.xp6(1),t.Q6J("ngIf",(null==(D=e.InvoiceDetailForm.get("InvoiceAmount"))?null:D.hasError("pattern"))&&(null==(D=e.InvoiceDetailForm.get("InvoiceAmount"))?null:D.touched)),t.xp6(5),t.Q6J("ngClass",t.VKq(51,O,!e.InvoiceDetailForm.value.Narration)),t.xp6(2),t.Q6J("maxlength",50)("ngClass",null!=(w=e.InvoiceDetailForm.get("Narration"))&&w.hasError("required")&&null!=(w=e.InvoiceDetailForm.get("Narration"))&&w.touched?"is-invalid":""),t.xp6(1),t.Q6J("ngIf",(null==(k=e.InvoiceDetailForm.get("Narration"))?null:k.hasError("required"))&&(null==(k=e.InvoiceDetailForm.get("Narration"))?null:k.touched)),t.xp6(6),t.Q6J("ngIf",0==e.IsDocumentShow),t.xp6(1),t.Q6J("ngIf",e.EditshimmerVisible)}}function qe(a,s){1&a&&t._UZ(0,"app-shimmers",43),2&a&&t.Q6J("type","table")}function we(a,s){if(1&a&&(t.TgZ(0,"span",114),t._uU(1),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(e.ShowPdfFile)}}function Pe(a,s){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&a){const e=t.oxw().index,n=t.oxw(2);let o;t.xp6(1),t.hij("",null==(o=n.InvoiceDetailForm.get("ListInvoiceDocuments"))?null:o.value[e].OriginalFileName," ")}}function Re(a,s){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&a){const e=t.oxw().index,n=t.oxw(2);let o;t.xp6(1),t.hij("",null==(o=n.InvoiceDetailForm.get("ListInvoiceDocuments"))?null:o.value[e].FileName," ")}}function Le(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"td")(1,"button",103),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,i=t.oxw(2);return t.KtG(i.remove(o))}),t._UZ(2,"span",104),t.qZA()()}}function Me(a,s){if(1&a&&(t.TgZ(0,"tr",101),t.ynx(1,52),t.YNc(2,Pe,2,1,"td",12),t.YNc(3,Re,2,1,"td",12),t.YNc(4,Le,3,0,"td",12),t.BQk(),t.qZA()),2&a){const e=s.index,n=t.oxw(2);let o,i,r;t.xp6(1),t.Q6J("formGroupName",e),t.xp6(1),t.Q6J("ngIf",!(null!=(o=n.InvoiceDetailForm.get("ListInvoiceDocuments"))&&o.value[e].IsDeleted)),t.xp6(1),t.Q6J("ngIf",!(null!=(i=n.InvoiceDetailForm.get("ListInvoiceDocuments"))&&i.value[e].IsDeleted)),t.xp6(1),t.Q6J("ngIf",!(null!=(r=n.InvoiceDetailForm.get("ListInvoiceDocuments"))&&r.value[e].IsDeleted))}}function ke(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",105)(1,"h5",106),t._uU(2,"Add invoice"),t.qZA(),t.TgZ(3,"button",107),t.NdJ("click",function(){const i=t.CHM(e).$implicit,r=t.oxw();return i.close("by: close icon"),r.isFileUplodad=!1,t.KtG(r.filterInvoice())}),t.qZA()(),t.TgZ(4,"div",108)(5,"form",9)(6,"div",5)(7,"div",34)(8,"div",24)(9,"label",70),t._uU(10,"Upload Invoice"),t.qZA(),t.TgZ(11,"input",109,110),t.NdJ("change",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.UplodeInvoice(o))}),t.qZA(),t.YNc(13,we,2,1,"span",111),t.qZA(),t.TgZ(14,"h6",112),t._uU(15,"File details"),t.qZA(),t.TgZ(16,"div")(17,"div"),t.ynx(18)(19),t.TgZ(20,"div",5)(21,"div",6)(22,"div",7)(23,"div",8)(24,"div",98)(25,"table",45)(26,"thead")(27,"tr")(28,"th"),t._uU(29,"File type"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"File name"),t.qZA(),t.TgZ(32,"th",99),t._uU(33,"Action"),t.qZA()()(),t.TgZ(34,"tbody"),t.YNc(35,Me,5,4,"tr",100),t.qZA()()()()()()(),t.BQk()(),t.qZA()()()()()(),t.TgZ(36,"div",113)(37,"button",21),t.NdJ("click",function(){const i=t.CHM(e).$implicit,r=t.oxw();return i.close("by: close icon"),r.IsDocumentShow=!1,t.KtG(r.AddDocument())}),t._uU(38,"Add"),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(5),t.Q6J("formGroup",e.InvoiceDetailForm),t.xp6(8),t.Q6J("ngIf",e.isFileUplodad),t.xp6(19),t.Q6J("width",20),t.xp6(3),t.Q6J("ngForOf",e.InvoiceDocuments.controls),t.xp6(2),t.Q6J("disabled",e.Isdisable)}}function Oe(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",105)(1,"h5",106),t._uU(2,"Preview invoice"),t.qZA(),t.TgZ(3,"button",107),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.KtG(i.close("by: close icon"))}),t.qZA()(),t.TgZ(4,"div",108)(5,"div",115)(6,"div",116)(7,"div",117)(8,"ngx-doc-viewer",118)(9,"div"),t._uU(10,"Loading"),t.qZA()()()()(),t._UZ(11,"div",5),t.qZA(),t.TgZ(12,"div",113)(13,"button",119),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.KtG(i.close("by: close icon"))}),t._uU(14,"Cancel"),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(8),t.Q6J("url",e.Document)}}let ct=(()=>{class a{constructor(e,n,o,i,r,l,u,N,b){this.fb=e,this.grnService=n,this.router=o,this.purchaseOrderService=i,this.modalService=r,this.route=l,this.calendar=u,this.authservice=N,this.userManagementService=b,this.shimmerVisible=!1,this.EditshimmerVisible=!1,this.rows=[],this.temp=[],this.loadingIndicator=!0,this.ColumnMode=R.hq,this.InvoiceDetailForm={},this.InvoiceGuid="00000000-0000-0000-0000-000000000000",this.Subject="This Aproved BY PO",this.CenterLocacityList=[],this.PoNumberList=[],this.SupplierDetails=[],this.uniqueList=[],this.ListGRNItems={},this.ListInvoiceDocuments={},this.index=0,this.NewFileName="GRN Invoice",this.Isdisable=!0,this.GRNdetails=[],this.Date="2023-05-03",this.Itemsdetails=[],this.removeItemsList=[],this.removedItems=[],this.FinalRate=0,this.Isprintbarcode=!1,this.IsDocumentShow=!0,this.VenderDetails=[],this.isFileUplodad=!1,this.keyword="",this.grnstsatusList=[],this.rowCount=150,this.pageNumber=1,this.SpinnerCheck=!1,this.modelChanged=new j.x,this.Invoicevalid=!1,this.dropdownSettings={},this.AllItems=[],this.userList=[],this.center="",this.modifiedFields=[],this.fetch(f=>{this.temp=f,this.rows=f}),this.stockdate=u.getToday(),this.modelChanged.pipe((0,$.b)(2e3)).subscribe(f=>{this.keyword=f,this.getGRNStatus()})}ngOnInit(){new Date,this.newDate={day:(new Date).getDate(),month:(new Date).getMonth()+1,year:(new Date).getFullYear()},this.GetPurchaseOrderPostDefaults(),this.InvoiceGuid=this.route.snapshot.paramMap.get("Guid")||"",""!=this.InvoiceGuid&&localStorage.setItem("Type","Goods Receipt"),this.center=this.authservice.LoggedInUser.LOCATIONSGUID,this.GetAllUsersList(),""!=this.InvoiceGuid&&(this.EditGRN(),this.GrnStatus=localStorage.getItem("GrnStatus")),this.initForms(),this.originalFormValues={...this.InvoiceDetailForm.value},this.addItemslist.removeAt(this.index=0),this.InvoiceDocuments.removeAt(this.index=0),this.UserGuid=localStorage.getItem("UserGuid"),this.InvoiceDetailForm.patchValue({UserGuid:this.UserGuid}),this.InvoiceDetailForm.valueChanges.pipe((0,ut.x)(),(0,dt.p)(500)).subscribe(n=>{this.FormChanged=!0,this.modifiedFields=Object.keys(this.InvoiceDetailForm.controls).filter(o=>{const i=this.InvoiceDetailForm.get(o);return i&&i.dirty})}),this.dropdownSettings={singleSelection:!1,idField:"PurchaseOrderNo",textField:"PurchaseOrderNo",enableCheckAll:!1,allowSearchFilter:!0,itemsShowLimit:2}}initForms(){this.InvoiceDetailForm=this.fb.group({InvoiceGuid:[null],UserGuid:[""],InvoiceNumber:["",[m.kI.required]],ChallanNumber:[""],SupplierId:[""],GateEntryNo:[""],Frieght:[""],Octroi:[""],RoundOff:[""],NetAmount:[""],InvoiceAmount:["",[m.kI.required]],PONumber:["",[m.kI.required]],SupplierName:[""],TotalNetAmount:["",[m.kI.required]],TotalDiscountAmount:[""],TotalTaxAmount:[""],LocationId:[""],ChallanDate:[null],InvoiceDate:[""],CenterLocationGuid:[""],ApprovedDate:[null],Subject:[""],NetTotal:[""],Discount:[""],IGST:[""],CGST:[""],SGST:[""],Narration:["",[m.kI.required]],InvoiceDocument:[""],ListGRNItems:this.fb.array([this.fb.group({ItemId:[""],ItemName:[""],VendorItemName:[""],ItemGuid:[""],BatchNumber:["",[m.kI.required]],ItemRate:[""],DiscountPercentage:[""],TaxAmount:[""],FinalPrice:[""],TotalAmount:[""],ExpiryDate:["",[m.kI.required]],IsExpirable:[""],Narration:[""],LocationId:[""],PanelId:[""],IndentNo:[""],IndentNumber:[""],FromLocationId:[""],UserId:[""],ManufactureId:[""],HSNCode:[""],CatalogNo:[""],PurchasedUnit:[""],MacId:[""],MajorUnitId:[""],MajorUnit:[""],MinorUnitId:[""],MinorUnit:[""],Converter:[""],PackSize:[""],IssueMultiplier:[""],BarcodeNo:[""],BarcodeGenrationOption:["",[m.kI.required]],IGSTPer:[""],GSTPer:[""],SGSTPer:[""],UTGSTPer:[""],FreeQty:[""],CGSTPer:[""],ConsumptionUnit:[""],NetAmount:[""],ReleasedCount:[""],DiscountAmount:[""],Taxper:[""],StockId:[""],ISDeleted:[0],IsBarcodePrinted:[!1],InitialCount:[""],PendingQty:[""],InstialCount:[""],IsButtonShow:[!1],StockGuid:[""],TotalItemRate:[""],PurchaseOrderNo:[""]})]),ListInvoiceDocuments:this.fb.array([this.fb.group({Id:[null],FileName:[""],File:[""],ItemName:[""],FilePath:[""],OriginalFileName:[""],FileDate:[""],NewFileName:[""]})])})}onUserGuidChange(e){this.UserGuid=e.UserGuid}fetch(e){const n=new XMLHttpRequest;n.open("GET","assets/data/all-items.json"),n.onload=()=>{e(JSON.parse(n.response))},n.send()}updateFilter(e){const n=e.target.value.toLowerCase(),o=this.temp.filter(function(i){return-1!==i.itemName.toLowerCase().indexOf(n)||!n});this.rows=o,this.table.offset=0}openBasicModal(e){this.modalService.open(e,{size:"md"}).result.then(n=>{console.log("Modal closed"+n)}).catch(n=>{})}EditGRN(){this.EditshimmerVisible=!0,this.grnService.GetEditGRNdetails(this.InvoiceGuid).subscribe(e=>{if(this.GRNdetails=e.listGetEditGRNdetails||[],this.InvoiceDetailForm.value.ListInvoiceDocuments=e.listinvoiceDocuments||[],e.listinvoiceDocuments.length>0){this.IsDocumentShow=!1;const n=this.InvoiceDetailForm.get("ListInvoiceDocuments");for(;n.length;)n.removeAt(0);this.filterInvoiceDocuments=e.listinvoiceDocuments,e.listinvoiceDocuments.forEach(o=>{const i=new Date(o.FileDate),r=`${i.getFullYear()}-${(i.getMonth()+1).toString().padStart(2,"0")}-${i.getDate().toString().padStart(2,"0")}`;console.log("document",o),n.push(this.fb.group({Id:o.Id,FileName:o.FileName,OriginalFileName:o.OriginalFileName,FilePath:o.FilePath,FileDate:r??"",NewFileName:o.NewFileName,File:"null",IsDeleted:o.IsDeleted}))})}this.Itemsdetails=e.listitemsDetails||[],this.NetTotalAmount=this.GRNdetails[0]?.NetAmount,this.locationGuid=this.GRNdetails[0]?.CenterLocationGuid,this.selectedVender=this.GRNdetails[0]?.SupplierName,this.InvoiceDetailForm.patchValue({InvoiceGuid:this.GRNdetails[0]?.Guid,UserGuid:this.UserGuid,CenterLocationGuid:this.locationGuid,ChallanDate:"0001-01-01T00:00:00"==this.GRNdetails[0]?.ChalanDate?null:{day:new Date(this.GRNdetails[0]?.ChalanDate).getDate(),month:new Date(this.GRNdetails[0]?.ChalanDate).getMonth()+1,year:new Date(this.GRNdetails[0]?.ChalanDate).getFullYear()},ChallanNumber:this.GRNdetails[0]?.ChalanNo,Frieght:this.GRNdetails[0]?.Freight,GateEntryNo:this.GRNdetails[0]?.GatePassInWard,InvoiceAmount:this.GRNdetails[0].InvoiceAmount.toString().match(/^\d+(?:\.\d{0,2})?/)[0],InvoiceDate:{day:new Date(this.GRNdetails[0]?.InvoiceDate).getDate(),month:new Date(this.GRNdetails[0]?.InvoiceDate).getMonth()+1,year:new Date(this.GRNdetails[0]?.InvoiceDate).getFullYear()},LedgerTransactionNo:this.GRNdetails[0].LedgerTransactionNo,Narration:this.GRNdetails[0]?.Narration,NetTotal:this.GRNdetails[0]?.NetAmount.toString().match(/^\d+(?:\.\d{0,2})?/)[0],Octroi:this.GRNdetails[0]?.Octori,PONumber:this.GRNdetails[0]?.PurchaseOrderNo,IndentNo:this.GRNdetails[0]?.IndentNo,RoundOff:this.GRNdetails[0]?.RoundOff,SupplierName:this.selectedVender,Subject:this.Subject,ApprovedDate:null,InvoiceNumber:this.GRNdetails[0]?.InvoiceNo,LocationId:this.GRNdetails[0]?.LocationId,SupplierId:this.GRNdetails[0]?.VendorId,TotalDiscountAmount:this.GRNdetails[0]?.DiscountOnTotal,TotalTaxAmount:this.GRNdetails[0]?.TaxAmount,SGST:this.GRNdetails[0]?.SGST,CGST:this.GRNdetails[0]?.CGST,IGST:this.GRNdetails[0]?.IGST,TotalNetAmount:this.GRNdetails[0]?.GrossAmount,Discount:this.GRNdetails[0]?.Discount}),this.addItemslist.value.forEach(n=>{this.removeItemsList.push(n)}),this.Isprintbarcode=this.Itemsdetails[0]?.IsBarcodePrinted,this.Itemsdetails.forEach(n=>{this.addItemslist.push(this.fb.group({StockId:n.StockId,ItemName:n.ItemName,VendorItemName:n.VendorItemName,ItemId:n.ItemId,Converter:n.Converter,BarcodeNo:n.BarcodeNo,BatchNumber:n.BatchNumber,ItemRate:n.Rate,ReleasedCount:n.ReleasedCount,DiscountPercentage:n.DiscountPer,IGSTPer:n.IGSTPer,CGSTPer:n.CGSTPer,SGSTPer:n.SGSTPer,DiscountAmount:n.DiscountAmount,TaxAmount:n.TaxAmount,NetAmount:[n.UnitPrice],TotalAmount:n.TotalAmount,ExpiryDate:"0001-01-01T00:00:00"==n.ExpiryDate?null:{day:new Date(n.ExpiryDate).getDate(),month:new Date(n.ExpiryDate).getMonth()+1,year:new Date(n.ExpiryDate).getFullYear()},MachineId:n.MachineId,macId:n.MachineId,MachineName:n.MachineName,MajorUnitId:n.MajorUnitId,MajorUnit:n.MajorUnit,ManufactureId:n.ManufactureId,PackSize:n.PackSize,PurchaseOrderNo:n.PurchaseOrderNo,FromLocationId:n.LocationId,UnitPrice:n.UnitPrice,Narration:this.InvoiceDetailForm.value.Narration,MinorUnit:n.MinorUnitName,BarcodeGenrationOption:n.BarcodeGenrationOption,Taxper:n.IGSTPer+n.CGSTPer+n.SGSTPer,PanelId:n.PanelId,IndentNo:n.IndentNo,UserId:n.IndentNo,MinorUnitId:n.MinorUnitId,IssueMultiplier:n.IssueMultiplier,ISDeleted:0,HsnCode:n.HsnCode,CatalogNo:n.CatalogNo,IsBarcodePrinted:[!1],ItemGuid:n.ItemGuid,InitialCount:n.InitialCount,UTGSTPer:n.UTGSTPer,IsExpirable:n.IsExpirable,InstialCount:n.ReleasedCount,IsButtonShow:[!1],PurchaseOrderId:"",StockGuid:n.StockGuid,TotalItemRate:n.ReleasedCount*n.Rate}))}),this.EditshimmerVisible=!1,this.FormChanged=!1},e=>{this.EditshimmerVisible=!1})}InvoiceDetails(){this.addItemslist.value.forEach((n,o)=>{this.addItemslist.at(o).patchValue({BatchNumber:n.BatchNumber,BarcodeNo:n.BarcodeNo||"",ExpiryDate:n.ExpiryDate?n.ExpiryDate.year+"-"+n.ExpiryDate.month+"-"+n.ExpiryDate.day:"",Narration:this.InvoiceDetailForm.value.Narration,Taxper:n.IGSTPer+n.CGSTPer+n.IGSTPer}),null!=this.InvoiceDetailForm.value.InvoiceGuid?(this.addItemslist.value.push(...this.removedItems),this.poNumber=this.InvoiceDetailForm.value.PONumber):this.poNumber=this.InvoiceDetailForm.value.PONumber.map(r=>r.PurchaseOrderNo).join(",")});let e={InvoiceGuid:this.InvoiceDetailForm.value.InvoiceGuid,UserGuid:this.InvoiceDetailForm.value.UserGuid,InvoiceNumber:this.InvoiceDetailForm.value.InvoiceNumber,challanNumber:this.InvoiceDetailForm.value.ChallanNumber,InvoiceDate:this.InvoiceDetailForm.value.InvoiceDate.year+"-"+this.InvoiceDetailForm.value.InvoiceDate.month+"-"+this.InvoiceDetailForm.value.InvoiceDate.day,supplierId:this.InvoiceDetailForm.value.SupplierId,gateEntryNo:this.InvoiceDetailForm.value.GateEntryNo,frieght:this.InvoiceDetailForm.value.Frieght,octroi:this.InvoiceDetailForm.value.Octroi,roundOff:this.InvoiceDetailForm.value.RoundOff,grnAmount:this.InvoiceDetailForm.value.NetTotal,invoiceAmount:this.InvoiceDetailForm.value.InvoiceAmount,purchaseOrderNo:this.poNumber,totalAmount:this.InvoiceDetailForm.value.TotalNetAmount,discountAmount:this.InvoiceDetailForm.value.TotalDiscountAmount,taxAmount:this.InvoiceDetailForm.value.TotalTaxAmount,locationId:this.InvoiceDetailForm.value.LocationId,challanDate:this.InvoiceDetailForm.value.ChallanDate?this.InvoiceDetailForm.value.ChallanDate.year+"-"+this.InvoiceDetailForm.value.ChallanDate.month+"-"+this.InvoiceDetailForm.value.ChallanDate.day:"",discount:this.InvoiceDetailForm.value.Discount,igst:this.InvoiceDetailForm.value.IGST,cgst:this.InvoiceDetailForm.value.CGST,sgst:this.InvoiceDetailForm.value.SGST,narration:this.InvoiceDetailForm.value.Narration,InvoiceDocument:this.InvoiceDetailForm.value.ListInvoiceDocuments.length,LstInvioceDocuments:this.InvoiceDetailForm.value.ListInvoiceDocuments.filter(n=>null===n.Id&&0==n.IsDeleted||null!=n.Id&&1==n.IsDeleted),LstGRNItems:this.InvoiceDetailForm.value.ListGRNItems};this.grnService.SaveGRNDetails(e).subscribe(n=>{1==this.modifiedFields.length&&"UserGuid"==this.modifiedFields[0]&&"Checked"==this.GrnStatus&&(this.UpdateGRNstatus(),this.getGRNStatus()),this.router.navigateByUrl("/grn")},n=>{})}GetPurchaseOrderPostDefaults(){let e=this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())&&"00000000-0000-0000-0000-000000000000"==this.authservice.LoggedInUser.LOCATIONSGUID?"00000000-0000-0000-0000-000000000000":this.authservice.LoggedInUser.LOCATIONSGUID.split(",");this.shimmerVisible=!0,this.purchaseOrderService.GetPurchaseOrderPostDefaults(e).subscribe(n=>{this.shimmerVisible=!1,this.CenterLocacityList=n.Result.LstCenterLocationType,this.FormChanged=!1},n=>{this.shimmerVisible=!1})}UpdateGRNstatus(){this.grnService.UpdateGRNStatus({invoiceGuid:this.InvoiceDetailForm.value.InvoiceGuid,Status:"Checker",UserGuid:this.UserGuid,ApproveReason:"",CheckedReason:""}).subscribe(n=>{})}onFromDateSelect(e){this.InvoiceDetailForm.patchValue({InvoiceDate:e})}FromDateSelect(e){this.InvoiceDetailForm.patchValue({ChallanDate:e})}get addItemslist(){return this.InvoiceDetailForm.get("ListGRNItems")}AddItemsList(e){const n=this.fb.group({ItemId:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].ItemId,ItemName:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].ItemName,VendorItemName:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].VendorItemName,ItemCode:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].ItemCode,HsnCode:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].HsnCode,CatalogNo:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].CatalogNo,Converter:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].Converter,BarcodeNo:[""],BatchNumber:[""],ExpiryDate:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].ExpiryDate,ReleasedCount:[0],ItemRate:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].ItemRate,DiscountPercentage:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].DiscountPercentage,IGSTPer:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].IGSTPer,CGSTPer:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].CGSTPer,SGSTPer:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].SGSTPer,DiscountAmount:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].DiscountAmount,TaxAmount:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].TaxAmount,NetAmount:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].NetAmount,TotalAmount:0,PackSize:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].PackSize,PurchaseOrderId:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].PurchaseOrderId,PurchaseOrderNo:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].PurchaseOrderNo,UnitPrice:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].UnitPrice,Narration:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].Narration,MinorUnit:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].MinorUnit,ManufactureId:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].ManufactureId,MajorUnit:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].MajorUnit,MachineName:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].MachineName,MachineId:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].MachineId,FromLocationId:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].FromLocationId,ItemGuid:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].ItemGuid,InitialCount:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].InitialCount,InstialCount:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].InstialCount,IsButtonShow:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].IsButtonShow,IsExpirable:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].IsExpirable,StockGuid:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].StockGuid,IndentNumber:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].IndentNumber,ISDeleted:0,TotalItemRate:""});this.InvoiceDetailForm.controls.ListGRNItems.insert(e+1,n);const r=this.InvoiceDetailForm.get("ListGRNItems").value.filter(l=>l.TotalAmount).reduce((l,u)=>l+u.TotalAmount,0);this.InvoiceDetailForm.patchValue({NetTotal:r.toString().match(/^\d+(?:\.\d{0,2})?/)}),this.FormChanged=!1}GetPOnumber(e){this.VenderDetails=[],this.selectedVender=[],(!e||null==this.InvoiceDetailForm.value.CenterLocationGuid)&&(this.uniqueList=[],this.VenderDetails=[],this.selectedVender=[],this.addItemslist.clear(),this.InvoiceDetailForm.patchValue({SupplierName:"",PONumber:"",ApprovedDate:""}),this.FormChanged=!1),this.PoNumberList=[],this.grnService.GetPOnumbers(this.InvoiceDetailForm.value.CenterLocationGuid).subscribe(n=>{this.PoNumberList=n||[],this.uniqueList=this.PoNumberList.filter((i,r,l)=>r===l.findIndex(u=>u.VendorName===i.VendorName)),null!=this.InvoiceDetailForm.value.InvoiceGuid&&this.GetSupplier(e,this.index)},n=>{})}GetVenderdetails(e){(!e||null==this.InvoiceDetailForm.value.PONumber)&&(this.addItemslist.clear(),this.selectedVender=[],this.InvoiceDetailForm.patchValue({SupplierName:null,PONumber:"",ApprovedDate:""}),this.FormChanged=!1),this.InvoiceDetailForm.patchValue({PONumber:""}),this.addItemslist.clear(),this.VenderDetails=[];let n=this.PoNumberList.filter(o=>o.VendorName===e.VendorName);this.VenderDetails=n.filter((o,i,r)=>i===r.findIndex(l=>l.PurchaseOrderNo===o.PurchaseOrderNo))}GetAllUsersList(){this.userManagementService.getUsersList(this.center).subscribe(e=>{this.userList=e},e=>{})}GetSupplier(e,n){(!e||null==this.InvoiceDetailForm.value.PONumber)&&(this.VenderDetails=[],this.addItemslist.clear(),this.InvoiceDetailForm.patchValue({SupplierName:"",PONumber:"",ApprovedDate:""})),this.addItemslist.clear(),this.SupplierDetails=this.PoNumberList.filter(o=>o.PurchaseOrderNo===e.PurchaseOrderNo),this.SupplierDetails=this.PoNumberList.filter(o=>e.some(i=>o.PurchaseOrderNo===i.PurchaseOrderNo)),this.NetTotalAmount=this.SupplierDetails.map(o=>o.NetTotal).reduce((o,i)=>o+i,0),this.InvoiceDetailForm.patchValue({PurchaseOrderNo:this.SupplierDetails[0]?.PurchaseOrderNo,SupplierName:this.SupplierDetails[0]?.VendorName,SupplierId:this.SupplierDetails[0]?.VendorId,Subject:this.Subject,NetAmount:this.SupplierDetails[0]?.NetAmount,LocationId:this.SupplierDetails[0]?.LocationId,NetTotal:this.NetTotalAmount,TotalTaxAmount:this.SupplierDetails[0]?.TaxAmount,TotalNetAmount:this.SupplierDetails[0]?.NetAmount,TotalDiscountAmount:this.SupplierDetails[0]?.DiscountAmount,ApprovedDate:{day:new Date(this.SupplierDetails[0]?.OrderDate).getDate(),month:new Date(this.SupplierDetails[0]?.OrderDate).getMonth()+1,year:new Date(this.SupplierDetails[0]?.OrderDate).getFullYear()}},{emitEvent:!0}),this.setValue()}setValue(){0!=this.SupplierDetails.length&&this.SupplierDetails.forEach(n=>{this.addItemslist.push(this.fb.group({ItemRate:n?.Rate,ItemId:n?.ItemId,IGSTPer:n?.IGSTPer,DiscountAmount:n?.DiscountAmount*n?.OrderedQty,CGSTPer:n?.CGSTPer,UTGSTPer:n?.UGSTPer,DiscountPercentage:n?.DiscountPercentage,ItemName:n?.ItemName,VendorItemName:n?.VendorItemName,TaxAmount:n?.TaxAmount,NetAmount:n?.UnitPrice,SGSTPer:n?.SGSTPer,TotalAmount:n?.UnitPrice*n?.OrderedQty,ReleasedCount:n?.OrderedQty,HsnCode:n?.HsnCode,CatalogNo:n?.CatalogNo,ItemCode:n?.ItemCode,Converter:n?.Converter,MachineId:n?.MachineId,MachineName:n?.MachineName,MajorUnitId:n?.MajorUnitId,MajorUnit:n?.MajorUnitName||"",ManufactureId:n?.ManufactureId,PackSize:n?.PackSize,PurchaseOrderId:n?.PurchaseOrderId,PurchaseOrderNo:n?.PurchaseOrderNo,FromLocationId:n?.LocationId,UnitPrice:n?.UnitPrice,BatchNumber:n?.BatchNumber,BarcodeNo:n?.BarcodeNo,ExpiryDate:n?.ExpiryDate,IsExpirable:n?.IsExpirable,MinorUnit:n?.MinorUnit||"",MinorUnitId:n?.MinorUnitId,Narration:this.InvoiceDetailForm.value.Narration,Taxper:n?.SGSTPer+n?.CGSTPer+n?.IGSTPer,IsBarcodePrinted:[!1],InitialCount:n.OrderedQty,PendingQty:"",ItemGuid:n.ItemGuid,InstialCount:n?.OrderedQty,IsButtonShow:[!1],TotalItemRate:n?.OrderedQty*n?.Rate,IndentNumber:n.IndentNo}));const i=this.InvoiceDetailForm.get("ListGRNItems").value.filter(c=>c.TotalAmount),r=i.reduce((c,d)=>c+d.DiscountPercentage,0),l=i.reduce((c,d)=>c+d.SGSTPer,0),u=i.reduce((c,d)=>c+d.CGSTPer,0),N=i.reduce((c,d)=>c+d.IGSTPer,0),b=i.reduce((c,d)=>c+d.DiscountAmount,0),f=i.reduce((c,d)=>c+d.TaxAmount,0),I=(i.reduce((c,d)=>c+d.NetAmount,0),i.reduce((c,d)=>c+d.TotalAmount,0)),p=i.reduce((c,d)=>c+d.TotalItemRate,0);this.NetTotalAmount=I,this.InvoiceDetailForm.patchValue({ItemName:n.ItemName,VendorItemName:n.VendorItemName,ItemId:n.ItemId,ItemRate:n.Rate,IGSTPer:n.IGSTPer,CGSTPer:n.CGSTPer,DiscountAmount:n.DiscountAmount,DiscountPercentage:n.DiscountPercentage,SGSTPer:n.SGSTPer,TotalAmount:n.TotalAmount,ReleasedCount:n.OrderedQty,HsnCode:n.HsnCode,CatalogNo:n.CatalogNo,Discount:r,SGST:l,CGST:u,IGST:N,TotalTaxAmount:f,TotalNetAmount:p,TotalDiscountAmount:b,NetTotal:I.toString().match(/^\d+(?:\.\d{0,2})?/)[0]},{emitEvent:!0})})}ChangePrice(e,n){const o=this.InvoiceDetailForm.get("ListGRNItems")?.value[e].ReleasedCount;this.ItemRate=this.InvoiceDetailForm.get("ListGRNItems")?.value[e].ItemRate;const i=0!=this.InvoiceDetailForm.get("ListGRNItems")?.value[e].IGSTPer?this.InvoiceDetailForm.get("ListGRNItems")?.value[e].IGSTPer:this.InvoiceDetailForm.get("ListGRNItems")?.value[e].CGSTPer+this.InvoiceDetailForm.get("ListGRNItems")?.value[e].SGSTPer,r=this.InvoiceDetailForm.get("ListGRNItems")?.value[e].DiscountPercentage;let u=(this.ItemRate-this.ItemRate*this.InvoiceDetailForm.get("ListGRNItems")?.value[e].DiscountPercentage/100)*i/100*o,N=this.ItemRate/100*this.InvoiceDetailForm.get("ListGRNItems")?.value[e].DiscountPercentage*o;const b=this.ItemRate*r/100;let g=(this.ItemRate-b)*i/100+this.ItemRate-b,I=this.InvoiceDetailForm.get("ListGRNItems")?.value[e].ReleasedCount*g;const p=this.addItemslist.at(e),c=this.InvoiceDetailForm.get("Frieght")?.value||0,d=this.InvoiceDetailForm.get("Octroi")?.value||0,x=this.InvoiceDetailForm.get("RoundOff")?.value||0;p.patchValue({TaxAmount:u,NetAmount:g,TotalAmount:I,DiscountAmount:N,UnitPrice:g,TotalItemRate:this.ItemRate*o});const G=this.InvoiceDetailForm.get("ListGRNItems").value.filter(C=>C.TotalAmount),S=G.reduce((C,T)=>C+T.TotalAmount,0),y=G.reduce((C,T)=>C+T.DiscountAmount,0),F=G.reduce((C,T)=>C+T.TaxAmount,0),A=G.reduce((C,T)=>C+T.TotalItemRate,0),q=G.reduce((C,T)=>C+T.DiscountPercentage,0),D=G.reduce((C,T)=>C+T.SGSTPer,0),w=G.reduce((C,T)=>C+T.CGSTPer,0),k=G.reduce((C,T)=>C+T.IGSTPer,0);this.NetTotalAmount=S,this.InvoiceDetailForm.patchValue({NetTotal:(S+c+d+x).toString().match(/^\d+(?:\.\d{0,2})?/)[0],TotalDiscountAmount:y,TotalTaxAmount:F,TotalNetAmount:A,Discount:q,SGST:D,CGST:w,IGST:k},{emitEvent:!0}),this.FormChanged=!0}ChangeNetAmt(e){const n=this.InvoiceDetailForm.get("Frieght")?.value||0,o=this.InvoiceDetailForm.get("Octroi")?.value||0,i=this.InvoiceDetailForm.get("RoundOff")?.value||0;this.InvoiceDetailForm.patchValue({NetTotal:(this.NetTotalAmount+n+o+i).toString().match(/^\d+(?:\.\d{0,2})?/)[0]},{emitEvent:!0})}FormReset(){""==this.InvoiceGuid&&(this.InvoiceDetailForm.reset(),this.uniqueList=[],this.InvoiceDocuments.clear(),this.SupplierDetails=[],this.InvoiceDetailForm.patchValue({PONumber:"",ApprovedDate:"",NetTotal:""}),this.addItemslist.clear()),this.InvoiceGuid&&(this.addItemslist.clear(),this.EditGRN()),this.Isprintbarcode=!1,this.FormChanged=!1}UplodeInvoice(e){if(this.FormChanged=!0,this.fileToUpload=e.srcElement.files[0],!mt.includes(["application/pdf","application/msword","application/docx","application/doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],e.target.files[0]?.type)){const r=document.getElementById("upload-resume");return r&&(r.value=""),this.isFileUplodad=!0,void(this.ShowPdfFile="Please upload pdf, doc, docx file only!")}const o=new FormData;var i=this.fileToUpload.name;i=i.substring(0,i.lastIndexOf(".")),o.append("File",this.fileToUpload,this.fileToUpload.name),o.append("FileName","".concat(this.fileToUpload.name)),this.grnService.Uploadinvoice(o).subscribe(r=>{this.isFileUplodad=!1,this.InvoiceDocument=r.result,this.FileName=this.fileToUpload.name,this.File="null",this.FilePath=r.result,this.OriginalFileName=this.fileToUpload.type,this.FileDate=this.InvoiceDetailForm.value.ApprovedDate,this.NewFileName="",this.AddList()},r=>{})}get InvoiceDocuments(){return this.InvoiceDetailForm.get("ListInvoiceDocuments")}AddList(){this.InvoiceDocuments.push(this.fb.group({Id:null,FileName:this.FileName,File:this.File,FilePath:this.FilePath,OriginalFileName:this.OriginalFileName,FileDate:this.Date??"",NewFileName:this.NewFileName,IsDeleted:null})),this.InvoiceDetailForm.patchValue({Id:null,FileName:this.FileName,File:this.File,FilePath:this.FilePath,OriginalFileName:this.OriginalFileName,FileDate:this.Date??"",NewFileName:this.NewFileName,IsDeleted:null},{emitEvent:!0}),this.Isdisable=!1,this.IsDocumentShow=!0,this.FormChanged=!0,console.log("hjf",this.InvoiceDetailForm.controls.ListInvoiceDocuments.value)}AddDocument(){const e=this.InvoiceDetailForm.controls.ListInvoiceDocuments,n=this.InvoiceDetailForm.controls.ListInvoiceDocuments.value;for(let o=0;o<n.length;o++)if(null===n[o].Id&&null==n[o].IsDeleted&&(n[o].IsDeleted=!1),null!=n[o].Id){n[o].FileDate="0001-01-01T00:00:00";const i=new Date(n[o].FileDate),r=`${i.getFullYear()}-${(i.getMonth()+1).toString().padStart(2,"0")}-${i.getDate().toString().padStart(2,"0")}`;n[o].FileDate=r}e.patchValue(n,{emitEvent:!0})}remove(e){this.FormChanged=!0,this.filterInvoiceDocuments=this.InvoiceDocuments;const n=document.getElementById("upload-resume");n&&(n.value=""),this.Isdisable=!0;const i=this.InvoiceDetailForm.get("ListInvoiceDocuments").at(e);if(i){const r=i.get("IsDeleted");r&&r.setValue(!0)}}filterInvoice(){this.IsDocumentShow=!1;const n=[...this.InvoiceDetailForm.value.ListInvoiceDocuments].filter(i=>null!==i.IsDeleted),o=this.InvoiceDetailForm.get("ListInvoiceDocuments");o.clear(),n.forEach(i=>{const r=this.fb.group({Id:i.Id,FileName:i.FileName,File:i.File,FilePath:i.FilePath,OriginalFileName:i.OriginalFileName,FileDate:i.Date,NewFileName:i.NewFileName,IsDeleted:i.IsDeleted});o.push(r)})}removeitem(e,n){this.addItemslist.value.forEach(l=>{const u=l;""!=this.InvoiceGuid?(0==l.IsExpirable&&(this.expireDate=l.ExpiryDate.year+"-"+l.ExpiryDate.month+"-"+l.ExpiryDate.day),l.StockId==n.value.StockId&&(l.ISDeleted=1,l.ExpiryDate=this.expireDate,this.removedItems.push(u))):l.StockId==n.value.StockId&&(l.ISDeleted=1,this.removedItems.push(u))}),this.addItemslist.removeAt(e);const r=this.InvoiceDetailForm.get("ListGRNItems").value.filter(l=>l.TotalAmount).reduce((l,u)=>l+u.TotalAmount,0);this.InvoiceDetailForm.patchValue({NetTotal:r.toString().match(/^\d+(?:\.\d{0,2})?/)[0]}),this.ChangePrice(0,"")}Click(){this.Isprintbarcode=!!this.Isprintbarcode,this.addItemslist.value.forEach((e,n)=>{this.addItemslist.value.forEach((o,i)=>{this.addItemslist.at(i).patchValue({IsBarcodePrinted:this.Isprintbarcode})})})}matcher(e,n){const i="Round"===n;(i&&!/^-?\d*\.?\d*$/.test(e.target.value+e.key)||!i&&!e.key.match(/[0-9.]/g))&&e.preventDefault()}onReleasedCountChange(e,n){const o=this.InvoiceDetailForm.get("ListGRNItems")?.value[n].ItemId,r=(this.InvoiceDetailForm.get("ListGRNItems"),this.InvoiceDetailForm.get("ListGRNItems")?.value[n].PurchaseOrderNo),l=this.InvoiceDetailForm.get("ListGRNItems")?.value[n].IndentNumber,u=this.InvoiceDetailForm.get("ListGRNItems")?.value[n].StockGuid;let N=this.SupplierDetails.filter(g=>g.ItemId===o&&g.PurchaseOrderNo===r&&g.IndentNo===l),b=this.Itemsdetails.filter(g=>g.ItemId===o&&g.StockGuid===u);const f=this.InvoiceDetailForm.get("ListGRNItems");if(""==this.InvoiceGuid){const g=f?.controls.filter(c=>{const d=c.value;return d.PurchaseOrderNo===r&&d.ItemId===o&&d.IndentNumber===l});this.totalReleasedCount=g.reduce((c,d)=>{const x=parseFloat(d.value.ReleasedCount);return isNaN(x)?c:c+x},0);const I=this.InvoiceDetailForm.get("ListGRNItems."+n+".ReleasedCount");this.AllItems=g;const p=this.AllItems;if(!e||e<0)I?.setValue(0);else if(N[0]?.OrderedQty<this.totalReleasedCount)I?.setValue(0);else if(N[0]?.OrderedQty==this.totalReleasedCount)for(let c=0;c<p.length;c++)p.at(c).get("IsButtonShow")?.setValue(!1);else{I?.setValue(e);for(let c=0;c<p.length;c++)p.at(c).get("IsButtonShow")?.setValue(!0)}}else{this.AllItems=[];const g=f?.controls.filter(c=>{const d=c.value;return d.StockGuid===u&&d.ItemId===o});this.totalReleasedCount=g.reduce((c,d)=>c+d.value.ReleasedCount,0);const I=this.InvoiceDetailForm.get("ListGRNItems."+n+".ReleasedCount");this.AllItems=g;const p=this.AllItems;if(!e||e<0)I?.setValue(0);else if(b[0]?.ReleasedCount<this.totalReleasedCount)I?.setValue(0);else if(b[0]?.ReleasedCount==this.totalReleasedCount)for(let c=0;c<p.length;c++)p.at(c).get("IsButtonShow")?.setValue(!1);else{I?.setValue(e);for(let c=0;c<p.length;c++)p.at(c).get("IsButtonShow")?.setValue(!0)}}this.FormChanged=!1}PreviewInvoice(e){this.Document=e}onDiscountChange(e,n){this.InvoiceDetailForm.get("ListGRNItems."+n+".DiscountPercentage")?.setValue(!e||e<=0||e>101?this.SupplierDetails[n].DiscountPercentage:e),this.FormChanged=!1}getGRNStatus(){let e=this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())&&"00000000-0000-0000-0000-000000000000"==this.authservice.LoggedInUser.LOCATIONSGUID?"00000000-0000-0000-0000-000000000000":this.authservice.LoggedInUser.LOCATIONSGUID.split(",");this.grnService.getGRN(this.pageNumber,this.rowCount,this.keyword,"","","","","","","","","","","",e).subscribe(n=>{this.grnstsatusList=n||[],this.change()},n=>{})}changeInvoice(e){this.keyword=e.target.value,this.modelChanged.next(this.keyword),this.SpinnerCheck=!0}change(){this.poNumber=""==this.InvoiceGuid?this.InvoiceDetailForm.value.PONumber.map(n=>n.PurchaseOrderNo).join(","):this.InvoiceDetailForm.value.PONumber;const e=this.grnstsatusList.some(n=>{const o=n.PurchaseOrderNo.split(","),i=this.poNumber.split(",");return o.filter(l=>i.includes(l)).length>0&&this.keyword===n.InvoiceNo});this.SpinnerCheck=!1,e?(this.ISinvoice="Invoice number already exists!",this.Invoicevalid=!0):(this.ISinvoice="",this.Invoicevalid=!1)}setFormChanged(){this.FormChanged=!0}onItemSelect(e){this.addItemslist.clear(),this.InvoiceDetailForm.patchValue({NetTotal:""})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.qu),t.Y36(W.z),t.Y36(L.F0),t.Y36(tt.x),t.Y36(v.FF),t.Y36(L.gz),t.Y36(v.vL),t.Y36(et.$),t.Y36(X.x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-grn-against-po"]],viewQuery:function(e,n){if(1&e&&(t.Gf(R.nE,5),t.Gf(Xt,5)),2&e){let o;t.iGM(o=t.CRH())&&(n.table=o.first),t.iGM(o=t.CRH())&&(n.fileInput=o.first)}},features:[t._Bn([{provide:v.NG,useClass:st}])],decls:38,vars:13,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/grn"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[3,"formGroup"],[1,"card-title"],["class","mb-3",4,"ngIf"],[4,"ngIf"],[3,"type",4,"ngIf"],[1,"card-footer"],[1,"col-sm-12","text-end"],[1,"text-end","d-flex","align-items-end","flex-end","flex-column","flex-sm-row"],[1,"form-check","mr-2","mb-2"],["type","checkbox","id","itemFIFOorder",1,"form-check-input",3,"ngModel","ngModelChange"],["for","itemFIFOorder",1,"form-check-label"],["type","button",1,"btn","btn-secondary","me-2",3,"disabled","click"],["type","button",1,"btn","btn-primary","submit",3,"disabled","click"],["invoiceItem",""],["previewItem",""],[1,"mb-3"],["for","LedgerTransactionNo",1,"form-label"],[1,"col-12","col-md-4","col-lg-3"],["for","manufacturerName",1,"form-label"],["bindLabel","CenterLocationName","bindValue","CenterLocationGuid","placeholder","Search by location name","formControlName","CenterLocationGuid",1,"ng-select-custom-250min",3,"items","ngModel","notFoundText","readonly","inputAttrs","ngModelChange","change"],["bindLabel","VendorName","bindValue","","placeholder","Search by suppliers name","formControlName","SupplierName",1,"ng-select-custom-250min",3,"items","ngModel","notFoundText","readonly","inputAttrs","ngModelChange","change"],["formControlName","PONumber","bindLabel","PurchaseOrderNo",3,"placeholder","settings","data","readonly","onDeSelect"],[1,"col-12","col-sm-4","col-md-4","col-lg-3","d-flex","align-items-end"],[1,"btn-primary","btn",3,"disabled","click"],[1,"feather","icon-search"],[1,"col-sm-12"],["for","itemExpiryDate",1,"form-label"],[1,"input-group"],["placeholder","dd-mm-yyyy","name","dp","outsideDays","hidden","formControlName","ApprovedDate","ngbDatepicker","","readonly","",1,"form-control"],["d","ngbDatepicker"],["for","SupplierName",1,"form-label"],["type","text","id","SupplierName","readonly","","formControlName","SupplierName","placeholder","Enter supplier",1,"form-control"],["for","UserName",1,"form-label"],["bindLabel","UserName","bindValue","UserGuid","placeholder","Search by User name","formControlName","UserGuid",1,"ng-select-custom-250min",3,"items","notFoundText","readonly","inputAttrs","change"],[3,"type"],[2,"max-height","420px","overflow-y","scroll"],[1,"table","bg-white"],[2,"position","sticky","top","0","background-color","#fff","box-shadow","0px 2px 4px rgba(0, 0, 0, 0.1)","z-index","12"],[1,"freeze-col"],[3,"ngClass"],[1,"rupee"],["formArrayName","ListGRNItems",4,"ngFor","ngForOf"],["formArrayName","ListGRNItems"],[3,"formGroupName"],[1,"btn","btn-icon-text","btn-link","p-0",3,"disabled","click"],[1,"link-icon","feather","icon-plus","fs-5","me-1"],["type","text","formControlName","BarcodeNo","placeholder","Barcode No.",1,"form-control",2,"width","100px","padding-inline","5px",3,"value"],["type","text","formControlName","BatchNumber","required","","placeholder","Batch No.",1,"form-control",2,"width","100px","padding-inline","5px",3,"value"],[1,"input-group",2,"width","150px"],["placeholder","dd-mm-yyyy","name","dp","readonly","","ngbDatepicker","","formControlName","ExpiryDate",1,"form-control",3,"minDate","required","disabled","container"],["d3","ngbDatepicker"],["type","button",1,"input-group-text",3,"click"],[1,"feather","icon-calendar","icon-md","text-muted"],["type","text","formControlName","ReleasedCount","id","ReleasedCount",1,"form-control",2,"width","70px","padding-inline","5px",3,"min","ngModelOptions","value","keypress","input","ngModelChange"],["type","number","formControlName","DiscountPercentage",1,"form-control",2,"width","70px","padding-inline","5px",3,"min","max","value","ngModelChange","input"],[3,"value"],["target","_blank",1,"btn","btn-outline-primary","btn-xs","me-1",3,"routerLink"],[1,"feather","icon-eye"],["class","btn btn-outline-danger btn-xs me-1","title","Delete item",3,"click",4,"ngIf"],["title","Delete item",1,"btn","btn-outline-danger","btn-xs","me-1",3,"click"],[1,"feather","icon-trash"],["for","itemName",1,"form-label"],[1,"position-relative"],["type","text","id","itemName","placeholder","Enter invoice number","formControlName","InvoiceNumber",1,"form-control",3,"maxlength","ngClass","input"],["class","spinLoader",4,"ngIf"],[1,"text-danger","mt-4px","d-block"],["placeholder","dd-mm-yyyy","name","dp","ngbDatepicker","","readonly","","formControlName","InvoiceDate",1,"form-control",3,"maxDate","ngClass","dateSelect"],["d1","ngbDatepicker"],["for","itemHSNCode",1,"form-label"],["type","text","id","itemHSNCode","placeholder","Enter challan number","formControlName","ChallanNumber",1,"form-control",3,"maxlength","ngClass"],["placeholder","dd-mm-yyyy","name","dp","formControlName","ChallanDate","readonly","","ngbDatepicker","",1,"form-control",3,"maxDate","ngClass","dateSelect"],["d2","ngbDatepicker"],["for","itemSpecialization",1,"form-label"],["type","text","id","itemSpecialization","placeholder","Enter gate entry no","formControlName","GateEntryNo",1,"form-control",3,"maxlength","ngClass"],["type","number","id","itemSpecialization","placeholder","Enter frieght","formControlName","Frieght",1,"form-control",3,"ngClass","input"],["for","itemMakeModel",1,"form-label"],["type","number","id","itemMakeModel","placeholder","Enter octroi","formControlName","Octroi",1,"form-control",3,"ngClass","input"],["type","number","id","itemSpecialization","placeholder","Enter round off","formControlName","RoundOff",1,"form-control",3,"ngClass","input"],["type","number","id","itemMakeModel","placeholder","Enter GRN amount","formControlName","NetTotal","readonly","",1,"form-control",3,"ngClass"],["type","number","id","itemSpecialization","placeholder","Enter invoice amount","formControlName","InvoiceAmount",1,"form-control",3,"min","ngClass","keypress"],["type","text","id","itemMakeModel","placeholder","Enter narration","formControlName","Narration",1,"form-control",3,"maxlength","ngClass"],[1,"col-12","col-md-4","col-lg-3","d-flex","align-items-end"],[1,"btn-primary","btn",3,"click"],[1,"feather","icon-plus"],["class","col-md-12 stretch-card",4,"ngIf"],[1,"spinLoader"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","width","18","height","18"],["fill","none","d","M0 0h24v24H0z"],["d","M12 2a1 1 0 0 1 1 1v3a1 1 0 0 1-2 0V3a1 1 0 0 1 1-1zm0 15a1 1 0 0 1 1 1v3a1 1 0 0 1-2 0v-3a1 1 0 0 1 1-1zm10-5a1 1 0 0 1-1 1h-3a1 1 0 0 1 0-2h3a1 1 0 0 1 1 1zM7 12a1 1 0 0 1-1 1H3a1 1 0 0 1 0-2h3a1 1 0 0 1 1 1zm12.071 7.071a1 1 0 0 1-1.414 0l-2.121-2.121a1 1 0 0 1 1.414-1.414l2.121 2.12a1 1 0 0 1 0 1.415zM8.464 8.464a1 1 0 0 1-1.414 0L4.93 6.344a1 1 0 0 1 1.414-1.415L8.464 7.05a1 1 0 0 1 0 1.414zM4.93 19.071a1 1 0 0 1 0-1.414l2.121-2.121a1 1 0 1 1 1.414 1.414l-2.12 2.121a1 1 0 0 1-1.415 0zM15.536 8.464a1 1 0 0 1 0-1.414l2.12-2.121a1 1 0 0 1 1.415 1.414L16.95 8.464a1 1 0 0 1-1.414 0z"],[1,"table-responsive"],[3,"width"],["formArrayName","ListInvoiceDocuments",4,"ngFor","ngForOf"],["formArrayName","ListInvoiceDocuments"],[1,"btn","btn-outline-primary","btn-xs","me-1",3,"click"],[1,"btn","btn-outline-danger","btn-xs","me-1",3,"click"],[1,"feather","icon-trash-2"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["type","file","id","upload-resume","fileToUpload","","accept",".docx, .doc, .pdf, application/pdf","placeholder","Enter consumption unit",1,"form-control",3,"change"],["fileInput",""],["class","text-danger",4,"ngIf"],[1,"card-title","mb-2"],[1,"modal-footer"],[1,"text-danger"],[1,"widget-content"],[1,"default-form"],[1,"row","form"],["viewer","url",2,"width","100%","height","75vh",3,"url"],["type","button",1,"btn","btn-secondary","me-2",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._uU(4,"GRN"),t.qZA()(),t.TgZ(5,"li",4),t._uU(6),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"form",9)(12,"h6",10),t._uU(13,"GRN Against PO"),t.qZA(),t.YNc(14,te,5,1,"div",11),t.YNc(15,ee,46,22,"ng-container",12),t.YNc(16,ne,1,1,"app-shimmers",13),t.YNc(17,se,78,7,"ng-container",12),t.YNc(18,le,1,1,"app-shimmers",13),t.YNc(19,Fe,105,53,"ng-container",12),t.YNc(20,qe,1,1,"app-shimmers",13),t.qZA()(),t.TgZ(21,"div",14)(22,"div",5)(23,"div",15)(24,"div",16)(25,"div",17)(26,"input",18),t.NdJ("ngModelChange",function(i){return n.Isprintbarcode=i})("ngModelChange",function(){return n.Click()}),t.qZA(),t.TgZ(27,"label",19),t._uU(28," Print Barcode "),t.qZA()(),t.TgZ(29,"div")(30,"button",20),t.NdJ("click",function(){return n.FormReset()}),t._uU(31,"Reset"),t.qZA(),t.TgZ(32,"button",21),t.NdJ("click",function(){return n.InvoiceDetails()}),t._uU(33),t.qZA()()()()()()()()(),t.YNc(34,ke,39,5,"ng-template",null,22,t.W1O),t.YNc(36,Oe,15,1,"ng-template",null,23,t.W1O)),2&e&&(t.xp6(6),t.Oqu(""==n.InvoiceGuid?"GRN Against PO":"Edit GRN Against PO"),t.xp6(5),t.Q6J("formGroup",n.InvoiceDetailForm),t.xp6(3),t.Q6J("ngIf",n.InvoiceGuid),t.xp6(1),t.Q6J("ngIf",!n.EditshimmerVisible),t.xp6(1),t.Q6J("ngIf",n.EditshimmerVisible),t.xp6(1),t.Q6J("ngIf",!n.EditshimmerVisible),t.xp6(1),t.Q6J("ngIf",n.EditshimmerVisible),t.xp6(1),t.Q6J("ngIf",!n.EditshimmerVisible),t.xp6(1),t.Q6J("ngIf",n.EditshimmerVisible),t.xp6(6),t.Q6J("ngModel",n.Isprintbarcode),t.xp6(4),t.Q6J("disabled",!n.FormChanged),t.xp6(2),t.Q6J("disabled",!n.FormChanged||n.InvoiceDetailForm.invalid),t.xp6(1),t.Oqu(n.InvoiceGuid?"Update":"Save"))},dependencies:[P.mk,P.sg,P.O5,L.yS,v.J4,B.w9,m._Y,m.Fj,m.wV,m.Wl,m.JJ,m.JL,m.Q7,m.nD,m.qQ,m.Fd,m.On,m.sg,m.u,m.x0,m.CE,H.zr,ot.I,lt.OP,it.U],styles:[".flex-end[_ngcontent-%COMP%]{justify-content:flex-end}.mr-2[_ngcontent-%COMP%]{margin-right:20px}.h-34[_ngcontent-%COMP%]{height:34px}.ng-select[_ngcontent-%COMP%]{display:initial}.freeze-col[_ngcontent-%COMP%]{position:sticky;left:0;width:150px;min-width:150px;z-index:2;background:#fff}.pi-items.row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding-left:0!important}"]}),a})();function Je(a,s){1&a&&(t.TgZ(0,"button",96),t._UZ(1,"span",97),t.qZA())}const Qe=[{path:"",component:Wt},{path:"new-grn",component:(()=>{class a{constructor(){this.rows=[],this.temp=[],this.loadingIndicator=!0,this.reorderable=!0,this.ColumnMode=R.hq,this.fetch(e=>{this.temp=e,this.rows=e})}ngOnInit(){}fetch(e){const n=new XMLHttpRequest;n.open("GET","assets/data/all-items.json"),n.onload=()=>{e(JSON.parse(n.response))},n.send()}updateFilter(e){const n=e.target.value.toLowerCase(),o=this.temp.filter(function(i){return-1!==i.itemName.toLowerCase().indexOf(n)||!n});this.rows=o,this.table.offset=0}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-new-grn"]],viewQuery:function(e,n){if(1&e&&t.Gf(R.nE,5),2&e){let o;t.iGM(o=t.CRH())&&(n.table=o.first)}},decls:239,vars:31,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/grn"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col-12","col-md-4"],[1,"mb-3"],["for","manufacturerName",1,"form-label","d-flex","justify-content-between"],["id","manufacturerName",1,"form-select"],["selected","","disabled",""],["value","1"],["value","2"],["value","3"],["for","machineName",1,"form-label"],["id","machineName",1,"form-select"],[1,"col-12","col-md-4","align-items-end"],["for","itemFIFOorder",1,"form-check-label","mb-2"],[1,"mb-3","d-flex"],[1,"form-check","me-1","mb-2","flex-shrink-0"],["type","radio","id","itemFIFOorder",1,"form-check-input"],["for","itemFIFOorder",1,"form-check-label"],[1,"form-check","mb-2","flex-shrink-0"],[1,"col-12","col-md-4","col-lg-3"],["for","manufacturerCatalogNo",1,"form-label"],["type","text","id","manufacturerCatalogNo","placeholder","Enter Item name",1,"form-control"],["type","text","id","manufacturerCatalogNo","placeholder","",1,"form-control"],["type","text","id","manufacturerCatalogNo","placeholder","Enter Old PO number",1,"form-control"],["for","purchasedUnit",1,"form-label","d-flex","justify-content-between"],["id","purchasedUnit",1,"form-select"],["for","manufacturerConverter",1,"form-label"],["type","text","id","manufacturerConverter","placeholder","Scan barcode for quick GRN",1,"form-control"],[1,"col-12","col-md-4","col-lg-3","d-flex","align-items-end"],[1,"btn-primary","btn"],[1,"feather","icon-plus"],[1,"col-sm-12"],[1,"table-responsive"],["rowHeight","auto",1,"bootstrap",3,"scrollbarH","loadingIndicator","columnMode","footerHeight","limit"],["table",""],["name","New Batch",3,"width"],["name","item Type",3,"width"],["name","item Id",3,"width"],["name","Item",3,"width"],["name","Item Code",3,"width"],["name","HSN Code",3,"width"],["name","Purchased Unit",3,"width"],["name","Conv Enter",3,"width"],["name","Consume Unit",3,"width"],["name","Barcode",3,"width"],["name","Batch No.",3,"width"],["name","Expiry on",3,"width"],["name","Rate",3,"width"],["name","Paid Qty",3,"width"],["name","Extra Free Qty",3,"width"],["name","Discount %",3,"width"],["name","IGST %",3,"width"],["name","CGST %",3,"width"],["name","SGST %",3,"width"],["name","Dis. Amt.",3,"width"],["name","Total GST Amt.",3,"width"],["name","Buy Price",3,"width"],["name","Net AMT.",3,"width"],["name","Action",3,"width"],["ngx-datatable-cell-template",""],["for","itemName",1,"form-label"],["type","text","id","itemName","placeholder","Enter invoice number",1,"form-control"],["for","itemExpiryDate",1,"form-label","d-flex","justify-content-between"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange"],["d1","ngbDatepicker"],["type","button",1,"input-group-text",3,"click"],[1,"feather","icon-calendar","icon-md","text-muted"],["for","itemHSNCode",1,"form-label"],["type","text","id","itemHSNCode","placeholder","Enter challan number",1,"form-control"],["for","itemGSTTax",1,"form-label","d-flex","justify-content-between"],["d","ngbDatepicker"],["for","itemSpecialization",1,"form-label"],["type","text","id","itemSpecialization","placeholder","Enter gate entry no",1,"form-control"],["type","text","id","itemSpecialization","placeholder","Enter frieght",1,"form-control"],["for","itemMakeModel",1,"form-label"],["type","text","id","itemMakeModel","placeholder","Enter octroi",1,"form-control"],["type","text","id","itemSpecialization","placeholder","Enter round off",1,"form-control"],["type","text","id","itemMakeModel","placeholder","Enter GRN amount",1,"form-control"],["type","text","id","itemSpecialization","placeholder","Enter invoice amount",1,"form-control"],["type","text","id","itemMakeModel","placeholder","Enter narration",1,"form-control"],[1,"card-footer"],[1,"col-sm-12","text-end"],[1,"text-end","d-flex","align-items-end","flex-end","flex-column","flex-sm-row"],[1,"form-check","mr-2","mb-2"],["type","checkbox","id","itemFIFOorder",1,"form-check-input"],["type","button",1,"btn","btn-secondary","me-2"],["type","button",1,"btn","btn-primary","submit"],[1,"btn","btn-xs","me-1"],[1,"mdi","text-danger","mdi-close-circle"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._uU(4,"GRN"),t.qZA()(),t.TgZ(5,"li",4),t._uU(6,"New GRN"),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),t._uU(12,"GRN Details"),t.qZA(),t.TgZ(13,"form")(14,"div",5)(15,"div",10)(16,"div",11)(17,"label",12),t._uU(18,"GRN Location "),t.qZA(),t.TgZ(19,"select",13)(20,"option",14),t._uU(21,"Select Location"),t.qZA(),t.TgZ(22,"option",15),t._uU(23,"Manufacturer 1"),t.qZA(),t.TgZ(24,"option",16),t._uU(25,"Manufacturer 2"),t.qZA(),t.TgZ(26,"option",17),t._uU(27,"Manufacturer 3"),t.qZA()()()(),t.TgZ(28,"div",10)(29,"div",11)(30,"label",18),t._uU(31,"Supplier"),t.qZA(),t.TgZ(32,"select",19)(33,"option",14),t._uU(34,"Select supplier"),t.qZA(),t.TgZ(35,"option",15),t._uU(36,"Machine 1"),t.qZA(),t.TgZ(37,"option",16),t._uU(38,"Machine 2"),t.qZA(),t.TgZ(39,"option",17),t._uU(40,"Machine 3"),t.qZA()()()(),t.TgZ(41,"div",20)(42,"label",21),t._uU(43," Search Option "),t.qZA(),t.TgZ(44,"div",22)(45,"div",23),t._UZ(46,"input",24),t.TgZ(47,"label",25),t._uU(48," Direct Rate "),t.qZA()(),t.TgZ(49,"div",26),t._UZ(50,"input",24),t.TgZ(51,"label",25),t._uU(52," Quotation Rate "),t.qZA()()()(),t.TgZ(53,"div",27)(54,"div",11)(55,"label",28),t._uU(56,"Item"),t.qZA(),t._UZ(57,"input",29),t.qZA()(),t.TgZ(58,"div",27)(59,"div",11)(60,"label",28),t._uU(61,"Item"),t.qZA(),t._UZ(62,"input",30),t.qZA()(),t.TgZ(63,"div",27)(64,"div",11)(65,"label",28),t._uU(66,"Old PO Number"),t.qZA(),t._UZ(67,"input",31),t.qZA()(),t.TgZ(68,"div",27)(69,"div",11)(70,"label",32),t._uU(71,"Manufacturer"),t.qZA(),t.TgZ(72,"select",33)(73,"option",14),t._uU(74,"Select manufacturer"),t.qZA(),t.TgZ(75,"option",15),t._uU(76,"Unit 1"),t.qZA(),t.TgZ(77,"option",16),t._uU(78,"Unit 2"),t.qZA(),t.TgZ(79,"option",17),t._uU(80,"Unit 3"),t.qZA()()()(),t.TgZ(81,"div",27)(82,"div",11)(83,"label",32),t._uU(84,"Machine"),t.qZA(),t.TgZ(85,"select",33)(86,"option",14),t._uU(87,"Select machine"),t.qZA(),t.TgZ(88,"option",15),t._uU(89,"Unit 1"),t.qZA(),t.TgZ(90,"option",16),t._uU(91,"Unit 2"),t.qZA(),t.TgZ(92,"option",17),t._uU(93,"Unit 3"),t.qZA()()()(),t.TgZ(94,"div",27)(95,"div",11)(96,"label",32),t._uU(97,"Pack Size"),t.qZA(),t.TgZ(98,"select",33)(99,"option",14),t._uU(100,"Select pack size"),t.qZA(),t.TgZ(101,"option",15),t._uU(102,"Unit 1"),t.qZA(),t.TgZ(103,"option",16),t._uU(104,"Unit 2"),t.qZA(),t.TgZ(105,"option",17),t._uU(106,"Unit 3"),t.qZA()()()(),t.TgZ(107,"div",27)(108,"div",11)(109,"label",34),t._uU(110,"Barcode"),t.qZA(),t._UZ(111,"input",35),t.qZA()(),t.TgZ(112,"div",36)(113,"div",11)(114,"button",37),t._UZ(115,"span",38),t._uU(116," Add"),t.qZA()()(),t.TgZ(117,"div",39),t._UZ(118,"hr"),t.qZA()(),t.TgZ(119,"h6",9),t._uU(120,"Item Details"),t.qZA(),t.TgZ(121,"div",5)(122,"div",6)(123,"div",7)(124,"div",8)(125,"div",40)(126,"ngx-datatable",41,42),t._UZ(128,"ngx-datatable-column",43)(129,"ngx-datatable-column",44)(130,"ngx-datatable-column",45)(131,"ngx-datatable-column",46)(132,"ngx-datatable-column",47)(133,"ngx-datatable-column",48)(134,"ngx-datatable-column",49)(135,"ngx-datatable-column",50)(136,"ngx-datatable-column",51)(137,"ngx-datatable-column",52)(138,"ngx-datatable-column",53)(139,"ngx-datatable-column",54)(140,"ngx-datatable-column",55)(141,"ngx-datatable-column",56)(142,"ngx-datatable-column",57)(143,"ngx-datatable-column",58)(144,"ngx-datatable-column",59)(145,"ngx-datatable-column",60)(146,"ngx-datatable-column",61)(147,"ngx-datatable-column",62)(148,"ngx-datatable-column",63)(149,"ngx-datatable-column",64)(150,"ngx-datatable-column",65),t.TgZ(151,"ngx-datatable-column",66),t.YNc(152,Je,2,0,"ng-template",67),t.qZA()()()()()(),t.TgZ(153,"div",39),t._UZ(154,"hr"),t.qZA()(),t.TgZ(155,"h6",9),t._uU(156,"Invoice Details"),t.qZA(),t.TgZ(157,"div",5)(158,"div",27)(159,"div",11)(160,"label",68),t._uU(161,"Invoice Number"),t.qZA(),t._UZ(162,"input",69),t.qZA()(),t.TgZ(163,"div",27)(164,"div",11)(165,"label",70),t._uU(166,"Invoice Date "),t.qZA(),t.TgZ(167,"div",71)(168,"input",72,73),t.NdJ("ngModelChange",function(r){return n.selectedDate=r}),t.qZA(),t.TgZ(170,"button",74),t.NdJ("click",function(){t.CHM(o);const r=t.MAs(169);return t.KtG(r.toggle())}),t._UZ(171,"i",75),t.qZA()()()(),t.TgZ(172,"div",27)(173,"div",11)(174,"label",76),t._uU(175,"Challan Number"),t.qZA(),t._UZ(176,"input",77),t.qZA()(),t.TgZ(177,"div",27)(178,"div",11)(179,"label",78),t._uU(180,"Challan Date"),t.qZA(),t.TgZ(181,"div",71)(182,"input",72,79),t.NdJ("ngModelChange",function(r){return n.selectedDate=r}),t.qZA(),t.TgZ(184,"button",74),t.NdJ("click",function(){t.CHM(o);const r=t.MAs(183);return t.KtG(r.toggle())}),t._UZ(185,"i",75),t.qZA()()()(),t.TgZ(186,"div",27)(187,"div",11)(188,"label",80),t._uU(189,"Gate Entry No."),t.qZA(),t._UZ(190,"input",81),t.qZA()(),t.TgZ(191,"div",27)(192,"div",11)(193,"label",80),t._uU(194,"Frieght"),t.qZA(),t._UZ(195,"input",82),t.qZA()(),t.TgZ(196,"div",27)(197,"div",11)(198,"label",83),t._uU(199,"Octroi"),t.qZA(),t._UZ(200,"input",84),t.qZA()(),t.TgZ(201,"div",27)(202,"div",11)(203,"label",80),t._uU(204,"Round Off"),t.qZA(),t._UZ(205,"input",85),t.qZA()(),t.TgZ(206,"div",27)(207,"div",11)(208,"label",83),t._uU(209,"GRN Amount"),t.qZA(),t._UZ(210,"input",86),t.qZA()(),t.TgZ(211,"div",27)(212,"div",11)(213,"label",80),t._uU(214,"Invoice Amount"),t.qZA(),t._UZ(215,"input",87),t.qZA()(),t.TgZ(216,"div",27)(217,"div",11)(218,"label",83),t._uU(219,"Narration"),t.qZA(),t._UZ(220,"input",88),t.qZA()(),t.TgZ(221,"div",36)(222,"div",11)(223,"button",37),t._UZ(224,"span",38),t._uU(225," Add"),t.qZA()()()()()(),t.TgZ(226,"div",89)(227,"div",5)(228,"div",90)(229,"div",91)(230,"div",92),t._UZ(231,"input",93),t.TgZ(232,"label",25),t._uU(233," Print Barcode "),t.qZA()(),t.TgZ(234,"div")(235,"button",94),t._uU(236,"Reset"),t.qZA(),t.TgZ(237,"button",95),t._uU(238,"Save"),t.qZA()()()()()()()()()}2&e&&(t.xp6(126),t.Q6J("scrollbarH",!0)("loadingIndicator",n.loadingIndicator)("columnMode",n.ColumnMode.force)("footerHeight",50)("limit",10),t.xp6(2),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",40),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(1),t.Q6J("width",50),t.xp6(17),t.Q6J("ngModel",n.selectedDate),t.xp6(14),t.Q6J("ngModel",n.selectedDate))},dependencies:[L.yS,R.nE,R.UC,R.vq,v.J4,m._Y,m.YN,m.Kr,m.Fj,m.JJ,m.JL,m.On,m.F],styles:[".mr-2[_ngcontent-%COMP%]{margin-right:20px}@media screen and (max-width: 620px){.mr-2[_ngcontent-%COMP%]{margin-right:8px}}.mb-5[_ngcontent-%COMP%]{margin-bottom:50px}.ml-auto[_ngcontent-%COMP%]{margin-left:auto}.flex-end[_ngcontent-%COMP%]{justify-content:flex-end}"]}),a})()},{path:"grn-against-po",component:ct},{path:"grn-against-po/:Guid",component:ct}];let Ee=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[L.Bz.forChild(Qe),L.Bz]}),a})();var Ve=_(8395),Be=_(3493);let He=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[P.ez,Ee,R.xD,v.IJ,B.A0,m.u5,m.UX,v.M,nt.G,H.cX,Ve.m,Be.D,lt.ZQ]}),a})()}}]);