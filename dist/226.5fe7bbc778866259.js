"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[226],{8226:(Sr,_e,f)=>{f.r(_e),f.d(_e,{PurchaseOrdersModule:()=>Dr});var v=f(6895),u=f(433),Y=f(9585),O=f(9061),$=f(4407),w=f(4931),ee=f(5861),de=f(7579),me=f(8372),be=f(5134),Q=f(5439),xe=f(2983),ge=f.n(xe),Ze=f(3583),e=f(4650),W=f(3361),fe=f(3791),te=f(2038),K=f(3378);function ve(i,l){1&i&&(e.TgZ(0,"button",42),e._uU(1,"PO Against PI"),e.qZA())}function Oe(i,l){if(1&i&&(e.TgZ(0,"option",45),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function Ne(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",43),e._uU(2),e.qZA(),e.TgZ(3,"select",44),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.ChangeEvent(r))}),e.YNc(4,Oe,2,2,"option",28),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.lnq("",t.rowCount*(t.pageNumber-1)+1,"-",t.TotalCount>t.rowCount*t.pageNumber&&""==t.Keyword?t.rowCount*t.pageNumber:t.totallength," of ",t.TotalCount," "),e.xp6(2),e.Q6J("ngForOf",t.itemOptionsPerPage)}}function Ie(i,l){if(1&i&&(e.TgZ(0,"option",45),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function qe(i,l){if(1&i&&e._UZ(0,"span",54),2&i){const t=e.oxw().$implicit;e.s9C("title",t.Isurgent?"Urgent":"")}}function De(i,l){1&i&&e._UZ(0,"span",55),2&i&&e.s9C("title","Alternate Quotation")}function Se(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,o=e.oxw(2),a=e.MAs(82);return o.openBasicModal(a),e.KtG(o.PurchaseOrderDetailas(r))}),e._UZ(1,"span",62),e._uU(2," Cancel PO"),e.qZA()}}function Ue(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(5);return e.KtG(r.modal.close("by: close icon"))})("click",function(){e.CHM(t);const r=e.oxw(3).$implicit,o=e.oxw(2),a=e.MAs(92);return o.openBasicModal(a),e.KtG(o.changestatus(r,"Checker"))}),e._UZ(1,"span",63),e._uU(2," Mark as Checked"),e.qZA()}}function Ge(i,l){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ue,3,0,"button",59),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf","Checked"!=t.Status&&"Approved"!=t.Status)}}function we(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(5);return e.KtG(r.modal.close("by: close icon"))})("click",function(){e.CHM(t);const r=e.oxw(3).$implicit,o=e.oxw(2),a=e.MAs(92);return o.openBasicModal(a),e.KtG(o.changestatus(r,"Approval"))}),e._UZ(1,"span",64),e._uU(2," Mark as Approved "),e.qZA()}}function ke(i,l){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,we,3,0,"button",59),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf","Approved"!=t.Status&&"Checked"==t.Status)}}function Qe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,o=e.oxw(2),a=e.MAs(84);return o.openBasicModal(a),e.KtG(o.PurchaseOrderDetailas(r))}),e._UZ(1,"span",65),e._uU(2," Shipping Address"),e.qZA()}}function Me(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,o=e.oxw(2),a=e.MAs(86);return o.openXlModal(a),e.KtG(o.getQuotationByGuid(r.QuotationGuid))}),e._UZ(1,"span",58),e._uU(2," Quotation View"),e.qZA()}}function Fe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,o=e.oxw(2),a=e.MAs(88);return o.openXlModal(a),e.KtG(o.getPurchaseOrder(r))}),e._UZ(1,"span",66),e._uU(2," Recall "),e.qZA()}}function Je(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,o=e.oxw(2),a=e.MAs(90);return o.openBasicModal(a),e.KtG(o.getPurchaseOrder(r))}),e._UZ(1,"span",67),e._uU(2," Payment "),e.qZA()}}function Le(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",56)(1,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.OnSelectPO(r))}),e._UZ(2,"span",58),e._uU(3),e.qZA(),e.YNc(4,Se,3,0,"button",59),e.YNc(5,Ge,2,1,"div",25),e.YNc(6,ke,2,1,"div",25),e.TgZ(7,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.DownloadPdf(r.PurchaseOrderGuid,r.Status,"print"))}),e._UZ(8,"span",60),e._uU(9," Print"),e.qZA(),e.TgZ(10,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.DownloadPdf(r.PurchaseOrderGuid,r.Status,""))}),e._UZ(11,"span",61),e._uU(12," Download"),e.qZA(),e.YNc(13,Qe,3,0,"button",59),e.YNc(14,Me,3,0,"button",59),e.YNc(15,Fe,3,0,"button",59),e.YNc(16,Je,3,0,"button",59),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(3),e.hij(" ","Approved"!=t.Status&&1!=t.IsDeleted&&1!=t.recall&&n.roles.toLowerCase().includes("Maker".toLowerCase())?"View/Edit":"View"," "),e.xp6(1),e.Q6J("ngIf","Approved"==t.Status&&0==t.IsDeleted&&0==t.recall&&!t.GRN&&n.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())),e.xp6(1),e.Q6J("ngIf",n.roles.toLowerCase().includes("Checker".toLowerCase())&&0==t.IsDeleted&&0==t.recall),e.xp6(1),e.Q6J("ngIf",(null==n.Approvalroles[0]?null:n.Approvalroles[0].toLowerCase().includes("Approval".toLowerCase()))&&0==t.IsDeleted&&0==t.recall),e.xp6(7),e.Q6J("ngIf","Approved"!==t.Status&&0==t.IsDeleted&&0==t.recall),e.xp6(1),e.Q6J("ngIf",1!=t.IsDeleted&&0==t.recall),e.xp6(1),e.Q6J("ngIf",n.role&&"Approved"===t.Status&&!t.GRN&&0==t.IsDeleted&&0==t.recall),e.xp6(1),e.Q6J("ngIf",0==t.IsDeleted&&("Accounts"==n.paymentRole||"Admin"==n.paymentRole)&&t.Price-t.DueAmount>1&&0==t.recall)}}function Ve(i,l){if(1&i&&(e.TgZ(0,"tr")(1,"td",47),e.YNc(2,qe,1,1,"span",48),e.YNc(3,De,1,1,"span",49),e.qZA(),e.TgZ(4,"td",33),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"td")(16,"span"),e._uU(17),e.qZA()(),e.TgZ(18,"td"),e._uU(19),e.ALo(20,"date"),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.ALo(25,"date"),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.qZA(),e.TgZ(28,"td"),e._uU(29),e.ALo(30,"date"),e.qZA(),e.TgZ(31,"td"),e._uU(32),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.qZA(),e.TgZ(35,"td")(36,"div",50)(37,"button",51),e._uU(38," Actions "),e._UZ(39,"span",52),e.qZA(),e.YNc(40,Le,17,8,"ng-template",null,53,e.W1O),e.qZA()()()),2&i){const t=l.$implicit,n=e.MAs(41);e.xp6(2),e.Q6J("ngIf",t.Isurgent),e.xp6(1),e.Q6J("ngIf",t.ChangeQuotatioNoReaason),e.xp6(2),e.hij(" ",t.PurchaseOrderNo,""),e.xp6(2),e.Oqu(t.StoreName),e.xp6(2),e.Oqu(t.SupplierName),e.xp6(2),e.Oqu(t.ItemsCount),e.xp6(2),e.Oqu(e.xi3(14,18,t.Price,"1.2-2")),e.xp6(3),e.Tol(t.IsDeleted?"badge bg-danger":"Checked"===t.Status?"badge bg-info":"Maker"===t.Status?"badge bg-warning":"Approved"!==t.Status||t.recall?t.recall?"badge bg-danger":"":"badge bg-success"),e.xp6(1),e.hij(" ",t.IsDeleted?"Cancelled":t.recall?"Recalled":t.Status," "),e.xp6(2),e.hij(" ",e.xi3(20,21,t.CreatedDate,"dd-MM-yyyy HH:mm")," "),e.xp6(3),e.Oqu(t.CreatedBy),e.xp6(2),e.hij(" ","0001-01-01T00:00:00"==t.POCheckedDate?"N/A":e.xi3(25,24,t.POCheckedDate,"dd-MM-yyyy HH:mm")," "),e.xp6(3),e.hij(" ",t.POCheckedByName??"Not checked"," "),e.xp6(2),e.hij(" ","0001-01-01T00:00:00"==t.POApprovedDate?"N/A":e.xi3(30,27,t.POApprovedDate,"dd-MM-yyyy HH:mm")," "),e.xp6(3),e.hij(" ",t.POAppprovedByName??"Not Approved"," "),e.xp6(2),e.hij(" ",t.Reason," "),e.xp6(3),e.Q6J("ngbPopover",n)}}function Re(i,l){if(1&i&&(e.ynx(0),e.YNc(1,Ve,42,30,"tr",46),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.AllPurchaseOrderDetails)}}function Ee(i,l){1&i&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"div",68),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"div",68),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"div",68),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"div",68),e.qZA(),e.TgZ(9,"td"),e._UZ(10,"div",68),e.qZA(),e.TgZ(11,"td"),e._UZ(12,"div",68),e.qZA(),e.TgZ(13,"td"),e._UZ(14,"div",68),e.qZA(),e.TgZ(15,"td"),e._UZ(16,"div",68),e.qZA(),e.TgZ(17,"td"),e._UZ(18,"div",68),e.qZA(),e.TgZ(19,"td"),e._UZ(20,"div",68),e.qZA(),e.TgZ(21,"td"),e._UZ(22,"div",68),e.qZA(),e.TgZ(23,"td"),e._UZ(24,"div",68),e.qZA()())}const He=function(){return[]};function Be(i,l){1&i&&(e.ynx(0),e.YNc(1,Ee,25,0,"tr",46),e.BQk()),2&i&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,He).constructor(5)))}function Ye(i,l){1&i&&(e.ynx(0),e.TgZ(1,"div",69)(2,"div",70)(3,"div",71),e._UZ(4,"i",72),e.TgZ(5,"span"),e._uU(6,"No purchase orders found!"),e.qZA()()()(),e.BQk())}function Ke(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",73)(1,"ngb-pagination",74),e.NdJ("pageChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.pageNumber=r)})("pageChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.ChangePagenumber(r))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("collectionSize",t.TotalCount)("pageSize",t.itemsPerPage)("page",t.pageNumber)("maxSize",t.maxSize)("rotate",!1)("boundaryLinks",t.boundaryLinks)("size",t.size)}}function je(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",75)(1,"h5",76),e._uU(2,"Cancel purchse order"),e.qZA(),e.TgZ(3,"button",77),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e.qZA()(),e.TgZ(4,"div",78)(5,"div",5)(6,"div",79)(7,"div",80)(8,"label",81),e._uU(9,"Are you sure do you want to cancel "),e.TgZ(10,"strong"),e._uU(11),e.qZA(),e._uU(12," purchase order?"),e.qZA()(),e.TgZ(13,"div",80)(14,"p"),e._uU(15,"PurchaseOrderNo : "),e.TgZ(16,"strong"),e._uU(17),e.qZA()()()()()(),e.TgZ(18,"div",82)(19,"button",83),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e._uU(20," No "),e.qZA(),e.TgZ(21,"button",84),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.close("by: close icon"),e.KtG(a.DeletePurchaseOrder())}),e._uU(22,"Yes"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(11),e.Oqu(t.PurchaseOrderName),e.xp6(6),e.Oqu(t.purchaseorderNo)}}function ze(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",75)(1,"h5",76),e._uU(2,"Delete Quotation"),e.qZA(),e.TgZ(3,"button",77),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e.qZA()(),e.TgZ(4,"div",78)(5,"div",5)(6,"div",79)(7,"div",80)(8,"label",81),e._uU(9,"Are you sure do you want to delete "),e.TgZ(10,"strong"),e._uU(11),e.qZA(),e._uU(12," quotation ?"),e.qZA()()()()(),e.TgZ(13,"div",82)(14,"button",83),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e._uU(15," No "),e.qZA(),e.TgZ(16,"button",84),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw(2);return o.close("by: close icon"),e.KtG(a.DeleteQuotation())}),e._uU(17,"Yes"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(11),e.Oqu(t.SupplierName)}}function We(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",75)(1,"h5",76),e._uU(2,"Shipping Address"),e.qZA(),e.TgZ(3,"button",77),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e.qZA()(),e.TgZ(4,"div",78)(5,"div",5)(6,"div",85)(7,"label",86),e._uU(8,"Location"),e.qZA(),e.TgZ(9,"ng-select",87),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.locationGuid=r)})("change",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.Changelocation(r))}),e.qZA()(),e.TgZ(10,"div",79)(11,"div",88)(12,"label",81),e._uU(13," Do you want to change this "),e.TgZ(14,"strong"),e._uU(15),e.qZA(),e._uU(16," shipping Location?"),e.qZA()()()()(),e.TgZ(17,"div",82)(18,"button",83),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e._uU(19," No "),e.qZA(),e.TgZ(20,"button",89),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.close("by: close icon"),e.KtG(a.UpdateShippingLocation())}),e._uU(21,"Yes"),e.qZA()(),e.YNc(22,ze,18,1,"ng-template",null,90,e.W1O)}if(2&i){const t=e.oxw();e.xp6(9),e.Q6J("ngModel",t.locationGuid)("items",t.CenterLocation)("multiple",!1),e.xp6(6),e.Oqu(t.ShippingLocation?t.ShippingLocation:t.location),e.xp6(5),e.Q6J("disabled",""==t.locationGuid)}}function Xe(i,l){if(1&i&&(e.TgZ(0,"div")(1,"p",93)(2,"span",94),e._uU(3,"Checked by"),e.qZA(),e._uU(4),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(": ",null==t.quotationDetails[0]?null:t.quotationDetails[0].CheckedByName," ")}}function $e(i,l){if(1&i&&(e.TgZ(0,"div")(1,"p",93)(2,"span",94),e._uU(3,"Approved by"),e.qZA(),e._uU(4),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(":",null==t.quotationDetails[0]?null:t.quotationDetails[0].ApprovedByName," ")}}function et(i,l){if(1&i&&(e.TgZ(0,"div")(1,"p",96)(2,"span",94),e._uU(3,"Checked date:"),e.qZA(),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.xi3(5,1,null==t.quotationDetails[0]?null:t.quotationDetails[0].CheckedDate,"dd-MM-yyyy"),"")}}function tt(i,l){if(1&i&&(e.TgZ(0,"div")(1,"p",96)(2,"span",94),e._uU(3,"Approved date:"),e.qZA(),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Oqu(e.xi3(5,1,null==t.quotationDetails[0]?null:t.quotationDetails[0].ApprovedDate,"dd-MM-yyyy"))}}function nt(i,l){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA()()),2&i){const t=l.$implicit;e.xp6(2),e.Oqu(t.QuotationNo),e.xp6(2),e.Oqu(t.ItemName),e.xp6(2),e.Oqu(t.VendorItemName),e.xp6(2),e.Oqu(t.ItemCategoryName),e.xp6(2),e.Oqu(t.HSNCode?t.HSNCode:"N/A"),e.xp6(2),e.Oqu(t.ManufactureName),e.xp6(2),e.Oqu(t.MachineName),e.xp6(2),e.hij("\u20b9",t.Rate,""),e.xp6(2),e.Oqu(t.DiscountPer),e.xp6(2),e.Oqu(0==t.SGSTPer?"--":t.SGSTPer),e.xp6(2),e.Oqu(0==t.CGSTPer?"--":t.CGSTPer),e.xp6(2),e.Oqu(t.IGSTPer),e.xp6(2),e.hij("\u20b9",t.BuyPrice,"")}}function rt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",75)(1,"h5",76),e._uU(2,"Supplier Quotation Detail"),e.qZA(),e.TgZ(3,"button",77),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e.qZA()(),e.TgZ(4,"div",91)(5,"div",92)(6,"p",93)(7,"span",94),e._uU(8,"Supplier name"),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"p",93)(11,"span",94),e._uU(12,"Supplier state"),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"p",93)(15,"span",94),e._uU(16,"Delivery location"),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"p",93)(19,"span",94),e._uU(20,"Created by"),e.qZA(),e._uU(21),e.qZA(),e.YNc(22,Xe,5,1,"div",25),e.YNc(23,$e,5,1,"div",25),e.qZA(),e.TgZ(24,"div",95)(25,"p",96)(26,"span",94),e._uU(27,"Quotation reference No.:"),e.qZA(),e._uU(28),e.qZA(),e.TgZ(29,"p",96)(30,"span",94),e._uU(31,"Supplier address:"),e.qZA(),e._uU(32),e.qZA(),e.TgZ(33,"p",96)(34,"span",94),e._uU(35,"GSTN No.:"),e.qZA(),e._uU(36),e.qZA(),e.TgZ(37,"p",96)(38,"span",94),e._uU(39,"From date:"),e.qZA(),e._uU(40),e.ALo(41,"date"),e.TgZ(42,"span",94),e._uU(43,"To date:"),e.qZA(),e._uU(44),e.ALo(45,"date"),e.qZA(),e.TgZ(46,"p",96)(47,"span",94),e._uU(48,"Created date:"),e.qZA(),e._uU(49),e.ALo(50,"date"),e.qZA(),e.YNc(51,et,6,4,"div",25),e.YNc(52,tt,6,4,"div",25),e.qZA()(),e.TgZ(53,"div",78)(54,"double-scroll")(55,"table",97)(56,"thead")(57,"tr")(58,"th"),e._uU(59,"Quotation No"),e.qZA(),e.TgZ(60,"th"),e._uU(61,"Item Name"),e.qZA(),e.TgZ(62,"th"),e._uU(63,"Vendor Item Name"),e.qZA(),e.TgZ(64,"th"),e._uU(65,"Item Category Name"),e.qZA(),e.TgZ(66,"th"),e._uU(67,"HSN Code"),e.qZA(),e.TgZ(68,"th"),e._uU(69,"Manufacturer Name"),e.qZA(),e.TgZ(70,"th"),e._uU(71,"Machine Name"),e.qZA(),e.TgZ(72,"th"),e._uU(73,"Rate"),e.qZA(),e.TgZ(74,"th"),e._uU(75,"Discount %"),e.qZA(),e.TgZ(76,"th"),e._uU(77,"SGST %"),e.qZA(),e.TgZ(78,"th"),e._uU(79,"CGST %"),e.qZA(),e.TgZ(80,"th"),e._uU(81,"IGST %"),e.qZA(),e.TgZ(82,"th"),e._uU(83,"Buy Price"),e.qZA()()(),e.TgZ(84,"tbody"),e.YNc(85,nt,27,13,"tr",46),e.qZA()()()(),e.TgZ(86,"div",82)(87,"button",98),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close button"))}),e._uU(88,"Close"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(9),e.hij(": ",null==t.quotationDetails[0]?null:t.quotationDetails[0].SupplierName," "),e.xp6(4),e.hij(":",null==t.quotationDetails[0]?null:t.quotationDetails[0].SupplierStateName,""),e.xp6(4),e.hij(":",t.locationList,""),e.xp6(4),e.hij(":",null==t.quotationDetails[0]?null:t.quotationDetails[0].CreatedBy,""),e.xp6(1),e.Q6J("ngIf",null!=(null==t.quotationDetails[0]?null:t.quotationDetails[0].CheckedByName)),e.xp6(1),e.Q6J("ngIf",null!=(null==t.quotationDetails[0]?null:t.quotationDetails[0].ApprovedByName)),e.xp6(5),e.Oqu(null==t.quotationDetails[0]?null:t.quotationDetails[0].QuotationRefNo),e.xp6(4),e.hij(" ",null==t.quotationDetails[0]?null:t.quotationDetails[0].SupplierAddress," , Hyderabad."),e.xp6(4),e.hij(" ",null==t.quotationDetails[0]?null:t.quotationDetails[0].GSTNNo,""),e.xp6(4),e.hij(" ",e.xi3(41,15,null==t.quotationDetails[0]?null:t.quotationDetails[0].FromDate,"dd-MM-yyyy"),""),e.xp6(4),e.hij(" ",e.xi3(45,18,null==t.quotationDetails[0]?null:t.quotationDetails[0].ToDate,"dd-MM-yyyy")," "),e.xp6(5),e.hij(" ",e.xi3(50,21,null==t.quotationDetails[0]?null:t.quotationDetails[0].CreateDate,"dd-MM-yyyy"),""),e.xp6(2),e.Q6J("ngIf",null!=(null==t.quotationDetails[0]?null:t.quotationDetails[0].CheckedDate)),e.xp6(1),e.Q6J("ngIf",null!=(null==t.quotationDetails[0]?null:t.quotationDetails[0].ApprovedDate)),e.xp6(33),e.Q6J("ngForOf",t.quotationDetails)}}function it(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",75)(1,"h5",99),e._uU(2,"Recall Purchase Order"),e.qZA(),e.TgZ(3,"button",77),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.dismiss("by: close icon"),e.KtG(a.recallReason="")}),e.qZA()(),e.TgZ(4,"div",78)(5,"form",100,101),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.confirmRecall())}),e.TgZ(7,"div",102)(8,"label",103),e._uU(9,"Reason for Recall:"),e.qZA(),e.TgZ(10,"textarea",104),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.recallReason=r)}),e.qZA()(),e.TgZ(11,"input",105),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.body.PurchaseOrderGuid=r)}),e.qZA(),e.TgZ(12,"div",82)(13,"button",106),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("by: close icon"))})("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.clearReason())}),e._uU(14,"Cancel"),e.qZA(),e.TgZ(15,"button",107),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("by: close icon"))}),e._uU(16,"Save"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(10),e.Q6J("ngModel",t.recallReason),e.xp6(1),e.Q6J("ngModel",t.body.PurchaseOrderGuid),e.xp6(4),e.Q6J("disabled",""==t.recallReason)}}function ot(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",85),e._uU(2,"Attachment:"),e.qZA(),e.TgZ(3,"div",138)(4,"i",139),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.RemoveImage())}),e.qZA(),e._UZ(5,"img",140),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(5),e.Q6J("src",t.fileUrl,e.LSH)}}function at(i,l){1&i&&(e.TgZ(0,"span",141),e._uU(1,"Image url is required!"),e.qZA())}function lt(i,l){1&i&&(e.TgZ(0,"span",141),e._uU(1,"Bank name is required!"),e.qZA())}function st(i,l){1&i&&(e.TgZ(0,"span",141),e._uU(1,"TransactionID is required!"),e.qZA())}function ut(i,l){1&i&&(e.TgZ(0,"span",141),e._uU(1,"Invoice number is required!"),e.qZA())}function ct(i,l){1&i&&(e.TgZ(0,"div",141),e._uU(1,"Transaction date is required!"),e.qZA())}function dt(i,l){1&i&&(e.TgZ(0,"span",141),e._uU(1," Please select a valid payment mode."),e.qZA())}function mt(i,l){1&i&&(e.TgZ(0,"span",141),e._uU(1,"Paid amount is required!"),e.qZA())}function pt(i,l){1&i&&(e.TgZ(0,"span",141),e._uU(1,"Paid amount is less than the Due amount!"),e.qZA())}function ht(i,l){1&i&&(e.TgZ(0,"span",141),e._uU(1,"Remarks is required!"),e.qZA())}const F=function(i){return{"text-danger":i}},E=function(i){return{"is-invalid":i}};function _t(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",75)(1,"h5",99),e._uU(2,"Payment details"),e.qZA(),e.TgZ(3,"button",77),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.dismiss("by: close icon"),e.KtG(a.resetfrom())}),e.qZA()(),e.TgZ(4,"div",78),e.YNc(5,ot,6,1,"div",25),e.TgZ(6,"div",80)(7,"label",108),e._uU(8,"PO Number: "),e.TgZ(9,"strong"),e._uU(10),e.qZA()()(),e.TgZ(11,"form",109)(12,"div",5)(13,"div",110)(14,"label",111),e._uU(15,"Payment attachment"),e.TgZ(16,"span",112),e._uU(17,"*"),e.qZA()(),e.TgZ(18,"div",113)(19,"div",114),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.markAsTouched("imageUrl"))})("input",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.textValues())})("paste",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.pasteImage(r))}),e.qZA(),e.TgZ(20,"p",115),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.markAsTouched("imageUrl"))})("click",function(){e.CHM(t);const r=e.MAs(23);return e.KtG(r.click())}),e._UZ(21,"i",116),e.qZA()(),e.TgZ(22,"input",117,118),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.UplodeInvoice(r))}),e.qZA(),e.YNc(24,at,2,0,"span",119),e.qZA(),e.TgZ(25,"div",110)(26,"label",111),e._uU(27,"Bank name"),e.TgZ(28,"span",112),e._uU(29,"*"),e.qZA()(),e._UZ(30,"input",120),e.YNc(31,lt,2,0,"span",119),e.qZA(),e.TgZ(32,"div",110)(33,"label",111),e._uU(34,"Transaction ID"),e.TgZ(35,"span",112),e._uU(36,"*"),e.qZA()(),e._UZ(37,"input",121),e.YNc(38,st,2,0,"span",119),e.qZA(),e.TgZ(39,"div",110)(40,"label",111),e._uU(41,"Invoice Number"),e.TgZ(42,"span",112),e._uU(43,"*"),e.qZA()(),e._UZ(44,"input",122),e.YNc(45,ut,2,0,"span",119),e.qZA(),e.TgZ(46,"div",110)(47,"label",111),e._uU(48,"Transaction date"),e.TgZ(49,"span",112),e._uU(50,"*"),e.qZA()(),e.TgZ(51,"div",123),e._UZ(52,"input",124,125),e.TgZ(54,"button",126),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(53);return e.KtG(r.toggle())}),e._UZ(55,"i",127),e.qZA()(),e.YNc(56,ct,2,0,"div",119),e.qZA(),e.TgZ(57,"div",110)(58,"label",111),e._uU(59,"Mode of payment "),e.TgZ(60,"span",112),e._uU(61,"*"),e.qZA()(),e.TgZ(62,"select",128)(63,"option",129),e._uU(64,"Select mode of payment"),e.qZA(),e.TgZ(65,"option",130),e._uU(66,"Online payment"),e.qZA(),e.TgZ(67,"option",131),e._uU(68,"Offline payment"),e.qZA(),e.TgZ(69,"option",132),e._uU(70,"Cash payment"),e.qZA(),e.TgZ(71,"option",133),e._uU(72,"Credit card payment"),e.qZA()(),e.YNc(73,dt,2,0,"span",119),e.qZA(),e.TgZ(74,"div",110)(75,"label",111),e._uU(76,"Total amount "),e.TgZ(77,"span",112),e._uU(78,"*"),e.qZA()(),e._UZ(79,"input",134),e.qZA(),e.TgZ(80,"div",110)(81,"label",111),e._uU(82,"Due amount "),e.TgZ(83,"span",112),e._uU(84,"*"),e.qZA()(),e._UZ(85,"input",135),e.qZA(),e.TgZ(86,"div",110)(87,"label",111),e._uU(88,"Paid amount"),e.TgZ(89,"span",112),e._uU(90,"*"),e.qZA()(),e.TgZ(91,"input",136),e.NdJ("keypress",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.restrictCharectors(r))})("input",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.paidamount(r))}),e.qZA(),e.YNc(92,mt,2,0,"span",119),e.YNc(93,pt,2,0,"span",119),e.qZA(),e.TgZ(94,"div",110)(95,"label",111),e._uU(96,"Remarks"),e.TgZ(97,"span",112),e._uU(98,"*"),e.qZA()(),e._UZ(99,"textarea",137),e.YNc(100,ht,2,0,"span",119),e.qZA()(),e.TgZ(101,"div",82)(102,"button",106),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.dismiss("by: close icon"),e.KtG(a.resetfrom())}),e._uU(103,"Cancel"),e.qZA(),e.TgZ(104,"button",107),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.dismiss("by: close icon"),e.KtG(a.SavePayment())}),e._uU(105,"Save"),e.qZA()()()()}if(2&i){const t=e.oxw();let n,r,o,a,s,m,p,d,c,P,g,T,x,A,C,N,D,h,y,I,b,q,U,S,k;e.xp6(5),e.Q6J("ngIf",t.fileUrl),e.xp6(5),e.Oqu(t.PurchaseOrderNumber),e.xp6(1),e.Q6J("formGroup",t.PaymentDetailForm),e.xp6(5),e.Q6J("ngClass",e.VKq(31,F,""==(null==(n=t.PaymentDetailForm.get("imageUrl"))?null:n.value))),e.xp6(8),e.Q6J("ngIf",(null==(r=t.PaymentDetailForm.get("imageUrl"))?null:r.touched)&&""==(null==(r=t.PaymentDetailForm.get("imageUrl"))?null:r.value)),e.xp6(4),e.Q6J("ngClass",e.VKq(33,F,""==(null==(o=t.PaymentDetailForm.get("BankName"))?null:o.value))),e.xp6(2),e.Q6J("ngClass",e.VKq(35,E,(null==(a=t.PaymentDetailForm.get("BankName"))?null:a.hasError("required"))&&(null==(a=t.PaymentDetailForm.get("BankName"))?null:a.touched))),e.xp6(1),e.Q6J("ngIf",(null==(s=t.PaymentDetailForm.get("BankName"))?null:s.touched)&&(null==(s=t.PaymentDetailForm.get("BankName"))?null:s.invalid)),e.xp6(4),e.Q6J("ngClass",e.VKq(37,F,null==(null==(m=t.PaymentDetailForm.get("TransectionID"))?null:m.value))),e.xp6(2),e.Q6J("ngClass",e.VKq(39,E,(null==(p=t.PaymentDetailForm.get("TransectionID"))?null:p.hasError("required"))&&(null==(p=t.PaymentDetailForm.get("TransectionID"))?null:p.touched))),e.xp6(1),e.Q6J("ngIf",(null==(d=t.PaymentDetailForm.get("TransectionID"))?null:d.touched)&&(null==(d=t.PaymentDetailForm.get("TransectionID"))?null:d.invalid)),e.xp6(4),e.Q6J("ngClass",e.VKq(41,F,null==(null==(c=t.PaymentDetailForm.get("InvoiceNumber"))?null:c.value))),e.xp6(2),e.Q6J("ngClass",e.VKq(43,E,(null==(P=t.PaymentDetailForm.get("InvoiceNumber"))?null:P.hasError("required"))&&(null==(P=t.PaymentDetailForm.get("InvoiceNumber"))?null:P.touched))),e.xp6(1),e.Q6J("ngIf",(null==(g=t.PaymentDetailForm.get("InvoiceNumber"))?null:g.touched)&&(null==(g=t.PaymentDetailForm.get("InvoiceNumber"))?null:g.invalid)),e.xp6(4),e.Q6J("ngClass",e.VKq(45,F,null==(null==(T=t.PaymentDetailForm.get("TransectionDate"))?null:T.value))),e.xp6(3),e.Q6J("maxDate",t.TodayDate)("ngClass",e.VKq(47,E,(null==(x=t.PaymentDetailForm.get("TransectionDate"))?null:x.hasError("required"))&&(null==(x=t.PaymentDetailForm.get("TransectionDate"))?null:x.touched))),e.xp6(4),e.Q6J("ngIf",(null==(A=t.PaymentDetailForm.get("TransectionDate"))?null:A.touched)&&(null==(A=t.PaymentDetailForm.get("TransectionDate"))?null:A.invalid)),e.xp6(4),e.Q6J("ngClass",e.VKq(49,F,""==(null==(C=t.PaymentDetailForm.get("Modeofpayment"))?null:C.value))),e.xp6(2),e.Q6J("ngClass",e.VKq(51,E,(null==(N=t.PaymentDetailForm.get("Modeofpayment"))?null:N.hasError("required"))&&(null==(N=t.PaymentDetailForm.get("Modeofpayment"))?null:N.touched))),e.xp6(11),e.Q6J("ngIf",(null==(D=t.PaymentDetailForm.get("Modeofpayment"))?null:D.touched)&&(null==(D=t.PaymentDetailForm.get("Modeofpayment"))?null:D.invalid)),e.xp6(4),e.Q6J("ngClass",e.VKq(53,F,""==(null==(h=t.PaymentDetailForm.get("TotalAmount"))?null:h.value))),e.xp6(6),e.Q6J("ngClass",e.VKq(55,F,""==(null==(y=t.PaymentDetailForm.get("Dueamount"))?null:y.value))),e.xp6(6),e.Q6J("ngClass",e.VKq(57,F,""==(null==(I=t.PaymentDetailForm.get("PaidAmount"))?null:I.value))),e.xp6(2),e.Q6J("ngClass",e.VKq(59,E,(null==(b=t.PaymentDetailForm.get("PaidAmount"))?null:b.hasError("required"))&&(null==(b=t.PaymentDetailForm.get("PaidAmount"))?null:b.touched))),e.xp6(1),e.Q6J("ngIf",(null==(q=t.PaymentDetailForm.get("PaidAmount"))?null:q.touched)&&(null==(q=t.PaymentDetailForm.get("PaidAmount"))?null:q.invalid)),e.xp6(1),e.Q6J("ngIf",t.isvalid),e.xp6(4),e.Q6J("ngClass",e.VKq(61,F,""==(null==(U=t.PaymentDetailForm.get("Remarks"))?null:U.value))),e.xp6(2),e.Q6J("ngClass",e.VKq(63,E,(null==(S=t.PaymentDetailForm.get("Remarks"))?null:S.hasError("required"))&&(null==(S=t.PaymentDetailForm.get("Remarks"))?null:S.touched))),e.xp6(1),e.Q6J("ngIf",(null==(k=t.PaymentDetailForm.get("Remarks"))?null:k.touched)&&(null==(k=t.PaymentDetailForm.get("Remarks"))?null:k.invalid)),e.xp6(4),e.Q6J("disabled",t.PaymentDetailForm.invalid||t.isvalid)}}function gt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",75)(1,"h5",76),e._uU(2,"Remarks"),e.qZA(),e.TgZ(3,"button",77),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.close("by: close icon"),e.KtG(a.reason="")}),e.qZA()(),e.TgZ(4,"div",78)(5,"div",5)(6,"div",79)(7,"div",142)(8,"label",143),e._uU(9,"Reason:"),e.qZA(),e.TgZ(10,"input",144),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.reason=r)}),e.qZA()()()()(),e.TgZ(11,"div",82)(12,"button",83),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.close("by: close icon"),e.KtG(a.reason="")}),e._uU(13," No "),e.qZA(),e.TgZ(14,"button",84),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))})("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.UpdateStatus())}),e._uU(15," Yes "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(10),e.Q6J("ngModel",t.reason)}}let ft=(()=>{class i{constructor(t,n,r,o,a,s,m,p){this.modalService=t,this.purchaseOrderService=n,this.fb=r,this.router=o,this.quotationService=a,this.authservice=s,this.datepipe=m,this.authenticationService=p,this.maxSize=3,this.boundaryLinks=!0,this.size="lg",this.rows=[],this.temp=[],this.UnparsedHtml='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Purchase Order Report</title><style>table{border-collapse:collapse;border:1px solid #000}table td,table th{border-bottom:1px solid #000;border-right:1px solid #000;padding:5px;text-align:left;word-wrap:break-word;word-break:break-all;font-size:10px}table tr:last-child td{border-bottom:none}p{margin:0}</style></head><body><table style="text-align:center;table-layout:fixed" width="100%"><tbody><tr><td><div style="height:28px;display:flex;align-items:center;padding:20px 0"><img data-v-0e549244="" src="data:image/png;base64,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" alt="Yoda LIMS"></div></td></tr></tbody></table><table style="table-layout:fixed" width="100%"><tbody><tr><td style="font-weight:700;font-size:20px;text-align:center">Purchase Order</td></tr></tbody></table><table style="table-layout:fixed" width="100%"><tbody><tr><td style="font-size:14px"><b>PO No:</b>%%PurchaseOrderNo%%</td><td style="font-size:14px"><b>PO Date:</b>%%POCreatedDate%%</td></tr></tbody></table><table style="table-layout:fixed" width="100%"><tbody><tr><td style="font-weight:700;font-size:14px">Ordered By</td><td rowspan="2" style="font-weight:700;font-size:14px">Vendor details</td></tr><tr><td style="font-weight:700;font-size:14px"><b>Yoda Lifeline Diagnostics Pvt Ltd</b></td></tr><tr><td style="font-size:14px"><p><b>Address:</b>%%StoreLocationAddress%%</p><p><b>Contact:</b>%%ContactPersonNo%%</p><p><b>GST:</b>%%GSTNNO%%</p></td><td style="font-size:14px"><p><b>Vendor name:</b>%%SupplierName%%<p><b>Vendor address:</b>%%Address%%</p><p><b>Contact person:</b>%%PrimaryContactPerson%%</p><p><b>Vendor mobile:</b>%%PrimaryContactPersonMobileNo%%,%%SecondaryContactPersonMobileNo%%</p><p><b>Vendor email:</b>%%VendorEmailId%%</p><p><b>GST:</b>%%GSTIN%%</p></td></tr><td style="font-size:14px"><b>Bill to address</b></td><td style="font-size:14px"><b>Ship to address</b></td><tr><td style="font-size:14px"><p><b>Name:</b>%%CenterName%%</p><p><b>Address:</b>%%BillStoreLocationAddress%%</p><p><b>Contact person:</b>%%BillingContactPerson%%</p><p><b>Mobile:</b>%%BillingMobileNo%%</p><p><b>Email:</b>%%BillingPersonEmail%%</p><p><b>GST:</b>%%BillLocationGST%%</p></td><td style="font-size:14px"><p><b>Name:</b>%%ShippingCenterName%%</p><p><b>Address:</b>%%ShipStoreLocationAddress%%</p><p><b>Contact person:</b>%%shipingContactPerson%%</p><p><b>Mobile:</b>%%ShipingMobileNo%%</p><p><b>Email:</b>%%ShipingPersonEmail%%</p><p><b>GST:</b>%%ShipLocationGST%%</p></td></tr><tr><td style="font-size:14px"><b>Supplier state:</b>%%SupplierState%%</td><td style="font-size:14px"></td></tr></tbody></table><table style="table-layout:fixed" width="100%"><thead><tr><th width="27">S. No.</th><th width="120">Item name/Item code</th><th width="120">Vendor Item Name</th><th width="54">Cat No.</th><th width="54">MFD</th><th width="30">Unit</th><th width="25">Pack size</th><th width="30">Qty</th><th width="54">Unit price</th><th width="30">Disc %</th><th width="20">GST %</th><th width="54">GST amnt.</th><th width="60">Amnt</th></tr></thead><tbody><tr id="PurchaseOrderItemDetails"><td>%%S.NO%%</td><td>%%ItemName%%</td><td>%%VendorItemName%%</td><td>%%CatalogNo%%</td><td>%%ManufactureName%%</td><td>%%MinorUnitName%%</td><td>%%PackSize%%</td><td>%%OrderedQty%%</td><td>&#8377; %%BuyPrice%%</td><td>%%DiscountPer%%</td><td>%%CGST+SGST+UGST%%</td><td>&#8377; %%TaxAmount%%</td><td>&#8377; %%NetAmount%%</td></tr><tr><td colspan="12" style="font-size:12px;text-align:right">Total amount in INR : %%TotalPrice%%</td></tr></tbody></table><table style="width:100%;margin-top:5px"><tbody><tr><td>Created by: %%CreatedBy%%</td><td>Checked by: %%CheckedByName%%</td><td>Approved by: %%AppprovedByName%%</td><td>Recalled by: %%RecallByName%%</td><td>Cancelled by: %%CancelledBy%%</td></tr></tbody></table><table style="width:100%;margin-top:5px"><tbody><tr><td><strong>Payment Term :</strong><strong>%%PaymentTerm%%<strong></strong><br><strong>Delivery term :</strong><strong>%%Deliveryterm%%</strong></td></tr></tbody></table><table style="table-layout:fixed;border:none;margin-top:30px" width="100%"><tbody><tr><td style="font-size:14px;border:none;padding:0;text-align:right"><b>Date:</b>%%PurchaseOrderDownloadDate%%</td></tr><tr><td style="font-size:14px;border:none;padding:0;text-align:right">This is a computer generated document, hence signature is not required.</td></tr></tbody></table></body></html>',this.ColumnMode=Y.hq,this.sort="desc",this.pageNumber=1,this.rowCount=40,this.Keyword="",this.AllPurchaseOrderDetails=[],this.modelChanged=new de.x,this.itemsPerPage=40,this.itemOptionsPerPage=[40,80,120,160,200,240,280,320],this.isMenuCollapsed=!0,this.purchaseOrderDetails=[],this.PurchaseOrderItemDetails=[],this.CenterLocation=[],this.reason="",this.locationGuid="",this.quotationDetails=[],this.quotationGuid=[],this.supplierGuid=[]=[],this.quotationsList=[],this.fromDate="",this.toDate="",this.purchaseOrderGuiddata="",this.statusdata="",this.itemGuid=[]=[],this.Isurgent=!1,this.QuotationReason=!1,this.showIcon=!1,this.isvalid=!1,this.locations=[],this.filter="",this.filterOptions=["Maker","Checked","Approved","Recall","Cancelled","All"],this.selectedStatus="",this.PoDate="",this.recallReason="",this.body={PurchaseOrderGuid:"",ApprovalType:"",Reason:"",UserGuid:"",ApprovalPhoneNumber:"",ApprovalEmail:"",ApprovalName:"",ApprovalReason:"",CheckedReason:"",ApproveReason:"",POAttachmentURL:""},this.PoAttachmentURL="",this.copiedScreenshot=null,this.fetch(d=>{this.temp=d,this.rows=d}),this.modelChanged.pipe((0,me.b)(1e3)).subscribe(d=>{this.Keyword=d,this.GetAllPurchaseOrderDetails()})}captureScreenshot(){this.copiedScreenshot="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QCMRXhpZgAATU0AKgAAAAgAA1IBAAAAIAAAAPgAAAQgCAAABAAAAPgEAAAMAAAABAAYAAAEAAAD/2wBDAAoHBwkHBgoJCAkLCwoMDxkQDw4ODx4WFxIZJCAmJSMgIyIoLTkwKCo2KyIjMkQyNjs9QEBAJjBGS0U+Sjk/QD3/2wBDAQsLCw8NDx0QEB09KSMpPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT3/wAARCAABAAEDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD7/8wBJaKACgAAAAAFNACgAMAAAAAAA1AEoABQAAAAAKADUAFAAAAAAA1AEoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//2Q=="}copyScreenshot(){this.copiedScreenshot&&this.clipboardService.copyFromContent(this.copiedScreenshot.toString())}RemoveImage(){this.fileUrl="",console.log("ahaha");const t=document.getElementById("editableDiv");t&&(t.innerHTML="",t.style.color="#adb7c1",t.setAttribute("contenteditable","true"),t.classList.add("PasteContent")),this.PaymentDetailForm?.patchValue({imageUrl:this.fileUrl})}textValues(){const t=document.getElementById("editableDiv");t&&(t&&t.innerText?t.innerText="":t.classList.add("PasteContent"))}pasteImage(t){console.log(t),this.fileToUpload=t.clipboardData.files[0];const r=new FormData;var o=this.fileToUpload?.name;o=o.substring(0,o.lastIndexOf(".")),r.append("File",this.fileToUpload,this.fileToUpload?.name),r.append("FileName","".concat(this.fileToUpload.name)),this.purchaseOrderService.Uploadfiles(r).subscribe(a=>{this.fileUrl=a?.result;const s=document.getElementById("editableDiv");s&&(s.innerText="file Uploaded",s.classList.remove("PasteContent"),s.style.color="#1bbd09",s.setAttribute("contenteditable","false")),this.PaymentDetailForm.patchValue({imageUrl:a?.result?.toString()})},a=>{})}ngOnInit(){this.UserGuid=localStorage.getItem("UserGuid");let t=localStorage.getItem("Type");if(console.log(t,"type"),"Purchase Orders"==t){let a=localStorage.getItem("pageNumber");this.pageNumber=a?parseInt(a):1,console.log(a,"pageNum",this.pageNumber);let s=localStorage.getItem("PerPage");this.itemsPerPage=s?parseInt(s):40,this.rowCount=s?parseInt(s):40,localStorage.removeItem("Type"),localStorage.removeItem("pageNumber"),localStorage.removeItem("PerPage")}const n=new Date;Q(n,"DD-MM-yyyy"),this.TodayDate={year:+Q(n).format("YYYY"),month:+Q(n).format("MM"),day:+Q(n).format("DD")},this.formattedDate=this.datepipe.transform(n,"dd-MMM-yyyy hh:mm a"),window.outerWidth<480&&(this.maxSize=2,this.boundaryLinks=!1,this.size="sm"),this.roles=this.authservice.LoggedInUser.POROLES,this.paymentRole=this.authservice.LoggedInUser.paymentRoles,this.role=this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase());let o=this.authservice.LoggedInUser.POROLES.split(",");this.Approvalroles=o.filter(a=>"Approval"==a),this.GetAllPurchaseOrderDetails(),this.GetLocationsAndSuppliersByDefault(),this.initForms()}initForms(){this.PaymentDetailForm=this.fb.group({purchaseOrderGuid:null,BankName:["",[u.kI.required]],TransectionID:[null,[u.kI.required]],InvoiceNumber:[null,[u.kI.required]],TransectionDate:[null,[u.kI.required]],Modeofpayment:["",[u.kI.required]],Remarks:["",[u.kI.required]],PoNumber:[],TotalAmount:[],Dueamount:[],PaidAmount:["",[u.kI.required]],DueAmount:[],status:[""],imageUrl:["",[u.kI.required]]})}markAsTouched(t){this.PaymentDetailForm.get(t)?.markAsTouched()}UplodeInvoice(t){this.fileToUpload=t.srcElement.files[0];const n=new FormData;var r=this.fileToUpload.name;r=r.substring(0,r.lastIndexOf(".")),n.append("File",this.fileToUpload,this.fileToUpload.name),n.append("FileName","".concat(this.fileToUpload.name)),this.purchaseOrderService.Uploadfiles(n).subscribe(o=>{this.fileUrl=o.result;const a=document.getElementById("editableDiv");a&&(a.classList.remove("PasteContent"),a.innerText="file Uploaded",a.style.color="#1bbd09",a.setAttribute("contenteditable","false")),this.PaymentDetailForm.patchValue({imageUrl:this.fileUrl})},o=>{})}get f(){return this.PaymentDetailForm.controls}fetch(t){const n=new XMLHttpRequest;n.open("GET","assets/data/all-purchase-orders.json"),n.onload=()=>{t(JSON.parse(n.response))},n.send()}openXlModal(t){this.modalService.open(t,{size:"xl"}).result.then(n=>{console.log("Modal closed"+n)}).catch(n=>{})}openBasicModal(t){this.modalService.open(t,{backdrop:"static",keyboard:!1,size:"md"}).result.then(n=>{}).catch(n=>{})}updateFilter(t){this.modelChanged.next(t.target.value)}getPurchase(t){console.log("data",t),this.PurchaseOrderGuid=t.PurchaseOrderGuid,this.PurchaseOrderNumber=t.PurchaseOrderNo,this.PoNumber=t.PurchaseOrderNo,this.invoiceNumber=t.InvoiceNumber,this.SupplierName=t.SupplierName,this.VendorId=t.SupplierId,this.PoDate=this.datepipe.transform(t.CreatedDate,"dd-MM-yyyy");const n=parseFloat(t.Price).toFixed(2),r=parseInt(n)-t.DueAmount;this.PaymentDetailForm.patchValue({TotalAmount:n,Dueamount:r}),this.previousPaidAmount=parseInt(n)-r}paidamount(t){const n=parseFloat(t.target.value),r=this.PaymentDetailForm.value.Dueamount;this.isvalid=!isNaN(n)&&n>r}SavePayment(){this.shimmerVisible=!0,new Date;let n={purchaseOrderGuid:this.PurchaseOrderGuid,PurchaseOrderNo:this.PurchaseOrderNumber,bankname:this.PaymentDetailForm.value.BankName,transectionid:this.PaymentDetailForm.value.TransectionID,InvoiceNumber:this.PaymentDetailForm.value.InvoiceNumber,transectiondate:Q(this.PaymentDetailForm.TransectionDate),modeofpayment:this.PaymentDetailForm?.value?.Modeofpayment,remarks:this.PaymentDetailForm?.value?.Remarks,totalAmount:parseInt(this.PaymentDetailForm?.value?.TotalAmount),paidAmount:parseInt(this.PaymentDetailForm.value.PaidAmount),status:"",imageUrl:this.PaymentDetailForm.value.imageUrl,poNumber:this.PurchaseOrderNumber,CreatedBy:this.UserGuid,UpdatedBy:this.UserGuid};this.purchaseOrderService.SavePaymentHistory(n).subscribe(r=>{this.shimmerVisible=!1,this.SendVerificationEmail(),this.resetfrom(),this.router.navigate(["/purchase-orders/po-payhistory"])},r=>{this.shimmerVisible=!1})}SendVerificationEmail(){const n=(new Date).getFullYear(),r=parseInt(this.PaymentDetailForm?.value?.Dueamount)-parseInt(this.PaymentDetailForm.value.PaidAmount),o=parseInt(this.PaymentDetailForm?.value?.TotalAmount);let s=(o-r)/o*100;s=parseInt(s.toString(),10),console.log("percentagePaid",s);let m="";100==s&&(m="FullyPaid"),s>=75&&s<=99&&(m="Mostly Paid"),s>=50&&s<75&&(m="Partially Paid"),s<50&&(m="Payment Due");const p=`${this.PaymentDetailForm.value.TransectionDate.day}/${this.PaymentDetailForm.value.TransectionDate.month}/${this.PaymentDetailForm.value.TransectionDate.year}`;let d={to:this.Suppliermail,Body:"",subject:"PaymentVerification",lstReplacebleVariables:[{user:this.SupplierName,year:n,PoDate:this.PoDate,VendorId:this.VendorId,totalAmount:this.PaymentDetailForm?.value?.TotalAmount,paidAmount:this.previousPaidAmount,dueAmount:parseInt(this.PaymentDetailForm?.value?.Dueamount)-parseInt(this.PaymentDetailForm.value.PaidAmount),transactionId:this.PaymentDetailForm.value.TransectionID,orderId:this.PurchaseOrderNumber,currentliPaidAmount:this.PaymentDetailForm.value.PaidAmount,PaymentDate:p,status:m,InvoiceNo:this.PaymentDetailForm.value.InvoiceNumber}]};this.authservice.sendEmail(d).subscribe(c=>{})}resetfrom(){this.PaymentDetailForm.reset(),this.fileUrl="",this.PaymentDetailForm.patchValue({imageUrl:this.fileUrl,BankName:"",PaidAmount:"",Remarks:"",Modeofpayment:"",TransectionDate:null,TransectionID:null,InvoiceNumber:null}),this.PaymentDetailForm.get("Modeofpayment").setValue("")}restrictCharectors(t){t.key.match(/[0-9]/g)||t.preventDefault()}GetAllPurchaseOrderDetails(){this.DepotmentGuid=this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())&&"00000000-0000-0000-0000-000000000000"==this.authservice.LoggedInUser.LOCATIONSGUID?"00000000-0000-0000-0000-000000000000":this.authservice.LoggedInUser.LOCATIONSGUID.split(","),this.shimmerVisible=!0,this.purchaseOrderService.GetAllPurchaseOrderDetails(this.Keyword,this.itemOrder,this.sort,this.pageNumber,this.rowCount,this.Isurgent,this.filter,this.IsChangeQuotation,this.DepotmentGuid).subscribe(t=>{this.AllPurchaseOrderDetails=t.Result.getAllPurchaseOrders,null==this.AllPurchaseOrderDetails&&(this.shimmerVisible=!1,this.TotalCount=0),this.filteredData=t.Result.getAllPurchaseOrders,this.totallength=this.filteredData?.length,this.TotalCount=t.Result.TotalCount,this.shimmerVisible=!1},t=>{this.shimmerVisible=!1})}Getevent(t){console.log(t.target.value),"All"==t.target.value?(this.filter="",this.GetAllPurchaseOrderDetails()):(this.filter=t.target.value,this.GetAllPurchaseOrderDetails())}GetLocationsAndSuppliersByDefault(){this.shimmerVisible=!0;let t=this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())&&"00000000-0000-0000-0000-000000000000"==this.authservice.LoggedInUser.LOCATIONSGUID?"00000000-0000-0000-0000-000000000000":this.authservice.LoggedInUser.LOCATIONSGUID.split(",");this.purchaseOrderService.GetPOAgainstPIPostDefaults(t).subscribe(n=>{this.CenterLocation=n.Result.LstCenterLocations,this.shimmerVisible=!1},n=>{this.shimmerVisible=!1})}onSelect(t){let n=JSON.stringify(t);localStorage.setItem("PurchaseOrderDetails",n)}PurchaseOrderDetailas(t){this.PurchaseOrderName=t.SupplierName,this.purchaseOrderGuid=t.PurchaseOrderGuid,this.purchaseorderNo=t.PurchaseOrderNo,this.ShippingLocation=t.ShippingLocation,this.location=t.StoreName,this.locationGuid="00000000-0000-0000-0000-000000000000"==t.ShippinglocationGuid?t.LocationGuid:t.ShippinglocationGuid}DeletePurchaseOrder(){this.UserGuid=this.authservice.LoggedInUser.UserGuid,this.purchaseOrderService.DeletePurchaseOrderDetails(this.purchaseOrderGuid,this.UserGuid).subscribe(t=>{this.GetAllPurchaseOrderDetails()},t=>{})}UpdateShippingLocation(){this.purchaseOrderService.UpdateShipiingLocation(this.purchaseOrderGuid,this.locationGuid).subscribe(t=>{this.GetAllPurchaseOrderDetails()},t=>{})}OnSelectPO(t){const n=t.Status,r=t.IndentNo;if(localStorage.setItem("InvoiceNo",t.InvoiceNumber),"Approved"==n||"Checked"==n||"Maker"==n){let o=[t.PurchaseOrderGuid,n||(r?"":void 0)];this.router.navigate(r?["/purchase-orders/po-against-pi",...o]:["/purchase-orders/new-purchase-order",...o])}else{let o=[t.PurchaseOrderGuid,r?"":void 0];this.router.navigate(r?["/purchase-orders/po-against-pi",...o]:["/purchase-orders/new-purchase-order",...o])}}ChangeEvent(t){this.itemsPerPage=t.target.value,this.rowCount=t.target.value,localStorage.setItem("PerPage",t.target.value),this.pageNumber=1,this.GetAllPurchaseOrderDetails()}ChangePagenumber(t){this.pageNumber=t,localStorage.setItem("pageNumber",t),this.GetAllPurchaseOrderDetails()}UpdateStatus(){this.ChangePOStatus(this.purchaseOrderGuiddata,this.statusdata)}ChangePOStatus(t,n){var r=this;return(0,ee.Z)(function*(){r.body.PurchaseOrderGuid=t,r.body.ApprovalType=n,r.body.UserGuid=r.authservice.LoggedInUser.UserGuid,r.body.ApprovalPhoneNumber=r.authservice.LoggedInUser.PhoneNumber,r.body.ApprovalEmail=r.authservice.LoggedInUser.Email,r.body.ApprovalName=r.authservice.LoggedInUser.FirstName,r.body.CheckedReason="Checker"===n?r.reason:"",r.body.ApproveReason="Checker"!==n?r.reason:"",r.body.PoDate=r.PoDate||"",r.body.VendorId=r.VendorId||"","Approval"===n?(yield r.DownloadPdf(t,"","","Approval"),setTimeout((0,ee.Z)(function*(){r.body.POAttachmentURL=r.PoAttachmentURL||"",r.updateStatus(n)}),2e3)):r.updateStatus(n)})()}DownloadPdf(t,n,r,o){var a=this;const s=new Ze.default({orientation:"landscape"});this.purchaseOrderService.GetPurchaseOrderDetails(t).subscribe(function(){var m=(0,ee.Z)(function*(p){let d=p.purchaseOrderDetails||"",c=p.POItems.filter((Z,_,J)=>_===J.findIndex(L=>L.IndentNo===Z.IndentNo&&L.ItemGuid===Z.ItemGuid))||"";const P={fontSize:8,fillColor:"#f8fcf2",textColor:"#000000",lineColor:"#03c136",minCellWidth:10},g={...P,lineColor:"#03c136"},T={fontSize:8,fillColor:"#f8fcf2",lineColor:"#03c136",textColor:"#000000"};function A(){let Z=[];for(let _=0;_<c.length;_++)"0.00"!==c[_].OrderedQty&&Z.push([{content:String(_+1),styles:{minCellWidth:15,fontSize:8}},{content:c[_].ItemName||"",styles:{minCellWidth:30,fontSize:8}},{content:c[_].VendorItemName||"N/A",styles:{minCellWidth:40,fontSize:8}},{content:c[_].CatalogNo||"N/A",styles:{minCellWidth:20,fontSize:8}},{content:c[_].ManufactureName||"N/A",styles:{minCellWidth:30,fontSize:8}},{content:c[_].MinorUnitName||"N/A",styles:{minCellWidth:15,fontSize:8}},{content:c[_].PackSize||"",styles:{minCellWidth:20,fontSize:8}},{content:c[_].OrderedQty||"N/A",styles:{minCellWidth:15,fontSize:8}},{content:c[_].Rate||"",styles:{minCellWidth:20,fontSize:8}},{content:c[_].DiscountPer||"",styles:{minCellWidth:15,fontSize:8}},{content:c[_].CGST+c[_].SGST===0&&0===c[_].IGST||c[_].IGST?c[_].IGST:c[_].CGST+c[_].SGST,styles:{minCellWidth:15,fontSize:8}},{content:c[_].UnitPrice||"",styles:{minCellWidth:20,fontSize:8}},{content:c[_].TaxAmount||"",styles:{minCellWidth:15,fontSize:8}},{content:c[_].NetAmount||"N/A",styles:{minCellWidth:20,fontSize:8}}]);return Z}const C="https://yoda-inventory-management.s3.ap-south-1.amazonaws.com/yodalims/invoices/yoda diagnostics logo copy_page-0001.jpg";function q(){s.addImage(C,"PNG",220,8,70,10)}function S(Z){return s.text("Purchase Order",3,10-Z).setFontSize(10)}function k(Z){return s.text(`PO No: ${d.PurchaseOrderNo}\nPO Date: ${d.POCreatedDate}`,3,25-Z).setFontSize(10)}function V(){return[[{content:`Total  amount in INR :  ${d.POTotalAmount.toString().match(/^\d+(?:\.\d{0,2})?/)||"0"}`,colSpan:15,styles:{...T,lineColor:"#03c136",lineWidth:.1}}],[{content:`Created by :${d.CreatedBy||""}`,colSpan:3,styles:{...T,lineColor:"#03c136",lineWidth:.1}},{content:`Checked by : ${"Maker"==n?"":d.CheckedByName}`,colSpan:3,styles:{...T,lineColor:"#03c136",lineWidth:.1}},{content:`Approved by :${d.AppprovedByName||"N/A"}`,colSpan:3,styles:{...T,lineColor:"#03c136",lineWidth:.1}},{content:`Recall by : ${null==d.RecallByName?"":d.RecallByName||""}`,colSpan:2,styles:{...T,lineColor:"#03c136",lineWidth:.1}},{content:`Cancel by : ${null==d.CancelledBy?"":d.CancelledBy||""}`,colSpan:3,styles:{...T,lineColor:"#03c136",lineWidth:.1}}],[{content:`Payment Term : ${d.PaymentTermCondition||""}\nDelivery Term : ${d.PaymentDeliveryTerm}`,colSpan:15,styles:{...T}}]]}s.addImage(C,"PNG",100,5,110,15);let B=0,R=0;(function M(){ge()(s,{head:[[{content:"Purchase Order",colSpan:2,styles:{...P,fontSize:14,fontStyle:"bold",halign:"center",lineWidth:.1,lineColor:"#03c136"}}]],body:[[{content:`PO No : ${d.PurchaseOrderNo}`,styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#03c136"}},{content:`PO Date : ${d.POCreatedDate}`,styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#03c136"}}],[{content:"Ordered By",styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#03c136"}},{content:"Vendor details",rowSpan:2,styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#03c136"}}],[{content:"Yoda Lifeline Diagnostics Pvt Ltd",styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#03c136"}}],[{content:`Address: ${d.StoreLocationAddress}\nContact: ${d.OrderedContactPersonNo}\nGSTIN: ${d.GSTNNO}`,styles:{fillColor:"#fff",lineWidth:.1,lineColor:"#03c136"}},{content:`Vendor name: ${d.SupplierName}\nVendor address: ${d.Address}\nContact person: ${d.PrimaryContactPerson}\nVendor mobile: ${d.PrimaryContactPersonMobileNo}\nVendor email: ${d.VendorEmailId}\nGST: ${d.GSTIN}`,styles:{fillColor:"#fff",lineWidth:.1,lineColor:"#03c136"}}],[{content:"Bill to address",styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#03c136"}},{content:"Ship to address",styles:{fillColor:"#fff",textColor:"#000000",lineWidth:.1,lineColor:"#03c136"}}],[{content:`Name: ${d.CenterLocation}\nAddress: ${d.StoreLocationAddress}\nContact person: ${d.OrderedContactPerson}\nMobile: ${d.OrderedContactPersonNo}\nEmail: ${d.OrderedContactPersonEmail}\nGST: ${d.GSTNNO}`,styles:{fillColor:"#fff",lineWidth:.1,lineColor:"#03c136"}},{content:`Name: ${d.ShipLocation?d.ShipLocation:d.CenterLocation}\nAddress: ${d.ShipStoreLocationAddress?d.ShipStoreLocationAddress:d.StoreLocationAddress}\nContact person: ${d.ShipContactPerson?d.ShipContactPerson:d.OrderedContactPerson}\nMobile: ${d.ShipContactPersonNo?d.ShipContactPersonNo:d.OrderedContactPersonNo}\nEmail: ${d.ShipContactPersonEmail?d.ShipContactPersonEmail:d.OrderedContactPersonEmail}\nGST: ${d.ShipGSTNNO?d.ShipGSTNNO:d.GSTNNO}`,styles:{fillColor:"#fff",lineWidth:.1,lineColor:"#03c136"}}]],startY:25,theme:"grid",tableWidth:290,margin:{left:3},didDrawPage:Z=>{Z.pageNumber>1&&(S(0),k(8),q())}})})(),function re(){ge()(s,{head:[[{content:"S.NO",styles:{...g,cellWidth:15,lineColor:"#03c136",lineWidth:.1}},{content:"Item Name",styles:{...g,cellWidth:30,lineColor:"#03c136",lineWidth:.1}},{content:"Vendor Item Name",styles:{...g,cellWidth:40,lineColor:"#03c136",lineWidth:.1}},{content:"Catalog No",styles:{...g,cellWidth:20,lineColor:"#03c136",lineWidth:.1}},{content:"Manufacturer Name",styles:{...g,cellWidth:30,lineColor:"#03c136",lineWidth:.1}},{content:"Unit",styles:{...g,cellWidth:15,lineColor:"#03c136",lineWidth:.1}},{content:"Pack Size",styles:{...g,cellWidth:20,lineColor:"#03c136",lineWidth:.1}},{content:"Qty",styles:{...g,cellWidth:15,lineColor:"#03c136",lineWidth:.1}},{content:"Unit Price",styles:{...g,cellWidth:20,lineColor:"#03c136",lineWidth:.1}},{content:"Disc %",styles:{...g,cellWidth:15,lineColor:"#03c136",lineWidth:.1}},{content:"GST %",styles:{...g,cellWidth:15,lineColor:"#03c136",lineWidth:.1}},{content:"Buy Price",styles:{...g,cellWidth:20,lineColor:"#03c136",lineWidth:.1}},{content:"GST Amount",styles:{...g,fontSize:7,cellWidth:15,lineColor:"#03c136",lineWidth:.1}},{content:"Amount",styles:{...g,fontSize:7,cellWidth:20,lineColor:"#03c136",lineWidth:.1}}]],body:A(),foot:V(),theme:"grid",styles:{lineColor:"#03c136",lineWidth:.5},tableWidth:290,margin:{left:3,top:30},willDrawPage:Z=>{R++,B=R},didDrawPage:Z=>{Z.pageNumber>1&&(S(0),k(8),q())}})}(),function U(){const J=`Date: ${(new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}).replace(/ /g,"-")}\nThis is a computer generated document, hence signature is not required.`;s.setFontSize(12),s.text(J,292,200,{align:"right"})}(),V();let ie=d.POCreatedDate,[oe,ae,le]=ie.split("-"),z=new Date(`${le}-${ae}-${oe}`),he=String(z.getDate()).padStart(2,"0")+String(z.getMonth()+1).padStart(2,"0")+String(z.getFullYear());if(""!==r){const Z=s.output("bloburl"),_=window.open(Z);setTimeout(()=>{_.print()},250)}else if(o){const Z=yield s.output("blob"),_=new FormData;_.append("File",Z,`POReport_${d.PurchaseOrderNo}_${d.SupplierCode}_${he}.pdf`),_.append("FileName",`POReport_${d.PurchaseOrderNo}_${d.SupplierCode}_${he}.pdf`);const J=yield a.purchaseOrderService.Uploadfiles(_).toPromise();a.PoAttachmentURL=J.result}else s.save(`POReport_${d.PurchaseOrderNo+"_"+d.SupplierCode+"_"+he}.pdf`)});return function(p){return m.apply(this,arguments)}}()),this.invoiceGuid="",this.GetAllPurchaseOrderDetails()}setPdfUrl(t){var n=this;return(0,ee.Z)(function*(){const r=yield n.purchaseOrderService.Uploadfiles(t).toPromise();n.PoAttachmentURL=r.result})()}updateStatus(t){this.purchaseOrderService.UpdatePurchaseOrderStatus(this.body).subscribe(n=>{this.UserName=n?.UserName,"Recall"==t&&this.SendRecallVerificationEmail(this.UserName),this.GetAllPurchaseOrderDetails(),this.reason=""})}SendRecallVerificationEmail(t){const r=(new Date).getFullYear();let o={to:this.Suppliermail,Body:"",subject:"RecallVerification",lstReplacebleVariables:[{user:this.SupplierName,year:r,orderId:this.OderId,recallby:t,Recallreason:this.recallReason,PoDate:this.PoDate,VendorId:this.VendorId}]};this.recallReason="",this.authenticationService.sendEmail(o).subscribe(a=>{})}confirmRecall(){this.body.Reason=this.recallReason,this.ChangePOStatus(this.PurchaseOrderGuid1,"Recall")}getPurchaseOrder(t){this.PurchaseOrderGuid1=t.PurchaseOrderGuid,this.Suppliermail=t.SupplierMail,this.SupplierName=t.SupplierName,this.OderId=t.PurchaseOrderNo,this.PoDate=this.datepipe.transform(t.CreatedDate,"dd-MM-yyyy"),this.VendorId=t.SupplierId,this.PurchaseOrderGuid=t.PurchaseOrderGuid,this.PurchaseOrderNumber=t.PurchaseOrderNo,this.PoNumber=t.PurchaseOrderNo,this.invoiceNumber=t.InvoiceNumber,this.VendorId=t.SupplierId,this.Email=t.SupplierMail;const n=parseFloat(t.Price).toFixed(2),r=parseInt(n)-t.DueAmount;this.PaymentDetailForm.patchValue({TotalAmount:n,Dueamount:r}),this.previousPaidAmount=parseInt(n)-r}Changelocation(t){this.locationGuid=t?t.LocationGuid:""}getQuotationByGuid(t){this.quotationGuid=[],this.locationList="",this.deliveryState=t.DeliveryStateName,this.deliveryLocationName=t.DeliveryLocationName,this.SupplierStateName=t.SupplierSateName,t&&void 0!==t.QuotationGuid?this.quotationGuid=t.QuotationGuid:(this.supplierGuid.length>0||this.locationGuid.length>0||this.fromDate||this.toDate||this.itemGuid.length>0)&&this.quotationsList.forEach(n=>{n&&void 0!==n.QuotationGuid&&this.quotationGuid.push(n.QuotationGuid)}),this.quotationService.getQuotationsByGuid(t).subscribe(n=>{const r=[];if(this.quotationDetails=n.getQuotationsResponses,this.quotationDetails=this.quotationDetails.filter(o=>{const m=`${o.ItemName}-${o.ItemCategoryName}`;return!r.includes(m)&&(r.push(m),!0)}),this.quotationDetails.length>0){const a=n.getQuotationsResponses[0].LocationName.split(",").filter((s,m,p)=>p.indexOf(s)===m).join(", ");this.locationList=a}},n=>{this.globalService.stopSpinner(),this.noQuotationFound=!0})}getpurchaseorderPostDefaults(){let t=this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())&&"00000000-0000-0000-0000-000000000000"==this.authservice.LoggedInUser.LOCATIONSGUID?"00000000-0000-0000-0000-000000000000":this.authservice.LoggedInUser.LOCATIONSGUID.split(",");this.quotationService.getQuotationPostDefaults(t).subscribe(n=>{this.defaultData=n,this.locations=n.Result.LstQuotationCenterLocationType})}filterByUrgent(t){this.Isurgent=1==t.target.checked,this.GetAllPurchaseOrderDetails()}filterByQuotation(t){this.IsChangeQuotation=t.target.checked,this.GetAllPurchaseOrderDetails()}changestatus(t,n){this.purchaseOrderGuiddata=t.PurchaseOrderGuid,this.VendorId=t.SupplierId,this.PoDate=this.datepipe.transform(t.CreatedDate,"dd-MM-yyyy"),this.statusdata=n}clearReason(){this.recallReason=""}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(O.FF),e.Y36(W.x),e.Y36(u.qu),e.Y36(w.F0),e.Y36(fe.G),e.Y36(te.$),e.Y36(v.uU),e.Y36(te.$))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-all-purchase-orders"]],viewQuery:function(t,n){if(1&t&&e.Gf(Y.nE,5),2&t){let r;e.iGM(r=e.CRH())&&(n.table=r.first)}},features:[e._Bn([{provide:O.NG,useClass:be.k}])],decls:93,vars:10,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","Purchase orders",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title","d-flex","align-items-center","justify-content-between"],[1,"mb-2","mb-sm-0"],[1,"d-flex","align-items-center","justify-content-end"],["type","button",1,"ms-auto","navbar-toggler","filter-button",3,"click"],[1,"feather","icon-filter","size-18"],["ngbDropdown","",1,"d-inline-block","ms-2","w-100","ms-0","ms-sm-1"],["id","dropdownButtonPrimary","ngbDropdownToggle","",1,"btn","btn-primary"],["ngbDropdownMenu","","aria-labelledby","dropdownButtonPrimary"],["ngbDropdownItem","","routerLink","/purchase-orders/new-purchase-order","disabled",""],["ngbDropdownItem","","routerLink","/purchase-orders/po-against-pi",4,"ngIf"],[1,"collapse","navbar-collapse","mb-3",3,"ngbCollapse"],[1,"d-flex","flex-column","flex-sm-row","align-items-md-center","gap-3","mt-2","mt-md-0","justify-content-between"],[1,"form-check","form-switch"],["for","formSwitch1",1,"form-check-label"],["type","checkbox","id","checkbox",1,"form-check-input",3,"change"],[1,"align-items-center","d-flex","flex-column","flex-sm-row","text-end"],[4,"ngIf"],[1,"form-control","form-select","m-1","minw-200",3,"ngModel","change","ngModelChange"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Search",1,"form-control","mb-1","mb-sm-0","minw-200",3,"maxLength","keyup"],["type","checkbox","id","checkboxs",1,"form-check-input",3,"change"],[1,"table"],["table",""],[1,"ps-0"],[1,"cartd-footer"],["class","d-flex justify-content-center my-3 pe-3",4,"ngIf"],["deletePurchaseOrder",""],["centers",""],["xlModal",""],["xlModal1",""],["paymentModal",""],["PurchaseOrder",""],["ngbDropdownItem","","routerLink","/purchase-orders/po-against-pi"],[1,"text-muted","text-small","me-0","me-sm-2","mb-1","mb-sm-0","flex-shrink-0","flex-shrink-0"],["name","rowLimit","id","rowLimit",1,"form-control","form-select","me-0","me-sm-2","h-34","mb-1","mb-sm-0","minw-100",3,"change"],[3,"value"],[4,"ngFor","ngForOf"],[1,"pe-0","text-end"],["class","feather icon-alert-triangle size-18 me-2 text-danger",3,"title",4,"ngIf"],["class","feather icon-alert-circle size-18 me-2 text-danger",3,"title",4,"ngIf"],["ngbDropdown",""],["id","actionsDropdown","placement","bottom","container","body","popoverClass","dataTableActions",1,"btn","btn-secondary","btn-xs",3,"ngbPopover"],[1,"feather","icon-chevron-down"],["dataTableActions",""],[1,"feather","icon-alert-triangle","size-18","me-2","text-danger",3,"title"],[1,"feather","icon-alert-circle","size-18","me-2","text-danger",3,"title"],["aria-labelledby","actionsDropdown"],["ngbDropdownItem","",1,"border-bottom",3,"click"],[1,"feather","icon-eye"],["class","border-bottom","ngbDropdownItem","",3,"click",4,"ngIf"],[1,"feather","icon-printer"],[1,"feather","icon-download"],[1,"feather","icon-trash-2"],[1,"feather","icon-check-square"],[1,"feather","icon-thumbs-up"],[1,"feather","icon-refresh-cw"],[1,"feather","icon-rotate-ccw"],[1,"feather","icon-credit-card"],[1,"shimmerBG","line"],[1,"minH-500","d-flex","align-items-center","justify-content-center"],[1,"py-5","text-muted"],[1,"d-flex","flex-column","justify-content-center","gap-1","align-items-center","fs-4"],[1,"feather","icon-alert-circle","fs-2"],[1,"d-flex","justify-content-center","my-3","pe-3"],[1,"ms-auto","d-sm-table",3,"collectionSize","pageSize","page","maxSize","rotate","boundaryLinks","size","pageChange"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-sm-12"],[1,"mb-3"],["for","itemName",1,"form-label"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary","me-2",3,"click"],["type","button",1,"btn","btn-primary","submit",3,"click"],[1,"col-12"],["for","locations",1,"label"],["placeholder","search by store name","name","locations","bindValue","LocationGuid","bindLabel","LocationName",1,"ng-select-custom-250min",3,"ngModel","items","multiple","ngModelChange","change"],[1,"my-3"],["type","button",1,"btn","btn-primary","submit",3,"disabled","click"],["deletequotation",""],[1,"container-fluid","d-flex","justify-content-between","mt-4","flex-sm-row","flex-column"],[1,"col-lg-5","ps-0"],[1,"mt-1","mb-1"],[1,"fw-bold"],[1,"col-lg-4","pe-0","text-sm-end"],[1,"mb-1"],[1,"table","table-bordered","pt-3"],["type","button",1,"btn","btn-secondary",3,"click"],["id","recallPurchaseOrder",1,"modal-title"],[3,"ngSubmit"],["recallForm","ngForm"],[1,"form-group"],["for","recallReason"],["id","recallReason","name","recallReason","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","hidden","name","PurchaseOrderGuid",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["for","purchaseOrderNo",1,"form-label"],[1,"mt-3",3,"formGroup"],[1,"col-12","col-md-12","mb-3"],[1,"form-label"],[3,"ngClass"],[1,"form-control","d-flex","felx-row"],["id","editableDiv","contenteditable","true","type","file",1,"form-control","imgPasteElement","PasteContent",3,"click","input","paste"],["type","button",1,"bg-none","text-primary",3,"click"],[1,"feather","icon-upload","fs-2"],["type","file","id","fileInput",2,"display","none",3,"change"],["fileInput",""],["class","text-danger",4,"ngIf"],["formControlName","BankName","type","text","placeholder","Enter bank name",1,"form-control",3,"ngClass"],["formControlName","TransectionID","type","text","placeholder","Enter transaction ID",1,"form-control",3,"ngClass"],["formControlName","InvoiceNumber","type","text","placeholder","Enter Invoice number",1,"form-control",3,"ngClass"],[1,"input-group"],["placeholder","dd-mm-yyyy","name","dp","ngbDatepicker","","readonly","","formControlName","TransectionDate",1,"form-control",3,"maxDate","ngClass"],["d2","ngbDatepicker"],["type","button",1,"input-group-text",3,"click"],[1,"feather","icon-calendar","icon-md","text-muted"],["formControlName","Modeofpayment","placeholder","Select Payment",1,"form-select","form-select-sm",3,"ngClass"],["value","","disabled",""],["value","Online"],["value","Offline"],["value","Cash"],["value","Credit card"],["formControlName","TotalAmount","type","text","placeholder","Enter Amount","readonly","",1,"form-control"],["formControlName","Dueamount","type","text","placeholder","Enter Amount","readonly","",1,"form-control"],["formControlName","PaidAmount","type","text","placeholder","Enter Amount",1,"form-control",3,"ngClass","keypress","input"],["placeholder","Enter your remarks","formControlName","Remarks",1,"form-control",3,"ngClass"],[1,"pastedImageOutput"],["type","button",1,"feather","icon-x-circle",3,"click"],["alt","Uploaded Image",3,"src"],[1,"text-danger"],[1,"mb-22"],["for","reason",1,"form-label"],["type","text","id","reason","name","reason",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Store master"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Purchase orders"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9)(12,"div",10),e._uU(13,"ALL PURCHASE ORDERS"),e.qZA(),e.TgZ(14,"div",11)(15,"button",12),e.NdJ("click",function(){return n.isMenuCollapsed=!n.isMenuCollapsed}),e._UZ(16,"i",13),e.qZA(),e.TgZ(17,"div",14)(18,"button",15),e._uU(19,"New PO"),e.qZA(),e.TgZ(20,"div",16)(21,"button",17),e._uU(22,"Create New PO"),e.qZA(),e.YNc(23,ve,2,0,"button",18),e.qZA()()()(),e.TgZ(24,"div",19)(25,"div",20)(26,"div",21)(27,"label",22),e._uU(28,"Urgent PO"),e.qZA(),e.TgZ(29,"input",23),e.NdJ("change",function(o){return n.filterByUrgent(o)}),e.qZA()(),e.TgZ(30,"div",24),e.YNc(31,Ne,5,4,"ng-container",25),e.TgZ(32,"select",26),e.NdJ("change",function(o){return n.Getevent(o)})("ngModelChange",function(o){return n.selectedStatus=o}),e.TgZ(33,"option",27),e._uU(34,"Select status"),e.qZA(),e.YNc(35,Ie,2,2,"option",28),e.qZA(),e.TgZ(36,"input",29),e.NdJ("keyup",function(o){return n.updateFilter(o)}),e.qZA()()(),e.TgZ(37,"div",21)(38,"label",22),e._uU(39,"Alternate Quotations"),e.qZA(),e.TgZ(40,"input",30),e.NdJ("change",function(o){return n.filterByQuotation(o)}),e.qZA()()(),e.TgZ(41,"double-scroll")(42,"table",31,32)(44,"thead")(45,"tr"),e._UZ(46,"th"),e.TgZ(47,"th",33),e._uU(48,"Purchase Order No"),e.qZA(),e.TgZ(49,"th"),e._uU(50,"Store Name"),e.qZA(),e.TgZ(51,"th"),e._uU(52,"Suppplier name"),e.qZA(),e.TgZ(53,"th"),e._uU(54,"No.of Items"),e.qZA(),e.TgZ(55,"th"),e._uU(56,"Price \u20b9"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"Status"),e.qZA(),e.TgZ(59,"th"),e._uU(60,"Created Date"),e.qZA(),e.TgZ(61,"th"),e._uU(62,"Created by"),e.qZA(),e.TgZ(63,"th"),e._uU(64,"Checked Date"),e.qZA(),e.TgZ(65,"th"),e._uU(66,"Checked by"),e.qZA(),e.TgZ(67,"th"),e._uU(68,"Approved Date"),e.qZA(),e.TgZ(69,"th"),e._uU(70,"Approved by"),e.qZA(),e.TgZ(71,"th"),e._uU(72,"Recall Reason"),e.qZA(),e.TgZ(73,"th"),e._uU(74,"Action"),e.qZA()()(),e.TgZ(75,"tbody"),e.YNc(76,Re,2,1,"ng-container",25),e.YNc(77,Be,2,2,"ng-container",25),e.qZA()()()(),e.YNc(78,Ye,7,0,"ng-container",25),e.TgZ(79,"div",34),e.YNc(80,Ke,2,7,"div",35),e.qZA()()()(),e.YNc(81,je,23,2,"ng-template",null,36,e.W1O),e.YNc(83,We,24,5,"ng-template",null,37,e.W1O),e.YNc(85,rt,89,24,"ng-template",null,38,e.W1O),e.YNc(87,it,17,3,"ng-template",null,39,e.W1O),e.YNc(89,_t,106,65,"ng-template",null,40,e.W1O),e.YNc(91,gt,16,1,"ng-template",null,41,e.W1O)),2&t&&(e.xp6(23),e.Q6J("ngIf",n.roles.toLowerCase().includes("Maker".toLowerCase())),e.xp6(1),e.Q6J("ngbCollapse",n.isMenuCollapsed),e.xp6(7),e.Q6J("ngIf",0!=n.TotalCount),e.xp6(1),e.Q6J("ngModel",n.selectedStatus),e.xp6(3),e.Q6J("ngForOf",n.filterOptions),e.xp6(1),e.Q6J("maxLength",50),e.xp6(40),e.Q6J("ngIf",!n.shimmerVisible),e.xp6(1),e.Q6J("ngIf",n.shimmerVisible),e.xp6(1),e.Q6J("ngIf",0==n.TotalCount&&!n.shimmerVisible),e.xp6(2),e.Q6J("ngIf",0!=(null==n.AllPurchaseOrderDetails?null:n.AllPurchaseOrderDetails.length)))},dependencies:[v.mk,v.sg,v.O5,w.rH,w.yS,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,u.Q7,u.On,u.F,u.sg,u.u,O._D,O.J4,O.jt,O.iD,O.Vi,O.TH,O.N9,O.o8,$.w9,K.Z,v.JJ,v.uU],styles:['.size-18[_ngcontent-%COMP%]{font-size:18px;color:#6571ff}.minH-500[_ngcontent-%COMP%]{min-height:500px}.PasteContent[_ngcontent-%COMP%]:before{content:"Paste image";position:absolute;color:#bdb9b9;pointer-events:none}']}),i})();var Ae=f(1884),At=f(9468);function Pt(i,l){1&i&&(e.TgZ(0,"button",52),e._UZ(1,"span",53),e.TgZ(2,"span",54),e._uU(3,"Go to comparing quotations"),e.qZA()())}function Tt(i,l){if(1&i&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.Q6J("value",t.CategoryGuid),e.xp6(1),e.hij(" ",t.CategoryTypeName," ")}}function Ct(i,l){1&i&&(e.TgZ(0,"div")(1,"span",55),e._uU(2,"Supplier category is required!"),e.qZA()())}function yt(i,l){1&i&&(e.ynx(0),e.TgZ(1,"span",55),e._uU(2,"Supplier name is required!"),e.qZA(),e.BQk())}function bt(i,l){1&i&&(e.ynx(0),e.TgZ(1,"span",55),e._uU(2,"Delivery state is required!"),e.qZA(),e.BQk())}function xt(i,l){1&i&&(e.ynx(0),e.TgZ(1,"span",55),e._uU(2,"Delivery center is required!"),e.qZA(),e.BQk())}function Zt(i,l){1&i&&(e.ynx(0),e.TgZ(1,"span",55),e._uU(2,"Delivery location is required!"),e.qZA(),e.BQk())}function vt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",76),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw().index,s=e.oxw();return e.KtG(s.OnSelectItem(o,a))}),e._uU(1),e.qZA()}if(2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.ItemName," ")}}function Ot(i,l){1&i&&(e.TgZ(0,"div",77),e._uU(1,"Please select different item!"),e.qZA())}function Nt(i,l){if(1&i&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.Q6J("value",t.Guid),e.xp6(1),e.hij(" ",t.POName," ")}}function It(i,l){1&i&&(e.ynx(0),e.TgZ(1,"span",55),e._uU(2,"POType is required"),e.qZA(),e.BQk())}function qt(i,l){1&i&&(e.ynx(0),e.TgZ(1,"span",55),e._uU(2,"Quantity is required"),e.qZA(),e.BQk())}function Dt(i,l){1&i&&(e.TgZ(0,"option",38),e._uU(1," Select manufacturer "),e.qZA())}function St(i,l){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw();let r;e.xp6(1),e.hij(" ",null==(r=n.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:r.value[t].ManufactureName," ")}}function Ut(i,l){1&i&&(e.TgZ(0,"option",38),e._uU(1," Select category"),e.qZA())}function Gt(i,l){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw();let r;e.xp6(1),e.hij(" ",null==(r=n.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:r.value[t].CategoryTypeName," ")}}function wt(i,l){1&i&&(e.TgZ(0,"option",78),e._uU(1," Select machine"),e.qZA())}function kt(i,l){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw();let r;e.xp6(1),e.hij(" ",null==(r=n.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:r.value[t].MachineName," ")}}function Qt(i,l){1&i&&(e.TgZ(0,"option",78),e._uU(1," Select PO Size"),e.qZA())}function Mt(i,l){if(1&i&&(e.TgZ(0,"option",78),e._uU(1),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw();let r;e.xp6(1),e.hij(" ",null==(r=n.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:r.value[t].POSize," ")}}function Ft(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",79),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,o=e.oxw();return e.KtG(o.removeItems(r))}),e.TgZ(1,"button",80),e._UZ(2,"span",81),e._uU(3," Remove item "),e.qZA()()}}function Jt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",79),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.AddItems())}),e.TgZ(1,"button",82),e._UZ(2,"span",83),e._uU(3," Add item "),e.qZA()()}}const H=function(i){return{"text-danger":i}},pe=function(i){return{"is-invalid":i}};function Lt(i,l){if(1&i){const t=e.EpF();e.ynx(0)(1,56),e.TgZ(2,"div",57)(3,"div",58)(4,"div",7)(5,"div",13)(6,"div",59)(7,"label",42),e._uU(8,"Item "),e.TgZ(9,"span",20),e._uU(10,"*"),e.qZA()(),e.TgZ(11,"input",60),e.NdJ("keyup",function(r){const a=e.CHM(t).index,s=e.oxw();return e.KtG(s.search(r,a))}),e.qZA(),e.TgZ(12,"div",61),e.YNc(13,vt,2,1,"div",62),e.qZA()(),e.YNc(14,Ot,2,0,"div",63),e.qZA(),e.TgZ(15,"div",64)(16,"div",35)(17,"label",65),e._uU(18,"PO Type "),e.TgZ(19,"span",20),e._uU(20,"*"),e.qZA()(),e.TgZ(21,"select",66)(22,"option",38),e._uU(23," Select PO type "),e.qZA(),e.YNc(24,Nt,2,2,"option",17),e.qZA(),e.YNc(25,It,3,0,"ng-container",18),e.qZA()(),e.TgZ(26,"div",64)(27,"div",35)(28,"label",65),e._uU(29,"Quantity "),e.TgZ(30,"span",20),e._uU(31,"*"),e.qZA()(),e.TgZ(32,"input",67),e.NdJ("input",function(){const o=e.CHM(t).index,a=e.oxw();let s;return e.KtG(a.ItemPricecalculation(null==(s=a.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:s.value[o].ItemGuid,o))}),e.qZA(),e.YNc(33,qt,3,0,"ng-container",18),e.qZA()(),e._UZ(34,"div",68),e.TgZ(35,"div",64)(36,"div",35)(37,"label",14),e._uU(38,"Manufacturer"),e.qZA(),e.TgZ(39,"select",69),e.YNc(40,Dt,2,0,"option",70),e.YNc(41,St,2,1,"option",18),e.qZA()()(),e.TgZ(42,"div",64)(43,"div",35)(44,"label",14),e._uU(45,"Category"),e.qZA(),e.TgZ(46,"select",69),e.YNc(47,Ut,2,0,"option",70),e.YNc(48,Gt,2,1,"option",18),e.qZA()()(),e.TgZ(49,"div",64)(50,"div",35)(51,"label",14),e._uU(52,"Machine"),e.qZA(),e.TgZ(53,"select",69),e.YNc(54,wt,2,0,"option",71),e.YNc(55,kt,2,1,"option",18),e.qZA()()(),e.TgZ(56,"div",64)(57,"div",35)(58,"label",14),e._uU(59,"PO Size"),e.qZA(),e.TgZ(60,"select",69),e.YNc(61,Qt,2,0,"option",71),e.YNc(62,Mt,2,1,"option",71),e.qZA()()()(),e.TgZ(63,"div",7)(64,"double-scroll")(65,"table",72)(66,"thead")(67,"tr")(68,"th"),e._uU(69,"#"),e.qZA(),e.TgZ(70,"th"),e._uU(71,"HSN Code"),e.qZA(),e.TgZ(72,"th"),e._uU(73,"Purchased Unit"),e.qZA(),e.TgZ(74,"th"),e._uU(75,"Conv Ente"),e.qZA(),e.TgZ(76,"th"),e._uU(77,"Consume Unit"),e.qZA(),e.TgZ(78,"th"),e._uU(79,"Barcode"),e.qZA(),e.TgZ(80,"th"),e._uU(81,"Batch No."),e.qZA(),e.TgZ(82,"th"),e._uU(83,"Expiry on"),e.qZA(),e.TgZ(84,"th"),e._uU(85,"Rate"),e.qZA(),e.TgZ(86,"th"),e._uU(87,"Paid Qty"),e.qZA(),e.TgZ(88,"th"),e._uU(89,"Extra Free Qty"),e.qZA(),e.TgZ(90,"th"),e._uU(91,"Discount %"),e.qZA(),e.TgZ(92,"th"),e._uU(93,"IGST %"),e.qZA(),e.TgZ(94,"th"),e._uU(95,"CGST %"),e.qZA(),e.TgZ(96,"th"),e._uU(97,"SGST %"),e.qZA(),e.TgZ(98,"th"),e._uU(99,"Dis. Amt."),e.qZA(),e.TgZ(100,"th"),e._uU(101,"Total GST Amt."),e.qZA(),e.TgZ(102,"th"),e._uU(103,"Buy Price"),e.qZA(),e.TgZ(104,"th"),e._uU(105,"Net AMT."),e.qZA(),e.TgZ(106,"th"),e._uU(107,"Action"),e.qZA()()(),e.TgZ(108,"tbody")(109,"tr"),e._UZ(110,"td"),e.TgZ(111,"td"),e._uU(112),e.qZA(),e.TgZ(113,"td"),e._uU(114),e.qZA(),e.TgZ(115,"td"),e._uU(116),e.qZA(),e.TgZ(117,"td"),e._uU(118),e.qZA(),e.TgZ(119,"td"),e._uU(120),e.qZA(),e.TgZ(121,"td"),e._uU(122),e.qZA(),e.TgZ(123,"td"),e._uU(124),e.qZA(),e.TgZ(125,"td"),e._uU(126),e.qZA(),e.TgZ(127,"td"),e._uU(128),e.qZA(),e.TgZ(129,"td"),e._uU(130),e.qZA(),e.TgZ(131,"td"),e._uU(132),e.qZA(),e.TgZ(133,"td"),e._uU(134),e.qZA(),e.TgZ(135,"td"),e._uU(136),e.qZA(),e.TgZ(137,"td"),e._uU(138),e.qZA(),e.TgZ(139,"td"),e._uU(140),e.qZA(),e.TgZ(141,"td"),e._uU(142),e.qZA(),e.TgZ(143,"td"),e._uU(144),e.qZA(),e.TgZ(145,"td"),e._uU(146),e.qZA(),e.TgZ(147,"td"),e._uU(148),e.qZA()()()()(),e.TgZ(149,"div",73)(150,"div",74),e.YNc(151,Ft,4,0,"div",75),e.YNc(152,Jt,4,0,"div",75),e.qZA()()()()(),e.BQk()()}if(2&i){const t=l.$implicit,n=l.index,r=e.oxw();let o,a,s,m,p,d,c,P,g,T,x,A,C,N,D,h,y,I,b,q,U,S,k,M,V,B,R,re,ie,oe,ae,le,z,se,ue,ce;e.xp6(1),e.Q6J("formGroupName",n),e.xp6(8),e.Q6J("ngClass",e.VKq(43,H,""==(null==(o=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:o.value[n].ItemGuid))),e.xp6(2),e.Q6J("ngClass",e.VKq(45,pe,(null==(a=t.get("ItemName"))?null:a.touched)&&(null==(a=t.get("ItemName"))?null:a.invalid))),e.xp6(2),e.Q6J("ngForOf",r.SupplierItems),e.xp6(1),e.Q6J("ngIf",r.isdisable&&n),e.xp6(5),e.Q6J("ngClass",e.VKq(47,H,null==(null==(s=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:s.value[n].POTypeGuid))),e.xp6(2),e.Q6J("ngClass",e.VKq(49,pe,(null==(m=t.get("POTypeGuid"))?null:m.touched)&&(null==(m=t.get("POTypeGuid"))?null:m.invalid))),e.xp6(3),e.Q6J("ngForOf",r.PODefaultsList),e.xp6(1),e.Q6J("ngIf",(null==(p=t.get("POTypeGuid"))?null:p.touched)&&(null==(p=t.get("POTypeGuid"))?null:p.invalid)),e.xp6(5),e.Q6J("ngClass",e.VKq(51,H,""==(null==(d=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:d.value[n].OrderQuantity))),e.xp6(2),e.Q6J("readonly",""==(null==(c=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:c.value[n].ItemGuid))("min",0)("ngClass",e.VKq(53,pe,(null==(P=t.get("OrderQuantity"))?null:P.touched)&&(null==(P=t.get("OrderQuantity"))?null:P.invalid))),e.xp6(1),e.Q6J("ngIf",(null==(g=t.get("OrderQuantity"))?null:g.touched)&&(null==(g=t.get("OrderQuantity"))?null:g.invalid)),e.xp6(7),e.Q6J("ngIf",""==(null==(T=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:T.value[n].ManufactureName)),e.xp6(1),e.Q6J("ngIf",null==(x=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:x.value[n].ManufactureName),e.xp6(6),e.Q6J("ngIf",""==(null==(A=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:A.value[n].CategoryTypeName)),e.xp6(1),e.Q6J("ngIf",null==(C=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:C.value[n].CategoryTypeName),e.xp6(6),e.Q6J("ngIf",""==(null==(N=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:N.value[n].MachineName)),e.xp6(1),e.Q6J("ngIf",null==(D=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:D.value[n].MachineName),e.xp6(6),e.Q6J("ngIf",""==(null==(h=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:h.value[n].POSize)),e.xp6(1),e.Q6J("ngIf",null==(y=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:y.value[n].POSize),e.xp6(50),e.hij("",null==(I=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:I.value[n].HSNCode," "),e.xp6(2),e.hij("",null==(b=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:b.value[n].PurchasedUnit," "),e.xp6(2),e.hij("",null==(q=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:q.value[n].PurchasedUnits," "),e.xp6(2),e.hij("",null==(U=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:U.value[n].ConsumptionUnit," "),e.xp6(2),e.hij("",null==(S=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:S.value[n].MachineName," "),e.xp6(2),e.hij("",null==(k=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:k.value[n].MachineName," "),e.xp6(2),e.hij("",null==(M=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:M.value[n].MachineName," "),e.xp6(2),e.hij("",null==(V=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:V.value[n].ItemRate," "),e.xp6(2),e.hij("",null==(B=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:B.value[n].MachineName," "),e.xp6(2),e.hij("",null==(R=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:R.value[n].FreeQty," "),e.xp6(2),e.hij("",null==(re=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:re.value[n].DiscountPercentage," "),e.xp6(2),e.hij("",null==(ie=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:ie.value[n].IGSTPer," "),e.xp6(2),e.hij("",null==(oe=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:oe.value[n].CGSTPer," "),e.xp6(2),e.hij("",null==(ae=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:ae.value[n].SGSTPer," "),e.xp6(2),e.hij("",null==(le=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:le.value[n].DiscountAmount," "),e.xp6(2),e.hij("",null==(z=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:z.value[n].TotalGSTAmount," "),e.xp6(2),e.hij("",null==(se=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:se.value[n].NetAmount," "),e.xp6(2),e.hij("",null==(ue=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:ue.value[n].TotalAmount," "),e.xp6(2),e.hij("",null==(ce=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:ce.value[n].MachineName," "),e.xp6(3),e.Q6J("ngIf",n>0),e.xp6(1),e.Q6J("ngIf",n==r.addItemslist.controls.length-1&&(null==r.SupplierItems?null:r.SupplierItems.length)>0)}}function Vt(i,l){1&i&&(e.TgZ(0,"option",84),e._uU(1," 100% Payment within 30 days of delivery and submission of invoice with delivery acknowledgement"),e.qZA())}function Rt(i,l){if(1&i&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.s9C("value",t.purchaseOrderForm.value.PaymentTerm),e.xp6(1),e.Oqu("StaticTerm"==t.purchaseOrderForm.value.PaymentTerm?"100% Payment within 30 days of delivery and submission of invoice with delivery acknowledgement":t.purchaseOrderForm.value.PaymentTerm)}}function Et(i,l){if(1&i&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.s9C("value",t.purchaseOrderForm.value.DeliveryTerm),e.xp6(1),e.Oqu(t.purchaseOrderForm.value.DeliveryTerm)}}function Ht(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",85)(1,"h5",86),e._uU(2,"Add delivery term"),e.qZA(),e.TgZ(3,"button",87),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e.qZA()(),e.TgZ(4,"div",88)(5,"div",7)(6,"div",31)(7,"div",35)(8,"label",42),e._uU(9,"Delivery Term"),e.qZA(),e.TgZ(10,"input",89),e.NdJ("input",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.addOtherDeliveryTerm(r))}),e.qZA()()()()(),e.TgZ(11,"div",90)(12,"button",91),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e._uU(13," Cancel "),e.qZA(),e.TgZ(14,"button",92),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e._uU(15,"Save"),e.qZA()()}}function Bt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",85)(1,"h5",86),e._uU(2,"Add payment term"),e.qZA(),e.TgZ(3,"button",87),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e.qZA()(),e.TgZ(4,"div",88)(5,"div",7)(6,"div",31)(7,"div",35)(8,"label",42),e._uU(9,"Payment Term"),e.qZA(),e.TgZ(10,"input",93),e.NdJ("input",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.addOtherPaymentTerm(r))}),e.qZA()()()()(),e.TgZ(11,"div",90)(12,"button",91),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e._uU(13," Cancel "),e.qZA(),e.TgZ(14,"button",92),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e._uU(15,"Save"),e.qZA()()}}let Pe=(()=>{class i{constructor(t,n,r,o,a,s){this.modalService=t,this.fb=n,this.purchaseOrderService=r,this.route=o,this.authservice=a,this.router=s,this.rows=[],this.temp=[],this.loadingIndicator=!0,this.reorderable=!0,this.ColumnMode=Y.hq,this.comparingQuotes=!1,this.CategoryDefaultsList=[],this.CentreDefaultsList=[],this.MachineDefaultsList=[],this.ManufactureDefaultsList=[],this.PODefaultsList=[],this.PurchaseSupplierNameList=[],this.StateList=[],this.CenterLocacityList=[],this.State=[],this.StateDetailsList=[],this.purchaseOrderForm={},this.lstpurchaseOrderItems={},this.DeliveryLocation=[],this.SelectedSupplierItemList=[],this.PurchaseOrderItemDetails=[],this.FormChanged=!1,this.fetch(m=>{this.temp=m,this.rows=m})}ngOnInit(){this.PurchaseOrderGuid=this.route.snapshot.paramMap.get("PurchaseOrderGuid")||"",this.initForms(),this.GetPurchaseOrderPostDefaults(),this.purchaseOrderForm.valueChanges.pipe((0,Ae.x)(),(0,At.p)(500)).subscribe(t=>{this.FormChanged=!0})}initForms(){this.purchaseOrderForm=this.fb.group({PurchaseOrderGuid:[""],CategoryGuid:[null],VenderGuid:[null,[u.kI.required]],VendorStateGuid:[null,[u.kI.required]],VendorAddress:["",[u.kI.required]],VendorGSTIN:["",[u.kI.required]],DeliveryStateGuid:[null,[u.kI.required]],DeliveryCenterGuid:[null,[u.kI.required]],DeliveryLocationGuid:[null,[u.kI.required]],PaymentTerm:[null],DeliveryTerm:[null],NFANo:[""],TermsandConditions:[""],lstpurchaseOrderItems:this.fb.array([this.fb.group({ItemName:[null,[u.kI.required]],ItemGuid:["",[u.kI.required]],ManufactureName:[""],MachineName:[""],POTypeGuid:[null,[u.kI.required]],POSize:["",[u.kI.required]],CategoryTypeName:["",[u.kI.required]],HSNCode:["",[u.kI.required]],PurchasedUnit:["",u.kI.required],ItemRate:["",u.kI.required],DiscountPercentage:["",u.kI.required],IGSTPer:["",u.kI.required],GSTPer:[""],SGSTPer:["",u.kI.required],DiscountAmount:["",u.kI.required],FinalPrice:[""],FreeQty:[""],CGSTPer:["",u.kI.required],ConsumptionUnit:["",u.kI.required],OrderQuantity:[null,[u.kI.required]],TotalItemPrice:[""],TotalGSTAmount:["",u.kI.required],NetAmount:["",u.kI.required],TotalAmount:["",u.kI.required]})])})}get addItemslist(){return this.purchaseOrderForm.get("lstpurchaseOrderItems")}AddItems(){this.addItemslist.push(this.fb.group({ItemName:["",[u.kI.required]],ItemGuid:["",[u.kI.required]],ManufactureName:["",[u.kI.required]],MachineName:[""],POTypeGuid:[null,[u.kI.required]],POSize:["",[u.kI.required]],CategoryTypeName:["",[u.kI.required]],HSNCode:["",[u.kI.required]],PurchasedUnit:["",u.kI.required],ItemRate:["",u.kI.required],IGSTPer:["",u.kI.required],CGSTPer:["",u.kI.required],SGSTPer:["",u.kI.required],DiscountAmount:["",u.kI.required],FinalPrice:[""],FreeQty:[""],DiscountPercentage:["",u.kI.required],ConsumptionUnit:["",u.kI.required],OrderQuantity:[null,[u.kI.required]],TotalItemPrice:[""],TotalGSTAmount:["",u.kI.required],NetAmount:["",u.kI.required],TotalAmount:["",u.kI.required]}),{emitEvent:!0}),this.FormChanged=!1,this.SupplierItems&&(this.SupplierItems=this.ItemsListTemp)}removeItems(t){this.addItemslist.removeAt(t)}fetch(t){const n=new XMLHttpRequest;n.open("GET","assets/data/all-items.json"),n.onload=()=>{t(JSON.parse(n.response))},n.send()}openBasicModal(t){this.modalService.open(t,{size:"md"}).result.then(n=>{console.log("Modal closed"+n)}).catch(n=>{})}GetPurchaseOrderPostDefaults(){let t=this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())&&"00000000-0000-0000-0000-000000000000"==this.authservice.LoggedInUser.LOCATIONSGUID?"00000000-0000-0000-0000-000000000000":this.authservice.LoggedInUser.LOCATIONSGUID.split(",");this.purchaseOrderService.GetPurchaseOrderPostDefaults(t).subscribe(n=>{this.CategoryDefaultsList=n.Result.LstCategoryType,this.CentreDefaultsList=n.Result.LstCentreType,this.MachineDefaultsList=n.Result.LstMachineType,this.ManufactureDefaultsList=n.Result.LstManufactureType,this.PODefaultsList=n.Result.LstPOType,this.PurchaseSupplierNameList=n.Result.LstPurchaseSupplierType,this.StateList=n.Result.LstStateType,this.CenterLocacityList=n.Result.LstCenterLocationType,this.StateDetailsList=n.Result.LstStateDetails,""!=this.PurchaseOrderGuid&&this.GetPurchaseOrderDetails()},n=>{})}SaveSupplierDetails(){this.purchaseOrderService.SavePurchaseOrderDetails(this.purchaseOrderForm.value).subscribe(t=>{this.router.navigateByUrl("/purchase-orders")},t=>{})}GetSupplierItems(t){this.purchaseOrderService.GetSupplierItemsByGuid(t).subscribe(n=>{this.SupplierItems=n.Result,this.ItemsListTemp=n.Result},n=>{})}GetSupplierDetails(t){this.SupplierDetails=this.PurchaseSupplierNameList.find(n=>n.SupplierGuid===t.SupplierGuid),this.addItemslist.clear(),this.AddItems(),this.purchaseOrderForm.patchValue({VendorStateGuid:this.SupplierDetails.StateGuid,VendorGSTIN:this.SupplierDetails.GSTNo,VendorAddress:this.SupplierDetails.HouseNo+=" , "+this.SupplierDetails.SupplierAddress},{emitEvent:!0}),this.FormChanged=!0,this.GetSupplierItems(this.SupplierDetails.SupplierGuid)}search(t,n){if(this.SearchItems=t.target.value,this.SearchItems=this.SearchItems?.toLowerCase(),""!==this.SearchItems){this.SupplierItemsList=this.SearchItems.toLowerCase();let r=this.SupplierItems.filter(o=>o.ItemName.toLowerCase().includes(this.SearchItems.toLowerCase()));this.SupplierItems=r}else this.SupplierItems=this.ItemsListTemp}GetStateDetails(t){this.StateDetails=this.StateDetailsList.filter(n=>n.StateGuid===t),""!=this.PurchaseOrderGuid&&(this.DeliveryLocation=this.CenterLocacityList.filter(n=>n.CenterGuid==this.purchaseOrderDetails.CenterGuid))}GetDeliveryCenter(){this.DeliveryLocation=this.CenterLocacityList.filter(t=>t.CenterGuid==this.purchaseOrderForm.value.DeliveryCenterGuid)}OnSelectItem(t,n){this.SelectedSupplierItemList=t;const r=this.addItemslist.value.findIndex(o=>o.ItemGuid===t.ItemGuid);if(r>=0&&r!=n)this.isdisable=!0,this.addItemslist.at(n).patchValue({ItemName:""});else{const o=this.addItemslist.at(n);o.patchValue({OrderQuantity:"",TotalItemPrice:"",TotalGSTAmount:"",NetAmount:"",TotalAmount:""}),o.patchValue({ItemName:t.ItemName,ItemGuid:t.ItemGuid,ManufactureName:t.ManufactureName,MachineName:t.MachineName,POSize:t.PackSize,CategoryTypeName:t.CategoryTypeName,HSNCode:t.HSNCode,PurchasedUnit:t.PurchasedUnit,ItemRate:t.Rate,IGSTPer:t.IGSTPer,CGSTPer:t.CGSTPer,DiscountAmount:t.DiscountAmt,FinalPrice:t.FinalPrice,FreeQty:t.FreeQty,SGSTPer:t.SGSTPer,DiscountPercentage:t.DiscountPer,ConsumptionUnit:t.ConsumptionUnit},{emitEvent:!0}),this.FormChanged=!0,this.isdisable=!1}}ItemPricecalculation(t,n){if(this.PurchaseOrderItemDetails[n]?.ItemGuid===t&&(this.SelectedSupplierItemList=this.PurchaseOrderItemDetails[n]),null!=this.addItemslist.value[n].OrderQuantity){let o=this.purchaseOrderForm.get("lstpurchaseOrderItems")?.value[n].OrderQuantity,a=Number(this.SelectedSupplierItemList.Rate),s=this.SelectedSupplierItemList.CGSTPer*a/100,m=this.SelectedSupplierItemList.IGSTPer*a/100,p=this.SelectedSupplierItemList.SGSTPer*a/100,d=s+m+p+a,c=s+m+p,P=a*(Number(this.SelectedSupplierItemList.DiscountPer)/100),g=d*o-P,T=d-P;this.addItemslist.at(n).patchValue({TotalItemPrice:d,TotalGSTAmount:c,NetAmount:T,TotalAmount:g},{emitEvent:!0})}else this.addItemslist.at(n).patchValue({TotalItemPrice:"",NetAmount:"",TotalAmount:""},{emitEvent:!0})}FormReset(){this.purchaseOrderForm.reset(),this.addItemslist.clear(),this.AddItems()}addOtherPaymentTerm(t){this.purchaseOrderForm.patchValue({PaymentTerm:t.target.value},{emitEvent:!0})}addOtherDeliveryTerm(t){this.purchaseOrderForm.patchValue({DeliveryTerm:t.target.value},{emitEvent:!0})}GetPurchaseOrderDetails(){this.purchaseOrderService.GetPurchaseOrderDetails(this.PurchaseOrderGuid).subscribe(t=>{this.purchaseOrderDetails=t.purchaseOrderDetails,this.PurchaseOrderItemDetails=t.POItems,this.GetSelectedPurchaseOrder()},t=>{})}GetSelectedPurchaseOrder(){this.addItemslist.clear(),this.GetStateDetails(this.purchaseOrderDetails.LocationStateGuid),this.GetSupplierItems(this.purchaseOrderDetails.SupplierGuid),this.purchaseOrderForm.patchValue({PurchaseOrderGuid:this.purchaseOrderDetails.PurchaseOrderGuid,CategoryGuid:this.purchaseOrderDetails.CategoryGuid,VenderGuid:this.purchaseOrderDetails.SupplierGuid,VendorStateGuid:this.purchaseOrderDetails.SupplierStateGuid,VendorAddress:this.purchaseOrderDetails.Address,VendorGSTIN:this.purchaseOrderDetails.GSTIN,DeliveryStateGuid:this.purchaseOrderDetails.LocationStateGuid,DeliveryCenterGuid:this.purchaseOrderDetails.CenterGuid,DeliveryLocationGuid:this.purchaseOrderDetails.LocationGuid,PaymentTerm:this.purchaseOrderDetails.PaymentTermCondition,NFANo:this.purchaseOrderDetails.NFANo,TermsandConditions:this.purchaseOrderDetails.TermandCondition,DeliveryTerm:this.purchaseOrderDetails.PaymentDeliveryTerm},{emitEvent:!0}),this.PurchaseOrderItemDetails.forEach(t=>{this.addItemslist.push(this.fb.group({ItemName:[t.ItemName?t.ItemName:"",u.kI.required],ItemGuid:t.ItemGuid,ManufactureName:t.ManufactureName,MachineName:t.MachineName,POTypeGuid:t.POTypeGuid,POSize:t.PackSize,CategoryTypeName:"",HSNCode:t.HSNCode,PurchasedUnit:t.PurchasedUnit,ItemRate:t.Rate,DiscountPercentage:t.DiscountPer,IGSTPer:t.IGSTPer,GSTPer:"",SGSTPer:t.SGSTPer,DiscountAmount:t.DiscountAmt,FinalPrice:"",FreeQty:t.FreeQty,CGSTPer:t.CGSTPer,ConsumptionUnit:t.ConsumptionUnit,OrderQuantity:[t.OrderedQty?t.OrderedQty:"",u.kI.required],TotalItemPrice:"",TotalGSTAmount:t.TaxAmount,NetAmount:t.NetAmount,TotalAmount:t.TotalAmount}))}),this.FormChanged=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(O.FF),e.Y36(u.qu),e.Y36(W.x),e.Y36(w.gz),e.Y36(te.$),e.Y36(w.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-new-purchase-order"]],viewQuery:function(t,n){if(1&t&&e.Gf(Y.nE,5),2&t){let r;e.iGM(r=e.CRH())&&(n.table=r.first)}},decls:120,vars:43,consts:[[1,"page-breadcrumb"],[1,"d-flex","justify-content-between"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/purchase-orders"],["aria-current","page",1,"breadcrumb-item","active"],["class","btn btn-primary btn-sm d-flex align-items-center","routerLink","/quotations/compare-quotations",4,"ngIf"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[3,"formGroup"],[1,"col-12","col-md-4","col-lg-3","mb-3"],["for","manufacturerName",1,"form-label","d-flex","justify-content-between"],["id","manufacturerName","formControlName","CategoryGuid",1,"form-select",3,"ngClass"],["value","null","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["for","machineName",1,"form-label"],[3,"ngClass"],["bindLabel","SupplierName","bindValue","SupplierGuid","placeholder"," Select supplier name","formControlName","VenderGuid",3,"items","closeOnSelect","searchable","readonly","change"],["id","machineName","formControlName","VendorStateGuid",1,"form-select"],[3,"value"],["for","manufacturerCatalogNo",1,"form-label"],["type","text","id","manufacturerCatalogNo","readonly","","formControlName","VendorAddress","placeholder","Enter address",1,"form-control"],["type","text","id","manufacturerCatalogNo","readonly","","formControlName","VendorGSTIN","placeholder"," Enter GSTN No.",1,"form-control"],["for","purchasedUnit",1,"form-label","d-flex"],["bindValue","StateGuid","bindLabel","State","placeholder","Select state","formControlName","DeliveryStateGuid",3,"items","closeOnSelect","searchable","change"],["bindValue","CenterGuid","bindLabel","CenterName","placeholder","Select Center","formControlName","DeliveryCenterGuid",3,"items","closeOnSelect","searchable","change"],["bindValue","CenterLocationGuid","bindLabel","CenterLocationName","placeholder","Select Location","formControlName","DeliveryLocationGuid",3,"items","closeOnSelect","searchable"],[1,"col-sm-12"],["formArrayName","lstpurchaseOrderItems"],[4,"ngFor","ngForOf"],[1,"col-sm-4"],[1,"mb-3"],["id","addNewManufacturer",1,"small","text-primary","cursor-pointer",3,"click"],["id","manufacturerName","formControlName","PaymentTerm",1,"form-select"],["selected","","disabled","","value","null"],["value","StaticTerm",4,"ngIf"],[3,"value",4,"ngIf"],["id","manufacturerName","formControlName","DeliveryTerm",1,"form-select"],["for","itemName",1,"form-label"],["type","text","id","itemName","placeholder","Enter NFA no.","formControlName","NFANo",1,"form-control"],["for","itemDescription",1,"form-label"],["id","itemDescription","rows","3","formControlName","TermsandConditions","placeholder","Enter terms and condtions",1,"form-control"],["deliveryItems",""],["paymentterm",""],[1,"card-footer"],[1,"col-sm-12","text-end"],["type","button",1,"btn","btn-secondary","me-2",3,"disabled","click"],["type","button",1,"btn","btn-primary","submit",3,"disabled","click"],["routerLink","/quotations/compare-quotations",1,"btn","btn-primary","btn-sm","d-flex","align-items-center"],[1,"feather","icon-arrow-left","icon-md","me-2"],[1,""],[1,"text-danger","mt-4px","d-block"],[3,"formGroupName"],[1,"card","mb-3","border","bg-light"],[1,"card-body","p-3"],[1,"position-relative"],["type","text","id","itemName","placeholder","Enter item name","formControlName","ItemName","autocomplete","on",1,"form-control","autocompleteInput",3,"ngClass","keyup"],[1,"card","card-body","card-block","autocompleteBox","p-0"],["class","border-bottom p-2",3,"click",4,"ngFor","ngForOf"],["class","text-danger position-absolute",4,"ngIf"],[1,"col-12","col-md-4","col-lg-3"],["for","manufacturerName",1,"form-label"],["id","manufacturerName","formControlName","POTypeGuid",1,"form-select",3,"ngClass"],["type","number","formControlName","OrderQuantity",1,"form-control",3,"readonly","min","ngClass","input"],[1,"col-12","col-md-4","col-lg-3","emptyDiv"],["id","manufacturerName","disabled","",1,"form-select","disabled"],["selected","","disabled","","value","null",4,"ngIf"],["selected","","disabled","",4,"ngIf"],[1,"table","bg-white"],[1,"col-12","mt-3"],[1,"d-flex","align-items-center","gap-3"],["class","mb-3",3,"click",4,"ngIf"],[1,"border-bottom","p-2",3,"click"],[1,"text-danger","position-absolute"],["selected","","disabled",""],[1,"mb-3",3,"click"],[1,"btn-danger","btn"],[1,"feather","icon-close"],[1,"btn-primary","btn"],[1,"feather","icon-plus"],["value","StaticTerm"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["type","text","id","itemName","placeholder","Enter delivery term",1,"form-control",3,"input"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary","me-2",3,"click"],["type","button",1,"btn","btn-primary","submit",3,"click"],["type","text","id","itemName","placeholder","Enter payment term",1,"form-control",3,"input"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"nav",0)(1,"div",1)(2,"ol",2)(3,"li",3)(4,"a",4),e._uU(5,"Purchase Orders"),e.qZA()(),e.TgZ(6,"li",5),e._uU(7," New Purchase Order "),e.qZA()(),e.YNc(8,Pt,4,0,"button",6),e.qZA()(),e.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"h6",11),e._uU(14,"Purchase Order"),e.qZA(),e.TgZ(15,"form",12)(16,"div",7)(17,"div",13)(18,"label",14),e._uU(19,"Category"),e.qZA(),e.TgZ(20,"select",15)(21,"option",16),e._uU(22,"Select category"),e.qZA(),e.YNc(23,Tt,2,2,"option",17),e.qZA(),e.YNc(24,Ct,3,0,"div",18),e.qZA(),e.TgZ(25,"div",13)(26,"label",19),e._uU(27,"Supplier Name "),e.TgZ(28,"span",20),e._uU(29,"*"),e.qZA()(),e.TgZ(30,"ng-select",21),e.NdJ("change",function(a){return n.GetSupplierDetails(a)}),e.qZA(),e.YNc(31,yt,3,0,"ng-container",18),e.qZA(),e.TgZ(32,"div",13)(33,"label",19),e._uU(34,"Supplier State "),e.qZA(),e.TgZ(35,"select",22)(36,"option",16),e._uU(37,"Select state "),e.qZA(),e.TgZ(38,"option",23),e._uU(39),e.qZA()()(),e.TgZ(40,"div",13)(41,"label",24),e._uU(42,"Address "),e.qZA(),e._UZ(43,"input",25),e.qZA(),e.TgZ(44,"div",13)(45,"label",24),e._uU(46,"GSTN No "),e.qZA(),e._UZ(47,"input",26),e.qZA(),e.TgZ(48,"div",13)(49,"label",27),e._uU(50,"Delivery State "),e.TgZ(51,"span",20),e._uU(52,"\xa0*"),e.qZA()(),e.TgZ(53,"ng-select",28),e.NdJ("change",function(){return n.GetStateDetails(n.purchaseOrderForm.value.DeliveryStateGuid)}),e.qZA(),e.YNc(54,bt,3,0,"ng-container",18),e.qZA(),e.TgZ(55,"div",13)(56,"label",27),e._uU(57,"Delivery Center "),e.TgZ(58,"span",20),e._uU(59,"\xa0*"),e.qZA()(),e.TgZ(60,"ng-select",29),e.NdJ("change",function(){return n.GetDeliveryCenter()}),e.qZA(),e.YNc(61,xt,3,0,"ng-container",18),e.qZA(),e.TgZ(62,"div",13)(63,"label",27),e._uU(64,"Delivery Location "),e.TgZ(65,"span",20),e._uU(66,"\xa0*"),e.qZA()(),e._UZ(67,"ng-select",30),e.YNc(68,Zt,3,0,"ng-container",18),e.qZA(),e.TgZ(69,"div",31),e._UZ(70,"hr"),e.qZA()(),e.TgZ(71,"h6",11),e._uU(72,"Item Details"),e.qZA(),e.TgZ(73,"div",32),e.YNc(74,Lt,153,55,"ng-container",33),e.qZA(),e.TgZ(75,"h6",11),e._uU(76,"Terms & Conditions"),e.qZA(),e.TgZ(77,"div",7)(78,"div",34)(79,"div",35)(80,"label",14),e._uU(81," Payment Term "),e.TgZ(82,"span",36),e.NdJ("click",function(){e.CHM(r);const a=e.MAs(112);return e.KtG(n.openBasicModal(a))}),e._uU(83,"Add other"),e.qZA()(),e.TgZ(84,"select",37)(85,"option",38),e._uU(86,"Select payment term "),e.qZA(),e.YNc(87,Vt,2,0,"option",39),e.YNc(88,Rt,2,2,"option",40),e.qZA()()(),e.TgZ(89,"div",34)(90,"div",35)(91,"label",14),e._uU(92,"Delivery Term "),e.TgZ(93,"span",36),e.NdJ("click",function(){e.CHM(r);const a=e.MAs(110);return e.KtG(n.openBasicModal(a))}),e._uU(94,"Add other"),e.qZA()(),e.TgZ(95,"select",41)(96,"option",38),e._uU(97,"Select delivery term "),e.qZA(),e.YNc(98,Et,2,2,"option",40),e.qZA()()(),e.TgZ(99,"div",34)(100,"div",35)(101,"label",42),e._uU(102,"NFA No."),e.qZA(),e._UZ(103,"input",43),e.qZA()(),e.TgZ(104,"div",31)(105,"div",35)(106,"label",44),e._uU(107,"Terms and Conditions "),e.qZA(),e._UZ(108,"textarea",45),e.qZA()()(),e.YNc(109,Ht,16,0,"ng-template",null,46,e.W1O),e.YNc(111,Bt,16,0,"ng-template",null,47,e.W1O),e.qZA()(),e.TgZ(113,"div",48)(114,"div",7)(115,"div",49)(116,"button",50),e.NdJ("click",function(){return n.FormReset()}),e._uU(117,"Reset "),e.qZA(),e.TgZ(118,"button",51),e.NdJ("click",function(){return n.SaveSupplierDetails()}),e._uU(119),e.qZA()()()()()()()}if(2&t){let r,o,a,s,m,p;e.xp6(8),e.Q6J("ngIf",n.comparingQuotes),e.xp6(7),e.Q6J("formGroup",n.purchaseOrderForm),e.xp6(5),e.Q6J("ngClass",null!=(r=n.purchaseOrderForm.get("CategoryGuid"))&&r.hasError("required")&&null!=(r=n.purchaseOrderForm.get("CategoryGuid"))&&r.touched?"is-invalid":""),e.xp6(3),e.Q6J("ngForOf",n.CategoryDefaultsList),e.xp6(1),e.Q6J("ngIf",(null==(o=n.purchaseOrderForm.get("CategoryGuid"))?null:o.hasError("required"))&&(null==(o=n.purchaseOrderForm.get("CategoryGuid"))?null:o.touched)),e.xp6(4),e.Q6J("ngClass",e.VKq(35,H,!n.purchaseOrderForm.value.VenderGuid)),e.xp6(2),e.Q6J("items",n.PurchaseSupplierNameList)("closeOnSelect",!0)("searchable",!0)("readonly",n.PurchaseOrderGuid),e.xp6(1),e.Q6J("ngIf",(null==(a=n.purchaseOrderForm.get("VenderGuid"))?null:a.hasError("required"))&&(null==(a=n.purchaseOrderForm.get("VenderGuid"))?null:a.touched)),e.xp6(7),e.Q6J("value",n.SupplierDetails?null==n.SupplierDetails?null:n.SupplierDetails.StateGuid:n.purchaseOrderForm.value.VendorStateGuid),e.xp6(1),e.hij(" ",n.SupplierDetails?null==n.SupplierDetails?null:n.SupplierDetails.State:null==n.purchaseOrderDetails?null:n.purchaseOrderDetails.SupplierState," "),e.xp6(12),e.Q6J("ngClass",e.VKq(37,H,!n.purchaseOrderForm.value.DeliveryStateGuid)),e.xp6(2),e.Q6J("items",n.StateList)("closeOnSelect",!0)("searchable",!0),e.xp6(1),e.Q6J("ngIf",(null==(s=n.purchaseOrderForm.get("DeliveryStateGuid"))?null:s.hasError("required"))&&(null==(s=n.purchaseOrderForm.get("DeliveryStateGuid"))?null:s.touched)),e.xp6(4),e.Q6J("ngClass",e.VKq(39,H,!n.purchaseOrderForm.value.DeliveryCenterGuid)),e.xp6(2),e.Q6J("items",n.StateDetails)("closeOnSelect",!0)("searchable",!0),e.xp6(1),e.Q6J("ngIf",(null==(m=n.purchaseOrderForm.get("DeliveryCenterGuid"))?null:m.hasError("required"))&&(null==(m=n.purchaseOrderForm.get("DeliveryCenterGuid"))?null:m.touched)),e.xp6(4),e.Q6J("ngClass",e.VKq(41,H,!n.purchaseOrderForm.value.DeliveryLocationGuid)),e.xp6(2),e.Q6J("items",n.DeliveryLocation)("closeOnSelect",!0)("searchable",!0),e.xp6(1),e.Q6J("ngIf",(null==(p=n.purchaseOrderForm.get("DeliveryLocationGuid"))?null:p.hasError("required"))&&(null==(p=n.purchaseOrderForm.get("DeliveryLocationGuid"))?null:p.touched)),e.xp6(6),e.Q6J("ngForOf",n.addItemslist.controls),e.xp6(13),e.Q6J("ngIf",!n.purchaseOrderForm.value.PaymentTerm),e.xp6(1),e.Q6J("ngIf",n.purchaseOrderForm.value.PaymentTerm),e.xp6(10),e.Q6J("ngIf",n.purchaseOrderForm.value.DeliveryTerm),e.xp6(18),e.Q6J("disabled",!n.FormChanged),e.xp6(2),e.Q6J("disabled",n.purchaseOrderForm.invalid||!n.FormChanged||n.addItemslist.invalid),e.xp6(1),e.Oqu(n.PurchaseOrderGuid?"Update":"Save")}},dependencies:[v.mk,v.sg,v.O5,w.rH,w.yS,u._Y,u.YN,u.Kr,u.Fj,u.wV,u.EJ,u.JJ,u.JL,u.qQ,u.sg,u.u,u.x0,u.CE,$.w9,K.Z],styles:[".mr-2[_ngcontent-%COMP%]{margin-right:20px}.mb-5[_ngcontent-%COMP%]{margin-bottom:50px}.ml-auto[_ngcontent-%COMP%]{margin-left:auto}.flex-end[_ngcontent-%COMP%]{justify-content:flex-end}.visibility-hidden[_ngcontent-%COMP%]{visibility:hidden}.autocompleteBox[_ngcontent-%COMP%]{position:absolute;top:65px;z-index:1;width:100%;max-height:250px;overflow:auto;opacity:0;visibility:hidden;transition-delay:1.5s;transition-property:visibility;cursor:pointer}.autocompleteBox[_ngcontent-%COMP%]:empty{display:none}.autocompleteBox[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#d4d4d4}.autocompleteInput[_ngcontent-%COMP%]:focus + .autocompleteBox[_ngcontent-%COMP%]{opacity:1;visibility:visible}@media screen and (min-width: 255px) and (max-width: 991px){.emptyDiv[_ngcontent-%COMP%]{display:none}}"]}),i})();var Te=f(7153),Yt=f(5602);let Kt=(()=>{class i{transform(t,n){return t&&n?t.filter(o=>o.ItemGuid==n&&2==o.ApprovalStatus&&0==o.IsDeleted):t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"filterItems",type:i,pure:!0}),i})();const jt=["ngSelectComponent"],zt=["ExpiryQuotation"],Wt=["packSizeDiff"];function Xt(i,l){if(1&i&&(e.TgZ(0,"div",26)(1,"label",60),e._uU(2,"PurchaseOrderNo: "),e.TgZ(3,"strong"),e._uU(4),e.qZA()()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.purchaseOrderDetails.PurchaseOrderNo)}}function $t(i,l){1&i&&(e.TgZ(0,"span",82),e._uU(1," Supplier name is required!"),e.qZA())}function en(i,l){1&i&&(e.TgZ(0,"span",82),e._uU(1," Pending PI is required!"),e.qZA())}const ne=function(){return{maxlength:"48"}},G=function(i){return{"text-danger":i}};function tn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",61)(2,"label",62),e._uU(3,"Supplier Name "),e.qZA(),e.TgZ(4,"ng-select",63),e.NdJ("clear",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onSelectClose())})("add",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.OnSelectSupplier(r))})("remove",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.removeSupplier(r))}),e.qZA(),e.YNc(5,$t,2,0,"span",35),e.qZA(),e.TgZ(6,"div",61)(7,"label",64),e._uU(8,"From Date"),e.qZA(),e.TgZ(9,"div",65),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(11),o=e.oxw();return e.KtG(o.PurchaseOrderGuid?"":r.toggle())}),e.TgZ(10,"input",66,67),e.NdJ("dateSelect",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.selectFromDate(r))}),e.qZA(),e.TgZ(12,"button",68),e._UZ(13,"i",69),e.qZA()()(),e.TgZ(14,"div",61)(15,"label",70),e._uU(16,"To Date"),e.qZA(),e.TgZ(17,"div",65),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(19),o=e.oxw();return e.KtG(o.PurchaseOrderGuid?"":r.toggle())}),e.TgZ(18,"input",71,72),e.NdJ("dateSelect",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.selectToDate(r))}),e.qZA(),e.TgZ(20,"button",68),e._UZ(21,"i",69),e.qZA()()(),e.TgZ(22,"div",61)(23,"label",70),e._uU(24,"Indent Number"),e.qZA(),e.TgZ(25,"input",73),e.NdJ("keyup",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.changeSearch(r))}),e.qZA()(),e.TgZ(26,"div",61)(27,"label",74),e._uU(28,"Location "),e.qZA(),e.TgZ(29,"ng-select",75),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.SelectLocation(r))}),e.qZA()(),e.TgZ(30,"div",61)(31,"label",74),e._uU(32,"Pending PI "),e.TgZ(33,"span",23),e._uU(34,"\xa0*"),e.qZA()(),e.TgZ(35,"ng-select",76,77),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.SelectIndentsForItems(r))}),e.qZA(),e.YNc(37,en,2,0,"span",35),e.qZA(),e.TgZ(38,"div",78)(39,"div",26)(40,"div",79)(41,"input",80),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.ISUrgentPO)}),e.qZA(),e.TgZ(42,"label",81),e._uU(43,"To mark it has urgent?"),e.qZA()()()(),e.TgZ(44,"div",39),e._UZ(45,"hr"),e.qZA()()}if(2&i){const t=e.oxw();let n,r,o,a;e.xp6(4),e.Q6J("items",t.SupplierItems)("inputAttrs",e.DdM(32,ne))("closeOnSelect",!0)("searchable",!0)("multiple",!0)("readonly",t.PurchaseOrderGuid)("notFoundText","No supplier found")("ngClass",null!=(n=t.purchaseOrderForm.get("SuppliersName"))&&n.hasError("required")&&null!=(n=t.purchaseOrderForm.get("SuppliersName"))&&n.touched?"is-invalid":""),e.xp6(1),e.Q6J("ngIf",null!=(r=t.purchaseOrderForm.get("SuppliersName"))&&r.hasError("required")&&null!=(r=t.purchaseOrderForm.get("SuppliersName"))&&r.touched?"is-invalid":""),e.xp6(5),e.Q6J("readonly",t.PurchaseOrderGuid)("readOnly",!0),e.xp6(8),e.Q6J("readonly",t.PurchaseOrderGuid)("minDate",t.minDate)("readOnly",!0),e.xp6(7),e.Q6J("readonly",t.PurchaseOrderGuid),e.xp6(4),e.Q6J("items",t.CenterLocation)("inputAttrs",e.DdM(33,ne))("closeOnSelect",!0)("searchable",!0)("multiple",!0)("notFoundText","No location found")("readonly",t.PurchaseOrderGuid),e.xp6(4),e.Q6J("ngClass",e.VKq(34,G,""==t.PendingPI.length)),e.xp6(2),e.Q6J("items",t.ListOfSupplier)("inputAttrs",e.DdM(36,ne))("closeOnSelect",!0)("searchable",!0)("notFoundText","No pending PI found")("ngClass",null!=(o=t.purchaseOrderForm.get("PendingPI"))&&o.hasError("required")&&null!=(o=t.purchaseOrderForm.get("PendingPI"))&&o.touched?"is-invalid":"")("multiple",!0)("readonly",t.PurchaseOrderGuid),e.xp6(2),e.Q6J("ngIf",null!=(a=t.purchaseOrderForm.get("PendingPI"))&&a.hasError("required")&&null!=(a=t.purchaseOrderForm.get("PendingPI"))&&a.touched?"is-invalid":"")}}function nn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",83)(1,"h6",9),e._uU(2,"Item Details"),e.qZA(),e.TgZ(3,"div",79)(4,"input",84),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.ISUrgentPO(r))}),e.qZA(),e.TgZ(5,"label",81),e._uU(6,"To mark it has urgent?"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("checked",t.Isurgent)}}function rn(i,l){1&i&&(e.ynx(0),e.TgZ(1,"div",97),e._uU(2," There are no quotation provided. "),e.qZA(),e.BQk())}function on(i,l){if(1&i&&(e.TgZ(0,"div")(1,"span",97),e._uU(2),e.qZA()()),2&i){const t=e.oxw().index,n=e.oxw(2);let r;e.xp6(2),e.hij("Order quantity cannot exceed ",null==(r=n.purchaseOrderForm.get("lstpurchaseOrderItems"))||null==r.value[t]?null:r.value[t].DefaultItemQuantity,"")}}const an=function(){return{standalone:!0}},ln=function(i){return["/items/view-item",i]};function sn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"tr",86),e.ynx(1,87),e.TgZ(2,"td")(3,"input",88),e.NdJ("change",function(){const r=e.CHM(t),o=r.$implicit,a=r.index,s=e.oxw(2);return e.KtG(s.OnItemsSelect(o,a))})("ngModelChange",function(r){const a=e.CHM(t).index,s=e.oxw(2);let m;return e.KtG((null==(m=s.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:m.value[a]).IsSelected=r)}),e.ALo(4,"filterItems"),e.qZA()(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",89),e._uU(12),e.qZA(),e.TgZ(13,"td",22),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td")(18,"ng-select",90),e.NdJ("change",function(r){const a=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.OnSelectQuotation(r,a))}),e.ALo(19,"filterItems"),e.ALo(20,"filterItems"),e.qZA(),e.YNc(21,rn,3,0,"ng-container",24),e.ALo(22,"filterItems"),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.qZA(),e.TgZ(29,"td"),e._uU(30),e.qZA(),e.TgZ(31,"td"),e._uU(32),e.qZA(),e.TgZ(33,"td")(34,"span",91),e._uU(35,"\u20b9"),e.qZA(),e._uU(36),e.qZA(),e.TgZ(37,"td")(38,"input",92),e.NdJ("input",function(r){const a=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.AddReasonForQuotationNo(r,a))}),e.qZA()(),e.TgZ(39,"td")(40,"input",93),e.NdJ("input",function(){const r=e.CHM(t),o=r.$implicit,a=r.index,s=e.oxw(2);return e.KtG(s.ChangeDiscount(o,a))}),e.qZA()(),e.TgZ(41,"td"),e._uU(42),e.qZA(),e.TgZ(43,"td")(44,"span",91),e._uU(45,"\u20b9"),e.qZA(),e._uU(46),e.ALo(47,"exactNumbers"),e.qZA(),e.TgZ(48,"td")(49,"input",94),e.NdJ("input",function(){const o=e.CHM(t).index,a=e.oxw(2);let s;return e.KtG(a.ItemQuantityCalculation(o,null==(s=a.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:s.value[o].ItemGuid))}),e.qZA(),e.YNc(50,on,3,1,"div",24),e.qZA(),e.TgZ(51,"td")(52,"span",91),e._uU(53,"\u20b9"),e.qZA(),e._uU(54),e.ALo(55,"exactNumbers"),e.qZA(),e.TgZ(56,"td"),e._uU(57),e.qZA(),e.TgZ(58,"td")(59,"a",95),e._UZ(60,"span",96),e._uU(61," View "),e.qZA()(),e.BQk(),e.qZA()}if(2&i){const t=l.$implicit,n=l.index,r=e.oxw(2);let o,a,s,m,p,d,c,P,g,T,x,A,C,N,D,h,y,I,b,q,U,S,k,M,V,B,R;e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.Q6J("disabled","Approved"==r.status||0===(null==e.xi3(4,34,r.QuotationItemlist,null==(o=r.purchaseOrderForm.get("lstpurchaseOrderItems"))||null==o.value[n]?null:o.value[n].ItemGuid)[0]?null:e.xi3(4,34,r.QuotationItemlist,null==o||null==o.value[n]?null:o.value[n].ItemGuid)[0].QuotationNo)||0===(null==(o=r.purchaseOrderForm.get("lstpurchaseOrderItems"))||null==o.value[n]?null:o.value[n].latestQuotation)||!r.role.toLowerCase().includes("Maker".toLowerCase()))("ngModel",null==(a=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:a.value[n].IsSelected)("ngModelOptions",e.DdM(50,an)),e.xp6(3),e.Oqu(null==(s=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:s.value[n].SNo),e.xp6(2),e.hij("",null==(m=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:m.value[n].IndentNo," "),e.xp6(2),e.hij("",null==(p=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:p.value[n].DeliveryLocation," "),e.xp6(1),e.s9C("title",null==(d=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:d.value[n].ItemName),e.xp6(1),e.hij("",null==(c=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:c.value[n].ItemName," "),e.xp6(2),e.hij("",null==(P=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:P.value[n].CatalogNo," "),e.xp6(2),e.Oqu(null==(g=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:g.value[n].VendorItemName),e.xp6(2),e.Q6J("inputAttrs",e.DdM(51,ne))("items",e.xi3(19,37,r.QuotationItemlist,null==(T=r.purchaseOrderForm.get("lstpurchaseOrderItems"))||null==T.value[n]?null:T.value[n].ItemGuid))("searchable",!0)("multiple",!1)("ngClass",null!=(x=r.purchaseOrderForm.get("QuotationNo"))&&x.hasError("required")&&null!=(x=r.purchaseOrderForm.get("QuotationNo"))&&x.touched?"is-invalid":"")("readonly",0===(null==e.xi3(20,40,r.QuotationItemlist,null==(A=r.purchaseOrderForm.get("lstpurchaseOrderItems"))||null==A.value[n]?null:A.value[n].ItemGuid)[0]?null:e.xi3(20,40,r.QuotationItemlist,null==A||null==A.value[n]?null:A.value[n].ItemGuid)[0].QuotationNo)||0===(null==(A=r.purchaseOrderForm.get("lstpurchaseOrderItems"))||null==A.value[n]?null:A.value[n].latestQuotation)||r.PurchaseOrderGuid||"Approved"==r.status),e.xp6(3),e.Q6J("ngIf",0===(null==e.xi3(22,43,r.QuotationItemlist,null==(C=r.purchaseOrderForm.get("lstpurchaseOrderItems"))||null==C.value[n]?null:C.value[n].ItemGuid)[0]?null:e.xi3(22,43,r.QuotationItemlist,null==C||null==C.value[n]?null:C.value[n].ItemGuid)[0].QuotationNo)||0===(null==(C=r.purchaseOrderForm.get("lstpurchaseOrderItems"))||null==C.value[n]?null:C.value[n].latestQuotation)),e.xp6(3),e.hij("",null==(N=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:N.value[n].VenderNme," "),e.xp6(2),e.hij("",null==(D=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:D.value[n].ManufactureName," "),e.xp6(2),e.hij("",null==(h=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:h.value[n].POSize," "),e.xp6(2),e.hij("",null==(y=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:y.value[n].PurchaseOrderUnit," "),e.xp6(2),e.hij("",null==(I=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:I.value[n].Narration," "),e.xp6(4),e.hij(" ",null==(b=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:b.value[n].ItemRate," "),e.xp6(2),e.Q6J("readOnly",(null==r.lstQuotationNo[n]?null:r.lstQuotationNo[n].QuotationNo)==(null==t.value||null==t.value.QuotationNo?null:t.value.QuotationNo.QuotationNo)||(null==r.lstQuotationNo[n]?null:r.lstQuotationNo[n].QuotationNo)==(null==t.value?null:t.value.QuotationNo)||null==(null==t.value?null:t.value.QuotationNo))("ngClass",(null==r.lstQuotationNo[n]?null:r.lstQuotationNo[n].QuotationNo)==(null==(q=r.addItemslist.at(n).get("QuotationNo"))?null:q.value)||null==(null==r.lstQuotationNo[n]?null:r.lstQuotationNo[n].QuotationNo)||null==(null==t.value?null:t.value.QuotationNo)?"form-control wd-80":null==(null==(q=r.addItemslist.at(n).get("ReasonQuotationNo"))?null:q.value)||""==(null==(q=r.addItemslist.at(n).get("ReasonQuotationNo"))?null:q.value)?"is-invalid":"form-control wd-80"),e.xp6(2),e.Q6J("readOnly","Approved"==r.status),e.xp6(2),e.hij("",null==(U=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:U.value[n].TaxPercentage," "),e.xp6(4),e.hij(" ",e.lcZ(47,46,null==(S=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:S.value[n].UnitPrice)," "),e.xp6(3),e.Q6J("readOnly",!(null!=(k=r.purchaseOrderForm.get("lstpurchaseOrderItems"))&&k.value[n].IndentNo)||"Approved"==r.status),e.xp6(1),e.Q6J("ngIf",(null==(M=r.purchaseOrderForm.get("lstpurchaseOrderItems"))||null==M.value[n]?null:M.value[n].DefaultItemQuantity)<(null==(M=r.purchaseOrderForm.get("lstpurchaseOrderItems"))||null==M.value[n]?null:M.value[n].OrderQuantity)),e.xp6(4),e.hij(" ",e.lcZ(55,48,null==(V=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:V.value[n].TotalAmount)," "),e.xp6(3),e.hij(" ",null==(B=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:B.value[n].StockInhandQuantity," "),e.xp6(2),e.Q6J("routerLink",e.VKq(52,ln,null==(R=r.purchaseOrderForm.get("lstpurchaseOrderItems"))?null:R.value[n].ItemGuid))}}function un(i,l){if(1&i&&(e.ynx(0),e.YNc(1,sn,62,54,"tr",85),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.addItemslist.controls)}}function cn(i,l){1&i&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"div",99),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"div",99),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"div",99),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"div",99),e.qZA(),e.TgZ(9,"td"),e._UZ(10,"div",99),e.qZA(),e.TgZ(11,"td"),e._UZ(12,"div",99),e.qZA(),e.TgZ(13,"td"),e._UZ(14,"div",99),e.qZA(),e.TgZ(15,"td"),e._UZ(16,"div",99),e.qZA(),e.TgZ(17,"td"),e._UZ(18,"div",99),e.qZA(),e.TgZ(19,"td"),e._UZ(20,"div",99),e.qZA(),e.TgZ(21,"td"),e._UZ(22,"div",99),e.qZA(),e.TgZ(23,"td"),e._UZ(24,"div",99),e.qZA(),e.TgZ(25,"td"),e._UZ(26,"div",99),e.qZA(),e.TgZ(27,"td"),e._UZ(28,"div",99),e.qZA(),e.TgZ(29,"td"),e._UZ(30,"div",99),e.qZA(),e.TgZ(31,"td"),e._UZ(32,"div",99),e.qZA()())}const dn=function(){return[]};function mn(i,l){1&i&&(e.ynx(0),e.YNc(1,cn,33,0,"tr",98),e.BQk()),2&i&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,dn).constructor(5)))}function pn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"span",100),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(),o=e.MAs(116);return e.KtG(r.openBasicModal(o))}),e._uU(1,"Add other"),e.qZA()}}function hn(i,l){1&i&&(e.TgZ(0,"option",101),e._uU(1," 100% Payment within 30 days of delivery and submission of invoice with delivery acknowledgement"),e.qZA())}function _n(i,l){if(1&i&&(e.TgZ(0,"option",102),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.s9C("value",t.purchaseOrderForm.value.PaymentTerm),e.xp6(1),e.hij(" ","StaticTerm"==t.purchaseOrderForm.value.PaymentTerm?"100% Payment within 30 days of delivery and submission of invoice with delivery acknowledgement":t.purchaseOrderForm.value.PaymentTerm,"")}}function gn(i,l){1&i&&(e.TgZ(0,"span",82),e._uU(1," Payment term is required!"),e.qZA())}function fn(i,l){1&i&&(e.TgZ(0,"span",82),e._uU(1," Delivery term is required!"),e.qZA())}function An(i,l){1&i&&e._UZ(0,"hr",44)}function Pn(i,l){if(1&i&&(e.TgZ(0,"div",39)(1,"span",103),e._uU(2,"Checked by and reason:"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.AsE(" ",null==t.PurchaseViewDetails?null:t.PurchaseViewDetails.CheckedByName," ",null==(null==t.PurchaseViewDetails?null:t.PurchaseViewDetails.CheckedReason)?"(N/A)":"("+(null==t.PurchaseViewDetails?null:t.PurchaseViewDetails.CheckedReason)+")"," ")}}function Tn(i,l){if(1&i&&(e.TgZ(0,"div",39)(1,"span",103),e._uU(2,"Approved by and reason:"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.AsE(" ",null==t.PurchaseViewDetails?null:t.PurchaseViewDetails.AppprovedByName," ",null==(null==t.PurchaseViewDetails?null:t.PurchaseViewDetails.ApproveReason)?" (N/A)":" ("+(null==t.PurchaseViewDetails?null:t.PurchaseViewDetails.ApproveReason)+")"," ")}}function Cn(i,l){if(1&i&&(e.TgZ(0,"div",47)(1,"div",39)(2,"span",103)(3,"u"),e._uU(4,"Reason"),e.qZA(),e._uU(5," :"),e.qZA()(),e.YNc(6,Pn,4,2,"div",104),e.YNc(7,Tn,4,2,"div",104),e.qZA()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",null==t.PurchaseViewDetails?null:t.PurchaseViewDetails.CheckedReason),e.xp6(1),e.Q6J("ngIf",null==t.PurchaseViewDetails?null:t.PurchaseViewDetails.ApproveReason)}}function yn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"h5",106),e._uU(2,"Add delivery term"),e.qZA(),e.TgZ(3,"button",107),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e.qZA()(),e.TgZ(4,"div",108)(5,"div",5)(6,"div",39)(7,"div",26)(8,"label",36),e._uU(9,"Delivery Term"),e.qZA(),e._UZ(10,"input",109),e.qZA()()()(),e.TgZ(11,"div",110)(12,"button",111),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e._uU(13," Cancel "),e.qZA(),e.TgZ(14,"button",112),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.close("by: close icon"),e.KtG(a.addOtherDeliveryTerm())}),e._uU(15,"Save"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(14),e.Q6J("disabled",!t.purchaseOrderForm.value.AddDeliveryTerm)}}function bn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"h5",106),e._uU(2,"Add payment term"),e.qZA(),e.TgZ(3,"button",107),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e.qZA()(),e.TgZ(4,"div",108)(5,"div",5)(6,"div",39)(7,"div",26)(8,"label",36),e._uU(9,"Payment Term"),e.qZA(),e._UZ(10,"input",113),e.qZA()()()(),e.TgZ(11,"div",110)(12,"button",111),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e._uU(13," Cancel "),e.qZA(),e.TgZ(14,"button",112),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.close("by: close icon"),e.KtG(a.addOtherPaymentTerm())}),e._uU(15,"Save"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(14),e.Q6J("disabled",!t.purchaseOrderForm.value.paymentsTerms)}}function xn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",123),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.modal.close("by: close icon"))})("click",function(){e.CHM(t);const r=e.oxw(2),o=e.MAs(124);return r.openBasicModal(o),e.KtG(r.PurchaseOrderDetailas(r.PurchaseViewDetails))}),e._UZ(1,"span",124),e._uU(2," Cancel PO"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.FormChanged)}}function Zn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",117),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2),o=e.MAs(134);return r.openBasicModal(o),e.KtG(r.changestatus(r.PurchaseOrderGuid,"Checker"))}),e._UZ(1,"span",125),e._uU(2," Mark as Checked "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.FormChanged)}}function vn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",117),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2),o=e.MAs(134);return r.openBasicModal(o),e.KtG(r.changestatus(r.PurchaseOrderGuid,"Approval"))}),e._UZ(1,"span",125),e._uU(2," Mark as Approved "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.FormChanged)}}function On(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",117),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2),o=e.MAs(126);return r.openBasicModal(o),e.KtG(r.PurchaseOrderDetailas(r.purchaseOrderDetails))}),e._UZ(1,"span",126),e._uU(2," Shipping Address"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.FormChanged)}}function Nn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",123),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.modal.dismiss("by: close icon"))})("click",function(){e.CHM(t);const r=e.oxw(2),o=e.MAs(128);return r.openXlModal(o),e.KtG(r.getPurchaseOrderGuid(r.PurchaseOrderGuid))}),e._UZ(1,"span",127),e._uU(2," Recall "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.FormChanged)}}function In(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",123),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2),o=e.MAs(132);return r.openBasicModal(o),e.KtG(r.FormChanged=!1)}),e._UZ(1,"span",128),e._uU(2," Payment "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.FormChanged)}}function qn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",123),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2),o=e.MAs(130);return r.openXlModal(o),e.KtG(r.getQuotationByGuid(r.purchaseOrderDetails))}),e._UZ(1,"span",96),e._uU(2," Quotation View "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.FormChanged)}}function Dn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",114),e.YNc(1,xn,3,1,"button",115),e.YNc(2,Zn,3,1,"button",116),e.YNc(3,vn,3,1,"button",116),e.TgZ(4,"button",117),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.DownloadPdf("print"))}),e._UZ(5,"span",118),e._uU(6," Print"),e.qZA(),e.TgZ(7,"button",119),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.DownloadPdf("download"))}),e._UZ(8,"span",120),e._uU(9," Download"),e.qZA(),e.YNc(10,On,3,1,"button",121),e.YNc(11,Nn,3,1,"button",122),e.YNc(12,In,3,1,"button",115),e.YNc(13,qn,3,1,"button",115),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",0==t.PurchaseViewDetails.IsDeleted&&0==t.PurchaseViewDetails.GRN&&null==t.PurchaseViewDetails.RecallByName&&t.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())),e.xp6(1),e.Q6J("ngIf","Checked"!=t.status&&"Approved"!=t.status&&0==t.PurchaseViewDetails.IsDeleted&&null==t.PurchaseViewDetails.RecallByName&&t.role.toLowerCase().includes("Checker".toLowerCase())),e.xp6(1),e.Q6J("ngIf","Approved"!=t.status&&"Checked"==t.status&&0==t.PurchaseViewDetails.IsDeleted&&null==t.PurchaseViewDetails.RecallByName&&t.role.toLowerCase().includes("Approval".toLowerCase())),e.xp6(1),e.Q6J("disabled",t.FormChanged),e.xp6(3),e.Q6J("disabled",t.FormChanged),e.xp6(3),e.Q6J("ngIf","Approved"!==t.status&&0==t.PurchaseViewDetails.IsDeleted&&null==t.PurchaseViewDetails.RecallByName),e.xp6(1),e.Q6J("ngIf","Approved"===t.status&&0==t.PurchaseViewDetails.IsDeleted&&0==t.purchaseOrderDetails.GRN&&null==t.PurchaseViewDetails.RecallByName),e.xp6(1),e.Q6J("ngIf",t.purchaseOrderDetails.POTotalAmount-t.purchaseOrderDetails.DueAmount>1&&0==t.PurchaseViewDetails.IsDeleted&&null==t.PurchaseViewDetails.RecallByName&&t.role.toLowerCase().includes("Maker".toLowerCase())),e.xp6(1),e.Q6J("ngIf",0==t.PurchaseViewDetails.IsDeleted)}}function Sn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",132),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.FormReset())}),e._uU(1,"Reset"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.FormChanged)}}function Un(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",112),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.SavePurchaseOrderPOAgainstPI())}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.purchaseOrderForm.invalid||!t.isChecked||!t.FormChanged||t.IsReasonQuotationNo||t.quotationExpired),e.xp6(1),e.hij(" ",t.PurchaseOrderGuid?"Update":"Save","")}}function Gn(i,l){if(1&i&&(e.TgZ(0,"div",129),e.YNc(1,Sn,2,1,"button",130),e.YNc(2,Un,2,2,"button",131),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.PurchaseViewDetails.RecallByName&&0==t.PurchaseViewDetails.IsDeleted&&t.PurchaseOrderGuid||!t.PurchaseOrderGuid),e.xp6(1),e.Q6J("ngIf",null==t.PurchaseViewDetails.RecallByName&&0==t.PurchaseViewDetails.IsDeleted||!t.PurchaseOrderGuid)}}function wn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"h5",106),e._uU(2,"Cancel purchse order"),e.qZA(),e.TgZ(3,"button",107),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e.qZA()(),e.TgZ(4,"div",108)(5,"div",5)(6,"div",39)(7,"div",26)(8,"label",36),e._uU(9,"Are you sure do you want to cancel "),e.TgZ(10,"strong"),e._uU(11),e.qZA(),e._uU(12," purchase order?"),e.qZA()(),e.TgZ(13,"div",26)(14,"label",36),e._uU(15,"PurchaseOrderNo: "),e.TgZ(16,"strong"),e._uU(17),e.qZA()()()()()(),e.TgZ(18,"div",110)(19,"button",111),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e._uU(20," No "),e.qZA(),e.TgZ(21,"button",133),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.close("by: close icon"),e.KtG(a.DeletePurchaseOrder())}),e._uU(22,"Yes"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(11),e.Oqu(t.PurchaseOrderName),e.xp6(6),e.Oqu(t.purchaseOrderNo)}}function kn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"h5",106),e._uU(2,"Delete Quotation"),e.qZA(),e.TgZ(3,"button",107),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e.qZA()(),e.TgZ(4,"div",108)(5,"div",5)(6,"div",39)(7,"div",26)(8,"label",36),e._uU(9,"Are you sure do you want to delete "),e.TgZ(10,"strong"),e._uU(11),e.qZA(),e._uU(12," quotation ?"),e.qZA()()()()(),e.TgZ(13,"div",110)(14,"button",111),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e._uU(15," No "),e.qZA(),e.TgZ(16,"button",133),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw(2);return o.close("by: close icon"),e.KtG(a.DeleteQuotation())}),e._uU(17,"Yes"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(11),e.Oqu(t.purchaseOrderDetails.SupplierName)}}function Qn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"h5",106),e._uU(2,"Shipping Address"),e.qZA(),e.TgZ(3,"button",107),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e.qZA()(),e.TgZ(4,"div",108)(5,"div",5)(6,"div",134)(7,"label",135),e._uU(8,"Location"),e.qZA(),e.TgZ(9,"ng-select",136),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.locationGuid=r)})("change",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.Changelocation(r))}),e.qZA()(),e.TgZ(10,"div",39)(11,"div",137)(12,"label",36),e._uU(13," Do you want to change this "),e.TgZ(14,"strong"),e._uU(15),e.qZA(),e._uU(16," shipping Location?"),e.qZA()()()()(),e.TgZ(17,"div",110)(18,"button",111),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e._uU(19," No "),e.qZA(),e.TgZ(20,"button",112),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.close("by: close icon"),e.KtG(a.UpdateShippingLocation())}),e._uU(21,"Yes"),e.qZA()(),e.YNc(22,kn,18,1,"ng-template",null,138,e.W1O)}if(2&i){const t=e.oxw();e.xp6(9),e.Q6J("ngModel",t.locationGuid)("items",t.CenterLocation)("multiple",!1),e.xp6(6),e.Oqu(t.centername?t.centername:t.location),e.xp6(5),e.Q6J("disabled",""==t.locationGuid)}}function Mn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"h5",139),e._uU(2,"Recall Purchase Order"),e.qZA(),e.TgZ(3,"button",107),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.dismiss("by: close icon"),e.KtG(a.recallReason="")}),e.qZA()(),e.TgZ(4,"div",108)(5,"form",140,141),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.confirmRecall())}),e.TgZ(7,"div",142)(8,"label",143),e._uU(9,"Reason for Recall:"),e.qZA(),e.TgZ(10,"textarea",144),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.recallReason=r)}),e.qZA()(),e.TgZ(11,"input",145),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.body.PurchaseOrderGuid=r)}),e.qZA(),e.TgZ(12,"div",110)(13,"button",146),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("by: close icon"))})("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.clearReason())}),e._uU(14,"Cancel"),e.qZA(),e.TgZ(15,"button",147),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("by: close icon"))}),e._uU(16,"Save"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(10),e.Q6J("ngModel",t.recallReason),e.xp6(1),e.Q6J("ngModel",t.body.PurchaseOrderGuid),e.xp6(4),e.Q6J("disabled",""==t.recallReason)}}function Fn(i,l){if(1&i&&(e.TgZ(0,"div")(1,"p",150)(2,"span",103),e._uU(3,"Checked by"),e.qZA(),e._uU(4),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(": ",null==t.quotationDetails[0]?null:t.quotationDetails[0].CheckedByName," ")}}function Jn(i,l){if(1&i&&(e.TgZ(0,"div")(1,"p",150)(2,"span",103),e._uU(3,"Approved by"),e.qZA(),e._uU(4),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(":",null==t.quotationDetails[0]?null:t.quotationDetails[0].ApprovedByName," ")}}function Ln(i,l){if(1&i&&(e.TgZ(0,"div")(1,"p",152)(2,"span",103),e._uU(3,"Checked date:"),e.qZA(),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.xi3(5,1,null==t.quotationDetails[0]?null:t.quotationDetails[0].CheckedDate,"dd-MM-yyyy"),"")}}function Vn(i,l){if(1&i&&(e.TgZ(0,"div")(1,"p",152)(2,"span",103),e._uU(3,"Approved date:"),e.qZA(),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Oqu(e.xi3(5,1,null==t.quotationDetails[0]?null:t.quotationDetails[0].ApprovedDate,"dd-MM-yyyy"))}}function Rn(i,l){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA()()),2&i){const t=l.$implicit;e.xp6(2),e.Oqu(t.QuotationNo),e.xp6(2),e.Oqu(t.ItemName),e.xp6(2),e.Oqu(t.ItemCategoryName),e.xp6(2),e.Oqu(t.HSNCode?t.HSNCode:"N/A"),e.xp6(2),e.Oqu(t.ManufactureName),e.xp6(2),e.Oqu(t.MachineName),e.xp6(2),e.hij("\u20b9",t.Rate,""),e.xp6(2),e.Oqu(t.DiscountPer),e.xp6(2),e.Oqu(0==t.SGSTPer?"--":t.SGSTPer),e.xp6(2),e.Oqu(0==t.CGSTPer?"--":t.CGSTPer),e.xp6(2),e.Oqu(t.IGSTPer),e.xp6(2),e.hij("\u20b9",t.BuyPrice,"")}}function En(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"h5",106),e._uU(2,"Supplier Quotation Detail"),e.qZA(),e.TgZ(3,"button",107),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e.qZA()(),e.TgZ(4,"div",148)(5,"div",149)(6,"p",150)(7,"span",103),e._uU(8,"Supplier name"),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"p",150)(11,"span",103),e._uU(12,"Supplier state"),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"p",150)(15,"span",103),e._uU(16,"Delivery location"),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"p",150)(19,"span",103),e._uU(20,"Created by"),e.qZA(),e._uU(21),e.qZA(),e.YNc(22,Fn,5,1,"div",24),e.YNc(23,Jn,5,1,"div",24),e.qZA(),e.TgZ(24,"div",151)(25,"p",152)(26,"span",103),e._uU(27,"Quotation reference No.:"),e.qZA(),e._uU(28),e.qZA(),e.TgZ(29,"p",152)(30,"span",103),e._uU(31,"Supplier address:"),e.qZA(),e._uU(32),e.qZA(),e.TgZ(33,"p",152)(34,"span",103),e._uU(35,"GSTN No.:"),e.qZA(),e._uU(36),e.qZA(),e.TgZ(37,"p",152)(38,"span",103),e._uU(39,"From date:"),e.qZA(),e._uU(40),e.ALo(41,"date"),e.TgZ(42,"span",103),e._uU(43,"To date:"),e.qZA(),e._uU(44),e.ALo(45,"date"),e.qZA(),e.TgZ(46,"p",152)(47,"span",103),e._uU(48,"Created date:"),e.qZA(),e._uU(49),e.ALo(50,"date"),e.qZA(),e.YNc(51,Ln,6,4,"div",24),e.YNc(52,Vn,6,4,"div",24),e.qZA()(),e.TgZ(53,"div",108)(54,"double-scroll")(55,"table",153)(56,"thead")(57,"tr")(58,"th"),e._uU(59,"Quotation No"),e.qZA(),e.TgZ(60,"th"),e._uU(61,"Item Name"),e.qZA(),e.TgZ(62,"th"),e._uU(63,"Item Category Name"),e.qZA(),e.TgZ(64,"th"),e._uU(65,"HSN Code"),e.qZA(),e.TgZ(66,"th"),e._uU(67,"Manufacturer Name"),e.qZA(),e.TgZ(68,"th"),e._uU(69,"Machine Name"),e.qZA(),e.TgZ(70,"th"),e._uU(71,"Rate"),e.qZA(),e.TgZ(72,"th"),e._uU(73,"Discount %"),e.qZA(),e.TgZ(74,"th"),e._uU(75,"SGST %"),e.qZA(),e.TgZ(76,"th"),e._uU(77,"CGST %"),e.qZA(),e.TgZ(78,"th"),e._uU(79,"IGST %"),e.qZA(),e.TgZ(80,"th"),e._uU(81,"Buy Price"),e.qZA()()(),e.TgZ(82,"tbody"),e.YNc(83,Rn,25,12,"tr",98),e.qZA()()()(),e.TgZ(84,"div",110)(85,"button",154),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close button"))}),e._uU(86,"Close"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(9),e.hij(": ",null==t.quotationDetails[0]?null:t.quotationDetails[0].SupplierName," "),e.xp6(4),e.hij(":",null==t.quotationDetails[0]?null:t.quotationDetails[0].SupplierStateName,""),e.xp6(4),e.hij(":",t.locationList,""),e.xp6(4),e.hij(":",null==t.quotationDetails[0]?null:t.quotationDetails[0].CreatedBy,""),e.xp6(1),e.Q6J("ngIf",null!=(null==t.quotationDetails[0]?null:t.quotationDetails[0].CheckedByName)),e.xp6(1),e.Q6J("ngIf",null!=(null==t.quotationDetails[0]?null:t.quotationDetails[0].ApprovedByName)),e.xp6(5),e.Oqu(null==t.quotationDetails[0]?null:t.quotationDetails[0].QuotationRefNo),e.xp6(4),e.hij(" ",null==t.quotationDetails[0]?null:t.quotationDetails[0].SupplierAddress," , Hyderabad."),e.xp6(4),e.hij(" ",null==t.quotationDetails[0]?null:t.quotationDetails[0].GSTNNo,""),e.xp6(4),e.hij(" ",e.xi3(41,15,null==t.quotationDetails[0]?null:t.quotationDetails[0].FromDate,"dd-MM-yyyy"),""),e.xp6(4),e.hij(" ",e.xi3(45,18,null==t.quotationDetails[0]?null:t.quotationDetails[0].ToDate,"dd-MM-yyyy")," "),e.xp6(5),e.hij(" ",e.xi3(50,21,null==t.quotationDetails[0]?null:t.quotationDetails[0].CreateDate,"dd-MM-yyyy"),""),e.xp6(2),e.Q6J("ngIf",null!=(null==t.quotationDetails[0]?null:t.quotationDetails[0].CheckedDate)),e.xp6(1),e.Q6J("ngIf",null!=(null==t.quotationDetails[0]?null:t.quotationDetails[0].ApprovedDate)),e.xp6(31),e.Q6J("ngForOf",t.quotationDetails)}}function Hn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",134),e._uU(2,"Attachment:"),e.qZA(),e.TgZ(3,"div",180)(4,"i",181),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.RemoveImage())}),e.qZA(),e._UZ(5,"img",182),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(5),e.Q6J("src",t.fileUrl,e.LSH)}}function Bn(i,l){1&i&&(e.TgZ(0,"span",97),e._uU(1,"Image url is required!"),e.qZA())}function Yn(i,l){1&i&&(e.TgZ(0,"span",97),e._uU(1,"Bank name is required!"),e.qZA())}function Kn(i,l){1&i&&(e.TgZ(0,"span",97),e._uU(1,"TransactionID is required!"),e.qZA())}function jn(i,l){1&i&&(e.TgZ(0,"span",97),e._uU(1,"Invoice number is required!"),e.qZA())}function zn(i,l){1&i&&(e.TgZ(0,"div",97),e._uU(1,"Transaction date is required!"),e.qZA())}function Wn(i,l){1&i&&(e.TgZ(0,"span",97),e._uU(1," Please select a valid payment mode."),e.qZA())}function Xn(i,l){1&i&&(e.TgZ(0,"span",97),e._uU(1,"Paid amount is required!"),e.qZA())}function $n(i,l){1&i&&(e.TgZ(0,"span",97),e._uU(1,"Paid amount is less than the Due amount!"),e.qZA())}function er(i,l){1&i&&(e.TgZ(0,"span",97),e._uU(1,"Remarks is required!"),e.qZA())}const j=function(i){return{"is-invalid":i}};function tr(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"h5",139),e._uU(2,"Payment details"),e.qZA(),e.TgZ(3,"button",107),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.dismiss("by: close icon"),e.KtG(a.resetfrom())}),e.qZA()(),e.TgZ(4,"div",108),e.YNc(5,Hn,6,1,"div",24),e.TgZ(6,"div",26)(7,"label",60),e._uU(8,"PO Number: "),e.TgZ(9,"strong"),e._uU(10),e.qZA()()(),e.TgZ(11,"form",11)(12,"div",5)(13,"div",155)(14,"label",70),e._uU(15,"Payment attachment"),e.TgZ(16,"span",23),e._uU(17,"*"),e.qZA()(),e.TgZ(18,"div",156)(19,"div",157),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.markAsTouched("imageUrl"))})("input",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.textValues())})("paste",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.pasteImage(r))}),e.qZA(),e.TgZ(20,"p",158),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.markAsTouched("imageUrl"))})("click",function(){e.CHM(t);const r=e.MAs(23);return e.KtG(r.click())}),e._UZ(21,"i",159),e.qZA()(),e.TgZ(22,"input",160,161),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.UplodeInvoice(r))}),e.qZA(),e.YNc(24,Bn,2,0,"span",162),e.qZA(),e.TgZ(25,"div",155)(26,"label",70),e._uU(27,"Bank name"),e.TgZ(28,"span",23),e._uU(29,"*"),e.qZA()(),e._UZ(30,"input",163),e.YNc(31,Yn,2,0,"span",162),e.qZA(),e.TgZ(32,"div",155)(33,"label",70),e._uU(34,"Transaction ID"),e.TgZ(35,"span",23),e._uU(36,"*"),e.qZA()(),e._UZ(37,"input",164),e.YNc(38,Kn,2,0,"span",162),e.qZA(),e.TgZ(39,"div",155)(40,"label",70),e._uU(41,"Invoice Number"),e.TgZ(42,"span",23),e._uU(43,"*"),e.qZA()(),e._UZ(44,"input",165),e.YNc(45,jn,2,0,"span",162),e.qZA(),e.TgZ(46,"div",155)(47,"label",70),e._uU(48,"Transaction date"),e.TgZ(49,"span",23),e._uU(50,"*"),e.qZA()(),e.TgZ(51,"div",166),e._UZ(52,"input",167,168),e.TgZ(54,"button",169),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(53);return e.KtG(r.toggle())}),e._UZ(55,"i",69),e.qZA()(),e.YNc(56,zn,2,0,"div",162),e.qZA(),e.TgZ(57,"div",155)(58,"label",70),e._uU(59,"Mode of payment"),e.TgZ(60,"span",23),e._uU(61,"*"),e.qZA()(),e.TgZ(62,"select",170)(63,"option",171),e._uU(64,"Select mode of payment"),e.qZA(),e.TgZ(65,"option",172),e._uU(66,"Online payment"),e.qZA(),e.TgZ(67,"option",173),e._uU(68,"Offline payment"),e.qZA(),e.TgZ(69,"option",174),e._uU(70,"Cash payment"),e.qZA(),e.TgZ(71,"option",175),e._uU(72,"Credit card payment"),e.qZA()(),e.YNc(73,Wn,2,0,"span",162),e.qZA(),e.TgZ(74,"div",155)(75,"label",70),e._uU(76,"Total amount "),e.TgZ(77,"span",23),e._uU(78,"*"),e.qZA()(),e._UZ(79,"input",176),e.qZA(),e.TgZ(80,"div",155)(81,"label",70),e._uU(82,"Due amount "),e.TgZ(83,"span",23),e._uU(84,"*"),e.qZA()(),e._UZ(85,"input",177),e.qZA(),e.TgZ(86,"div",155)(87,"label",70),e._uU(88,"Paid amount"),e.TgZ(89,"span",23),e._uU(90,"*"),e.qZA()(),e.TgZ(91,"input",178),e.NdJ("keypress",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.restrictCharectors(r))})("input",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.paidamount(r))}),e.qZA(),e.YNc(92,Xn,2,0,"span",162),e.YNc(93,$n,2,0,"span",162),e.qZA(),e.TgZ(94,"div",155)(95,"label",70),e._uU(96,"Remarks"),e.TgZ(97,"span",23),e._uU(98,"*"),e.qZA()(),e._UZ(99,"textarea",179),e.YNc(100,er,2,0,"span",162),e.qZA()(),e.TgZ(101,"div",110)(102,"button",146),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.dismiss("by: close icon"),e.KtG(a.resetfrom())}),e._uU(103,"Cancel"),e.qZA(),e.TgZ(104,"button",147),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.dismiss("by: close icon"),e.KtG(a.SavePayment())}),e._uU(105,"Save"),e.qZA()()()()}if(2&i){const t=e.oxw();let n,r,o,a,s,m,p,d,c,P,g,T,x,A,C,N,D,h,y,I,b,q,U,S;e.xp6(5),e.Q6J("ngIf",t.fileUrl),e.xp6(5),e.Oqu(t.purchaseOrderDetails.PurchaseOrderNo),e.xp6(1),e.Q6J("formGroup",t.PaymentDetailForm),e.xp6(5),e.Q6J("ngClass",e.VKq(30,G,""==(null==(n=t.PaymentDetailForm.get("imageUrl"))?null:n.value))),e.xp6(8),e.Q6J("ngIf",(null==(r=t.PaymentDetailForm.get("imageUrl"))?null:r.touched)&&""==(null==(r=t.PaymentDetailForm.get("imageUrl"))?null:r.value)),e.xp6(4),e.Q6J("ngClass",e.VKq(32,G,""==(null==(o=t.PaymentDetailForm.get("BankName"))?null:o.value))),e.xp6(2),e.Q6J("ngClass",e.VKq(34,j,(null==(a=t.PaymentDetailForm.get("BankName"))?null:a.hasError("required"))&&(null==(a=t.PaymentDetailForm.get("BankName"))?null:a.touched))),e.xp6(1),e.Q6J("ngIf",(null==(s=t.PaymentDetailForm.get("BankName"))?null:s.touched)&&(null==(s=t.PaymentDetailForm.get("BankName"))?null:s.invalid)),e.xp6(4),e.Q6J("ngClass",e.VKq(36,G,null==(null==(m=t.PaymentDetailForm.get("TransectionID"))?null:m.value))),e.xp6(2),e.Q6J("ngClass",e.VKq(38,j,(null==(p=t.PaymentDetailForm.get("TransectionID"))?null:p.hasError("required"))&&(null==(p=t.PaymentDetailForm.get("TransectionID"))?null:p.touched))),e.xp6(1),e.Q6J("ngIf",(null==(d=t.PaymentDetailForm.get("TransectionID"))?null:d.touched)&&(null==(d=t.PaymentDetailForm.get("TransectionID"))?null:d.invalid)),e.xp6(4),e.Q6J("ngClass",e.VKq(40,G,null==(null==(c=t.PaymentDetailForm.get("InvoiceNumber"))?null:c.value))),e.xp6(2),e.Q6J("ngClass",e.VKq(42,j,(null==(P=t.PaymentDetailForm.get("InvoiceNumber"))?null:P.hasError("required"))&&(null==(P=t.PaymentDetailForm.get("InvoiceNumber"))?null:P.touched))),e.xp6(1),e.Q6J("ngIf",(null==(g=t.PaymentDetailForm.get("InvoiceNumber"))?null:g.touched)&&(null==(g=t.PaymentDetailForm.get("v"))?null:g.invalid)),e.xp6(4),e.Q6J("ngClass",e.VKq(44,G,null==(null==(T=t.PaymentDetailForm.get("TransectionDate"))?null:T.value))),e.xp6(3),e.Q6J("maxDate",t.TodayDate)("ngClass",e.VKq(46,j,(null==(x=t.PaymentDetailForm.get("TransectionDate"))?null:x.hasError("required"))&&(null==(x=t.PaymentDetailForm.get("TransectionDate"))?null:x.touched))),e.xp6(4),e.Q6J("ngIf",(null==(A=t.PaymentDetailForm.get("TransectionDate"))?null:A.touched)&&(null==(A=t.PaymentDetailForm.get("TransectionDate"))?null:A.invalid)),e.xp6(4),e.Q6J("ngClass",e.VKq(48,G,""==(null==(C=t.PaymentDetailForm.get("Modeofpayment"))?null:C.value))),e.xp6(13),e.Q6J("ngIf",(null==(N=t.PaymentDetailForm.get("Modeofpayment"))?null:N.touched)&&(null==(N=t.PaymentDetailForm.get("Modeofpayment"))?null:N.invalid)),e.xp6(4),e.Q6J("ngClass",e.VKq(50,G,""==(null==(D=t.PaymentDetailForm.get("TotalAmount"))?null:D.value))),e.xp6(6),e.Q6J("ngClass",e.VKq(52,G,""==(null==(h=t.PaymentDetailForm.get("Dueamount"))?null:h.value))),e.xp6(6),e.Q6J("ngClass",e.VKq(54,G,""==(null==(y=t.PaymentDetailForm.get("PaidAmount"))?null:y.value))),e.xp6(2),e.Q6J("ngClass",e.VKq(56,j,(null==(I=t.PaymentDetailForm.get("PaidAmount"))?null:I.hasError("required"))&&(null==(I=t.PaymentDetailForm.get("PaidAmount"))?null:I.touched))),e.xp6(1),e.Q6J("ngIf",(null==(b=t.PaymentDetailForm.get("PaidAmount"))?null:b.touched)&&(null==(b=t.PaymentDetailForm.get("PaidAmount"))?null:b.invalid)),e.xp6(1),e.Q6J("ngIf",t.isvalid),e.xp6(4),e.Q6J("ngClass",e.VKq(58,G,""==(null==(q=t.PaymentDetailForm.get("Remarks"))?null:q.value))),e.xp6(2),e.Q6J("ngClass",e.VKq(60,j,(null==(U=t.PaymentDetailForm.get("Remarks"))?null:U.hasError("required"))&&(null==(U=t.PaymentDetailForm.get("Remarks"))?null:U.touched))),e.xp6(1),e.Q6J("ngIf",(null==(S=t.PaymentDetailForm.get("Remarks"))?null:S.touched)&&(null==(S=t.PaymentDetailForm.get("Remarks"))?null:S.invalid)),e.xp6(4),e.Q6J("disabled",t.PaymentDetailForm.invalid||t.isvalid)}}function nr(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"h5",106),e._uU(2,"Remarks"),e.qZA(),e.TgZ(3,"button",107),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.close("by: close icon"),e.KtG(a.reason="")}),e.qZA()(),e.TgZ(4,"div",108)(5,"div",5)(6,"div",39)(7,"div",183)(8,"label",184),e._uU(9,"Reason:"),e.qZA(),e.TgZ(10,"input",185),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.reason=r)}),e.qZA()()()()(),e.TgZ(11,"div",110)(12,"button",111),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return o.close("by: close icon"),e.KtG(a.reason="")}),e._uU(13," No "),e.qZA(),e.TgZ(14,"button",133),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))})("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.UpdateStatus())}),e._uU(15," Yes "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(10),e.Q6J("ngModel",t.reason)}}function rr(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"h5",106),e._uU(2,"Quotation Expired"),e.qZA()(),e.TgZ(3,"div",108)(4,"div",5)(5,"div",39)(6,"div",26)(7,"label",36),e._uU(8,"Please update quotation. "),e.qZA()()()()(),e.TgZ(9,"div",110)(10,"button",133),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e._uU(11,"Ok"),e.qZA()()}}function ir(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"h5",106),e._uU(2,"Pack Size Mismatch"),e.qZA()(),e.TgZ(3,"div",108)(4,"div",5)(5,"div",39)(6,"div",26)(7,"label",36),e._uU(8,"The indent Pack Size and Purchase Order Pack Size do not match for the following items S.No: "),e.TgZ(9,"b"),e._uU(10),e.qZA()()()()()(),e.TgZ(11,"div",110)(12,"button",133),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("by: close icon"))}),e._uU(13,"Ok"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(10),e.Oqu(t.packSizeArray)}}let Ce=(()=>{class i{constructor(t,n,r,o,a,s,m,p){this.modalService=t,this.fb=n,this.purchaseOrderService=r,this.route=o,this.router=a,this.quotationService=s,this.datepipe=m,this.authservice=p,this.ListOfSupplier=[],this.purchaseOrderForm={},this.lstpurchaseOrderItems={},this.FormChanged=!1,this.FromDate="",this.ToDate="",this.IndentNo=[],this.LocationGuid=[],this.SupplierGuid=[],this.modelChanged=new de.x,this.SelectedIndentItem=[],this.purchaseOrderDetails=[],this.PurchaseOrderItemDetails=[],this.quantity=[],this.index=0,this.isReadOnly=!0,this.QuotationItemlist=[],this.allcheckbox=!1,this.isUrgent=!1,this.recallReason="",this.IsReasonQuotationNo=!1,this.lstQuotationNo=[],this.body={PurchaseOrderGuid:"",ApprovalType:"",Reason:"",UserGuid:"",ApprovalPhoneNumber:"",ApprovalEmail:"",ApprovalName:""},this.UnparsedHtml='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Purchase Order Report</title><style>table{border-collapse:collapse;border:1px solid #000}table td,table th{border-bottom:1px solid #000;border-right:1px solid #000;padding:5px;text-align:left;word-wrap:break-word;word-break:break-all;font-size:10px}table tr:last-child td{border-bottom:none}p{margin:0}</style></head><body><table style="text-align:center;table-layout:fixed" width="100%"><tbody><tr><td><div style="height:28px;display:flex;align-items:center;padding:20px 0"><img data-v-0e549244="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATQAAAApCAYAAAC7vtVuAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABjRSURBVHgB7V0JfBRFuv+qejLhVCEhmYC6uLjiqqjrXrqX6O4+j0VXSCKgqyIqHpCIiteu+8Tdt15vVUiCaLzwQMEceKOAireu+lA5XM9FBSYTElAChGSmu97/65lMeiY9PT1Dghr7//t1pru6uqq6uuqr76wI8vCtQ1FJ+RJF6vep7gtNOyC4cNb75MHDdwySPHjw4KGXwCNoHjx46DXwCJoHDx56DTyC5sGDh14Dj6B58OCh18AjaB48eOg18AjaTmL4pEl9qIdwQOlMP+0C9OQ7ePCwKyGGFJf/QPbzbwjd/89tlAWGjZ2aZ/i0/sGais8pS/CEWjtv3g63+QuLy04Qgg5wyqMrUb+xruKj5PSicVMPU1L+3ulZEvR6Q03lC3Z3AiXTjsU6MIZIjcb1XjgGcnU4NuJYjWOxEKImm/4IFE89kIQ8DafH49gHxwAcO9Cej5WhHhVSzEa7Nu6sH1phSflvJakJiui3uByKIxcHf/8VSlHNwO10+8eLK9uKSssvVkrl2JWhhNoRqqmaTR48fIMgAqVlb5OiQ3H+EX7fUUIs8+n6ovWL5jQ7PjllSk5Rc5+5GNiTcKWRUC9qETUu7XMUJSqkacdhshyCy4NxjOgzoGWgW6IGonImmn63YyZFNzfUVV7S5dnisltBIM53fFTRiaG6ysetaUXF044xBF0vSBxK6dGO+quF339N8KGbmtJlLhozpZ/q478e73QBcV+mxma07QwpRFk2BA0Eam/0+a04/QM542Oh1AkYC2/hvH+qtjTUVg4mDx6+QcBCTXtTVPQciYk+XpC6Q9dkMFBStpg5IWJ+xQaB5j5TQMzOoo4JqMRvdClvSVVRYML04SAmN6LcT8EhvY2J9T9ILjXrJfJt37LHUHKJ9lxRh5/tabKV2rVdSPpFmudaZVvbs9ZH0ObLMbmfcknMGH7UPE2F21eAEP7EKWP+iZcNVH39i1FNGTkTM8YgcKZ1IGYHU4YYNn7qfuDyXqb0xIyxL953OfF7ePDwLQITsoE26SxmHIvJ8xgm878KSqd25QaE8auuaXRkchK4se+hjLsoon+I+5dSVJTqAp/QdyeX2DS/cgso6GOOmQTtVVh84c+sSYNPLdsNHM5Bzo/RkuAT1R3EUoAIMycI7ikrfeOeTBjQjp+nqk7zt9byYkDuwd+mMIP8tGfpRYP1iFzGfZLBY4Wxujx4+NaAJ6lKk+cnUsklmNj3MTfRkQhu5dMuOQV9Yr0EITsd3NhKnE6mNJNDN0SYMoGS96fLIoRRar3ObaPDKQ0XZAgVFzWLSsr+gneaRDuH/mjHIyzuJd8oLJ1WDgL6X9TDiKjI3AyJmQcP30pIxUpnNxB0ms/f+nL+hGmmaGjo4dmC9W6d+EoZ8ko+YetcYUnZAzi9l+w5wC4wJLVRBmhoHryEfxwzKTqZLGKnIpFO3DQMMp7kE4iK+6NvrqbuQQAidqU1gfVmQom/Ug8DhPTH+DmZPHj4DkBitv8ng/wH+yL0UsHECwtDi25r1ITvEOjRToUYd5Yu9P1DdbPfYGPBJtX8CMo9NYNy9d23q8ysgstnRkBwFjjmSRI70aZ0BO2NjTW3mkQSouIN+PFR9+FEcHy/7riAEWASfvKoh2Eomk4ePHxHwBP2Yxw/cv+I+L4MG7VUWjp6Xc0trUh40Ho3sMl/E36Oo8zwObsJUIaQhnE/RFrHCRsTO9+gmTOlWtX8M6e84OBMcROW3yG4GEPOMHAsgRFlBYhGnhCC9Yz7OJdviq8vxVqWrnzGc1gwqqUSG3C+N56fit8jyC3wzmJVczojAIoV8xTp9VJoXyqDDoHFmnWd36NuQMwVJQWnK7ai9rcjStY31c8K2uXAIjBOWcR+Q9emN9bP6qruYKv7ptx7lXURUvSFnaU7GYVjzyuAMnMaHmB3mX0pagzhBfYNLIJ3BmsrX7JtW2n5WHDeE6OvQs831FTOTSi3pPxsjI+4SgGW/NNtLfn4ToWrmyYIJVGWYo56CI5NONZgTNbnCO3O2FyjFO34FdrB34wX7N34vaESWm5IY3aopmplvD2l02D0E64YDSG1y9lSzm5Zuk/eE7+h1KKG2qp77J4pHFt+kNB4jKqjcLknRd2Z1kISeQptqUZbbJmnoomX5MOAdgVO/0jRcbcJ/Yl3V3eGDsxfgP4xyCXw8cWa9Gq0LjiwwDc0v5EohE7aR+pqr2D9nBdB5DQooY6xt4s6Yg1lAdT5f9DT8QcblTJTVOy8tODd5lHQnjkaHoTSo4YGQxyPCycjgA4CNiZYU/F0R8K+x5XltvRXD2HAjHV4jieMQD+xdfmX5IyHGw7Km5jwMUfPXFiU31yroh8+LQpWbj4ItQ1yyiOUuiRYV2m1Tr+MAbaQwu2vop4f0M5CCJ6cpfY3mZbSmTAI3YhJeS3681pKGowY1PuCXT6h41qj8Ey7koqa/UeD8E1MrJvU0AkXzNqw4NYvKAVAdCawZR81DUi6xdb3kWjM6dAfL/TnRs7//MG5m60ZDKV+KDreTdHYwnFlK0L1la/Hq1fqMP7aHdfbtvWb3KXdMJqp1c31eMfDkl69gA+0bTR0oDMC4y4saaif/Wby84GSaRfE1BnS8t4j0G8jQEhOw+J8LgjtvGiyGIkqTiA3MIwbo2XJvonPiA+75AVBDqxqxrcziWryvDkYi/LBaMtFWJyuwOLAvovxFy0YXzYCxGw5RQlgBwqRoxDtPQrljlenzTjFrZ+sRK8/TxkCH/Hsxodmh0wOQIl7lJB38ISmmhpdSHEKsR9WJuUp9Sxlj/nk3Ni98FF/Kn3pxE31aUPdnNWxBo1yzivusBIzBnOYfSM+HrBbHR4MQFwvGEJDeJLv5pCv1ciR5V1WJojZYZ9iXzWdXEATxr5psrwXHJXfxTnW9J0T4nLadejHbjxYnO6kLGEI24VE6GEt5QKDcTEJBIMljAHkBEHj29u1xWkiKnxCqvlWw1k6mH6BUr6GyXtYmqx7Qxx5AQTzcGsiu+KgcbMotQXej7LvxHs6SiY7i8JVzbfh53Jy9gTIBRW7JVBSnsCtS4OwmCQQs2ScKFrbbiCXkA0b816hdMr1RDwMKlvPJ0WrNzH7eiQ++H4t/cXFnIaJzo66mXiQw5ZAj1CW8AkfGx+cJ7hSpUo5GwQUyUc7zyngnJeetktf+8isL8ElvOv0LO0wApohnHVnglaZC4YNmhZUbcCC8im5gXLW0WExej4lO+/LeYl6Bpt58UDb1uI8knRvclFx2TmUKXhhxcC3uyUEldils9EHbeCJaJUnWMzjb3s3R4uQlWVStFvrV7ulWSDE97Wc7f8kd8A6bjzMTbGk8Th+DZWxMe05HFYxs6+QVGclmBFDjCOr9wDEXrTzb3ihVy3PNYNbi45npdjJ+wPLYWUJtybc0/V0fp4mCovLJqK+xG8W/ba1+GVPhCTduPpD4WkzTGdt1sUjz2jLzRAWtn/gRVik7VBBQaMDwoxvTC4gedVHAfeRO4AumA6xxOIlKv9Lxw2sdDOGlF5grnSGX7IerdVlmc+nkq3dALqF9fhZ7phJiRJBhjOHJown4qdCOMY2SkPfnLKY6KRIXY3AwFRmqFHqPEp86XQfA9Sxjng+6VyPEkbK9xgUGbiFonrC7oWiSuhgRkC3tQ9Hh6C//mqtBwvCzExjWIe+18R6xaLOKsjaf7/ssMwnNEOYFmxr/9TCsPW9htrK43CcBTENZaqjeXLC6HVhQ177IaFFFasoDTB2poBYFqfLhzxQG4hO/0TovQwlD0Pdv0D/TMLvb7FYs8j/luWxoZq/tczyEgn+iJo0zkO/Xh08KO/XGIiPYxzN7hPRRmJ+maoUlHsryt2/46CEOSqWW++xOodcACvJNdZr6Pz+3DAqbwTKKEVbTm9oymPRlxmcBtCOs6FG+XmH+CgiOovV1gVlXqiu6qqG2orJyHsGSnuDDHl4qLZyils9mkn1IoacRS4IECbjsx1KxiIq4hVxpOX2YEmSIwcoyl2IBeQC6IBraWch6IE094fz6kkp20Bfhga1v2RJ2OhQGgiFOChlTWkcdxVpjcqfs8k5j/ohUQpNJOspSexPLpCe8ImU8bBNkWZuQ49uXsAKcnD7WCBFtSV56CbVlM4anQCIm+MSU8R/Wy6kT0+8b6pHSFh1SR8P2EZ/goU7QV0AArCcJ2eorrKCqqtd+0nCQj4Xi3vAOZdM0CtCaT6+sW72e9Y0XqwjPsX60rj+CIMiznFKIRJ0g3pEPALx8vxBqzcMbDgw76RgXcV0lhqohwD9+agEPasQdaHaiusSiA8YpuCowRdH2vvuB9pxl/WeL6LY2GUlVOVFxeWz2JCEvAvR/0fY6Q2dYA5YtjCho25JlxmNr4+fG2p88n0o8c6O3xdGejFS0DPogJ3Rn5nQSa8lZ91VOjxpHbAgBF845lbi0g622YpAcfnp5GzpDPs1EdT1dmb9nVacPaFAPcXuRsAoOg8/rqIqlC4a02Q5yRS9bKBJcRntKgiVYDUD93QIZQKhTrJcNYaaBrO1sVNkV4li59YBNIIsMaoY109YrewwFJQVFk+73TxWNs2Nn5tHmRul+hCNtHnMrqXKAA7E+o7rGmvmvGaXj1UMaN8rlqRRHeIX6lhI1nEvxA/xMrfmqtxgYGXzgzA4ZBKBkg0SdM142Udtc4GINT12Y0tycizu20on+qJfLoQhYhX0qW9iPl2Q6U4w8RU4d0DL3yFQOv6nIKEbT/EvO4Wi9V3dAcCddEwQ2dq+jLrqSKxoQXnnUjeAV1awtY9RtrBEBzCkUkuc89NwsaNtWcG4st9xWBHvWIIPcAnKuY2c8Qqb32OcwGqnjKB2VVhtE/oYH/hk1HE9uURYa+PVzUm/6Ac3UWe6VsTA4h4UtzMxsCbSLkJE1xIWEIjke7h8lIaVTj80kfsWT0bVKMqq5/y1Vew0lEgqPzHqRQjjWBYd7Q+VWoEPsdFyfgz+OFm844sSCPhn5ASl1lqufMyB8YmpbhGme9G6pCf6siEDBocXMC4f5ZA/6gFAoZ9QLhiBjHeYgUjMUp3d3P0JBkLVjq0DP8qEMMcJGrP/oLDMmqfSqzRDro52fN8+XEEqy5DpgxaLh/wwRR5ICeKMeHndAUlpQ6FSINw37HvGmhCsq3qbuigzk6DocClpKUzqzZpQ/J6sDHZcTRJXMLU8Td49UMcTGJCf4Xi1sGTaOnxgXpGdLXIWbK6p/go/76TJdgBWxJWB4mlrQEBf26SawdWpq4mycL7JElILD7dew0DjSkfI0A09gWgIFY30AFV6wlqFL0JxLk7T5ObEZ9RwcgkQ2y0Od5l7tpbtFHO72VLmCHKqUwirMSKM7xpvA29zBaIATkldjo6zm28n+ttMS2i3wxAyWZzdhzIEi8TQt/2Rd7ghlpS6LsB7gjAvYsbBTXkJOhJM5H9jZWb23M7nI95ZoMSpzcBC/DSeT9h2MB4X5bCGLqJuRJCCSykza60JCAUv2OgZ0L/i79S92GD0zb0jXoEuWW/kxgGQY0CPgDg/jLIAqNIdrrJFxRV2C3C9SUB3QRoyYTsndMrbrh8WdFLitShm0VAYSW4cQsTFzkHGHhxzbBWBSq3WQ6Xk0zB4VfNBSQYn6E9TqiMMEswpuYzMUFale4D3qLPLxX6elBjhsoKSxk27pu8zYJuYDSX8SE1o7CTPRjmL6xTUQ6butXshlZG0WCp7f8MpU3JMi2YKDCqdsjssuJ+AsI0ROf4AGw9MS3gnBocpfCy5aVNyApRxz0FDyZ6+yYrx+KTHYBmZqkD0dFw3YLOaRdDYcxrqKuZQd6OmRkflD2b6mGHQ43bpIRFkvY77iZUGWGWvsDoHmhYzoRZTD0MTPrZgb6BvIDgiAxP5ZhClP8UTYVVsbBr8LzfPQ/HOnEvCVkoYfxNZNMQ4S9RBKvoNRwTw6ZqambxfXafuRtBevtwd93ToRaHXrYS17Vwo6q/GvXxLKRHh8y93ahMm5X0oeyGlR0IeWJPms8e/NW1o6YUjoUrh8Rnn/PFu8ef4faBrvcMQ9FZLf3NHGFpfM+sdtGEGJeqm+g0PD3PtH+cWzACxi1E8QYnjoa64wWqlZh1YoDm3WoaND3FvRoIFmyMkissmQ+f3AWjFI0z02AeSjQdCyKnWuiDeutphxjZWkS0LGCwHayTv4kbGWvtVZ7uV084NVr8a6yr4gTJoUqi+6nXqIWhSu19X+sUZPSSVLUFjAhmZMO1EX0S8Qc6Of2mBSTaroaaii0is6eJcXZp+az22USLr7ApKp06SSrJYvcvEyJQQdBlEaHY94GiJ3UUSkwqd3pVRHVh6aEqOI/fA8Mhhru12vjB8dI3Uid0r+kUrVsWite1IWNmWGEI1gnDshTTowTpFfBCXe91s2NlH187boem/cNrhBBa8xeiH5TgdHUsqBEf4IkT/f6PuD9ErexvKYGJt5az+A0OAGV7FLlJCaatUNEyKP+x0qCVG4/clSBc8nqzRJC1rD91jS/benqmhlLgK39BSsroMaovJRaVl76BtrTu2EvdDzB9S/e8mo2kyFo6f8uIeWNVcgXsm4ULeQhC999Enj+Nii1LG8dbhCjXEejftSWmW5yDthpqqMSiS9QIcZ2eNtXTS4+wRZ2+V+cw2vPB1PuH7kTUspCfAqxN+VmbwyHtOPnCmhUkXx8UcBbMCiy0h0TDD7t76+sp1iowziDLbaSRTwIK2FGNjJn0zwNwGh2PZibY3gTty5e4ThUgQN3nhwM8NSUdn31qcbBsXVn4C6nkmJeps8pmzY+LABI4Sx/nHObnhS8kFWIVhKHPLLEeVgpEjJySNLVP0j4W2sehoJWZbDJ3GdsR0xgxhCRJJdANSURbbGMLiYyfmZxIPmQnwvVgvfFNScj50Nr+LhUwlOncLeXfcD80weK9B6+LF4+J03hw1yc1qY3sfZevMnox0fkYqWFt5Oyx6zNrP62yU495mcbIK/dQz+GgjgrVVf3YKru1eqAdc57S3riSARUPh97Ne8EnKDC28GLDoYorDqcqvnfMElNI8gDe7LJfF1JcpQ0B5/Dd8EZ6Qrvypoh7blNX/mcgCm9AH58dEJVeIWS0tjqnq/VBt5UUo4wrrgXde2pmFjuoQOxlQfTyMVJ50Iae62PMeC/Lo5FhOJzTWVy4DwalwzPPQ7JDhl4ebHv7OWIM8RzQuqkyIQgnm7bg0FlWQEtBjv9Keq3o0jA39zOOKg8udFubt4BzPaaitiEdSsPMuvglz2U5RCVvw3MTopq7p4Wp7nJjFcnk8QVGLQ3a9YwKDGDq7P/QAIj56ABYtdtZNqwQFwX2cXCAmZowJgKVH514pomJCKm/2Deif+SCCN7oRT8zy66qewUTbHyLRP0BkJ5A9B7wF3MN1eZR/c7NqWoDVOOXkkhS2JaA8mKBkfgYTjTkX3h2k6/dnjkHSpaHaqlqIMJNQT6q4XFcOm5qmNkQiVG13D6JVC/rzrXaxY/Hm2uqvbAtQknWN1kgW839W+Nq1YUro8dhPGd/FJOlxYdwCbX1chyiFxuqDuH8ei34QgUZQa/tkSBLMje8H4sFuHfh2agV0OQ/DgMUiVRdui3dawYSMv5tfyoT/p5E7cMsVbVsHCkMpUwe2+zYtnKyYjoW4HR0oLj+eg+thpf0xOqaAI06gG1stSdQHNw5+yFYMr64Owwo2CXq0u2CQYJeSA9BKNh4xYVmNBj4c2pj3QCoRHi80X8Q4OX4Xuzxan8g2vd13X+cz4i27okDUbigaN3UBOvhcqA2OMrf2V6AFgtZyqKBuaPfY7ajC/7sjf9z0fX2SXbjU0RQ1gnF/fYFxukwqNWd9fcU6comsdCpQ5j5GqaP21+HlvtbdUSG/LzVZXmcE0U7++BlvNcL6C83w/QaDYBg+YAEsC0zwN0rpWwWx991syuwAK1HbWgYcSWwClzIPossWKJs+6L+NXshmi6VUMP9blyaPRPl7SikGcpwfJtQKcHJv7kz7PXj4OpHVBoYgFp+kooRpnQR3AVQ0KPZ3znlMY0BWEzfmGPsU9QBi+2U9Qz2MmJd2PXnw0IuQVayecNhRQhi0gr5GgH0tAt95Srp80pvMHjz0OmS3xbRhvMn/D84OIrrtyi4Dh77oSmc/JraQ/AAqvJ+D73LerQEcZnBU/lKqIw8ePPQiZMWhxTZCtHN3COf4Iz0iiqWCoXSOQ+RtltlMznv2p916BnJmRU+ZsT148PD1IfvtYZSNG4NQSzMxbX9NWBPKa5tLHjx46HXImqDBvHxPl0Ql3IR8fJ1oM4RxdiZ7W3nw4OHbg6wJWmxHy3jMnSK1frDIy8DLe5fD4F0wU+075cGDh28/dmpHUqUovi2JIDnLDPr9ZqIZrR3Du2CSBw8eei12iqCF6iqZI2M3jc9UX/83US+1neP7IoY2ij3CyYMHD70aO/ufwXlvs6v4xO3/zetuoAHgCuNhQC1gFTno+APo+JaFw/2W2G3968GDh96J/wfYzdcWpCnwqgAAAABJRU5ErkJggg==" alt="Yoda LIMS"></div></td></tr></tbody></table><table style="table-layout:fixed" width="100%"><tbody><tr><td style="font-weight:700;font-size:20px;text-align:center">Purchase Order</td></tr></tbody></table><table style="table-layout:fixed" width="100%"><tbody><tr><td style="font-size:14px"><b>PO No:</b>%%PurchaseOrderNo%%</td><td style="font-size:14px"><b>PO Date:</b>%%POCreatedDate%%</td></tr></tbody></table><table style="table-layout:fixed" width="100%"><tbody><tr><td style="font-weight:700;font-size:14px">Ordered By</td><td rowspan="2" style="font-weight:700;font-size:14px">Vendor details</td></tr><tr><td style="font-weight:700;font-size:14px"><b>Yoda lifeline diagnostics pvt ltd</b></td></tr><tr><td style="font-size:14px"><p><b>Address:</b>%%StoreLocationAddress%%</p><p><b>Contact:</b>%%ContactPersonNo%%</p><p><b>GST:</b>%%GSTNNO%%</p></td><td style="font-size:14px"><p><b>Vendor name:</b>%%SupplierName%%<p><b>Vendor address:</b>%%Address%%</p><p><b>Contact person:</b>%%PrimaryContactPerson%%</p><p><b>Vendor mobile:</b>%%PrimaryContactPersonMobileNo%%,%%SecondaryContactPersonMobileNo%%</p><p><b>Vendor email:</b>%%VendorEmailId%%</p><p><b>GST:</b>%%GSTIN%%</p></td></tr><td style="font-size:14px"><b>Bill to address</b></td><td style="font-size:14px"><b>Ship to address</b></td><tr><td style="font-size:14px"><p><b>Name:</b>%%CenterName%%</p><p><b>Address:</b>%%BillStoreLocationAddress%%</p><p><b>Contact person:</b>%%BillingContactPerson%%</p><p><b>Mobile:</b>%%BillingMobileNo%%</p><p><b>Email:</b>%%BillingPersonEmail%%</p><p><b>GST:</b>%%BillLocationGST%%</p></td><td style="font-size:14px"><p><b>Name:</b>%%ShippingCenterName%%</p><p><b>Address:</b>%%ShipStoreLocationAddress%%</p><p><b>Contact person:</b>%%shipingContactPerson%%</p><p><b>Mobile:</b>%%ShipingMobileNo%%</p><p><b>Email:</b>%%ShipingPersonEmail%%</p><p><b>GST:</b>%%ShipLocationGST%%</p></td></tr><tr><td style="font-size:14px"><b>Supplier state:</b>%%SupplierState%%</td><td style="font-size:14px"></td></tr></tbody></table><table style="table-layout:fixed" width="100%"><thead><tr><th width="27">S. No.</th><th width="120">Item name/Item code</th><th width="54">Cat No.</th><th width="54">MFD</th><th width="30">Unit</th><th width="25">Pack size</th><th width="30">Qty</th><th width="54">Unit price</th><th width="30">Disc %</th><th width="20">GST %</th><th width="54">GST amnt.</th><th width="60">Amnt</th></tr></thead><tbody><tr id="PurchaseOrderItemDetails"><td>%%S.NO%%</td><td>%%ItemName%%</td><td>%%CatalogNo%%</td><td>%%ManufactureName%%</td><td>%%MinorUnitName%%</td><td>%%PackSize%%</td><td>%%OrderedQty%%</td><td>&#8377; %%BuyPrice%%</td><td>%%DiscountPer%%</td><td>%%CGST+SGST+UGST%%</td><td>&#8377; %%TaxAmount%%</td><td>&#8377; %%NetAmount%%</td></tr><tr><td colspan="12" style="font-size:12px;text-align:right">Total amount in INR : %%TotalPrice%%</td></tr></tbody></table><table style="width:100%;margin-top:5px"><tbody><tr><td>Created by: %%CreatedBy%%</td><td>Checked by: %%CheckedByName%%</td><td>Approved by: %%AppprovedByName%%</td><td>Recalled by: %%RecallByName%%</td><td>Cancelled by: %%CancelledBy%%</td></tr></tbody></table><table style="width:100%;margin-top:5px"><tbody><tr><td><strong>Payment Term :</strong><strong>%%PaymentTerm%%<strong></strong><br><strong>Delivery term :</strong><strong>%%Deliveryterm%%</strong></td></tr></tbody></table><table style="table-layout:fixed;border:none;margin-top:30px" width="100%"><tbody><tr><td style="font-size:14px;border:none;padding:0;text-align:right"><b>Date:</b>%%PurchaseOrderDownloadDate%%</td></tr><tr><td style="font-size:14px;border:none;padding:0;text-align:right">This is a computer generated document, hence signature is not required.</td></tr></tbody></table></body></html>',this.PurchaseViewDetails=[],this.isUrgentControl=new u.NI(!1),this.quotationExpired=!1,this.packSizeArray=[],this.fetch(d=>{this.modelChanged.pipe((0,me.b)(1e3)).subscribe(c=>{this.IndentNo=c,this.GetPOAgainstPIPostDefaults()})}),this.isUrgentControl.valueChanges.subscribe(d=>{this.FormChanged=!0})}ngOnInit(){this.status=this.route.snapshot.paramMap.get("Status")||"",this.PurchaseOrderGuid=this.route.snapshot.paramMap.get("PurchaseOrderGuid")||"",""!=this.PurchaseOrderGuid&&localStorage.setItem("Type","Purchase Orders");let t=this.authservice.LoggedInUser.POROLES.split(",");const n=new Date;this.TodayDate={year:+Q(n).format("YYYY"),month:+Q(n).format("MM"),day:+Q(n).format("DD")},this.Approvalroles=t.filter(r=>"Approval"==r),this.initForms(),this.PaymentDetailForms(),this.addItemslist.removeAt(0),this.PurchaseOrderGuid||this.GetPOAgainstPIPostDefaults(),this.GetLocationsAndSuppliersByDefault(),this.purchaseOrderForm.valueChanges.pipe((0,Ae.x)()).subscribe(r=>{this.FormChanged=!0}),this.role=this.authservice.LoggedInUser.POROLES}initForms(){this.purchaseOrderForm=this.fb.group({PaymentTerm:[null,[u.kI.required]],DeliveryTerm:[null,[u.kI.required]],NFANo:[""],TermsandConditions:[""],Warranty:[""],IsEdit:[""],PendingPI:[null,[u.kI.required]],SuppliersName:[null],PurchaseOrderGuid:[""],UserGuid:[this.authservice.LoggedInUser.UserGuid],FromDate1:[null],ToDate1:[null],IndentNumber:[""],paymentsTerms:[""],AddDeliveryTerm:[""],LocationGuid:[""],Isurgent:[!1],lstpurchaseOrderItems:this.fb.array([this.fb.group({SupplierGuid:[null,[u.kI.required]],VenderNme:[null,[u.kI.required]],IndentNo:[""],ItemGuid:["",[u.kI.required]],ItemName:[""],CatalogNo:[""],ManufactureName:[""],POSize:["",[u.kI.required]],previousPOSize:["",[u.kI.required]],PurchaseOrderUnit:[""],Narration:[""],ItemRate:["",u.kI.required],DiscountPercentage:["",u.kI.required],TaxPercentage:[""],UnitPrice:[""],OrderQuantity:[null],TotalAmount:[""],LocationGuid:[""],DeliveryLocation:[""],IsSelected:[!1],PurchaseOrderId:[""],PurchaseOrderGuid:[""],TaxPerCGST:[""],TaxPerUGST:[""],TaxPerSGST:[""],TaxPerIGST:[""],QuotationId:[""],IsDeleted:[!1],DefaultItemQuantity:[""],InitialAmount:[],ReasonQuotationNo:[""],QuotationNo:[null,[u.kI.required]],latestQuotation:[""],VendorItemName:[""],StockInhandQuantity:[""],SNo:[""]})])})}PaymentDetailForms(){this.PaymentDetailForm=this.fb.group({purchaseOrderGuid:null,BankName:["",[u.kI.required]],TransectionID:[null,[u.kI.required]],TransectionDate:[null,[u.kI.required]],Modeofpayment:["",[u.kI.required]],Remarks:["",[u.kI.required]],PoNumber:[],TotalAmount:[],Dueamount:[],PaidAmount:["",[u.kI.required]],DueAmount:[],status:[""],imageUrl:["",[u.kI.required]],InvoiceNumber:[null,[u.kI.required]]})}get addItemslist(){return this.purchaseOrderForm.get("lstpurchaseOrderItems")}AddItems(){this.addItemslist.push(this.fb.group({SupplierGuid:[null,[u.kI.required]],VenderNme:[null,[u.kI.required]],ItemName:["",[u.kI.required]],CatalogNo:[""],IndentNo:[""],ItemGuid:["",[u.kI.required]],ManufactureName:[""],POSize:["",[u.kI.required]],previousPOSize:["",[u.kI.required]],PurchaseOrderUnit:[""],Narration:[""],ItemRate:["",u.kI.required],DiscountPercentage:[null],TaxPercentage:[null],UnitPrice:[null],OrderQuantity:[null],TotalAmount:[""],LocationGuid:[""],DeliveryLocation:[""],IsSelected:[!1],PurchaseOrderId:[""],PurchaseOrderGuid:[""],TaxPerCGST:[""],TaxPerUGST:[""],TaxPerSGST:[""],TaxPerIGST:[""],QuotationId:[""],IsDeleted:[!1],DefaultItemQuantity:[""],InitialAmount:[""],QuotationNo:[null],latestQuotation:[""],ReasonQuotationNo:[""],VendorItemName:[""],StockInhandQuantity:[""],SNo:[""]}),{emitEvent:!0}),this.FormChanged=!1}removeItems(t){this.addItemslist.removeAt(t)}fetch(t){const n=new XMLHttpRequest;n.open("GET","assets/data/all-items.json"),n.onload=()=>{t(JSON.parse(n.response))},n.send()}openBasicModal(t){this.modalService.open(t,{backdrop:"static",keyboard:!1,size:"md"}).result.then(n=>{console.log("Modal closed"+n)}).catch(n=>{}),this.purchaseOrderForm.patchValue({AddDeliveryTerm:"",paymentsTerms:""})}openExpiryQuotationModal(){this.modalService.open(this.expiryQuotationModal,{backdrop:"static",keyboard:!1,size:"md"}).result.then(t=>{console.log("Modal closed"+t)}).catch(t=>{})}openXlModal(t){this.modalService.open(t,{backdrop:"static",keyboard:!1,size:"xl"}).result.then(n=>{console.log("Modal closed"+n)}).catch(n=>{})}openPackSizeDiffModal(){this.modalService.open(this.packSizeDiff,{backdrop:"static",keyboard:!1,size:"md"}).result.then(t=>{console.log("Modal closed"+t)}).catch(t=>{})}GetLocationsAndSuppliersByDefault(){this.shimmerVisible=!0;let t=this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())&&"00000000-0000-0000-0000-000000000000"==this.authservice.LoggedInUser.LOCATIONSGUID?"00000000-0000-0000-0000-000000000000":this.authservice.LoggedInUser.LOCATIONSGUID.split(",");this.purchaseOrderService.GetPOAgainstPIPostDefaults(t).subscribe(n=>{this.SupplierItems=n.Result.LstSuppliers,this.CenterLocation=n.Result.LstCenterLocations,this.shimmerVisible=!1,this.PurchaseOrderGuid&&this.GetPurchaseOrderDetails()},n=>{this.shimmerVisible=!1})}GetPOAgainstPIPostDefaults(){let t=this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes("ADMIN".toLowerCase())&&"00000000-0000-0000-0000-000000000000"==this.authservice.LoggedInUser.LOCATIONSGUID?"00000000-0000-0000-0000-000000000000":this.authservice.LoggedInUser.LOCATIONSGUID.split(",");this.purchaseOrderService.GetGetPIForPODefaults(this.FromDate,this.ToDate,this.IndentNo,this.LocationGuid,this.SupplierGuid,t).subscribe(n=>{this.ListOfSupplier=n.Result.LstIndentList,this.LstIndentItems="00000000-0000-0000-0000-000000000000"==t?n.Result.lstGetPOAgainstPItItemTypes:n.Result.lstGetPOAgainstPItItemTypes.filter(r=>t.includes(r.LocationGuid.toUpperCase())),0==this.ListOfSupplier.length&&(this.purchaseOrderForm.patchValue({PendingPI:""}),this.addItemslist.clear())},n=>{})}SaveSupplierDetails(){this.purchaseOrderService.SavePurchaseOrderDetails(this.purchaseOrderForm.value).subscribe(t=>{this.router.navigateByUrl("/purchase-orders")},t=>{})}OnSelectSupplier(t){this.purchaseOrderForm.patchValue({PendingPI:null}),this.addItemslist.clear(),this.SupplierItems.forEach(n=>{n.SupplierGuid==t.SupplierGuid&&this.SupplierGuid.push(n.SupplierGuid)}),this.GetPOAgainstPIPostDefaults()}SelectLocation(t){0==t.length&&(this.ListOfSupplier=[],this.addItemslist.clear(),this.purchaseOrderForm.patchValue({PendingPI:""})),this.LocationGuid=this.CenterLocation.filter(n=>t.some(r=>n.LocationGuid==r.LocationGuid)).map(n=>n.LocationGuid),this.GetPOAgainstPIPostDefaults()}selectFromDate(t){this.minDate=t,this.FromDate=t.year+"-"+t.month+"-"+t.day,this.GetPOAgainstPIPostDefaults()}selectToDate(t){this.ToDate=t.year+"-"+t.month+"-"+t.day,this.GetPOAgainstPIPostDefaults()}changeSearch(t){this.modelChanged.next(t.target.value)}SelectIndentsForItems(t){this.allcheckbox=!1,this.selectedPendingPI=t,this.SelectedIndentItem=[],this.QuotationItemlist=[],this.packSizeArray=[],this.LstIndentItems.forEach(r=>{t.some(o=>r.IndentNo===o.IndentNo)&&this.SelectedIndentItem.push(r)}),this.QuotationItemlist=this.SelectedIndentItem.filter((r,o,a)=>o===a.findIndex(s=>s.QuotationNo===r.QuotationNo&&s.ItemGuid===r.ItemGuid));let n=[];n=this.SelectedIndentItem,this.SelectedIndentItem=this.SelectedIndentItem.filter((r,o,a)=>o===a.findIndex(s=>s.ItemGuid===r.ItemGuid&&s.IndentNo===r.IndentNo)),this.lstQuotationNo=[],this.addItemslist.clear(),this.SelectedIndentItem.forEach((r,o)=>{if(0==r.latestQuotationNo||null==r.latestQuotationNo)this.lstQuotationNo?.push({IndentNo:r.IndentNo,QuotationNo:r.latestQuotationNo}),this.addItemslist.push(this.fb.group({SNo:o+1,IndentNo:r.IndentNo,ItemName:r.ItemName,CatalogNo:r.CatalogNo,ItemGuid:r.ItemGuid,ManufactureName:"",LocationGuid:r.LocationGuid,DeliveryLocation:r.Location,POSize:"",previousPOSize:"",PurchaseOrderUnit:"",Narration:"",ItemRate:"",DiscountPercentage:"",TaxPercentage:"",UnitPrice:"",OrderQuantity:"",TotalAmount:"",SupplierGuid:"",VenderNme:"",TaxPerCGST:"",TaxPerUGST:"",TaxPerSGST:"",TaxPerIGST:"",QuotationId:"",DefaultItemQuantity:"",InitialAmount:"",QuotationNo:r.latestQuotationNo,IsSelected:!1,ReasonQuotationNo:"",latestQuotation:r.latestQuotationNo,VendorItemName:r.VendorItemName,StockInhandQuantity:r.StockInhandQuantity}));else{let a=n.filter(s=>s.QuotationNo===r.latestQuotationNo&&s.ItemGuid==r.ItemGuid&&r.IndentNo===s.IndentNo)[0];this.lstQuotationNo?.push({IndentNo:a.IndentNo,QuotationNo:a.latestQuotationNo}),this.PurchaseOrderGuid||this.addItemslist.push(this.fb.group({SNo:o+1,IndentNo:r.IndentNo,ItemName:r.ItemName,CatalogNo:r.CatalogNo,ItemGuid:r.ItemGuid,ManufactureName:a.ManufactureName,LocationGuid:a.LocationGuid,DeliveryLocation:a.Location,POSize:a.PackSize,previousPOSize:r.PackSize,PurchaseOrderUnit:a.PurchaseOrderUnit,Narration:a.Narration,ItemRate:a.QuotationRate,DiscountPercentage:a.DiscountPercentage,TaxPercentage:a.TaxPerIGST?a.TaxPerIGST:a.TaxPerCGST+a.TaxPerSGST,UnitPrice:a.UnitPrice,OrderQuantity:a.ReqQty,TotalAmount:a.UnitPrice*a.ReqQty,SupplierGuid:a.SupplierGuid,VenderNme:a.SupplierName,TaxPerCGST:a.TaxPerCGST,TaxPerUGST:a.TaxPerUTGST,TaxPerSGST:a.TaxPerSGST,TaxPerIGST:a.TaxPerIGST,QuotationId:a.QuotationId,DefaultItemQuantity:a.ReqQty,InitialAmount:a.UnitPrice*a.ReqQty,QuotationNo:a.latestQuotationNo,ReasonQuotationNo:"",IsSelected:!1,latestQuotation:a.latestQuotationNo,VendorItemName:a.VendorItemName,StockInhandQuantity:a.StockInhandQuantity}),{emitEvent:!0})}}),this.SelectedIndentItem.forEach((r,o)=>{if(o<this.addItemslist.value.length){const a=this.addItemslist.value[o];r.PackSize!==a.POSize&&this.packSizeArray.push(a.SNo)}}),this.packSizeString=this.packSizeArray.join(", "),this.packSizeString&&this.openPackSizeDiffModal()}ItemQuantityCalculation(t,n){if(this.PurchaseOrderItemDetails.findIndex(o=>o.ItemGuid===n)>=0){this.SelectedIndentItem=this.PurchaseOrderItemDetails[t];let o=this.purchaseOrderForm.get("lstpurchaseOrderItems")?.value[t].OrderQuantity,a=this.SelectedIndentItem.UnitPrice*o;this.addItemslist.at(t).patchValue({TotalAmount:a},{emitEvent:!0})}else{let o=this.purchaseOrderForm.get("lstpurchaseOrderItems")?.value[t].OrderQuantity,a=this.addItemslist.value[t].UnitPrice*o;this.addItemslist.at(t).patchValue({TotalAmount:a},{emitEvent:!0})}this.allcheckbox=this.addItemslist.value[t].IsSelected=!0}onUrgentChange(t){null!==t&&(this.isChecked=t)}SavePurchaseOrderPOAgainstPI(){this.shimmerVisible=!0,""==this.PurchaseOrderGuid&&(this.purchaseOrderForm.value.lstpurchaseOrderItems=this.addItemslist.value.filter(t=>!0===t.IsSelected).map(t=>t)),this.purchaseOrderService.SavePurchaseOrderPOAgainstPI(this.purchaseOrderForm.value).subscribe(t=>{this.shimmerVisible=!1,this.router.navigateByUrl("/purchase-orders")},t=>{this.shimmerVisible=!1})}addOtherPaymentTerm(){this.purchaseOrderForm.patchValue({PaymentTerm:this.purchaseOrderForm.value.paymentsTerms},{emitEvent:!0})}addOtherDeliveryTerm(){this.purchaseOrderForm.patchValue({DeliveryTerm:this.purchaseOrderForm.value.AddDeliveryTerm},{emitEvent:!0})}OnItemsSelect(t,n){this.PurchaseOrderGuid?this.PurchaseOrderItemDetails.forEach(o=>{o.ItemGuid==t.value.ItemGuid&&0==t.value.IsDeleted&&0==t.value.IsSelected&&this.addItemslist.at(n).patchValue({IsDeleted:!0,IsSelected:!1}),o.ItemGuid==t.value.ItemGuid&&1==t.value.IsSelected&&1==t.value.IsDeleted&&this.addItemslist.at(n).patchValue({IsDeleted:!1,IsSelected:!0})}):this.addItemslist.value.forEach(o=>{if(o.ItemGuid==t.value.ItemGuid&&1==t.value.IsSelected){const a=this.addItemslist.at(n);a.get("QuotationNo")?.setValidators([u.kI.required]),a.get("QuotationNo")?.updateValueAndValidity(),a.patchValue({IsSelected:!0})}if(0==t.value.IsSelected&&o.ItemGuid==t.value.ItemGuid){const a=this.addItemslist.at(n);a.get("QuotationNo")?.clearValidators(),a.get("QuotationNo")?.updateValueAndValidity(),a.patchValue({IsSelected:!1})}}),this.isChecked=this.addItemslist.value.some(o=>o.IsSelected);const r=this.addItemslist.value.every(o=>o.IsSelected);this.allcheckbox=r}handleCheckboxChange(t){this.addItemslist.value.forEach(n=>{1==t.target.checked&&0!=n.QuotationNo?(n.IsSelected=!0,this.isChecked=!0,this.allcheckbox=!0):(n.IsSelected=!1,this.isChecked=!1,this.allcheckbox=!1)})}GetPurchaseOrderDetails(){this.shimmerVisible=!0,this.purchaseOrderService.GetPurchaseOrderDetails(this.PurchaseOrderGuid).subscribe(t=>{this.purchaseOrderDetails=t.purchaseOrderDetails;const n=parseFloat(this.purchaseOrderDetails.POTotalAmount).toFixed(2),r=parseInt(n)-this.purchaseOrderDetails.DueAmount;this.PaymentDetailForm.patchValue({TotalAmount:n,Dueamount:r}),this.PurchaseOrderItemDetails=t.POItems.filter((o,a,s)=>a===s.findIndex(m=>m.IndentNo===o.IndentNo&&m.ItemGuid===o.ItemGuid)),this.PurchaseViewDetails=this.purchaseOrderDetails,this.purchaseOrderForm.patchValue({Isurgent:this.PurchaseViewDetails.Isurgent}),this.QuotationItemlist=t.oItemQuotations,this.GetSelectedPurchaseOrder(),this.allcheckbox=!0,this.shimmerVisible=!1},t=>{this.shimmerVisible=!1})}GetSelectedPurchaseOrder(){this.addItemslist.clear(),this.purchaseOrderForm.patchValue({PaymentTerm:this.purchaseOrderDetails.PaymentTermCondition,NFANo:this.purchaseOrderDetails.NFANo,TermsandConditions:this.purchaseOrderDetails.TermandCondition,DeliveryTerm:this.purchaseOrderDetails.PaymentDeliveryTerm,IsEdit:!0,PurchaseOrderGuid:this.PurchaseOrderGuid},{emitEvent:!0}),this.PurchaseOrderItemDetails.forEach((t,n)=>{this.addItemslist.push(this.fb.group({SNo:n+1,IndentNo:t.IndentNo,ItemName:[t.ItemName?t.ItemName:"",u.kI.required],CatalogNo:t.CatalogNo,ItemGuid:t.ItemGuid,ManufactureName:t.ManufactureName,LocationGuid:this.purchaseOrderDetails.LocationGuid,POSize:t.PackSize,PurchaseOrderUnit:t.MinorUnitName,Narration:t.Narration,ItemRate:t.Rate,DiscountPercentage:t.DiscountPer,TaxPercentage:t.IGST?t.IGST:t.SGST+t.CGST,UnitPrice:t.UnitPrice,OrderQuantity:[t.OrderedQty?t.OrderedQty:"",u.kI.required],TotalAmount:t.NetAmount,SupplierGuid:this.purchaseOrderDetails.SupplierGuid,VenderNme:this.purchaseOrderDetails.SupplierName,IsSelected:!0,DeliveryLocation:this.purchaseOrderDetails.LocationName,PurchaseOrderId:t.PurchaseOrderId,PurchaseOrderGuid:t.PurchaseOrderGuid,IsDeleted:t.IsDeleted,TaxPerCGST:t.CGST,TaxPerUGST:t.UGST,TaxPerSGST:t.SGST,TaxPerIGST:t.IGST,QuotationNo:t.QuotationNo,ReasonQuotationNo:t?.ReasonQuotationNo,VendorItemName:t?.VendorItemName,StockInhandQuantity:t?.StockInhandQuantity},r=>{})),this.quantity.push(t)},t=>{}),this.FormvalidatinRemove(),this.FormChanged=!1}getQuotationByGuid(t){this.quotationGuid=t?.QuotationGuid,this.quotationService.getQuotationsByGuid(this.quotationGuid).subscribe(n=>{if(this.quotationDetails=n.getQuotationsResponses,console.log("quotationDetails",this.quotationDetails),this.quotationDetails=n.getQuotationsResponses.filter((r,o,a)=>o===a.findIndex(s=>s.ItemGuid===r.ItemGuid)),this.quotationDetails.length>0){const o=n.getQuotationsResponses[0].LocationName.split(",").filter((a,s,m)=>m.indexOf(a)===s).join(", ");this.locationList=o}if((this.supplierGuid.length>0||this.itemGuid.length>0||this.fromDate||this.toDate)&&!t){if(0===this.locationGuid.length&&null!=this.quotationsList){const r=n.getQuotationsResponses.map(a=>a.LocationGuids).flatMap(a=>a.split(",")).map(a=>a.trim().toLowerCase());let o=this.defaultData.Result.LstQuotationCenterLocationType.filter(a=>r.includes(a.CenterLocationGuid.toLowerCase()));this.locations=o,this.itemOptionsOrders=this.filterItemOptionsOrdersByStatus()}}else t?(this.locations=this.locations,this.itemOptionsOrders=this.filterItemOptionsOrdersByStatus()):this.locations=this.defaultData.Result.LstQuotationCenterLocationType;(this.supplierGuid.length>0||this.locationGuid.length>0||this.fromDate||this.toDate)&&!t?(0===this.itemGuid.length&&null!=this.quotationsList&&(this.allItemsList=this.quotationDetails.map(r=>this.itemsList.filter(o=>o.ItemGuid===r.ItemGuid)).flat().filter((r,o,a)=>o===a.findIndex(s=>s.ItemGuid===r.ItemGuid))),this.allItems=this.allItemsList):t?(this.quotationDetails=n.getQuotationsResponses,this.quotationDetails=this.quotationDetails.filter((r,o,a)=>o===a.findIndex(m=>m.ItemGuid===r.ItemGuid||m.ItemName===r.ItemName))):this.allItems=this.itemsList.filter((r,o,a)=>o===a.findIndex(s=>s.ItemGuid===r.ItemGuid||s.ItemName===r.ItemName))},n=>{this.globalService.stopSpinner(),this.noQuotationFound=!0})}FormReset(){this.purchaseOrderForm.reset(),this.addItemslist.clear(),this.FormChanged=!1,this.allcheckbox=!!this.PurchaseOrderGuid,this.addItemslist.value.forEach(t=>{t.IsSelected=!1}),this.PurchaseOrderGuid&&this.GetSelectedPurchaseOrder()}FormvalidatinRemove(){let t=this.purchaseOrderForm.get("SuppliersName"),n=this.purchaseOrderForm.get("PendingPI");t.clearValidators(),t.updateValueAndValidity(),n.clearValidators(),n.updateValueAndValidity(),this.isChecked=this.addItemslist.value.some(r=>r.IsSelected)}get c(){return this.purchaseOrderForm.controls}get PendingPI(){return this.c?.PendingPI.value||""}AddReasonForQuotationNo(t,n){let r=0;if(0==r)for(let o=0;o<this.lstQuotationNo?.length;o++){const a=this.addItemslist;let s;if(a&&a.length>n&&(s=a.at(o).get("QuotationNo"),s)){const m=s?.value?.QuotationNo;m&&s.patchValue(m)}s&&(s?.value==this.lstQuotationNo[o]?.QuotationNo?this.IsReasonQuotationNo=!1:(this.IsReasonQuotationNo=!0,null!=this.addItemslist.value[o].ReasonQuotationNo&&""!=this.addItemslist.value[o].ReasonQuotationNo?this.IsReasonQuotationNo=!1:(this.IsReasonQuotationNo=!0,r++)))}1==this.allcheckbox&&(this.addItemslist.value[n].IsSelected=!0)}ChangeDiscount(t,n){let r=this.addItemslist.value[n].TaxPerIGST>0?this.addItemslist.value[n].TaxPerIGST:this.addItemslist.value[n].TaxPerCGST+this.addItemslist.value[n].TaxPerSGST;const o=t.value.ItemRate-t.value.ItemRate*Number(this.addItemslist.value[n].DiscountPercentage)/100,s=o+o*(r/100);this.addItemslist.at(n).patchValue({UnitPrice:s,TotalAmount:s*this.addItemslist.value[n].OrderQuantity}),this.PurchaseOrderGuid&&(this.PurchaseOrderItemDetails[n].UnitPrice=s),this.allcheckbox=this.addItemslist.value[n].IsSelected=!0}removeSupplier(t){this.SupplierGuid=this.SupplierGuid.filter(n=>n!==t.value.SupplierGuid),this.GetPOAgainstPIPostDefaults();for(let n=this.selectedPendingPI?.length-1;n>=0;n--)if(this.selectedPendingPI[n].SupplierGuid==t.value.SupplierGuid){let r=this.selectedPendingPI[n].IndentNo;const o=this.purchaseOrderForm.get("PendingPI")?.value,a=o.findIndex(s=>s.IndentNo===r);-1!==a&&o.splice(a,1),this.purchaseOrderForm.get("PendingPI")?.setValue(o)}if(this.addItemslist.length>0)for(let n=this.addItemslist.length-1;n>=0;n--)this.addItemslist.at(n).value.SupplierGuid===t.value.SupplierGuid&&this.addItemslist.removeAt(n)}onSelectClose(){this.addItemslist.clear(),this.purchaseOrderForm.get("PendingPI")?.setValue(""),this.SupplierGuid=[],this.GetPOAgainstPIPostDefaults()}OnSelectQuotation(t,n){this.packSizeArray=[],this.packSizeString="";const r=Q(),o=Q(t?.EntryDateTo,"MM/DD/YYYY HH:mm:ss");this.quotationExpired=!1,o.isBefore(r)&&(this.quotationExpired=!0,this.openExpiryQuotationModal());let a=this.addItemslist.at(n);t.PackSize!=a.value.previousPOSize&&(this.packSizeArray.push(n+1),this.packSizeString=this.packSizeArray.join(", "),this.openPackSizeDiffModal());const s=this.addItemslist;if(s&&s.length>n){const p=s.at(n).get("ReasonQuotationNo");p&&p.value&&p.patchValue(null)}let m=0;for(let p=0;p<this.lstQuotationNo?.length;p++)if(0==m){const d=this.addItemslist;let c;if(d&&d.length>n&&(c=d.at(p).get("QuotationNo"),c)){const P=c?.value?.QuotationNo;P&&c.patchValue(P)}c&&(c?.value==this.lstQuotationNo[p]?.QuotationNo||null==c?.value?this.IsReasonQuotationNo=!1:(this.IsReasonQuotationNo=!0,null!=this.addItemslist.value[p].ReasonQuotationNo&&""!=this.addItemslist.value[p].ReasonQuotationNo?this.IsReasonQuotationNo=!1:(this.IsReasonQuotationNo=!0,m++)))}if(null!=t)if(this.PurchaseOrderGuid){let p=this.QuotationsForItem.filter(c=>c.QuotationNo==t.QuotationNo&&c.ItemGuid==t.ItemGuid),d=this.addItemslist.at(n);p.forEach(c=>{d.patchValue({ManufactureName:c.quotationManufactureName,POSize:c.PackSize,PurchaseOrderUnit:c.MinorUnitName,Narration:c.Narration,ItemRate:c.QuotaionRate,DiscountPercentage:c.DiscountPer,TaxPercentage:c.IGSTPer?c.IGSTPer:c.CGSTPer+c.SGSTPer,UnitPrice:c.ItemUnitPrice,OrderQuantity:c.OrderedQty,TotalAmount:c.ItemUnitPrice*c.OrderedQty,SupplierGuid:c.SupplierGuid,VenderNme:c.QuotationSupplier,TaxPerCGST:c.CGSTPer,TaxPerUGST:c.TaxPerUTGST,TaxPerSGST:c.SGSTPer,TaxPerIGST:c.IGSTPer,QuotationId:c.QuotationId,DefaultItemQuantity:c.ReqQty,InitialAmount:c.UnitPrice*c.ReqQty,QuotationNo:c.QuotationNo,VendorItemName:c.VendorItemName,StockInhandQuantity:c.StockInhandQuantity})})}else{let p=[];p=this.LstIndentItems.filter(c=>c.QuotationNo==t.QuotationNo&&c.ItemGuid==t.ItemGuid&&c.IndentNo===t.IndentNo);let d=this.addItemslist.at(n);p.forEach(c=>{d.patchValue({ManufactureName:c.ManufactureName,POSize:c.PackSize,PurchaseOrderUnit:c.PurchaseOrderUnit,Narration:c.Narration,ItemRate:c.QuotationRate,DiscountPercentage:c.DiscountPercentage,TaxPercentage:c.TaxPerIGST?c.TaxPerIGST:c.TaxPerCGST+c.TaxPerSGST,UnitPrice:c.UnitPrice,OrderQuantity:c.ReqQty,TotalAmount:c.UnitPrice*c.ReqQty,SupplierGuid:c.SupplierGuid,VenderNme:c.SupplierName,TaxPerCGST:c.TaxPerCGST,TaxPerUGST:c.TaxPerUTGST,TaxPerSGST:c.TaxPerSGST,TaxPerIGST:c.TaxPerIGST,QuotationId:c.QuotationId,DefaultItemQuantity:c.ReqQty,InitialAmount:c.UnitPrice*c.ReqQty,QuotationNo:c.QuotationNo,VendorItemName:c.VendorItemName,StockInhandQuantity:c.StockInhandQuantity})})}else this.addItemslist.at(n).patchValue({ManufactureName:"",POSize:"",previousPOSize:"",PurchaseOrderUnit:"",Narration:"",ItemRate:"",DiscountPercentage:"",TaxPercentage:"",UnitPrice:"",TotalAmount:"",TaxPerCGST:"",TaxPerUGST:"",TaxPerSGST:"",TaxPerIGST:"",QuotationId:"",DefaultItemQuantity:"",InitialAmount:"",QuotationNo:null,SupplierGuid:null,VenderNme:null}),this.FormChanged=!1;1==this.allcheckbox&&null!=t?.QuotationNo&&null!=t?.QuotationNo?this.addItemslist.value[n].IsSelected=!0:(this.addItemslist.value[n].IsSelected=!1,this.allcheckbox=!0)}ChangePOStatus(t,n){this.body.PurchaseOrderGuid=t,this.body.ApprovalType=n,this.body.UserGuid=this.authservice.LoggedInUser.UserGuid,this.body.ApprovalPhoneNumber=this.authservice.LoggedInUser.PhoneNumber,this.body.ApprovalEmail=this.authservice.LoggedInUser.Email,this.body.ApprovalName=this.authservice.LoggedInUser.FirstName,this.body.CheckedReason="Checker"==n?this.reason:"",this.body.ApproveReason="Checker"!=n?this.reason:"",this.body.PoDate=this.purchaseOrderDetails.POCreatedDate||"",this.body.VendorId=this.purchaseOrderDetails.VendorId||"",this.purchaseOrderService.UpdatePurchaseOrderStatus(this.body).subscribe(r=>{this.router.navigate(["/purchase-orders"]),this.reason="",this.GetAllPurchaseOrderDetails()},r=>{})}GetAllPurchaseOrderDetails(){throw new Error("Method not implemented.")}OnSelectPO(t){const n=t.Status,r=t.IndentNo,o=[t.PurchaseOrderGuid,"Approved"===n?n:r?"":void 0];this.router.navigate(r?["/purchase-orders/po-against-pi",...o]:["/purchase-orders/new-purchase-order",...o])}DownloadPdf(t){let r="";r=this.UnparsedHtml,this.purchaseOrderService.GetPurchaseOrderDetails(this.PurchaseOrderGuid).subscribe(o=>{this.purchaseOrderDetails=o.purchaseOrderDetails||"",this.PurchaseOrderItemDetails=o.POItems.filter((h,y,I)=>y===I.findIndex(b=>b.IndentNo===h.IndentNo&&b.ItemGuid===h.ItemGuid))||"";let a=Math.round(0);f(5306)(a),f(5306)(0);const c=new Date,P=this.datepipe.transform(c,"dd-MMM-yyyy hh:mm a"),g={"%%PurchaseOrderNo%%":this.purchaseOrderDetails.PurchaseOrderNo||"","%%POCreatedDate%%":this.purchaseOrderDetails.POCreatedDate||"","%%SupplierName%%":this.purchaseOrderDetails.SupplierName||"","%%Address%%":this.purchaseOrderDetails.Address||"","%%VendorEmailId%%":this.purchaseOrderDetails.VendorEmailId||"","%%GSTIN%%":this.purchaseOrderDetails.GSTIN||"","%%PrimaryContactPersonMobileNo%%":this.purchaseOrderDetails.PrimaryContactPersonMobileNo||"","%%SecondaryContactPersonMobileNo%%":this.purchaseOrderDetails.SecondaryContactPersonMobileNo||"","%%PrimaryContactPerson%%":this.purchaseOrderDetails.PrimaryContactPerson||"","%%ContactPersonNo%%":this.purchaseOrderDetails.OrderedContactPersonNo||"","%%StoreLocationAddress%%":this.purchaseOrderDetails.StoreLocationAddress||"","%%GSTNNO%%":this.purchaseOrderDetails.GSTNNO||"","%%CenterName%%":this.purchaseOrderDetails.CenterLocation||"","%%ShippingCenterName%%":this.purchaseOrderDetails.ShipLocation?this.purchaseOrderDetails.ShipLocation:this.purchaseOrderDetails.CenterLocation||"","%%ShipStoreLocationAddress%%":this.purchaseOrderDetails.ShipStoreLocationAddress?this.purchaseOrderDetails.ShipStoreLocationAddress:this.purchaseOrderDetails.StoreLocationAddress||"","%%BillStoreLocationAddress%%":this.purchaseOrderDetails.StoreLocationAddress||"","%%BillingContactPerson%%":this.purchaseOrderDetails.OrderedContactPerson||"","%%BillingMobileNo%%":this.purchaseOrderDetails.OrderedContactPersonNo||"","%%BillingPersonEmail%%":this.purchaseOrderDetails.OrderedContactPersonEmail||"","%%shipingContactPerson%%":this.purchaseOrderDetails.ShipContactPerson?this.purchaseOrderDetails.ShipContactPerson:this.purchaseOrderDetails.OrderedContactPerson||"","%%ShipingMobileNo%%":this.purchaseOrderDetails.ShipContactPersonNo?this.purchaseOrderDetails.ShipContactPersonNo:this.purchaseOrderDetails.OrderedContactPersonNo||"","%%ShipingPersonEmail%%":this.purchaseOrderDetails.ShipContactPersonEmail?this.purchaseOrderDetails.ShipContactPersonEmail:this.purchaseOrderDetails.OrderedContactPersonEmail||"","%%CreatedBy%%":this.purchaseOrderDetails.CreatedBy||"","%%CheckedByName%%":"Maker"==this.status?"":this.purchaseOrderDetails.CheckedByName||"","%%AppprovedByName%%":this.purchaseOrderDetails.AppprovedByName||"","%%RecallByName%%":this.purchaseOrderDetails.RecallByName??"","%%CancelledBy%%":this.purchaseOrderDetails.CancelledBy??"","%%OrderedBy%%":this.purchaseOrderDetails.CenterLocation||"","%%SupplierState%%":this.purchaseOrderDetails.SupplierState||"","%%ShipLocationGST%%":this.purchaseOrderDetails.ShipGSTNNO?this.purchaseOrderDetails.ShipGSTNNO:this.purchaseOrderDetails.GSTNNO||"","%%BillLocationGST%%":this.purchaseOrderDetails.GSTNNO||"","%%PurchaseOrderDownloadDate%%":P,"%%TotalPrice%%":this.purchaseOrderDetails.POTotalAmount.toString().match(/^\d+(?:\.\d{0,2})?/),"%%PaymentTerm%%":this.purchaseOrderDetails.PaymentTermCondition,"%%Deliveryterm%%":this.purchaseOrderDetails.PaymentDeliveryTerm};for(const h in g)r=r.replace(h,g[h]);let T="";T=(new DOMParser).parseFromString(r,"text/html");let x=T.querySelector("#PurchaseOrderItemDetails");x.innerHTML="";for(let h=0;h<this.PurchaseOrderItemDetails.length;h++){if("0.00"===this.PurchaseOrderItemDetails[h].OrderedQty)continue;let I="";I=this.UnparsedHtml.replace("%%S.NO%%",h+1).replace("%%ItemName%%",this.PurchaseOrderItemDetails[h].ItemName||"").replace("%%CatalogNo%%",this.PurchaseOrderItemDetails[h].CatalogNo||"").replace("%%ManufactureName%%",this.PurchaseOrderItemDetails[h].ManufactureName||"").replace("%%MinorUnitName%%",this.PurchaseOrderItemDetails[h].MinorUnitName||"").replace("%%PackSize%%",this.PurchaseOrderItemDetails[h].PackSize||"").replace("%%OrderedQty%%",this.PurchaseOrderItemDetails[h].OrderedQty||"").replace("%%UnitPrice%%",this.PurchaseOrderItemDetails[h].UnitPrice||"").replace("%%DiscountPer%%",this.PurchaseOrderItemDetails[h].DiscountPer||"").replace("%%TaxAmount%%",this.PurchaseOrderItemDetails[h].TaxAmount||"").replace("%%NetAmount%%",this.PurchaseOrderItemDetails[h].NetAmount||"").replace("%%Address%%",this.PurchaseOrderItemDetails[h].Address||"").replace("%%CGST+SGST+UGST%%",this.PurchaseOrderItemDetails[h].CGST+this.PurchaseOrderItemDetails[h].SGST==0&&0==this.PurchaseOrderItemDetails[h].IGST||this.PurchaseOrderItemDetails[h].IGST?this.PurchaseOrderItemDetails[h].IGST:this.PurchaseOrderItemDetails[h].CGST+this.PurchaseOrderItemDetails[h].SGST).replace("%%TaxAmount%%",this.PurchaseOrderItemDetails[h].TaxAmount||"").replace("%%BuyPrice%%",this.PurchaseOrderItemDetails[h].Rate||"");let b="";b=(new DOMParser).parseFromString(I,"text/html").querySelector("#PurchaseOrderItemDetails"),x.appendChild(b)}let A=this.purchaseOrderDetails.POCreatedDate.split("-");r=T.documentElement.outerHTML;const N={margin:.2,filename:`POReport_${this.purchaseOrderDetails.PurchaseOrderNo+"_"+this.purchaseOrderDetails.SupplierCode+"_"+(A[0]+A[1]+A[2])}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:1},jsPDF:{unit:"in",format:"A3",orientation:"portrait"}},D=r;"print"==t?Te().from(D).set(N).outputPdf("datauristring").then(h=>{const y=window.open();y.document.write(r),y.document.close(),y.focus(),setTimeout(()=>{y.print()},250)}):Te().from(D).set(N).save()})}DeletePurchaseOrder(){this.UserGuid=this.authservice.LoggedInUser.UserGuid,this.purchaseOrderService.DeletePurchaseOrderDetails(this.purchaseOrderGuid,this.UserGuid).subscribe(t=>{this.router.navigate(["/purchase-orders"]),this.GetAllPurchaseOrderDetails()},t=>{})}PurchaseOrderDetailas(t){this.FormChanged=!1,this.PurchaseOrderName=t.SupplierName,this.purchaseOrderGuid=t.PurchaseOrderGuid,this.purchaseOrderNo=t.PurchaseOrderNo,this.ShippingLocation=t.ShippingLocation,this.location=t.StoreName,this.centername=t.CenterLocation,this.locationGuid=t.LocationGuid}UpdateShippingLocation(){this.purchaseOrderService.UpdateShipiingLocation(this.purchaseOrderGuid,this.locationGuid).subscribe(t=>{this.router.navigate(["/purchase-orders"]),this.GetAllPurchaseOrderDetails()},t=>{})}Changelocation(t){this.locationGuid=t?t.LocationGuid:""}confirmRecall(){this.body.Reason=this.recallReason,this.ChangePOStatus(this.PurchaseOrderGuid1,"Recall")}getPurchaseOrderGuid(t){this.PurchaseOrderGuid1=t,this.FormChanged=!1}deleteAndRedirect(t){this.router.navigate(["/purchase-orders"])}ISUrgentPO(t){this.FormChanged=!0,this.isUrgent=!0,1==t.target.checked?(this.Isurgent=!0,this.purchaseOrderForm.value.Isurgent=!0):(this.Isurgent=!1,this.purchaseOrderForm.value.Isurgent=!1)}changestatus(t,n){this.FormChanged=!1,this.status=n}UpdateStatus(){this.ChangePOStatus(this.PurchaseOrderGuid,this.status)}resetfrom(){this.PaymentDetailForm.reset(),this.fileUrl="",this.PaymentDetailForm.patchValue({imageUrl:this.fileUrl,BankName:"",PaidAmount:"",Remarks:"",Modeofpayment:"",TransectionDate:null,TransectionID:null,InvoiceNumber:null}),this.PaymentDetailForm.get("Modeofpayment").setValue("")}markAsTouched(t){this.PaymentDetailForm.get(t)?.markAsTouched()}RemoveImage(){this.fileUrl="",console.log("ahaha");const t=document.getElementById("editableDiv");t&&(t.innerHTML="",t.style.color="#adb7c1",t.setAttribute("contenteditable","true"),t.classList.add("PasteContent")),this.PaymentDetailForm?.patchValue({imageUrl:this.fileUrl})}pasteImage(t){console.log(t),this.fileToUpload=t.clipboardData.files[0];const r=new FormData;var o=this.fileToUpload?.name;o=o.substring(0,o.lastIndexOf(".")),r.append("File",this.fileToUpload,this.fileToUpload?.name),r.append("FileName","".concat(this.fileToUpload.name)),this.purchaseOrderService.Uploadfiles(r).subscribe(a=>{this.fileUrl=a?.result;const s=document.getElementById("editableDiv");s&&(s.innerText="file Uploaded",s.classList.remove("PasteContent"),s.style.color="#1bbd09",s.setAttribute("contenteditable","false")),this.PaymentDetailForm.patchValue({imageUrl:a?.result?.toString()})},a=>{})}UplodeInvoice(t){this.fileToUpload=t.srcElement.files[0];const n=new FormData;var r=this.fileToUpload.name;r=r.substring(0,r.lastIndexOf(".")),n.append("File",this.fileToUpload,this.fileToUpload.name),n.append("FileName","".concat(this.fileToUpload.name)),this.purchaseOrderService.Uploadfiles(n).subscribe(o=>{this.fileUrl=o.result;const a=document.getElementById("editableDiv");a&&(a.classList.remove("PasteContent"),a.innerText="file Uploaded",a.style.color="#1bbd09",a.setAttribute("contenteditable","false")),this.PaymentDetailForm.patchValue({imageUrl:this.fileUrl})},o=>{})}SavePayment(){this.shimmerVisible=!0,new Date;let n={purchaseOrderGuid:this.purchaseOrderDetails.PurchaseOrderGuid,PurchaseOrderNo:this.purchaseOrderDetails.PurchaseOrderNo,bankname:this.PaymentDetailForm.value.BankName,transectionid:this.PaymentDetailForm.value.TransectionID,InvoiceNumber:this.PaymentDetailForm.value.InvoiceNumber,transectiondate:Q(this.PaymentDetailForm.TransectionDate),modeofpayment:this.PaymentDetailForm?.value?.Modeofpayment,remarks:this.PaymentDetailForm?.value?.Remarks,totalAmount:parseInt(this.PaymentDetailForm?.value?.TotalAmount),paidAmount:parseInt(this.PaymentDetailForm.value.PaidAmount),status:"",imageUrl:this.PaymentDetailForm.value.imageUrl,poNumber:this.purchaseOrderDetails.PurchaseOrderNo,CreatedBy:this.authservice.LoggedInUser.UserGuid,UpdatedBy:this.authservice.LoggedInUser.UserGuid};this.purchaseOrderService.SavePaymentHistory(n).subscribe(r=>{this.shimmerVisible=!1,this.SendVerificationEmail(),this.resetfrom(),this.router.navigate(["/purchase-orders/po-payhistory"])},r=>{this.shimmerVisible=!1})}paidamount(t){const n=parseFloat(t.target.value),r=this.PaymentDetailForm.value.Dueamount;this.isvalid=!isNaN(n)&&n>r}restrictCharectors(t){t.key.match(/[0-9]/g)||t.preventDefault()}clearReason(){this.recallReason=""}SendVerificationEmail(){const n=(new Date).getFullYear(),r=parseInt(this.PaymentDetailForm?.value?.Dueamount)-parseInt(this.PaymentDetailForm.value.PaidAmount),o=parseInt(this.PaymentDetailForm?.value?.TotalAmount);let s=(o-r)/o*100;s=parseInt(s.toString(),10),console.log("percentagePaid",s);let m="";100==s&&(m="FullyPaid"),s>=75&&s<=99&&(m="Mostly Paid"),s>=50&&s<75&&(m="Partially Paid"),s<50&&(m="Payment Due");const p=`${this.PaymentDetailForm.value.TransectionDate.day}/${this.PaymentDetailForm.value.TransectionDate.month}/${this.PaymentDetailForm.value.TransectionDate.year}`;let d={to:this.purchaseOrderDetails.VendorEmailId,Body:"",subject:"PaymentVerification",lstReplacebleVariables:[{user:this.purchaseOrderDetails.SupplierName,year:n,paymentType:this.PaymentDetailForm?.value?.Modeofpayment,bankName:this.PaymentDetailForm.value.BankName,totalAmount:this.PaymentDetailForm?.value?.TotalAmount,paidAmount:this.previousPaidAmount,dueAmount:parseInt(this.PaymentDetailForm?.value?.Dueamount)-parseInt(this.PaymentDetailForm.value.PaidAmount),transactionId:this.PaymentDetailForm.value.TransectionID,orderId:this.PurchaseOrderNumber,currentliPaidAmount:this.PaymentDetailForm.value.PaidAmount,PaymentDate:p,status:m,InvoiceNo:this.PaymentDetailForm.value.InvoiceNumber}]};this.authservice.sendEmail(d).subscribe(c=>{})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(O.FF),e.Y36(u.qu),e.Y36(W.x),e.Y36(w.gz),e.Y36(w.F0),e.Y36(fe.G),e.Y36(v.uU),e.Y36(te.$))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-po-against-pi"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Y.nE,5),e.Gf(jt,5),e.Gf(zt,7),e.Gf(Wt,7)),2&t){let r;e.iGM(r=e.CRH())&&(n.table=r.first),e.iGM(r=e.CRH())&&(n.ngSelectComponent=r.first),e.iGM(r=e.CRH())&&(n.expiryQuotationModal=r.first),e.iGM(r=e.CRH())&&(n.packSizeDiff=r.first)}},decls:139,vars:34,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/purchase-orders"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["class","mb-3",4,"ngIf"],[3,"formGroup"],["class","row",4,"ngIf"],["class","d-flex justify-content-between align-items-center",4,"ngIf"],[1,"card","mb-3","border","bg-light"],[1,"card-body","p-3"],[1,"row","pi-items"],[2,"max-height","420px","overflow-y","scroll"],[1,"table","bg-white"],[2,"position","sticky","top","0","background-color","#fff","box-shadow","0px 2px 4px rgba(0, 0, 0, 0.1)","z-index","12"],["type","checkbox",3,"checked","click"],[1,"freeze-col-1"],[1,"freeze-col-2"],[3,"ngClass"],[4,"ngIf"],[1,"col-12","col-md-4"],[1,"mb-3"],[1,"d-flex","justify-content-between"],[1,"d-flex","gap-1"],["for","manufacturerName",1,"form-label"],["class","small text-primary cursor-pointer","id","addNewManufacturer",3,"click",4,"ngIf"],["id","manufacturerName","formControlName","PaymentTerm",1,"form-select",3,"disabled","ngClass"],["selected","","disabled","","value","null"],["value","StaticTerm",4,"ngIf"],[3,"value",4,"ngIf"],["class","text-danger mt-4px d-block",4,"ngIf"],["for","itemName",1,"form-label"],["type","text","id","itemName","placeholder","Enter delivery term ","formControlName","DeliveryTerm",1,"form-control",3,"maxlength","readonly","ngClass"],["type","text","id","itemName","placeholder","Enter NFA no.","formControlName","NFANo",1,"form-control",3,"maxlength","readonly"],[1,"col-sm-12"],["for","itemDescription",1,"form-label"],["id","itemDescription","rows","3","placeholder","Enter terms and condtions","formControlName","TermsandConditions",1,"form-control",3,"maxLength","readonly"],["class","my-2",4,"ngIf"],["class","",4,"ngIf"],[1,"my-2"],["deliveryItems",""],["paymentterm",""],[1,""],[1,"card-footer"],[1,"modal-footer","justify-content-center"],["class","btn-group btn-group-sm","role","group","aria-label","Basic mixed styles example",4,"ngIf"],["class","text-end",4,"ngIf"],["deletePurchaseOrder",""],["centers",""],["xlModal1",""],["xlModal",""],["paymentModal",""],["PurchaseOrder",""],["ExpiryQuotation",""],["packSizeDiff",""],["for","purchaseOrderNo",1,"form-label"],[1,"col-12","col-md-4","col-lg-3","mb-3"],["for","machineName",1,"form-label","d-flex"],["formControlName","SuppliersName","bindLabel","SupplierName","placeholder"," Select supplier name",3,"items","inputAttrs","closeOnSelect","searchable","multiple","readonly","notFoundText","ngClass","clear","add","remove"],["for","machineName",1,"form-label"],[1,"input-group",3,"click"],["ngbDatepicker","","container","body","placeholder","yyyy-mm-dd","name","dpFromDate","formControlName","FromDate1",1,"form-control",3,"readonly","readOnly","dateSelect"],["dpFromDate","ngbDatepicker"],["type","button",1,"input-group-text"],[1,"feather","icon-calendar","icon-md","text-muted"],[1,"form-label"],["ngbDatepicker","","container","body","placeholder","yyyy-mm-dd","name","dpFromDate","formControlName","ToDate1",1,"form-control",3,"readonly","minDate","readOnly","dateSelect"],["dp2","ngbDatepicker"],["type","text","maxlength","10","formControlName","IndentNumber",1,"form-control",3,"readonly","keyup"],["for","purchasedUnit",1,"form-label","d-flex"],["bindLabel","LocationName","bindValue","LocationGuid","formControlName","LocationGuid","placeholder","Select Location",3,"items","inputAttrs","closeOnSelect","searchable","multiple","notFoundText","readonly","change"],["formControlName","PendingPI","bindLabel","IndentNo","placeholder","Select pending PI",3,"items","inputAttrs","closeOnSelect","searchable","notFoundText","ngClass","multiple","readonly","change"],["ngSelectComponent",""],[1,"col-12","col-sm-6","col-md-4","col-xl-3","align-items-end","d-flex"],[1,"form-check","form-switch","mb-2"],["type","checkbox","id","formSwitch1","formControlName","Isurgent",1,"form-check-input",3,"click"],["for","formSwitch1",1,"form-check-label"],[1,"text-danger","mt-4px","d-block"],[1,"d-flex","justify-content-between","align-items-center"],["type","checkbox","id","formSwitch1","formControlName","Isurgent",1,"form-check-input",3,"checked","change"],["formArrayName","lstpurchaseOrderItems",4,"ngFor","ngForOf"],["formArrayName","lstpurchaseOrderItems"],[3,"formGroupName"],["type","checkbox",3,"disabled","ngModel","ngModelOptions","change","ngModelChange"],[1,"freeze-col-1","truncate","max-w-200",3,"title"],["appendTo","body","formControlName","QuotationNo","bindLabel","QuotationNo","placeholder"," Select quotations",3,"inputAttrs","items","searchable","multiple","ngClass","readonly","change"],[1,"rupee"],["formControlName","ReasonQuotationNo","type","text",1,"form-control","wd-80",3,"readOnly","ngClass","input"],["type","number","min","0","formControlName","DiscountPercentage",1,"form-control","wd-80",3,"readOnly","input"],["type","number","formControlName","OrderQuantity","min","0",1,"form-control","h-34",2,"width","70px","padding-inline","5px",3,"readOnly","input"],["target","_blank",1,"btn","btn-outline-primary","btn-xs","me-1",3,"routerLink"],[1,"feather","icon-eye"],[1,"text-danger"],[4,"ngFor","ngForOf"],[1,"shimmerBG","line"],["id","addNewManufacturer",1,"small","text-primary","cursor-pointer",3,"click"],["value","StaticTerm"],[3,"value"],[1,"fw-bold"],["class","col-sm-12",4,"ngIf"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["type","text","id","itemName","formControlName","AddDeliveryTerm","placeholder","Enter delivery term","maxlength","150",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary","me-2",3,"click"],["type","button",1,"btn","btn-primary","submit",3,"disabled","click"],["type","text","id","itemName","placeholder","Enter payment term","maxlength","150","formControlName","paymentsTerms",1,"form-control"],["role","group","aria-label","Basic mixed styles example",1,"btn-group","btn-group-sm"],["class","btn btn-outline-secondary",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-outline-secondary",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],[1,"feather","icon-printer"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],[1,"feather","icon-download"],["class","border-bottom","type","button","class","btn btn-outline-secondary",3,"disabled","click",4,"ngIf"],["class","border-bottom","class","btn btn-outline-secondary",3,"disabled","click",4,"ngIf"],[1,"btn","btn-outline-secondary",3,"disabled","click"],[1,"feather","icon-trash-2"],[1,"feather","icon-check-square"],[1,"feather","icon-refresh-cw"],[1,"feather","icon-rotate-ccw"],[1,"feather","icon-credit-card"],[1,"text-end"],["type","button","class","btn btn-secondary me-2",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-primary submit",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-secondary","me-2",3,"disabled","click"],["type","button",1,"btn","btn-primary","submit",3,"click"],[1,"col-12"],["for","locations",1,"label"],["placeholder","search by store name","name","locations","bindValue","LocationGuid","bindLabel","LocationName",1,"ng-select-custom-250min",3,"ngModel","items","multiple","ngModelChange","change"],[1,"my-3"],["deletequotation",""],["id","recallPurchaseOrder",1,"modal-title"],[3,"ngSubmit"],["recallForm","ngForm"],[1,"form-group"],["for","recallReason"],["id","recallReason","name","recallReason","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","hidden","name","PurchaseOrderGuid",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"container-fluid","d-flex","justify-content-between","mt-4","flex-sm-row","flex-column"],[1,"col-lg-5","ps-0"],[1,"mt-1","mb-1"],[1,"col-lg-4","pe-0","text-sm-end"],[1,"mb-1"],[1,"table","table-bordered","pt-3"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"col-12","col-md-12","mb-3"],[1,"form-control","d-flex","felx-row"],["id","editableDiv","contenteditable","true","type","file",1,"form-control","imgPasteElement","PasteContent",3,"click","input","paste"],["type","button",1,"bg-none","text-primary",3,"click"],[1,"feather","icon-upload","fs-2"],["type","file","id","fileInput",2,"display","none",3,"change"],["fileInput",""],["class","text-danger",4,"ngIf"],["formControlName","BankName","type","text","placeholder","Enter bank name",1,"form-control",3,"ngClass"],["formControlName","TransectionID","type","text","placeholder","Enter transaction ID",1,"form-control",3,"ngClass"],["formControlName","InvoiceNumber","type","text","placeholder","Enter Invoice number ",1,"form-control",3,"ngClass"],[1,"input-group"],["placeholder","dd-mm-yyyy","name","dp","ngbDatepicker","","readonly","","formControlName","TransectionDate",1,"form-control",3,"maxDate","ngClass"],["d2","ngbDatepicker"],["type","button",1,"input-group-text",3,"click"],["formControlName","Modeofpayment","placeholder","Select Payment",1,"form-select","form-select-sm"],["value","","disabled",""],["value","Online"],["value","Offline"],["value","Cash"],["value","Credit card"],["formControlName","TotalAmount","type","text","placeholder","Enter Amount","readonly","",1,"form-control"],["formControlName","Dueamount","type","text","placeholder","Enter Amount","readonly","",1,"form-control"],["formControlName","PaidAmount","type","text","placeholder","Enter Amount",1,"form-control",3,"ngClass","keypress","input"],["placeholder","Enter your remarks","formControlName","Remarks",1,"form-control",3,"ngClass"],[1,"pastedImageOutput"],["type","button",1,"feather","icon-x-circle",3,"click"],["alt","Uploaded Image",3,"src"],[1,"mb-22"],["for","reason",1,"form-label"],["type","text","id","reason","name","reason",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,n){if(1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Purchase Orders"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"PO Against PI"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12,"Purchase Order Against PI"),e.qZA(),e.YNc(13,Xt,5,1,"div",10),e.TgZ(14,"form",11),e.YNc(15,tn,46,37,"div",12),e.YNc(16,nn,7,1,"div",13),e.TgZ(17,"div",14)(18,"div",15)(19,"div",16)(20,"div",17)(21,"table",18)(22,"thead",19)(23,"tr")(24,"th")(25,"input",20),e.NdJ("click",function(o){return n.handleCheckboxChange(o)}),e.qZA(),e._uU(26," All "),e.qZA(),e.TgZ(27,"th"),e._uU(28,"SNo"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"IndentNo"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"Location"),e.qZA(),e.TgZ(33,"th",21),e._uU(34,"Item Name"),e.qZA(),e.TgZ(35,"th",22),e._uU(36,"Catalog No"),e.qZA(),e.TgZ(37,"th"),e._uU(38,"Vendor Item Name"),e.qZA(),e.TgZ(39,"th"),e._uU(40,"Quotations "),e.TgZ(41,"span",23),e._uU(42," *"),e.qZA()(),e.TgZ(43,"th"),e._uU(44,"Supplier Name"),e.qZA(),e.TgZ(45,"th"),e._uU(46,"Manufacturer"),e.qZA(),e.TgZ(47,"th"),e._uU(48,"Pack Size"),e.qZA(),e.TgZ(49,"th"),e._uU(50,"Purchase Unit"),e.qZA(),e.TgZ(51,"th"),e._uU(52,"Narration"),e.qZA(),e.TgZ(53,"th"),e._uU(54,"Rate"),e.qZA(),e.TgZ(55,"th"),e._uU(56,"Reason"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"Disc(%)"),e.qZA(),e.TgZ(59,"th"),e._uU(60,"Tax(%)"),e.qZA(),e.TgZ(61,"th"),e._uU(62,"Buy Price"),e.qZA(),e.TgZ(63,"th"),e._uU(64,"Quantity"),e.qZA(),e.TgZ(65,"th"),e._uU(66,"Net AMT."),e.qZA(),e.TgZ(67,"th"),e._uU(68,"STOCK IN HAND QUANTITY"),e.qZA(),e.TgZ(69,"th"),e._uU(70,"Action"),e.qZA()()(),e.TgZ(71,"tbody"),e.YNc(72,un,2,1,"ng-container",24),e.YNc(73,mn,2,2,"ng-container",24),e.qZA()()()()()(),e.TgZ(74,"h6",9),e._uU(75,"Terms & Conditions"),e.qZA(),e.TgZ(76,"div",5)(77,"div",25)(78,"div",26)(79,"div",27)(80,"div",28)(81,"label",29),e._uU(82," Payment Term "),e.qZA(),e.TgZ(83,"span",23),e._uU(84," *"),e.qZA()(),e.YNc(85,pn,2,0,"span",30),e.qZA(),e.TgZ(86,"select",31)(87,"option",32),e._uU(88,"Select payment term "),e.qZA(),e.YNc(89,hn,2,0,"option",33),e.YNc(90,_n,2,2,"option",34),e.qZA(),e.YNc(91,gn,2,0,"span",35),e.qZA()(),e.TgZ(92,"div",25)(93,"div",26)(94,"label",36),e._uU(95,"Delivery term "),e.TgZ(96,"span",23),e._uU(97," *"),e.qZA()(),e._UZ(98,"input",37),e.YNc(99,fn,2,0,"span",35),e.qZA()(),e.TgZ(100,"div",25)(101,"div",26)(102,"label",36),e._uU(103,"NFA No."),e.qZA(),e._UZ(104,"input",38),e.qZA()(),e.TgZ(105,"div",39)(106,"div",26)(107,"label",40),e._uU(108,"Terms and Conditions "),e.qZA(),e._UZ(109,"textarea",41),e.qZA()()(),e.YNc(110,An,1,0,"hr",42),e.YNc(111,Cn,8,2,"div",43),e._UZ(112,"hr",44),e.YNc(113,yn,16,1,"ng-template",null,45,e.W1O),e.YNc(115,bn,16,1,"ng-template",null,46,e.W1O),e.qZA()(),e.TgZ(117,"div",47)(118,"div",48)(119,"div",27)(120,"div",49),e.YNc(121,Dn,14,9,"div",50),e.qZA(),e.YNc(122,Gn,3,2,"div",51),e.qZA()()()()(),e.YNc(123,wn,23,2,"ng-template",null,52,e.W1O),e.YNc(125,Qn,24,5,"ng-template",null,53,e.W1O),e.YNc(127,Mn,17,3,"ng-template",null,54,e.W1O),e.YNc(129,En,87,24,"ng-template",null,55,e.W1O),e.YNc(131,tr,106,62,"ng-template",null,56,e.W1O),e.YNc(133,nr,16,1,"ng-template",null,57,e.W1O),e.YNc(135,rr,12,0,"ng-template",null,58,e.W1O),e.YNc(137,ir,14,1,"ng-template",null,59,e.W1O),e.qZA()),2&t){let r,o,a,s,m;e.xp6(13),e.Q6J("ngIf",n.PurchaseOrderGuid),e.xp6(1),e.Q6J("formGroup",n.purchaseOrderForm),e.xp6(1),e.Q6J("ngIf",!n.PurchaseOrderGuid),e.xp6(1),e.Q6J("ngIf",n.PurchaseOrderGuid&&"Approved"!==n.status),e.xp6(9),e.Q6J("checked",n.allcheckbox),e.xp6(16),e.Q6J("ngClass",e.VKq(28,G,!(null!=(r=n.purchaseOrderForm.get("lstpurchaseOrderItems"))&&null!=r.value&&r.value.IndentNo))),e.xp6(31),e.Q6J("ngIf",!n.shimmerVisible),e.xp6(1),e.Q6J("ngIf",n.shimmerVisible),e.xp6(10),e.Q6J("ngClass",e.VKq(30,G,!n.purchaseOrderForm.value.PaymentTerm)),e.xp6(2),e.Q6J("ngIf","Approved"!==n.status),e.xp6(1),e.Q6J("disabled","Approved"==n.status||!n.role.toLowerCase().includes("Maker".toLowerCase()))("ngClass",null!=(o=n.purchaseOrderForm.get("PaymentTerm"))&&o.hasError("required")&&null!=(o=n.purchaseOrderForm.get("PaymentTerm"))&&o.touched?"is-invalid":""),e.xp6(3),e.Q6J("ngIf",!n.purchaseOrderForm.value.PaymentTerm),e.xp6(1),e.Q6J("ngIf",n.purchaseOrderForm.value.PaymentTerm),e.xp6(1),e.Q6J("ngIf",null!=(a=n.purchaseOrderForm.get("PaymentTerm"))&&a.hasError("required")&&null!=(a=n.purchaseOrderForm.get("PaymentTerm"))&&a.touched?"is-invalid":""),e.xp6(5),e.Q6J("ngClass",e.VKq(32,G,!n.purchaseOrderForm.value.DeliveryTerm)),e.xp6(2),e.Q6J("maxlength",150)("readonly","Approved"==n.status||!n.role.toLowerCase().includes("Maker".toLowerCase()))("ngClass",null!=(s=n.purchaseOrderForm.get("DeliveryTerm"))&&s.hasError("required")&&null!=(s=n.purchaseOrderForm.get("DeliveryTerm"))&&s.touched?"is-invalid":""),e.xp6(1),e.Q6J("ngIf",null!=(m=n.purchaseOrderForm.get("DeliveryTerm"))&&m.hasError("required")&&null!=(m=n.purchaseOrderForm.get("DeliveryTerm"))&&m.touched?"is-invalid":""),e.xp6(5),e.Q6J("maxlength",150)("readonly","Approved"==n.status||!n.role.toLowerCase().includes("Maker".toLowerCase())),e.xp6(5),e.Q6J("maxLength",150)("readonly","Approved"==n.status||!n.role.toLowerCase().includes("Maker".toLowerCase())),e.xp6(1),e.Q6J("ngIf",(null==n.PurchaseViewDetails?null:n.PurchaseViewDetails.CheckedReason)||(null==n.PurchaseViewDetails?null:n.PurchaseViewDetails.ApproveReason)),e.xp6(1),e.Q6J("ngIf",(null==n.PurchaseViewDetails?null:n.PurchaseViewDetails.CheckedReason)||(null==n.PurchaseViewDetails?null:n.PurchaseViewDetails.ApproveReason)),e.xp6(10),e.Q6J("ngIf",n.PurchaseOrderGuid),e.xp6(1),e.Q6J("ngIf","Approved"!==n.status&&n.role.toLowerCase().includes("Maker".toLowerCase()))}},dependencies:[v.mk,v.sg,v.O5,w.yS,u._Y,u.YN,u.Kr,u.Fj,u.wV,u.Wl,u.EJ,u.JJ,u.JL,u.Q7,u.nD,u.qQ,u.On,u.F,u.sg,u.u,u.x0,u.CE,O.J4,$.w9,K.Z,v.uU,Yt.U,Kt],styles:['.wd-80[_ngcontent-%COMP%]{width:80px}.PasteContent[_ngcontent-%COMP%]:before{content:"Paste image";position:absolute;color:#bdb9b9;pointer-events:none}.freeze-col-1[_ngcontent-%COMP%]{position:sticky;left:0;width:150px;min-width:150px;z-index:2;background:#fff}.freeze-col-2[_ngcontent-%COMP%]{position:sticky;left:100px;width:150px;min-width:150px;z-index:2;background:#fff}.pi-items.row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding-left:0!important}.max-w-200[_ngcontent-%COMP%]{max-width:200px}']}),i})();const or=function(i){return["/items/view-item",i]};function ar(i,l){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.ALo(25,"number"),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.qZA(),e.TgZ(28,"td"),e._uU(29),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.qZA(),e.TgZ(32,"td")(33,"a",30),e._UZ(34,"span",31),e._uU(35," View "),e.qZA()()()),2&i){const t=l.$implicit,n=e.oxw(4);e.xp6(2),e.Oqu(t.IndentNo),e.xp6(2),e.Oqu(n.purchaseOrderDetails.CenterLocation),e.xp6(2),e.Oqu(t.ItemName),e.xp6(2),e.Oqu(t.QuotationNo),e.xp6(2),e.Oqu(n.purchaseOrderDetails.SupplierName),e.xp6(2),e.Oqu(t.ManufactureName),e.xp6(2),e.Oqu(t.PackSize),e.xp6(2),e.Oqu(t.MinorUnitName),e.xp6(2),e.Oqu(t.Narration),e.xp6(2),e.Oqu(t.Rate),e.xp6(2),e.Oqu(t.DiscountPer),e.xp6(2),e.Oqu(e.xi3(25,16,t.Taxper,"1.2-2")),e.xp6(3),e.Oqu(t.UnitPrice),e.xp6(2),e.Oqu(t.OrderedQty),e.xp6(2),e.Oqu(t.NetAmount),e.xp6(2),e.Q6J("routerLink",e.VKq(19,or,t.ItemGuid))}}function lr(i,l){if(1&i&&(e.TgZ(0,"form")(1,"div",13)(2,"div",14)(3,"label",15),e._uU(4,"Supplier Name"),e.qZA(),e.TgZ(5,"div",16)(6,"span"),e._uU(7),e.qZA()()(),e.TgZ(8,"div",14)(9,"label",15),e._uU(10,"Location"),e.qZA(),e.TgZ(11,"div",16)(12,"span",17),e._uU(13),e.qZA()()(),e.TgZ(14,"div",18),e._UZ(15,"hr"),e.qZA(),e.TgZ(16,"h6",7),e._uU(17,"Item Details"),e.qZA(),e.TgZ(18,"div",19)(19,"div",20)(20,"div",13)(21,"double-scroll")(22,"div",21)(23,"table",22)(24,"thead",23)(25,"tr")(26,"th"),e._uU(27,"IndentNo"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Location"),e.qZA(),e.TgZ(30,"th"),e._uU(31,"Item Name"),e.qZA(),e.TgZ(32,"th"),e._uU(33,"Quotations"),e.TgZ(34,"span",24),e._uU(35," *"),e.qZA()(),e.TgZ(36,"th"),e._uU(37,"Supplier Name"),e.qZA(),e.TgZ(38,"th"),e._uU(39,"Manufacturer"),e.qZA(),e.TgZ(40,"th"),e._uU(41,"Pack Size"),e.qZA(),e.TgZ(42,"th"),e._uU(43,"Purchase Unit"),e.qZA(),e.TgZ(44,"th"),e._uU(45,"Narration"),e.qZA(),e.TgZ(46,"th"),e._uU(47,"Rate"),e.qZA(),e.TgZ(48,"th"),e._uU(49,"Disc(%)"),e.qZA(),e.TgZ(50,"th"),e._uU(51,"Tax(%)"),e.qZA(),e.TgZ(52,"th"),e._uU(53,"Buy Price"),e.qZA(),e.TgZ(54,"th"),e._uU(55,"Quantity"),e.qZA(),e.TgZ(56,"th"),e._uU(57,"Net AMT."),e.qZA(),e.TgZ(58,"th"),e._uU(59,"Action"),e.qZA()()(),e.TgZ(60,"tbody"),e.ynx(61),e.YNc(62,ar,36,21,"tr",25),e.BQk(),e.qZA()()()()()()(),e.TgZ(63,"h6",7),e._uU(64,"TERMS & CONDITIONS "),e.qZA(),e.TgZ(65,"div",26)(66,"div",20)(67,"div",13)(68,"form")(69,"div",13)(70,"div",14)(71,"label",15),e._uU(72,"Payment Term "),e.qZA(),e.TgZ(73,"div",16)(74,"span",17),e._uU(75),e.qZA()()(),e.TgZ(76,"div",14)(77,"label",15),e._uU(78,"Delivery term "),e.TgZ(79,"span"),e._uU(80,"*"),e.qZA()(),e.TgZ(81,"div",16)(82,"span",17),e._uU(83),e.qZA()()(),e.TgZ(84,"div",14)(85,"label",15),e._uU(86,"NFA No."),e.qZA(),e.TgZ(87,"div",16)(88,"span",17),e._uU(89),e.qZA()()(),e.TgZ(90,"div",27)(91,"label",28),e._uU(92,"Terms and Conditions"),e.qZA(),e.TgZ(93,"div",29)(94,"span",17),e._uU(95),e.qZA()()(),e.TgZ(96,"div",18),e._UZ(97,"hr"),e.qZA()()()()()()()()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(7),e.Oqu(t.SupplierName),e.xp6(6),e.Oqu(t.LocationName),e.xp6(49),e.Q6J("ngForOf",n.listItemDetails),e.xp6(13),e.Oqu(t.PaymentTermCondition),e.xp6(8),e.Oqu(t.PaymentDeliveryTerm),e.xp6(6),e.Oqu(t.NFANo),e.xp6(6),e.Oqu(t.TermandCondition)}}function sr(i,l){if(1&i&&(e.TgZ(0,"ngb-panel",11),e.YNc(1,lr,98,7,"ng-template",12),e.qZA()),2&i){const t=l.$implicit;e.Q6J("id","tab-"+(l.index+1))("title",t.PurchaseOrderNo)}}function ur(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"ngb-accordion",9),e.NdJ("panelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.purchasenumber(r))}),e.YNc(1,sr,2,2,"ngb-panel",10),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("closeOthers",!0)("activeIds",t.activeAccordionIds),e.xp6(1),e.Q6J("ngForOf",t.listPurchaseOrderDetails)}}let cr=(()=>{class i{constructor(t,n){this.purchaseOrderService=t,this.fb=n,this.selectedSimpleItem="Two",this.simpleItems=[],this.Viewitemdetails=[],this.listPurchaseOrderDetails=[],this.listItemDetails=[],this.activeAccordionIds=["tab-1"],this.listPurchaseOrderNo=[],this.PoNumbersData=[],this.form=this.fb.group({supplierNames:this.fb.array([])})}ngOnInit(){this.PurchaseOrderNo=localStorage.getItem("PurchaseOrderNo"),this.PurchaseOrderGuid=localStorage.getItem("PurchaseOrderGuid"),console.log("PurchaseOrderGuid",this.PurchaseOrderGuid),this.GetEditPOView(),this.GetPurchaseOrderDetails()}GetEditPOView(){this.shimmerVisible=!0,this.purchaseOrderService.GetEditPOView(this.PurchaseOrderNo).subscribe(t=>{this.listPurchaseOrderDetails=t.purchaseOrderDetails1||[],this.listPurchaseOrderDetails=t.purchaseOrderDetails1.filter((n,r,o)=>r===o.findIndex(a=>a.IndentNo===n.IndentNo&&a.PurchaseOrderNo===n.PurchaseOrderNo)),this.listItemDetails=t.POItems1||[]},t=>{this.globalService.stopSpinner()})}GetPurchaseOrderDetails(){this.shimmerVisible=!0,this.purchaseOrderService.GetPurchaseOrderDetails(this.PurchaseOrderGuid).subscribe(t=>{this.purchaseOrderDetails=t.purchaseOrderDetails,this.PurchaseOrderItemDetails=t.POItems.filter((n,r,o)=>r===o.findIndex(a=>a.IndentNo===n.IndentNo&&a.ItemGuid===n.ItemGuid)),this.PurchaseViewDetails=this.purchaseOrderDetails},t=>{this.shimmerVisible=!1})}handleCheckboxChange(t){this.allcheckbox=!0,this.addItemslist.value.forEach(n=>{1==t.target.checked?(n.IsSelected=!0,this.isChecked=!0):(n.IsSelected=!1,this.isChecked=!1)})}purchasenumber(t){const n=t.panelId.replace("tab-",""),r=parseInt(n)-1,o=this.listPurchaseOrderDetails[r].PurchaseOrderNo;this.PoNumbersData=this.listItemDetails.filter(a=>a===o),console.log(this.PoNumbersData)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(W.x),e.Y36(u.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-po-view"]],decls:13,vars:1,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/grn"],["aria-current","page",1,"breadcrumb-item","active"],[1,"card"],[1,"card-body"],[1,"card-title"],[3,"closeOthers","activeIds","panelChange",4,"ngIf"],[3,"closeOthers","activeIds","panelChange"],[3,"id","title",4,"ngFor","ngForOf"],[3,"id","title"],["ngbPanelContent",""],[1,"row"],[1,"col-12","col-md-3","mb-3"],["for","machineName",1,"form-label"],[1,"form-control"],[2,"margin-left","3px"],[1,"col-sm-12"],[1,"card","mb-3","border","bg-light"],[1,"card-body","p-3"],[2,"max-height","420px","overflow-y","scroll"],[1,"table","bg-white"],[2,"position","sticky","top","0","background-color","#fff","box-shadow","0px 2px 4px rgba(0, 0, 0, 0.1)","z-index","12"],[2,"color","red"],[4,"ngFor","ngForOf"],[1,"card","mb-3","border"],[1,"col-12","col-md-12","col-lg-12","mb-3"],["for","termsAndConditions",1,"form-label"],[1,"form-control",2,"position","relative","width","100%","height","100px","display","flex","align-items","center"],["target","_blank",1,"btn","btn-outline-primary","btn-xs","me-1",3,"routerLink"],[1,"feather","icon-eye"]],template:function(t,n){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"GRN"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Purchase Order View"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",6)(10,"h6",7),e._uU(11,"Purchase Order View"),e.qZA(),e.YNc(12,ur,2,3,"ngb-accordion",8),e.qZA()()()),2&t&&(e.xp6(12),e.Q6J("ngIf",n.listPurchaseOrderDetails&&n.listPurchaseOrderDetails.length))},dependencies:[v.sg,v.O5,w.yS,u._Y,u.JL,u.F,O.gY,O.Gk,O.gW,K.Z,v.JJ]}),i})();var dr=f(5179),ye=f(8171);function mr(i,l){if(1&i&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.lnq("",t.rowCount*(t.pageNumber-1)+1,"-",t.totalCount>t.rowCount*t.pageNumber?t.rowCount*t.pageNumber:t.totalCount," of ",t.totalCount," ")}}function pr(i,l){if(1&i&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function hr(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"select",22),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.ChangeEvent(r))}),e.YNc(1,pr,2,2,"option",23),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.itemOptionsPerPage)}}function _r(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",17),e.YNc(1,mr,2,3,"span",18),e.YNc(2,hr,2,1,"select",19),e.TgZ(3,"input",20),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.Keyword=r)})("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.changeSearch(r))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==t.PaymentHistoryList?null:t.PaymentHistoryList.length)>0),e.xp6(1),e.Q6J("ngIf",(null==t.PaymentHistoryList?null:t.PaymentHistoryList.length)>0),e.xp6(1),e.Q6J("ngModel",t.Keyword)}}function gr(i,l){if(1&i&&(e.TgZ(0,"span",35),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t?null:t.Status)}}function fr(i,l){if(1&i&&(e.TgZ(0,"span",36),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t?null:t.Status)}}function Ar(i,l){if(1&i&&(e.TgZ(0,"span",37),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t?null:t.Status)}}function Pr(i,l){if(1&i&&(e.TgZ(0,"span",38),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t?null:t.Status)}}function Tr(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td",28),e._uU(18),e.qZA(),e.TgZ(19,"td"),e.YNc(20,gr,2,1,"span",29),e.YNc(21,fr,2,1,"span",30),e.YNc(22,Ar,2,1,"span",31),e.YNc(23,Pr,2,1,"span",32),e.qZA(),e.TgZ(24,"td")(25,"button",33),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw(2),s=e.MAs(19);return e.KtG(a.openBasicModal(s,null==o?null:o.ImageUrl))}),e._UZ(26,"i",34),e._uU(27,"View"),e.qZA()()()}if(2&i){const t=l.$implicit;e.xp6(2),e.Oqu(null!=t&&t.PurchaseOrderNo?null==t?null:t.PurchaseOrderNo:"N/A"),e.xp6(2),e.Oqu(null!=t&&t.TotalAmount?null==t?null:t.TotalAmount:"N/A"),e.xp6(2),e.Oqu(null!=t&&t.Modeofpayment?null==t?null:t.Modeofpayment:"N/A"),e.xp6(2),e.Oqu(null!=t&&t.Bankname?null==t?null:t.Bankname:"N/A"),e.xp6(2),e.Oqu(null!=t&&t.InvoiceNumber?null==t?null:t.InvoiceNumber:"N/A"),e.xp6(2),e.Oqu(null!=t&&t.TransectionID?null==t?null:t.TransectionID:"N/A"),e.xp6(2),e.Oqu(null!=t&&t.PaidAmount?null==t?null:t.PaidAmount:"N/A"),e.xp6(2),e.Oqu(null==t?null:t.DueAmount),e.xp6(1),e.s9C("title",null==t?null:t.Remarks),e.xp6(1),e.Oqu(null!=t&&t.Remarks?null==t?null:t.Remarks:"N/A"),e.xp6(2),e.Q6J("ngIf","Payment Due"==(null==t?null:t.Status)),e.xp6(1),e.Q6J("ngIf","Partially Paid"==(null==t?null:t.Status)),e.xp6(1),e.Q6J("ngIf","Mostly Paid"==(null==t?null:t.Status)),e.xp6(1),e.Q6J("ngIf","Fully Paid"==(null==t?null:t.Status))}}function Cr(i,l){if(1&i&&(e.TgZ(0,"table",25,26)(2,"thead")(3,"tr")(4,"th"),e._uU(5,"Purchase Order No"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Total Due"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Mode of Payment"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Bank Name"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Invoice Number"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Cheque / Transaction No"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Paid Amount"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Due Amount"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Remarks"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Status"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Screenshot"),e.qZA()()(),e.TgZ(26,"tbody"),e.ynx(27),e.YNc(28,Tr,28,14,"tr",27),e.BQk(),e.qZA()()),2&i){const t=e.oxw();e.xp6(28),e.Q6J("ngForOf",t.PaymentHistoryList)}}function yr(i,l){1&i&&e._UZ(0,"app-shimmers",39),2&i&&e.Q6J("type","table")("cols",10)}function br(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",40)(1,"div",41)(2,"ngb-pagination",42),e.NdJ("pageChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.pageNumber=r)})("pageChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.ChangePagenumber(r))}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("collectionSize",t.totalCount)("pageSize",t.itemsPerPage)("page",t.pageNumber)("maxSize",t.maxSize)("rotate",!1)("boundaryLinks",t.boundaryLinks)("size",t.size)}}function xr(i,l){1&i&&(e.ynx(0),e.TgZ(1,"div",43)(2,"div",44)(3,"div",45),e._UZ(4,"i",46),e.TgZ(5,"span"),e._uU(6,"No Payment history found!"),e.qZA()()()(),e.BQk())}function Zr(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",47)(1,"h5",48),e._uU(2,"Payment Screenshot"),e.qZA(),e.TgZ(3,"button",49),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("by: close icon"))}),e.qZA()(),e.TgZ(4,"div",50)(5,"div",51)(6,"div",52)(7,"div",53)(8,"ngx-doc-viewer",54)(9,"div"),e._uU(10,"Loading"),e.qZA()()()()(),e._UZ(11,"div",0),e.qZA()}if(2&i){const t=e.oxw();e.xp6(8),e.Q6J("url",t.Document)}}const vr=[{path:"",component:ft},{path:"new-purchase-order",component:Pe},{path:"new-purchase-order/:PurchaseOrderGuid",component:Pe},{path:"po-against-pi",component:Ce},{path:"po-against-pi/:PurchaseOrderGuid/:Status",component:Ce},{path:"po-view",component:cr},{path:"po-payhistory",component:(()=>{class i{constructor(t,n){this.modalService=t,this.purchaseOrderService=n,this.itemsPerPage=40,this.pageNumber=1,this.rowCount=40,this.boundaryLinks=!0,this.size="lg",this.maxSize=3,this.isMenuCollapsed=!0,this.itemOptionsPerPage=[40,80,120,160,200,240,280,320],this.modelChanged=new de.x,this.modelChanged.pipe((0,me.b)(1e3)).subscribe(r=>{this.Keyword=r,this.getPaymentHistory()})}ngOnInit(){this.UserGuid=localStorage.getItem("UserGuid"),this.getPaymentHistory(),window.outerWidth<480&&(this.maxSize=2,this.boundaryLinks=!1,this.size="sm")}ChangePagenumber(t){this.pageNumber=t,this.getPaymentHistory()}ChangeEvent(t){this.itemsPerPage=t.target.value,this.pageNumber=1,this.rowCount=t.target.value,this.getPaymentHistory()}changeSearch(t){this.pageNumber=1,this.rowCount=40,this.modelChanged.next(t)}getPaymentHistory(){this.shimmerVisible=!0,this.Keyword=null==this.Keyword||null==this.Keyword?this.Keyword||"":this.Keyword,this.purchaseOrderService.getPaymentHistory({rowCount:this.rowCount,PageNumber:this.pageNumber,Keyword:this.Keyword}).subscribe(n=>{this.shimmerVisible=!1,this.PaymentHistoryList=n,this.totalCount=this.PaymentHistoryList[0]?.TotalCount},n=>{console.error(n),this.shimmerVisible=!1})}openBasicModal(t,n){this.Document=n,this.modalService.open(t,{backdrop:"static",keyboard:!1,size:"md"}).result.then(r=>{console.log("Modal closed"+r)}).catch(r=>{})}openXlModal(t){this.modalService.open(t,{size:"xl"}).result.then(n=>{console.log("Modal closed"+n)}).catch(n=>{})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(O.FF),e.Y36(W.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:20,vars:6,consts:[[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"d-flex","align-items-center","justify-content-between"],[1,"card-title"],[1,"mb-2","mb-sm-0"],["type","button",1,"ms-auto","navbar-toggler","filter-button",3,"click"],[1,"feather","icon-filter","size-18"],[1,"collapse","navbar-collapse","mb-3",3,"ngbCollapse"],[1,"d-flex","flex-column","flex-sm-row","align-items-md-center","gap-3","mt-2","mt-md-0","justify-content-end"],["class","align-items-center d-flex flex-column flex-sm-row text-end",4,"ngIf"],["class","table",4,"ngIf"],[3,"type","cols",4,"ngIf"],["class","cartd-footer",4,"ngIf"],[4,"ngIf"],["paymentModal",""],[1,"align-items-center","d-flex","flex-column","flex-sm-row","text-end"],["class","text-muted text-small me-0 me-sm-2 mb-1 mb-sm-0 flex-shrink-0",4,"ngIf"],["name","rowLimit","id","rowLimit","class","form-control form-select me-0 me-sm-2 h-34 mb-1 mb-sm-0",3,"change",4,"ngIf"],["type","text","placeholder","Search",1,"form-control","form-select-sm","me-0","me-sm-2","mb-1","mb-sm-0","minw-200",3,"ngModel","ngModelChange"],[1,"text-muted","text-small","me-0","me-sm-2","mb-1","mb-sm-0","flex-shrink-0"],["name","rowLimit","id","rowLimit",1,"form-control","form-select","me-0","me-sm-2","h-34","mb-1","mb-sm-0",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"table"],["table",""],[4,"ngFor","ngForOf"],[1,"text-truncate","mw-250",3,"title"],["class","badge text-bg-danger",4,"ngIf"],["class","badge text-bg-warning",4,"ngIf"],["class","badge text-bg-info",4,"ngIf"],["class","badge text-bg-success",4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-xs",3,"click"],[1,"feather","icon-eye","me-2"],[1,"badge","text-bg-danger"],[1,"badge","text-bg-warning"],[1,"badge","text-bg-info"],[1,"badge","text-bg-success"],[3,"type","cols"],[1,"cartd-footer"],[1,"d-flex","justify-content-center","my-3","pe-3"],[1,"ms-auto","d-sm-table",3,"collectionSize","pageSize","page","maxSize","rotate","boundaryLinks","size","pageChange"],[1,"minH-500","d-flex","align-items-center","justify-content-center"],[1,"py-5","text-muted"],[1,"d-flex","flex-column","justify-content-center","gap-1","align-items-center","fs-4"],[1,"feather","icon-alert-circle","fs-2"],[1,"modal-header"],["id","recallPurchaseOrder",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"widget-content"],[1,"default-form"],[1,"row","form"],["viewer","url",2,"width","100%","height","75vh",3,"url"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h6",5)(6,"div",6),e._uU(7,"PAYMENT HISTORY"),e.qZA()(),e.TgZ(8,"button",7),e.NdJ("click",function(){return n.isMenuCollapsed=!n.isMenuCollapsed}),e._UZ(9,"i",8),e.qZA()(),e.TgZ(10,"div",9)(11,"div",10),e.YNc(12,_r,4,3,"div",11),e.qZA()(),e.TgZ(13,"double-scroll"),e.YNc(14,Cr,29,1,"table",12),e.YNc(15,yr,1,2,"app-shimmers",13),e.qZA()(),e.YNc(16,br,3,7,"div",14),e.YNc(17,xr,7,0,"ng-container",15),e.qZA()()(),e.YNc(18,Zr,12,1,"ng-template",null,16,e.W1O)),2&t&&(e.xp6(10),e.Q6J("ngbCollapse",n.isMenuCollapsed),e.xp6(2),e.Q6J("ngIf",0!=n.totalCount),e.xp6(2),e.Q6J("ngIf",n.totalCount>0&&!n.shimmerVisible),e.xp6(1),e.Q6J("ngIf",n.shimmerVisible),e.xp6(1),e.Q6J("ngIf",0!=(null==n.PaymentHistoryList?null:n.PaymentHistoryList.length)),e.xp6(1),e.Q6J("ngIf",(0==(null==n.PaymentHistoryList?null:n.PaymentHistoryList.length)||0==n.totalCount)&&!n.shimmerVisible))},dependencies:[v.sg,v.O5,u.YN,u.Kr,u.Fj,u.JJ,u.On,O._D,O.N9,K.Z,dr.I,ye.zr],styles:[".size-18[_ngcontent-%COMP%]{font-size:18px;color:#6571ff}.h-34[_ngcontent-%COMP%]{height:34px}.mw-250[_ngcontent-%COMP%]{max-width:250px}"]}),i})()}];let Or=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[w.Bz.forChild(vr),w.Bz]}),i})();var Nr=f(8395),Ir=f(3056),qr=f(3493);let Dr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[v.ez,Or,Y.xD,u.u5,u.UX,O.IJ,$.A0,K.G,Nr.m,qr.D,Ir.ZQ,ye.cX]}),i})()}}]);