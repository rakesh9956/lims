<nav class="page-breadcrumb">
    <ol class="breadcrumb">
        <!-- <li class="breadcrumb-item"><a routerLink="/reports">Reports</a></li> -->
        <li class="breadcrumb-item active" aria-current="page">Stock In Hand Report</li>
    </ol>
</nav>


<div class="row">
    <div class="col-md-12 stretch-card">
        <div class="card">
            <div class="card-body">
                <!-- <h6 class="card-title">Location Details</h6> -->
                <form *ngIf="!shimmerVisible">
                    <div class="row">
                        <div class="col-12 col-sm-6 col-md-6 col-xl-3">
                            <div class="mb-3">
                                <div class="mb-3">
                                    <label class="form-label">Centers</label>
                                    <ng-select [items]="CenterLocacityList" [closeOnSelect]="true" [searchable]="true" 
                                        bindLabel="CenterName" bindValue="CenterGuid" placeholder="Select centers" [formControl]="clearCenterControl"
                                        (change)="filterData($event)">
                                    </ng-select>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-6 col-xl-3">
                            <div class="mb-3">
                                <label class="form-label">Location</label>
                                <ng-select [items]="LocationList"  [closeOnSelect]="true"  [formControl]="clearControl"
                                    [searchable]="true" bindLabel="CenterLocationName" bindValue="CenterLocationGuid"placeholder="Select locations"  
                                     (change)="filterData($event)" (clear)="Onremove()">
                                </ng-select>
                            </div>
                        </div>
                        <!-- <div class="col-12 col-sm-6 col-md-6 col-xl-4">
                            <div class="mb-3">
                                <label class="form-label">Items</label>
                                <ng-select [items]="Allitems" bindLabel="ItemName" [formControl]="ItemclearControl"
                                    (clear)="Onremove()" [notFoundText]="'No items found!'" bindValue="ItemGuid"
                                    placeholder="Select Item" (change)="selectItem($event)">
                                    <ng-template #optionTemplate let-item="item">
                                        <span [title]="item.ItemName">{{ item.ItemName }}</span>
                                    </ng-template>
                                    <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                                        <ng-container *ngTemplateOutlet="optionTemplate; context: { item: item }"></ng-container>
                                    </ng-template>
                                </ng-select>
                            </div>
                        </div>  -->
                        <div class="col-12 col-sm-6 col-md-6 col-xl-3">
                            <div class="mb-3">
                              <label class="form-label">Items</label>
                              <ng-multiselect-dropdown [placeholder]="'Select Item'" [formControl]="clearItemControl"
                                [settings]="dropdownSettings" (onSelect)="selectItem($event)" (onDeSelect)="DeselectItem($event)" [data]="Allitems">
                              </ng-multiselect-dropdown>
                            </div>
                          </div>
                        <div class="col-sm-12">
                            <hr>
                        </div>
                    </div>
                </form>
                <!--Shimmer UI -->
                <app-shimmers *ngIf="shimmerVisible" [type]="'form-2'"></app-shimmers>
                <!--Shimmer UI -->
                 <!-- No records found! -->
                 <ng-template [ngIf]="noDataFound && !shimmerVisible">
                    <div class="alert alert-danger d-flex align-items-center" role="alert" >
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path
                                d="M12.865 3.00017L22.3912 19.5002C22.6674 19.9785 22.5035 20.5901 22.0252 20.8662C21.8732 20.954 21.7008 21.0002 21.5252 21.0002H2.47266C1.92037 21.0002 1.47266 20.5525 1.47266 20.0002C1.47266 19.8246 1.51886 19.6522 1.60663 19.5002L11.1329 3.00017C11.4091 2.52187 12.0206 2.358 12.4989 2.63414C12.651 2.72191 12.7772 2.84815 12.865 3.00017ZM10.9989 16.0002V18.0002H12.9989V16.0002H10.9989ZM10.9989 9.00017V14.0002H12.9989V9.00017H10.9989Z"
                                fill="rgba(234,59,46,1)"></path>
                        </svg>
                        <div>
                            No records found!
                        </div>
                    </div>
                </ng-template>
                    <!-- No records found! -->
            </div>
            <div class="card-footer">
                <div class="row" *ngIf="!shimmerVisible">
                    <div class="col-sm-12 text-end flex-wrap">
                        <button type="button" class="btn btn-primary submit me-2 mt-2 mt-sm-0"
                        [disabled]="noDataFound" (click)="GetStockinHandReports('')">Get Report Data</button>
                    </div>
                </div>
                <!--Shimmer UI -->
                <ng-container *ngIf="shimmerVisible">
                    <tr *ngFor="let dummyLoop of [].constructor(1)" class="align-items-end align-self-end d-flex justify-content-end">
                      <td>
                        <div class="d-flex text-end">
                            <div class="shimmerBG line" style="margin-right: 5px;width: 126px;height: 38px;"></div>
                            <div class="shimmerBG line" style="width: 126px;height: 38px;"></div>
                        </div>
                      </td>
                    </tr>
                </ng-container>
                <div class="col-sm-12">
                    <hr>
                </div>
                <ng-container *ngIf="StockinHandReports?.length != 0">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h6 class="card-title">{{ 'Stock In Hand Report' | uppercase }} </h6>
                        <div class="row">
                            <div class="col-sm-12 text-end flex-wrap">
                                <button type="button" class="btn btn-primary me-2 mt-2 mt-sm-0" (click)="GetStockinHandReports('PDF')" [disabled]="noDataFound">Get Report PDF</button>
                              <button type="button" class="btn btn-primary submit mt-2 mt-sm-0"(click)="GetStockinHandReports('XL')"  [disabled]="noDataFound">Get Report Excel</button>
                            </div>
                        </div>
                    </div>
                <div class="card mb-3 border bg-light">
                    <div class="card-body p-3">
                        <div class="row">
                            <double-scroll>
                                <div style="max-height: 600px; overflow-y: auto;">
                                    <div class="table-responsive table bg-white"
                                        style="position: sticky; top: 0; background-color: #fff; box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1);z-index: 12;">
                                        <ngx-datatable [scrollbarH]="true" #table class="bootstrap"
                                            [rows]="StockinHandReports" [loadingIndicator]="loadingIndicator"
                                            [columnMode]="ColumnMode.force" rowHeight="auto">
                                            <ngx-datatable-column [width]="50" name="s.No">
                                                <ng-template ngx-datatable-cell-template let-row="row" let-value="value" let-rowIndex="rowIndex">
                                                    <span>{{ rowIndex + 1 }}</span>
                                                </ng-template>
                                            </ngx-datatable-column>
                                            <ngx-datatable-column [width]="120" name="Item Name"
                                                prop="ItemName"></ngx-datatable-column>
                                            <ngx-datatable-column [width]="120" name="Manufacture Name"
                                                prop="ManufactureName">
                                                <ng-template ngx-datatable-cell-template let-row="row" >
                                                    <span>{{ row?.ManufactureName || "N/A"}}</span>
                                                </ng-template>
                                            </ngx-datatable-column>
                                            <ngx-datatable-column [width]="120" name="Department Name"
                                                prop="DepartmentName"></ngx-datatable-column>
                                                <ngx-datatable-column [width]="120" name="PackSize"
                                                prop="PackSize"></ngx-datatable-column>
                                                <ngx-datatable-column [width]="120" name="Machine Name"
                                                prop="MachineName"></ngx-datatable-column>
                                                <ngx-datatable-column [width]="120" name="CatalogNo"
                                                prop="CatalogNo"></ngx-datatable-column>
                                                <ngx-datatable-column [width]="120" name="ItemCode"
                                                prop="ApolloItemCode"></ngx-datatable-column>
                                                <ngx-datatable-column [width]="120" name="Category"
                                                prop="CategoryTypeName"></ngx-datatable-column>
                                                <ngx-datatable-column [width]="120" name="In Hand Quantity"
                                                prop="InHandQuantity">
                                                <ng-template ngx-datatable-cell-template let-row="row" >
                                                    <span>{{ row?.InHandQuantity || 0}}</span>
                                                </ng-template></ngx-datatable-column>
                                                <ngx-datatable-column [width]="120" name="In Hand Quantity price"
                                                prop="InHandQuantityPrice">
                                                <ng-template ngx-datatable-cell-template let-row="row" >
                                                    <span>{{ row?.InHandQuantityPrice || 0}}</span>
                                                </ng-template></ngx-datatable-column>
                                                <ngx-datatable-column [width]="120" name="Expiry Quantity"
                                                prop="ExpiryQuantity">
                                                <ng-template ngx-datatable-cell-template let-row="row" >
                                                    <span>{{ row?.ExpiryQuantity || 0}}</span>
                                                </ng-template></ngx-datatable-column>
                                                <ngx-datatable-column [width]="120" name="Expiry Quantity price"
                                                prop="ExpiryQuantityPrice">
                                                <ng-template ngx-datatable-cell-template let-row="row" >
                                                    <span>{{ row?.ExpiryQuantityPrice ||0}}</span>
                                                </ng-template></ngx-datatable-column>
                                        </ngx-datatable>
                                    </div>
                                </div>
                            </double-scroll>
                        </div>
                    </div>
                </div>
            </ng-container>
                <!--Shimmer UI -->
            </div>
        </div>
    </div>
</div>