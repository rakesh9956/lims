<nav class="page-breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a routerLink=".">Indents</a></li>
        <li class="breadcrumb-item active" aria-current="page">All indents</li>
    </ol>
</nav>

<!-- <div class="row">
    <div class="col-md-12 grid-margin stretch-card">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">ALL ITEMS</h4>
          <p class=“text-muted”>Read the <a href="https://github.com/swimlane/ngx-datatable" target="_blank"> Official Ngx-datatable Documentation </a>for a full list of instructions and other options.</p>
        </div>
      </div>
    </div>
  </div> -->

<div class="row">
    <div class="col-md-12 stretch-card">
        <div class="card">
            <div class="card-body">
                <h6 class="card-title d-flex align-items-center justify-content-between">
                    <div class="mb-2 mb-sm-0">ALL Indents</div>
                    <div class="d-flex align-items-center justify-content-end">
                        <!-- Toggle the value of the property when the toggler button is clicked. -->
                        <button class="ms-auto navbar-toggler filter-button" type="button"
                            (click)="isMenuCollapsed = !isMenuCollapsed">
                            <i class="feather icon-filter  size-18"></i>
                        </button>
                        <button class="btn btn-primary btn-sm w-100 ms-2" routerLink="/requests/new-request"
                            *ngIf="roles.toLowerCase().includes('Maker'.toLowerCase()) || siRole.toLowerCase().includes('Maker'.toLowerCase())">
                            <span class="feather icon-plus"></span> Add Indent</button>
                    </div>
                </h6>
                <!-- <button class="btn btn-secondary btn-sm w-10 ms-2"  (click)="uploadExcel=false">
                    <span class="feather icon-upload"></span> Upload
                </button>
                <div class="row" *ngIf="!uploadExcel">
                    <div class="col-12 col-sm-6 col-md-4 col-xl-3">
                        <div class="mb-3">
                            <label for="itemName" class="form-label">Accepted only excel file</label>
                            <input #fileInput type="file" id="upload-resume" fileToUpload class="form-control" accept=".excel"
                            (change)="uploadData($event)"  placeholder="Enter consumption unit">
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-4 col-xl-3 d-flex align-items-center">
                        <div class="mb-3">
                            <button class="btn-primary btn" type="button"    (click)="SaveIndentFromXLData()">
                                <span class="feather icon-send"> </span> Submit
                            </button>
                        </div>
                    </div>
                </div> -->
                <div [ngbCollapse]="isMenuCollapsed" class="collapse navbar-collapse mb-3">
                    <div
                        class="d-flex flex-column flex-sm-row align-items-md-center gap-3 mt-2 mt-md-0 justify-content-end">
                        <div class="align-items-center d-flex flex-column flex-sm-row text-end">
                            <ng-container *ngIf="TotalCount!=0">
                                <span
                                    class="text-muted text-small me-0 me-sm-2 mb-1 mb-sm-0 flex-shrink-0">{{(rowCount*(pageNumber-1))+1}}-{{TotalCount>rowCount*pageNumber?rowCount*pageNumber:TotalCount}}
                                    of
                                    {{TotalCount}} </span>
                                <!-- <span class="me-2 flex-shrink-0 text-capitalize">Display</span> -->
                                <select name="rowLimit" id="rowLimit"
                                    class="form-control form-select me-0 me-sm-2 h-34 mb-1 mb-sm-0 "
                                    (change)="ChangeEvent($event)">
                                    <option value={{item}} *ngFor="let item of itemOptionsPerPage">{{item}}</option>
                                </select>
                            </ng-container>
                            <!-- <select name="rowLimit" id="rowLimit" class="form-control form-select me-2 h-34" (change)="ChangeManageuser($event)">
                            <option value={{item}}  *ngFor="let itemorder of IndentOrder">{{itemorder}}</option>
                        </select> -->
                            <!-- <select name="rowLimit" id="rowLimit" class="form-control form-select me-2 h-34"
                            (change)="ChangeManageuser($event)">
                            <option value={{item}} *ngFor="let item of IndentOrder">{{item}}</option>
                        </select> -->
                            <!-- <span class="me-2 flex-shrink-0 text-lowercase">records per page</span> -->
                            <input type="text" class="form-control form-select-sm me-0 me-sm-2 mb-1 mb-sm-0 minw-200"
                              placeholder="Search" [(ngModel)]="Keyword" (ngModelChange)="changeSearch($event)" />

                        </div>
                        <div class="d-flex"
                            *ngIf="authservice.LoggedInUser.B2BTYPE=='false'||authservice.LoggedInUser.B2BTYPE==false">
                            <div class="align-items-end d-flex me-3 mb-1 mb-sm-0">
                                <div class="form-check mb-2">
                                    <input type="checkbox" class="form-check-input" id="si"
                                        (change)="SelectIndenttype('SI')">
                                    <label class="form-check-label" for="si">
                                        SI
                                    </label>
                                </div>
                            </div>
                            <div class="align-items-end d-flex me-3 mb-1 mb-sm-0">
                                <div class="form-check mb-2">
                                    <input type="checkbox" class="form-check-input" id="pi"
                                        (change)="SelectIndenttype('SI')">
                                    <label class="form-check-label" for="pi">
                                        PI
                                    </label>
                                </div>
                            </div>
                            <div class="align-items-end d-flex mb-1 mb-sm-0">
                                <div class="form-check mb-2">
                                    <input type="checkbox" class="form-check-input" id="b2b"
                                        (change)="SelectIndenttype('B2B')">
                                    <label class="form-check-label" for="b2b">
                                        B2B
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="">
                            <div class=" p-0" *ngIf="this.TotalCount>0 && !shimmerVisible"
                                [ngClass]="{'d-flex align-items-center justify-content-center': AllIntedentDetails?.length == 0}">
                                <double-scroll>
                                    <!-- <div class="w-100 table-responsive"> -->
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Indent no</th>
                                                <th>Indent From Location</th>
                                                <th>Indent To Location</th>
                                                <th>Status</th>
                                                <th>IndentType</th>
                                                <th>Narration</th>
                                                <th>Created by</th>
                                                <th>Created Date</th>
                                                <th>Checked By</th>
                                                <th>Checked Date</th>
                                                <th>Approved By</th>
                                                <th>Approved Date</th>
                                                <th>Expected Date</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr
                                                *ngFor="let IndentData of AllIntedentDetails | paginate: {itemsPerPage: rowCount,currentPage: pageNumber, totalItems: TotalCount}">
                                                <td>{{IndentData.IndentNo}}</td>
                                                <td class="py-99"><span class="truncate w30ch d-block"
                                                        title="{{IndentData.firstName}} {{IndentData.lastName }}">{{IndentData.IndentFromLocation}}</span>
                                                </td>
                                                <td><span class="truncate w30ch d-block"
                                                        title="{{IndentData.email}}">{{IndentData.IndentToLocation==null?'N/A':IndentData.IndentToLocation}}
                                                    </span></td>
                                                <td>
                                                    <span
                                                        [ngClass]="IndentData.FromRights=='Checked'? 'badge bg-info': IndentData.FromRights=='Maker'? 'badge bg-warning': IndentData.FromRights=='Approved'? 'badge bg-success':''">
                                                        {{IndentData.FromRights}}
                                                    </span>

                                                    <!-- <span
                                                        [ngClass]="{'text-warning': IndentData.FromRights=='FromRights', 'text-info': IndentData.FromRights=='Checked', 'text-success': IndentData.FromRights=='Approved'}">
                                                        {{FromRights}}
                                                    </span> -->
                                                </td>
                                                <td>{{IndentData.IndentType}}</td>
                                                <td>{{IndentData.Narration==null?'N/A':IndentData.Narration}}</td>
                                                <td>{{IndentData.CreatedBy}}</td>
                                                <td> {{IndentData.CreatedDt | date: "dd-MM-yyyy HH:mm"}}</td>
                                                <td>{{IndentData.CheckedUserName?IndentData.CheckedUserName:'Not Checked'}}</td>
                                                <td>{{IndentData.CheckedDate=='0001-01-01T00:00:00'?'N/A':
                                                    IndentData.CheckedDate| date: "dd-MM-yyyy HH:mm"}}</td> 
                                                <td><span
                                                        title="Last modified on">{{IndentData.ApprovedUserName?IndentData.ApprovedUserName:'Not approved'}}</span>
                                                </td>
                                                <td>{{IndentData.ApprovedDate=='0001-01-01T00:00:00'?'N/A':IndentData.ApprovedDate
                                                    | date: "dd-MM-yyyy HH:mm"}}</td>
                                                <td>{{IndentData.ExpectedDate=='0001-01-01T00:00:00'?'N/A':IndentData.ExpectedDate
                                                    | date: "dd-MM-yyyy" }}</td>

                                                <td>
                                                    <div ngbDropdown *ngIf="IndentData.IndentType!='SA'">
                                                        <button class="btn btn-secondary btn-xs" id="actionsDropdown"
                                                            placement="bottom" container="body"
                                                            [ngbPopover]="dataTableActions"
                                                            popoverClass="dataTableActions">Actions <span
                                                                class="feather icon-chevron-down"></span></button>
                                                        <ng-template #dataTableActions>
                                                            <div aria-labelledby="actionsDropdown">
                                                                <button class="border-bottom" ngbDropdownItem
                                                                    (click)="openXlModal(xlModal,'xl');GetIndentItemDeatilsByGuid(IndentData)"><span
                                                                        class="feather icon-eye"></span> View</button>
                                                                <button class="border-bottom" ngbDropdownItem
                                                                    
                                                                    *ngIf="(roles.toLowerCase().includes('Maker'.toLowerCase()) || siRole.toLowerCase().includes('Maker'.toLowerCase())) && IndentData.FromRights!='Approved'"
                                                                    (click)="onEditIndent(IndentData)"><span
                                                                        class="feather icon-edit"></span> Edit</button>
                                                                <button class="border-bottom" ngbDropdownItem
                                                                    (click)="DownloadPdf(IndentData,'print')"><span
                                                                        class="feather icon-printer"></span>
                                                                    Print</button>
                                                                <button class="border-bottom" ngbDropdownItem
                                                                    (click)="DownloadPdf(IndentData,'download')"><span
                                                                        class="feather icon-download"></span>
                                                                    Download</button>
                                                                <div
                                                                    *ngIf="(roles.toLowerCase().includes('Checker'.toLowerCase()) && IndentData.IndentType=='PI' && IndentData.FromRights!='Approved') || siRole.toLowerCase().includes('Checker'.toLowerCase()) && (IndentData.IndentType=='SI'||IndentData.IndentType=='B2BSI') && IndentData.FromRights!='Approved'">
                                                                    <button class="border-bottom" ngbDropdownItem
                                                                    (click)="openBasicModal(Allrequest);changestatus(IndentData,'Checked')"
                                                                        *ngIf="IndentData.FromRights!='Checked'&&IndentData.FromRights!='Approved'"><span
                                                                            class="feather icon-check-square"></span>
                                                                        Mark
                                                                        as Checked</button>
                                                                </div>
                                                                <div
                                                                    *ngIf="(Approvalroles[0]?.toLowerCase().includes('Approval'.toLowerCase()) && IndentData.IndentType=='PI' && IndentData.FromRights=='Checked') || siRole.toLowerCase().includes('Approval'.toLowerCase()) && (IndentData.IndentType=='SI'||IndentData.IndentType=='B2BSI') && IndentData.FromRights=='Checked'">
                                                                    <button class="border-bottom" ngbDropdownItem
                                                                        (click)="openBasicModal(Allrequest);changestatus(IndentData,'Approved')"
                                                                        *ngIf="IndentData.FromRights!='Approved' && IndentData.FromRights=='Checked'&&IndentData.IndentType!='B2BSI'"><span
                                                                            class="feather icon-thumbs-up"></span> Mark as Approved
                                                                    </button>
                                                                    <button class="border-bottom" ngbDropdownItem 
                                                                    *ngIf="IndentData.IndentType=='B2BSI' && IndentData.FromRights=='Checked'"
                                                                    (click)="IndentData.IndentType=='B2BSI'?openXlModal(AproveItem,'xl'):'';GetIndentItemDeatilsByGuid(IndentData)"
                                                                        ><span
                                                                            class="feather icon-thumbs-up"></span> Mark as Approved
                                                                    </button>
                                                                </div>
                                                                <button *ngIf="IndentData.FromRights!='Approved' && this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes('ADMIN'.toLowerCase())"
                                                                    class="border-bottom" ngbDropdownItem
                                                                    (click)="openXlModal(deleteIndent,'md');deleteIndentDetails(IndentData)"><span
                                                                        class="feather icon-trash-2"></span>
                                                                    Delete</button>
                                                            </div>
                                                        </ng-template>
                                                    </div>
                                                </td>
                                            </tr>

                                        </tbody>
                                    </table>
                                    <!-- </div> -->
                                </double-scroll>
                            </div>
                            <!--Shimmer UI -->
                            <app-shimmers *ngIf="shimmerVisible" [type]="'table'" [cols]="10"></app-shimmers>
                            <!--Shimmer UI -->
                            <ng-container *ngIf="this.TotalCount==0 && !shimmerVisible">
                                <div class="min-height-fullscreen no-records">
                                    <div class="text-center text-muted">
                                        <span class="feather icon-alert-circle text-muted fs-2"></span>
                                        <p class="fs-4 mt-1">No indents found!</p>
                                    </div>
                                </div>
                            </ng-container>

                            <div class="cartd-footer" *ngIf="TotalCount>0">
                                <div class="d-flex justify-content-center my-3 pe-3">
                                    <!-- <pagination-controls (pageChange)="GetAllData($event)"></pagination-controls> -->
                                    <ngb-pagination class="ms-auto d-sm-table" [collectionSize]="TotalCount"
                                        [pageSize]="itemsPerPage" [(page)]="pageNumber" (pageChange)="GetAllData($event)"
                                        [maxSize]="maxSize" [rotate]="false" [boundaryLinks]="boundaryLinks"
                                        [size]="size"></ngb-pagination>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>




<!-- Modal-->

<ng-template #xlModal let-modal>
    <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Indent Details</h5>
        <button type="button" class="btn-close" (click)="modal.close('by: close icon')" aria-label="Close"></button>
    </div>
    <hr class="my-2" />
    <div class="container" *ngIf="IndentReasonDetails?.CheckedReason || IndentReasonDetails?.ApproveReason">
    <div class="col-sm-12"><span class="fw-bold"><u>Reason</u> :</span></div>
    <div class="col-sm-12" *ngIf="IndentReasonDetails?.CheckedReason">
        <span class="fw-bold">Checked by and reason:</span>
        <span >{{IndentReasonDetails?.CheckedUserName}} </span> 
        <span
        title="{{IndentReasonDetails?.CheckedReason}}">
        ({{ IndentReasonDetails?.CheckedReason.length > 50 ? (IndentReasonDetails?.CheckedReason | slice:0:50) + '...' : IndentReasonDetails?.CheckedReason }})
      </span>
    </div>
    <div class="col-sm-12" *ngIf="IndentReasonDetails?.ApproveReason">
        <span class="fw-bold">Approved by and reason:</span>
        <span>{{IndentReasonDetails?.ApprovedUserName}} </span> 
        <span
        title="{{IndentReasonDetails?.ApproveReason}}">
        ({{ IndentReasonDetails?.ApproveReason.length > 50 ? (IndentReasonDetails?.ApproveReason | slice:0:50) + '...' : IndentReasonDetails?.ApproveReason }})
      </span>
    </div>
   </div>
    <hr class="my-2" />
    <div class="modal-body">
        <double-scroll>
            <!-- <div class="table-responsive"> -->
            <table class="table table-bordered pt-3">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Indent no.</th>
                        <th>Item name</th>
                        <th>Catalog No</th>
                        <!-- <th *ngIf="IndentTypeForview"> Supplier name</th> -->
                        <th>Consume/Issue Unit</th>
                        <th>Requested Qty</th>
                        <th>Approved Qty</th>
                        <th>Reason</th>
                        <!-- <th>Issue Qty</th>
                        <th>Receive Qty</th>
                        <th>Rejected Qty</th>
                        <th>Available Qty</th> -->
                        <th
                            *ngIf="IndentTypeForview && (this.authservice.LoggedInUser.B2BTYPE=='false'||this.authservice.LoggedInUser.B2BTYPE==false)">
                            Stock In Hand</th>
                        <!-- <th *ngIf="IndentTypeForview"> Total amount</th> -->
                    </tr>
                </thead>
                <tbody *ngFor="let indentItems of IndentItemDetails; let i=index">
                    <tr>
                        <td>{{i+1}}</td>
                        <td>{{indentItems.IndentNo}}</td>
                        <td>{{indentItems.ItemName}}</td>
                        <td>{{indentItems.CatalogNo}}</td>
                        <!-- <td *ngIf="IndentTypeForview">{{indentItems.SupplierName}}</td> -->
                        <td>{{indentItems.MinorUnitName}}</td>
                        <td>{{indentItems.ReqQty}}</td>
                        <td>{{indentItems.ApprovedQty}}</td>
                        <td title="{{indentItems.Reason?indentItems.Reason : 'N/A'}}" style="max-width: 150px;"
                            class="text-truncate">{{indentItems.Reason?indentItems.Reason : 'N/A'}}</td>
                        <!-- <td>Nan</td>
                        <td>{{indentItems.ReceiveQty}}</td>
                        <td>{{indentItems.RejectQty}}</td>
                        <td>{{indentItems.INPOQty}}</td> -->
                        <td
                            *ngIf="IndentTypeForview && (this.authservice.LoggedInUser.B2BTYPE=='false'||this.authservice.LoggedInUser.B2BTYPE==false)">
                            {{indentItems.NewQty}}</td>
                        <!-- <td *ngIf="IndentTypeForview">&#8377; {{indentItems.NetAmount}}</td> -->
                    </tr>
                </tbody>
            </table>
            <!-- </div> -->
        </double-scroll>
    </div>
    <div class="modal-footer justify-content-center">
        <div class="btn-group btn-group-sm" role="group" aria-label="Basic mixed styles example">
            <button type="button" class="btn btn-outline-secondary" (click)="onEditIndent(indentrowdata)"
                (click)="modal.close('by: close icon')" *ngIf="indentrowdata.FromRights!='Approved' && (roles.toLowerCase().includes('Maker'.toLowerCase()) || siRole.toLowerCase().includes('Maker'.toLowerCase()))">
                <span class="feather icon-edit"></span> Edit</button>

            <button type="button" class="btn btn-outline-secondary" (click)="DownloadPdf(indentrowdata,'print')"
                (click)="modal.close('by: close icon')">
                <span class="feather icon-printer"></span> Print</button>

            <button type="button" class="btn btn-secondary" (click)="modal.close('by: close icon')"
                (click)="DownloadPdf(indentrowdata,'')">
                <span class="feather icon-download"></span> Download</button>
            <div
                *ngIf="(roles.toLowerCase().includes('Checker'.toLowerCase()) && indentrowdata.IndentType=='PI' && indentrowdata.FromRights!='Approved') || siRole.toLowerCase().includes('Checker'.toLowerCase()) && (indentrowdata.IndentType=='SI'||indentrowdata.IndentType=='B2BSI') && indentrowdata.FromRights!='Approved'">
                <button type="button" class="btn btn-outline-secondary" 
                (click)="modal.close('by: close icon')"
                (click)="openBasicModal(Allrequest);changestatus(indentrowdata,'Checked')"
                    *ngIf="indentrowdata.FromRights!='Checked'&&indentrowdata.FromRights!='Approved'">
                    <span class="feather icon-check-square">
                    </span> Mark as Checked </button>
            </div>
             <div
                *ngIf="(Approvalroles[0]?.toLowerCase().includes('Approval'.toLowerCase()) && indentrowdata.IndentType=='PI' && indentrowdata.FromRights=='Checked') || siRole.toLowerCase().includes('Approval'.toLowerCase()) && (indentrowdata.IndentType=='SI'||indentrowdata.IndentType=='B2BSI') && indentrowdata.FromRights=='Checked'">
                <button type="button" class="btn btn-outline-secondary"
                (click)="openBasicModal(Allrequest);changestatus(indentrowdata,'Approved');"
                    (click)="modal.close('by: close icon')"
                    *ngIf="indentrowdata.FromRights=='Checked'&&indentrowdata.FromRights!='Approved'&&ItemStatus!='Maker' &&indentrowdata.IndentType!='B2BSI'">
                    <span class="feather icon-check-square">
                    </span> Mark as Approved</button>
                    <button type="button" class="btn btn-outline-secondary"
                    (click)="indentrowdata.IndentType=='B2BSI'?openXlModal(AproveItem,'xl'):'';GetIndentItemDeatilsByGuid(indentrowdata)"
                    (click)="modal.close('by: close icon')"
                    *ngIf="indentrowdata.FromRights=='Checked'&&indentrowdata.IndentType=='B2BSI'">
                    <span class="feather icon-check-square">
                      </span> Mark as Approved</button>
            </div>
            <!-- <div  *ngIf="(Approvalroles[0]?.toLowerCase().includes('Approval'.toLowerCase()) && indentrowdata.IndentType=='PI' && indentrowdata.FromRights=='Checked') || siRole.toLowerCase().includes('Approval'.toLowerCase()) && (indentrowdata.IndentType=='SI'||indentrowdata.IndentType=='B2BSI') && indentrowdata.FromRights=='Checked'">
                <button type="button" class="btn btn-outline-secondary" 
                (click)="indentrowdata.IndentType=='B2BSI'?openXlModal(AproveItem,'xl'):'';onUpdateStatus(indentrowdata,'Approved');"
                (click)="modal.close('by: close icon')"
                *ngIf="indentrowdata.FromRights=='Checked'&&indentrowdata.FromRights!='Approved'&&ItemStatus!='Maker'">
                <span class="feather icon-check-square">
                  </span> Mark as Approved</button>
              </div> -->
            <button *ngIf="indentrowdata.FromRights!='Approved' && this.authservice.LoggedInUser.DEFAULTROLES.toLowerCase().includes('ADMIN'.toLowerCase())" class="btn btn-outline-secondary"
                (click)="modal.close('by: close icon')"
                (click)="openXlModal(deleteIndent,'md');deleteIndentDetails(indentrowdata)"><span
                    class="feather icon-trash-2"></span>
                Delete</button>

        </div>

        <!-- <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modal.close('by: close button')">Close@</button>
    </div> -->
    </div>

</ng-template>


<ng-template #deleteIndent let-modal>
    <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Delete Indent</h5>
        <button type="button" class="btn-close" (click)="modal.close('by: close icon')" aria-label="Close"></button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-sm-12">
                <div class="mb-3">
                    <label for="itemName" class="form-label">Are you sure do you want to delete
                        <strong> {{IndentNo}} </strong> Indent?</label>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary me-2" (click)="modal.close('by: close icon')">
            No
        </button>
        <button type="button" class="btn btn-primary submit"
            (click)="modal.close('by: close icon');DeletePurchaseOrder()">Yes</button>
    </div>
</ng-template>

<ng-template #AproveItem let-modal>
    <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Aprove Item Details</h5>
        <button type="button" class="btn-close" (click)="modal.close('by: close icon')" aria-label="Close"></button>
    </div>
    <div class="modal-body">
        <double-scroll>
            <!-- <div class="table-responsive"> -->
            <table class="table table-bordered pt-3">
                <thead>
                    <tr>
                        <th>Indent no.</th>
                        <th>Item name</th>
                        <th>Requested Qty</th>
                        <th>Approved Qty</th>
                        <th>Stock In Hand</th>
                        <th>Remarks</th>
                    </tr>
                </thead>
                <tbody *ngFor="let indentItems of b2bItems; let i=index">
                    <tr>
                        <td>{{indentItems.IndentNo}}</td>
                        <td>{{indentItems.ItemName}}</td>
                        <td>{{indentItems.ReqQty}}</td>
                        <td><input style="width:80px" class="form-control" type="text" [min]="0"
                                (ngModel)="indentItems.BatchQuantity" (keyup)="ChangeQuantity($event,i)"
                                (keypress)="($event.charCode >= 48 && $event.charCode <= 57) || $event.charCode === 46">
                        </td>
                        <td>{{indentItems.inHandQty==null?0:indentItems.inHandQty}}</td>
                        <td><textarea class="form-control" style="height:17px;"
                                (keyup)="ChangeRemark($event,i)"></textarea></td>
                    </tr>
                </tbody>
            </table>
            <!-- </div> -->
        </double-scroll>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary me-2" (click)="modal.close('by: close icon')">
            No
        </button>
        <button type="button" class="btn btn-primary submit" [disabled]="InHandQty===0 ||InHandQty==null"
            (click)="modal.close('by: close icon');SaveB2Bitems();">Yes</button>
    </div>
</ng-template>
<ng-template #Allrequest let-modal>
    <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Remarks</h5>
        <button type="button" class="btn-close" (click)="modal.close('by: close icon');clearReason()" aria-label="Close"></button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-sm-12">
                <div class="mb-22">
                    <label for="reason" class="form-label">Reason:</label>
                    <input type="text" class="form-control" id="reason" name="reason" [(ngModel)]="reason">
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary me-2" (click)="modal.close('by: close icon');clearReason()">
       No
       </button>
        <button type="button" class="btn btn-primary submit" (click)="modal.close('by: close icon')" (click)="onStatusUpdate()">
            Yes
        </button>
        
    </div>
</ng-template>
<!-- Modal -->